/*! For license information please see polygonjs-editor.js.LICENSE.txt */
!function(e){function t(t){for(var r,a,s=t[0],u=t[1],_=t[2],c=0,p=[];c<s.length;c++)a=s[c],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);p.length;)p.shift()();return i.push.apply(i,_||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={9:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var _=0;_<s.length;_++)t(s[_]);var l=u;i.push([1283,7,6,5,0,3,2,4,1,8]),n()}([,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=n(105),i=function(e,t,n){this.type=e,this.init_value=t,this.options=n};t.ParamTemplate=i;var a=function(){function e(){}return e.BUTTON=function(e,t){return new i(r.ParamType.BUTTON,e,t)},e.BOOLEAN=function(e,t){return new i(r.ParamType.BOOLEAN,e,t)},e.COLOR=function(e,t){return new i(r.ParamType.COLOR,e,t)},e.FLOAT=function(e,t){return new i(r.ParamType.FLOAT,e,t)},e.FOLDER=function(e,t){return void 0===e&&(e=null),new i(r.ParamType.FOLDER,e,t)},e.INTEGER=function(e,t){return new i(r.ParamType.INTEGER,e,t)},e.OPERATOR_PATH=function(e,t){return new i(r.ParamType.OPERATOR_PATH,e,t)},e.RAMP=function(e,t){return void 0===e&&(e=o.RampParam.DEFAULT_VALUE),new i(r.ParamType.RAMP,e,t)},e.SEPARATOR=function(e,t){return void 0===e&&(e=null),new i(r.ParamType.SEPARATOR,e,t)},e.STRING=function(e,t){return void 0===e&&(e=""),new i(r.ParamType.STRING,e,t)},e.VECTOR2=function(e,t){return new i(r.ParamType.VECTOR2,e,t)},e.VECTOR3=function(e,t){return new i(r.ParamType.VECTOR3,e,t)},e.VECTOR4=function(e,t){return new i(r.ParamType.VECTOR4,e,t)},e}();t.ParamConfig=a;var s=function(){};t.NodeParamsConfig=s},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=o.__importDefault(n(86)),a=o.__importDefault(n(183)),s=n(63),u=n(36),_=n(296),l=n(184),c=n(778),p=n(103),d=n(30),f=n(81);!function(e){e.FROM_SET_CORE_GROUP="from set_core_group",e.FROM_SET_GROUP="from set_group",e.FROM_SET_OBJECTS="from set_objects",e.FROM_SET_OBJECT="from set_object",e.FROM_SET_GEOMETRIES="from set_geometries",e.FROM_SET_GEOMETRY="from set_geometry"}(r||(r={}));var h=["input geometry","input geometry","input geometry","input geometry"],m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new p.TypedContainerController(t,c.GeometryContainer),t.flags=new f.FlagsControllerDB(t),t}return o.__extends(t,e),t.node_context=function(){return d.NodeContext.SOP},t.displayed_input_names=function(){return h},t.prototype.initialize_base_node=function(){var e=this;this.flags.display&&(this.flags.display.set(!1),this.flags.display.add_hook((function(){if(e.flags.display.active){var t=e.parent;t&&t.display_node_controller&&t.display_node_controller.set_display_node(e)}}))),this.io.outputs.set_has_one_output()},t.prototype.set_core_group=function(e){for(var t=0,n=e.objects();t<n.length;t++){var o=n[t];this._set_object_attributes(o)}this.set_container(e,r.FROM_SET_CORE_GROUP)},t.prototype.set_object=function(e){this._set_object_attributes(e),this.set_container_objects([e],r.FROM_SET_OBJECT)},t.prototype.set_objects=function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];this._set_object_attributes(o)}this.set_container_objects(e,r.FROM_SET_OBJECTS)},t.prototype.set_geometry=function(e,t){var n=this.create_object(e,t);this.set_container_objects([n],r.FROM_SET_GEOMETRY)},t.prototype.set_geometries=function(e,t){var n,o=this,i=[];e.forEach((function(e){n=o.create_object(e,t),o._set_object_attributes(n),i.push(n)})),this.set_container_objects(i,r.FROM_SET_GEOMETRIES)},t.prototype.set_container_objects=function(e,t){var n=this.container_controller.container.core_content()||new _.CoreGroup;n.set_objects(e),n.touch(),this.set_container(n)},t.prototype.create_object=function(e,t){if(!e.index){var n=e.getAttribute("position").array;e.setIndex(i.default(n.length/3))}null==t&&(t=u.CoreConstant.OBJECT_TYPE.MESH);var r=new(0,u.CoreConstant.CONSTRUCTORS_BY_NAME[t])(e,u.CoreConstant.MATERIALS[t].clone());return r.castShadow=!0,r.receiveShadow=!0,r.frustumCulled=!1,r},t.prototype._set_object_attributes=function(e){var t=e.material;if(t){if(!this.scene)throw console.log("no scene"),"no scene";var n=l.CoreMaterial.node(this.scene,t);n&&n.add_render_hook(e)}},t.prototype._add_index=function(e){var t=e.getAttribute("position").array.length/3,n=[];a.default(t,(function(e){return n.push(e)})),e.setIndex(n)},t}(s.TypedNode);t.TypedSopNode=m;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(m);t.BaseSopNodeClass=g},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ALWAYS="always",e.NEVER="never",e.FROM_NODE="from_node"}(t.InputCloneMode||(t.InputCloneMode={}))},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1286),i=n(1296),a=n(57),s=n(341),u=n(52),_=n(75),l=n(993),c=function(){function e(){this.editor=o.EditorStoreController,this.engine=i.EngineStoreController}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_scene=function(e){this._scene=e,this._scene.events_controller.set_listener(this),this.editor.set_scene(e),this.engine.set_scene(e),this.editor.set_current_node(e.root)},Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),e.prototype.save_scene=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,o,i,a;return r.__generator(this,(function(s){switch(s.label){case 0:return[4,Promise.resolve().then((function(){return r.__importStar(n(166))}))];case 1:return e=s.sent().SceneJsonExporter,o=new e(t.StoreController.scene),i=o.data(),(a=l.Editor.instance().on_save_callback)&&a(i),[2]}}))}))},e.prototype.set_store=function(e){this.editor.set_store(e),this.engine.set_store(e)},e.prototype.close_all_popups=function(){this.editor.close_all_popups()},e.prototype.process_events=function(e,t,n){if(e instanceof a.CoreGraphNode)switch(t){case s.SceneEvent.FRAME_UPDATED:return this.engine.update_frame();case s.SceneEvent.FRAME_RANGE_UPDATED:return this.engine.update_frame_range();case s.SceneEvent.PLAY_STATE_UPDATED:return this.engine.update_play_state();case u.NodeEvent.ERROR_UPDATED:return this.engine.update_node_error(e.graph_node_id);case u.NodeEvent.UI_DATA_POSITION_UPDATED:return this.engine.update_node_ui_data_position(e.graph_node_id);case u.NodeEvent.UI_DATA_COMMENT_UPDATED:return this.engine.update_node_ui_data_comment(e.graph_node_id);case u.NodeEvent.SELECTION_UPDATED:return this.engine.update_node_selection(e.graph_node_id);case u.NodeEvent.FLAG_DISPLAY_UPDATED:return this.engine.update_node_display_flag(e.graph_node_id);case u.NodeEvent.FLAG_BYPASS_UPDATED:return this.engine.update_node_bypass_flag(e.graph_node_id);case u.NodeEvent.NAME_UPDATED:return this.engine.update_node_name(e.graph_node_id);case u.NodeEvent.INPUTS_UPDATED:return this.engine.update_node_inputs(e.graph_node_id);case u.NodeEvent.NAMED_INPUTS_UPDATED:return this.engine.update_node_named_inputs(e.graph_node_id);case u.NodeEvent.NAMED_OUTPUTS_UPDATED:return this.engine.update_node_named_outputs(e.graph_node_id);case u.NodeEvent.PARAMS_UPDATED:return this.engine.update_params(e.graph_node_id);case u.NodeEvent.CREATED:return this.engine.add_node(e.graph_node_id,n);case u.NodeEvent.DELETED:return this.engine.delete_node(e.graph_node_id,n);case _.ParamEvent.RAW_INPUT_UPDATED:return this.engine.update_param_raw_input(e.graph_node_id);case _.ParamEvent.VALUE_UPDATED:return this.engine.update_param_value(e.graph_node_id);case _.ParamEvent.EXPRESSION_UPDATED:return this.engine.update_param_expression(e.graph_node_id);case _.ParamEvent.ERROR_UPDATED:return this.engine.update_param_error(e.graph_node_id);case _.ParamEvent.VISIBLE_UPDATED:return this.engine.update_param_visible_state(e.graph_node_id)}console.warn("event not processed",e,t,n)},e}();t.StoreController=c.instance()},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BOOLEAN="boolean",e.BUTTON="button",e.COLOR="color",e.FLOAT="float",e.FOLDER="folder",e.INTEGER="integer",e.OPERATOR_PATH="operator_path",e.RAMP="ramp",e.SEPARATOR="separator",e.STRING="string",e.VECTOR2="vector2",e.VECTOR3="vector3",e.VECTOR4="vector4"}(t.ParamType||(t.ParamType={}))},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COP="cop",e.EVENT="event",e.GL="gl",e.JS="js",e.MANAGER="managers",e.MAT="mat",e.OBJ="objects",e.SOP="sop",e.POST="post"}(t.NodeContext||(t.NodeContext={}))},,,,,,function(e,t,n){"use strict";var r,o,i;Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(241),u=n(99),_=n(114),l=n(22),c=n(1),p=n(34),d=n(73),f=n(59),h=n(1),m=n(14),g=n(370),v=n(90),y=n(120),b=n(181),w=n(61);!function(e){e.MESH="MESH",e.POINTS="POINTS",e.LINE_SEGMENTS="LINE_SEGMENTS"}(a=t.ObjectType||(t.ObjectType={})),t.ObjectTypes=[a.MESH,a.POINTS,a.LINE_SEGMENTS],t.ObjectTypeMenuEntries=[{name:"Mesh",value:t.ObjectTypes.indexOf(a.MESH)},{name:"Points",value:t.ObjectTypes.indexOf(a.POINTS)},{name:"LineSegments",value:t.ObjectTypes.indexOf(a.LINE_SEGMENTS)}];var x,C,P=((r={MeshStandard:new y.MeshStandardMaterial({color:16777215,side:h.FrontSide,metalness:.5,roughness:.9})})[a.MESH]=new b.MeshLambertMaterial({color:new m.Color(.5,.5,1),side:h.FrontSide,vertexColors:c.NoColors,transparent:!0,depthTest:!0}),r[a.POINTS]=new v.PointsMaterial({color:16777215,size:.1,depthTest:!0}),r[a.LINE_SEGMENTS]=new w.LineBasicMaterial({color:16777215,linewidth:1}),r);!function(e){e[e.VERTEX=0]="VERTEX",e[e.OBJECT=1]="OBJECT"}(x=t.AttribClass||(t.AttribClass={})),t.AttribClassMenuEntries=[{name:"vertex",value:x.VERTEX},{name:"object",value:x.OBJECT}],function(e){e[e.NUMERIC=0]="NUMERIC",e[e.STRING=1]="STRING"}(C=t.AttribType||(t.AttribType={})),t.AttribTypeMenuEntries=[{name:"numeric",value:C.NUMERIC},{name:"string",value:C.STRING}],t.CoreConstant={ATTRIB_CLASS:{VERTEX:x.VERTEX,OBJECT:x.OBJECT},ATTRIB_TYPE:{NUMERIC:0,STRING:1},OBJECT_TYPE:{MESH:a.MESH,POINTS:a.POINTS,LINE_SEGMENTS:a.LINE_SEGMENTS},OBJECT_TYPES:t.ObjectTypes,CONSTRUCTOR_NAMES_BY_CONSTRUCTOR_NAME:(o={},o[u.Scene.name]="Scene",o[f.Group.name]="Group",o[l.Object3D.name]="Object3D",o[p.Mesh.name]="Mesh",o[_.Points.name]="Points",o[d.LineSegments.name]="LineSegments",o[g.Bone.name]="Bone",o[s.SkinnedMesh.name]="SkinnedMesh",o),CONSTRUCTORS_BY_NAME:(i={},i[a.MESH]=p.Mesh,i[a.POINTS]=_.Points,i[a.LINE_SEGMENTS]=d.LineSegments,i),MATERIALS:P}},,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=o.__importDefault(n(86)),a=o.__importDefault(n(95)),s=o.__importDefault(n(178)),u=o.__importDefault(n(85)),_=o.__importDefault(n(74)),l=o.__importDefault(n(949)),c=o.__importDefault(n(632)),p=o.__importDefault(n(950)),d=o.__importDefault(n(335)),f=o.__importDefault(n(633)),h=/[, ]/,m=/\d+$/,g=/,| /,v=/^\d+\.?\d*$/;!function(e){e.TRUE="true",e.FALSE="false"}(r||(r={}));var y=function(){function e(){}return e.is_boolean=function(e){return e==r.TRUE||e==r.FALSE},e.to_boolean=function(e){return e==r.TRUE},e.is_number=function(e){return v.test(e)},e.tail_digits=function(e){var t=e.match(m);return t?parseInt(t[0]):0},e.increment=function(e){var t;if(t=e.match(m)){var n=parseInt(t[0]);return""+e.substring(0,e.length-t[0].length)+(n+1)}return e+"1"},e.pluralize=function(e){return"s"!==e[e.length-1]?e+"s":e},e.camel_case=function(e){return f.default(e)},e.upper_first=function(e){return d.default(e)},e.snake_case=function(e){return p.default(e)},e.titleize=function(e){return c.default(e.replace(/_/g," "))},e.type_to_class_name=function(e){return this.upper_first(f.default(e))},e.timestamp_to_seconds=function(e){return Date.parse(e)/1e3},e.seconds_to_timestamp=function(e){var t=new Date;return t.setTime(1e3*e),t.toISOString().substr(11,8)},e.precision=function(e,t){void 0===t&&(t=2),t=Math.max(t,0);var n=(""+e).split(".");if(t<=0)return n[0];var r=n[1];if(void 0!==r)return r.length>t&&(r=r.substring(0,t)),r=l.default(r,t,"0"),n[0]+"."+r;var o=e+".",i=o.length+t;return l.default(o,i,"0")},e.ensure_float=function(e){var t=""+e;return t.indexOf(".")>=0?t:t+".0"},e.match_mask=function(e,t){return"*"===t||(t="^"+(t=t.split("*").join(".*"))+"$",new RegExp(t).test(e))},e.matches_one_mask=function(t,n){for(var r=!1,o=0,i=n;o<i.length;o++){var a=i[o];e.match_mask(t,a)&&(r=!0)}return r},e.attrib_names=function(e){var t=e.split(h),n=u.default(t.map((function(e){return s.default(e)})));return a.default(n)},e.to_id=function(e){if(null==e)return 0;var t=e.split("").reverse(),n=0,r=0;return t.forEach((function(e,t){var o=e.charCodeAt(0);o>=0&&(r=t%10,n+=o*Math.pow(10,r),n%=Number.MAX_SAFE_INTEGER)})),n},e.indices=function(e){var t=this,n=e.split(g);if(n.length>1)return a.default(_.default(n.map((function(e){return t.indices(e)})))).sort((function(e,t){return e-t}));var r=n[0];if(r){if(r.indexOf("-")>0){var o=r.split("-");return i.default(parseInt(o[0]),parseInt(o[1])+1)}return[parseInt(r)]}return[]},e.escape_line_breaks=function(e){return e.replace(/(\r\n|\n|\r)/gm,"\\n")},e}();t.CoreString=y},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CREATED="node_created",e.DELETED="node_deleted",e.NAME_UPDATED="node_name_update",e.OVERRIDE_CLONABLE_STATE_UPDATE="node_override_clonable_state_update",e.NAMED_OUTPUTS_UPDATED="node_named_outputs_updated",e.NAMED_INPUTS_UPDATED="node_named_inputs_updated",e.INPUTS_UPDATED="node_inputs_updated",e.PARAMS_UPDATED="node_params_updated",e.UI_DATA_POSITION_UPDATED="node_ui_data_position_updated",e.UI_DATA_COMMENT_UPDATED="node_ui_data_comment_updated",e.ERROR_UPDATED="node_error_updated",e.FLAG_BYPASS_UPDATED="bypass_flag_updated",e.FLAG_DISPLAY_UPDATED="display_flag_updated",e.SELECTION_UPDATED="selection_updated"}(t.NodeEvent||(t.NodeEvent={}))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i=n(10),a=n(10),s=n(12),u=n(121),_=r.__importDefault(n(86)),l=r.__importDefault(n(95)),c=r.__importDefault(n(196)),p=r.__importDefault(n(349)),d=r.__importDefault(n(179)),f=r.__importDefault(n(274)),h=r.__importDefault(n(29)),m=r.__importDefault(n(47)),g=n(297),v=n(776),y=n(36),b=n(104),w=n(777),x=n(211),C=function(){function e(e){this._geometry=e}return e.prototype.geometry=function(){return this._geometry},e.prototype.uuid=function(){return this._geometry.uuid},e.prototype.bounding_box=function(){return this._bounding_box=this._bounding_box||this._create_bounding_box()},e.prototype._create_bounding_box=function(){return this._geometry.computeBoundingBox(),this._geometry.boundingBox},e.prototype.mark_as_instance=function(){this._geometry.userData.is_instance=!0},e.marked_as_instance=function(e){return!0===e.userData.is_instance},e.prototype.marked_as_instance=function(){return e.marked_as_instance(this._geometry)},e.prototype.position_attrib_name=function(){var e="position";return this.marked_as_instance()&&(e="instancePosition"),e},e.prototype.compute_vertex_normals=function(){this._geometry.computeVertexNormals()},e.prototype.user_data_attribs=function(){var e="indexed_attrib_values";return this._geometry.userData[e]=this._geometry.userData[e]||{}},e.prototype.indexed_attribute_names=function(){return Object.keys(this.user_data_attribs()||{})},e.prototype.user_data_attrib=function(e){return e=b.CoreAttribute.remap_name(e),this.user_data_attribs()[e]},e.prototype.is_attrib_indexed=function(e){return e=b.CoreAttribute.remap_name(e),null!=this.user_data_attrib(e)},e.prototype.has_attrib=function(e){return"ptnum"===e||(e=b.CoreAttribute.remap_name(e),null!=this._geometry.attributes[e])},e.prototype.attrib_type=function(e){return this.is_attrib_indexed(e)?y.CoreConstant.ATTRIB_TYPE.STRING:y.CoreConstant.ATTRIB_TYPE.NUMERIC},e.prototype.attrib_names=function(){return Object.keys(this._geometry.attributes)},e.prototype.attrib_sizes=function(){for(var e={},t=0,n=this.attrib_names();t<n.length;t++){var r=n[t];e[r]=this._geometry.attributes[r].itemSize}return e},e.prototype.attrib_size=function(e){var t;return e=b.CoreAttribute.remap_name(e),null!=(t=this._geometry.attributes[e])?t.itemSize:"ptnum"===e?1:0},e.prototype.set_indexed_attribute_values=function(e,t){this.user_data_attribs()[e]=t},e.prototype.set_indexed_attribute=function(e,t,n){this.set_indexed_attribute_values(e,t),this._geometry.setAttribute(e,new i.Int32BufferAttribute(n,1))},e.prototype.add_numeric_attrib=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=0);var r=[],o=!1;if(m.default(n)){for(var i=0;i<this.points_count();i++)for(var s=0;s<t;s++)r.push(n);o=!0}else if(t>1)if(h.default(n)){for(i=0;i<this.points_count();i++)for(s=0;s<t;s++)r.push(n[s]);o=!0}else{var u=n;if(2==t&&null!=u.x&&null!=u.y){for(i=0;i<this.points_count();i++)r.push(u.x),r.push(u.y);o=!0}var _=n;if(3==t&&null!=_.x&&null!=_.y&&null!=_.z){for(i=0;i<this.points_count();i++)r.push(_.x),r.push(_.y),r.push(_.z);o=!0}var l=n;if(3==t&&null!=l.r&&null!=l.g&&null!=l.b){for(i=0;i<this.points_count();i++)r.push(l.r),r.push(l.g),r.push(l.b);o=!0}var c=n;if(4==t&&null!=c.x&&null!=c.y&&null!=c.z&&null!=c.w){for(i=0;i<this.points_count();i++)r.push(c.x),r.push(c.y),r.push(c.z),r.push(c.w);o=!0}}if(!o)throw"no other default value allowed for now in add_numeric_attrib";this._geometry.setAttribute(e,new a.Float32BufferAttribute(r,t))},e.prototype.init_position_attribute=function(e,t){var n=[];null==t&&(t=new o.Vector3);for(var r=0;r<e;r++)n.push(t.x),n.push(t.y),n.push(t.z);return this._geometry.setAttribute("position",new a.Float32BufferAttribute(n,3))},e.prototype.add_attribute=function(e,t){switch(t.type()){case y.CoreConstant.ATTRIB_TYPE.STRING:return console.log("TODO: to implement");case y.CoreConstant.ATTRIB_TYPE.NUMERIC:return this.add_numeric_attrib(e,t.size())}},e.prototype.rename_attribute=function(e,t){this.is_attrib_indexed(e)&&(this.user_data_attribs()[t]=f.default(this.user_data_attribs()[e]),delete this.user_data_attribs()[e]);var n=this._geometry.getAttribute(e);return this._geometry.setAttribute(t,new a.Float32BufferAttribute(n.array,n.itemSize)),this._geometry.deleteAttribute(e)},e.prototype.delete_attribute=function(e){return this.is_attrib_indexed(e)&&delete this.user_data_attribs()[e],this._geometry.deleteAttribute(e)},e.prototype.clone=function(){return e.clone(this._geometry)},e.clone=function(e){for(var t,n=0,r=Object.keys(e.attributes);n<r.length;n++){var o=r[n],i=e.getAttribute(o);i.constructor.name==u.InterleavedBufferAttribute.name&&w.MonkeyPatcher.patch(i)}var a=e.clone();return null!=(t=e.userData)&&(a.userData=d.default(t)),a},e.prototype.points_count=function(){return e.points_count(this._geometry)},e.points_count=function(e){var t,n=0,r="position";if(new this(e).marked_as_instance()&&(r="instancePosition"),null!=(t=e.getAttribute(r))){var o;null!=(o=t.array)&&(n=o.length/3)}return n},e.prototype.points=function(){return this._points=this._points||this.points_from_geometry()},e.prototype.reset_points=function(){this._points=void 0},e.prototype.points_from_geometry=function(){var e=[],t=this._geometry.getAttribute(this.position_attrib_name());if(null!=t)for(var n=t.array.length/3,r=0;r<n;r++){var o=new g.CorePoint(this,r);e.push(o)}return e},e.geometry_from_points=function(e,t){var n=new s.BufferGeometry,r=new this(n),o=e[0];if(null!=o){var i=o.geometry(),u=o.geometry_wrapper(),_={};c.default(e,(function(e,t){return _[e.index]=t}));var p=this._indices_from_points(_,i,t);null!=p&&0!==p.length&&n.setIndex(p);for(var d=i.attributes,f=function(t){if(null!=u.user_data_attribs()[t]){var o=l.default(e.map((function(e){return e.attrib_value(t)}))),i={};c.default(o,(function(e,t){return i[e]=t})),r.user_data_attribs()[t]=o;for(var s=[],_=0,p=e;_<p.length;_++){var f=p[_],h=i[f.attrib_value(t)];s.push(h)}n.setAttribute(t,new a.Float32BufferAttribute(s,1))}else{for(var m=[],g=d[t].itemSize,v=0,y=e;v<y.length;v++){var b=(f=y[v]).attrib_value(t);switch(g){case 1:m.push(b);case 3:m.push(b.x),m.push(b.y),m.push(b.z)}}n.setAttribute(t,new a.Float32BufferAttribute(m,g))}},h=0,m=Object.keys(d);h<m.length;h++){f(m[h])}}return n},e._indices_from_points=function(e,t,n){var r=t.index;if(null!=r){var o=r.array,i=[];switch(n){case y.CoreConstant.OBJECT_TYPE.POINTS:c.default(o,(function(t,n){var r=e[t];null!=r&&i.push(r)}));break;case y.CoreConstant.OBJECT_TYPE.MESH:c.default(o,(function(t,n){if(n%3==0){var r=o[n],a=o[n+1],s=o[n+2],u=e[r],_=e[a],l=e[s];null!=u&&null!=_&&null!=l&&(i.push(u),i.push(_),i.push(l))}}));break;case y.CoreConstant.OBJECT_TYPE.LINE_SEGMENTS:c.default(o,(function(t,n){if(n%2==0){var r=o[n],a=o[n+1],s=e[r],u=e[a];null!=s&&null!=u&&(i.push(s),i.push(u))}}))}return i}},e.merge_geometries=function(t){if(0!==t.length){for(var n=t.map((function(t){return new e(t)})),r=n[0].indexed_attribute_names(),o={},i=0,a=r;i<a.length;i++){for(var s=a[i],u={},_=[],l=0,c=n;l<c.length;l++)for(var p=0,d=c[l].points();p<d.length;p++){var f=d[p];_.push(f),null!=u[v=f.attrib_value(s)]?u[v]:u[v]=Object.keys(u).length}for(var h=Object.keys(u),m=0,g=_;m<g.length;m++){var v,y=u[v=(f=g[m]).attrib_value(s)];f.set_attrib_index(s,y)}o[s]=h}var b=x.BufferGeometryUtils.mergeBufferGeometries(t),w=new this(b);return Object.keys(o).forEach((function(e){var t=o[e];w.set_indexed_attribute_values(e,t)})),b&&delete b.userData.mergedUserData,b}},e.prototype.segments=function(){var e,t=(null===(e=this.geometry().index)||void 0===e?void 0:e.array)||[];return p.default(t,2)},e.prototype.faces=function(){return this.faces_from_geometry()},e.prototype.faces_from_geometry=function(){var e,t=this,n=((null===(e=this.geometry().index)||void 0===e?void 0:e.array)||[]).length/3;return _.default(n).map((function(e){return new v.CoreFace(t,e)}))},e}();t.CoreGeometry=C},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(613),o=n(614),i=function(){function e(){this.renderers_controller=new r.RenderersController,this.nodes_register=new o.NodesRegister,this.scenes_by_uuid={}}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.register_node=function(e,t,n){this.nodes_register.register_node(e,t,n)},e.prototype.registered_nodes=function(e,t){return this.nodes_register.registered_nodes(e,t)},e.prototype.in_worker_thread=function(){return!1},e.prototype.desktop_controller=function(){},e.prototype.player_mode=function(){return!1},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},e.prototype.set_env=function(e){this._env=e},Object.defineProperty(e.prototype,"env",{get:function(){return this._env},enumerable:!0,configurable:!0}),e}();t.Poly=i,t.POLY=i.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(622),o=function(){function e(e,t){this._scene=e,this._name=t,this._dirty_controller=new r.DirtyController(this),this._graph_node_id=e.graph.next_id(),e.graph.setNode(this),this._graph=e.graph}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.set_name=function(e){this._name=e},Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graph",{get:function(){return this._graph},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graph_node_id",{get:function(){return this._graph_node_id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty_controller",{get:function(){return this._dirty_controller},enumerable:!0,configurable:!0}),e.prototype.set_dirty=function(e){e=e||this,this._dirty_controller.set_dirty(e)},e.prototype.set_successors_dirty=function(e){this._dirty_controller.set_successors_dirty(e)},e.prototype.remove_dirty_state=function(){this._dirty_controller.remove_dirty_state()},Object.defineProperty(e.prototype,"is_dirty",{get:function(){return this._dirty_controller.is_dirty},enumerable:!0,configurable:!0}),e.prototype.add_post_dirty_hook=function(e,t){this._dirty_controller.add_post_dirty_hook(e,t)},e.prototype.graph_remove=function(){this.graph.removeNode(this)},e.prototype.add_graph_input=function(e){return this.graph.connect(e,this)},e.prototype.remove_graph_input=function(e){this.graph.disconnect(e,this)},e.prototype.graph_disconnect_predecessors=function(){this.graph.disconnect_predecessors(this)},e.prototype.graph_disconnect_successors=function(){this.graph.disconnect_successors(this)},e.prototype.graph_predecessor_ids=function(){return this.graph.predecessor_ids(this._graph_node_id)||[]},e.prototype.graph_predecessors=function(){return this.graph.predecessors(this)},e.prototype.graph_successors=function(){return this.graph.successors(this)},e.prototype.graph_all_predecessors=function(){return this.graph.all_predecessors(this)},e.prototype.graph_all_successors=function(){return this.graph.all_successors(this)},e}();t.CoreGraphNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(79),i=n(201),a=n(71),s=n(63),u=n(651),_=r.__importDefault(n(51)),l=r.__importDefault(n(47)),c=n(202),p=function(){function e(e){this.param=e,this.node=this.param.node}return e.required_arguments=function(){return console.warn("Expression.Method._Base.required_arguments virtual method call. Please override"),[]},e.optional_arguments=function(){return[]},e.min_allowed_arguments_count=function(){return this.required_arguments().length},e.max_allowed_arguments_count=function(){return this.min_allowed_arguments_count()+this.optional_arguments().length},e.allowed_arguments_count=function(e){return e>=this.min_allowed_arguments_count()&&e<=this.max_allowed_arguments_count()},e.prototype.process_arguments=function(e){throw"Expression.Method._Base.process_arguments virtual method call. Please override"},e.prototype.get_referenced_node_container=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=this.get_referenced_node(e))?[4,t.request_container()]:[3,2];case 1:if((n=r.sent())&&n.core_content())return[2,n];throw"referenced node invalid: "+t.full_path();case 2:throw"invalid input ("+e+")"}}))}))},e.prototype.get_referenced_param=function(e,t){return o.CoreWalker.find_param(this.node,e,t)||null},e.prototype.find_referenced_graph_node=function(e,t){if(l.default(e)){var n=e;return this.node.io.inputs.input_graph_node(n)}var r=e;return this.get_referenced_node(r,t)},e.prototype.get_referenced_node=function(e,t){if(_.default(e)){var n=e;return o.CoreWalker.find_node(this.node,n,t)}var r=e;return this.node.io.inputs.input(r)},e.prototype.find_dependency=function(e){return null},e.prototype.create_dependency_from_index_or_path=function(e){var t=new i.DecomposedPath,n=this.find_referenced_graph_node(e,t);return n?this.create_dependency(n,e,t):null},e.prototype.create_dependency=function(e,t,n){if(c.CoreObject.is_a(e,s.TypedNode)||c.CoreObject.is_a(e,a.TypedParam)){var r=e;return u.MethodDependency.create(this.param,t,r,null==n?void 0:n.named_nodes)}return u.MethodDependency.create(this.param,t,e,null==n?void 0:n.named_nodes)},e}();t.BaseMethod=p},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(57),i=n(623),a=n(624),s=n(627),u=n(629),_=n(635),l=n(103),c=n(636),p=n(637),d=n(200),f=n(284),h=n(644),m=n(674),g=n(675),v=n(676),y=(n(52),n(681)),b=n(106),w=function(e){function t(t,n){void 0===n&&(n="BaseNode");var r=e.call(this,t,n)||this;return r.container_controller=new l.TypedContainerController(r,b.BaseContainer),r.pv=new m.ParamsValueAccessor,r.p=new y.ParamsAccessor,r._initialized=!1,r}return r.__extends(t,e),Object.defineProperty(t.prototype,"display_node_controller",{get:function(){return this._display_node_controller},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent_controller",{get:function(){return this._parent_controller=this._parent_controller||new s.HierarchyParentController(this)},enumerable:!0,configurable:!0}),t.displayed_input_names=function(){return[]},Object.defineProperty(t.prototype,"children_controller_context",{get:function(){return this._children_controller_context},enumerable:!0,configurable:!0}),t.prototype._create_children_controller=function(){if(this._children_controller_context)return new u.HierarchyChildrenController(this,this._children_controller_context)},Object.defineProperty(t.prototype,"children_controller",{get:function(){return this._children_controller=this._children_controller||this._create_children_controller()},enumerable:!0,configurable:!0}),t.prototype.children_allowed=function(){return null!=this._children_controller_context},Object.defineProperty(t.prototype,"ui_data",{get:function(){return this._ui_data=this._ui_data||new i.UIData(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dependencies_controller",{get:function(){return this._dependencies_controller=this._dependencies_controller||new p.DependenciesController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return this._states=this._states||new a.StatesController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lifecycle",{get:function(){return this._lifecycle=this._lifecycle||new _.LifeCycleController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serializer",{get:function(){return this._serializer=this._serializer||new f.NodeSerializer(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cook_controller",{get:function(){return this._cook_controller=this._cook_controller||new c.CookController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"io",{get:function(){return this._io=this._io||new v.IOController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name_controller",{get:function(){return this._name_controller=this._name_controller||new d.NameController(this)},enumerable:!0,configurable:!0}),t.prototype.set_name=function(e){this.name_controller.set_name(e)},t.prototype._set_core_name=function(e){this._name=e},Object.defineProperty(t.prototype,"params",{get:function(){return this._params_controller=this._params_controller||new h.ParamsController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"processing_context",{get:function(){return this._processing_context=this._processing_context||new g.ProcessingContext(this)},enumerable:!0,configurable:!0}),t.prototype.initialize_base_and_node=function(){this._initialized?console.warn("node already initialized"):(this.initialize_base_node(),this.initialize_node(),this._initialized=!0)},t.prototype.initialize_base_node=function(){},t.prototype.initialize_node=function(){},t.type=function(){throw"type to be overriden"},Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type()},enumerable:!0,configurable:!0}),t.node_context=function(){throw"requires override"},t.prototype.node_context=function(){return this.constructor.node_context()},t.required_three_imports=function(){return[]},t.required_imports=function(){var e=this.required_three_imports();return e?e.map((function(e){return"three/examples/jsm/"+e})):[]},t.prototype.required_imports=function(){return this.constructor.required_imports()},t.require_webgl2=function(){return!1},t.prototype.require_webgl2=function(){return this.constructor.require_webgl2()},t.prototype.set_parent=function(e){this.parent_controller.set_parent(e)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parent_controller.parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._scene.root},enumerable:!0,configurable:!0}),t.prototype.full_path=function(){return this.parent_controller.full_path()},t.prototype.create_params=function(){},t.prototype.add_param=function(e,t,n,r){var o;return null===(o=this._params_controller)||void 0===o?void 0:o.add_param(e,t,n,r)},t.prototype.cook=function(e){return null},t.prototype.request_container=function(){return this.container_controller.request_container()},t.prototype.set_container=function(e,t){void 0===t&&(t=null),this.container_controller.container.set_content(e),null!=e&&(e.name||(e.name=this.full_path()),e.node||(e.node=this)),this.cook_controller.end_cook(t)},t.prototype.create_node=function(e){var t;return null===(t=this.children_controller)||void 0===t?void 0:t.create_node(e)},t.prototype.remove_node=function(e){var t;null===(t=this.children_controller)||void 0===t||t.remove_node(e)},t.prototype.children=function(){var e;return(null===(e=this.children_controller)||void 0===e?void 0:e.children())||[]},t.prototype.node=function(e){var t;return(null===(t=this.children_controller)||void 0===t?void 0:t.find_node(e))||null},t.prototype.nodes_by_type=function(e){var t;return(null===(t=this.children_controller)||void 0===t?void 0:t.nodes_by_type(e))||[]},t.prototype.set_input=function(e,t,n){void 0===n&&(n=0),this.io.inputs.set_input(e,t,n)},t.prototype.emit=function(e,t){void 0===t&&(t=null),this.scene.events_controller.dispatch(this,e,t)},t.prototype.to_json=function(e){return void 0===e&&(e=!1),this.serializer.to_json(e)},t}(o.CoreGraphNode);t.TypedNode=w;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(w);t.BaseNodeClass=x},,function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r,o,i,a=n(34),s=n(89),u=n(84);function _(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(_.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),_.FullScreenQuad=(r=new s.OrthographicCamera(-1,1,1,-1,0,1),o=new u.PlaneBufferGeometry(2,2),i=function(e){this._mesh=new a.Mesh(o,e)},Object.defineProperty(i.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(i.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,r)}}),i)},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(63),i=n(16),a=n(714),s=n(30),u=n(103),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new u.TypedContainerController(t,a.MaterialContainer),t._cook_main_without_inputs_when_dirty_bound=t._cook_main_without_inputs_when_dirty.bind(t),t}return r.__extends(t,e),t.node_context=function(){return s.NodeContext.MAT},t.prototype.initialize_base_node=function(){e.prototype.initialize_base_node.call(this),this.name_controller.add_post_set_full_path_hook(this.set_material_name.bind(this)),this.add_post_dirty_hook("_cook_main_without_inputs_when_dirty",this._cook_main_without_inputs_when_dirty_bound)},t.prototype._cook_main_without_inputs_when_dirty=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.cook_controller.cook_main_without_inputs()];case 1:return e.sent(),[2]}}))}))},t.prototype.set_material_name=function(){this._material&&(this._material.name=this.full_path())},Object.defineProperty(t.prototype,"material",{get:function(){return this._material=this._material||this.create_material()},enumerable:!0,configurable:!0}),t.prototype.set_material=function(e){this.set_container(e)},t.prototype.add_render_hook=function(e){},t}(o.TypedNode);t.TypedMatNode=_;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.create_material=function(){return new i.Material},t}(_);t.BaseMatNodeClass=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(22),a=n(63),s=n(743),u=n(30),_=n(103),l=n(59),c=["parent object","parent object","parent object","parent object"];!function(e){e[e.MANAGER=0]="MANAGER",e[e.FOG=1]="FOG",e[e.CAMERA=2]="CAMERA",e[e.LIGHT=3]="LIGHT",e[e.EVENT=4]="EVENT",e[e.MAT=5]="MAT"}(r=t.ObjNodeRenderOrder||(t.ObjNodeRenderOrder={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new _.TypedContainerController(t,s.ObjectContainer),t.render_order=r.MANAGER,t._children_group=new l.Group,t._attachable_to_hierarchy=!0,t._used_in_scene=!0,t}return o.__extends(t,e),t.node_context=function(){return u.NodeContext.OBJ},t.displayed_input_names=function(){return c},Object.defineProperty(t.prototype,"attachable_to_hierarchy",{get:function(){return this._attachable_to_hierarchy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"used_in_scene",{get:function(){return this._used_in_scene},enumerable:!0,configurable:!0}),t.prototype.set_used_in_scene=function(e){if(this._used_in_scene=e,!this.scene.loading_controller.is_loading){var t=this.parent;t&&t.update_object(this)}},t.prototype.add_object_to_parent=function(e){this.attachable_to_hierarchy&&e.add(this.object)},t.prototype.remove_object_from_parent=function(){if(this.attachable_to_hierarchy){var e=this.object.parent;e&&e.remove(this.object)}},t.prototype.initialize_base_node=function(){this._object=this._create_object_with_attributes(),this.name_controller.add_post_set_full_path_hook(this.set_object_name.bind(this)),this.set_object_name()},Object.defineProperty(t.prototype,"children_group",{get:function(){return this._children_group},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),t.prototype._create_object_with_attributes=function(){var e=this.create_object();return e.node=this,e.add(this._children_group),e},t.prototype.set_object_name=function(){this._object&&(this._object.name=this.full_path(),this._children_group.name=this.full_path()+":parented_outputs")},t.prototype.create_object=function(){return new i.Object3D},t.prototype.is_display_node_cooking=function(){return!1},t.prototype.is_displayed=function(){var e,t;return(null===(t=null===(e=this.flags)||void 0===e?void 0:e.display)||void 0===t?void 0:t.active)||!1},t}(a.TypedNode);t.TypedObjNode=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(p);t.BaseObjNodeClass=d},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(79),i=n(57),a=n(638),s=n(639),u=n(640),_=n(641),l=n(23),c=n(75),p=function(e){function t(t){var n=e.call(this,t,"BaseParam")||this;return n._options=new a.OptionsController(n),n._emit_controller=new s.EmitController(n),n._is_computing=!1,n.initialize_param(),n}return r.__extends(t,e),Object.defineProperty(t.prototype,"options",{get:function(){return this._options=this._options||new a.OptionsController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"emit_controller",{get:function(){return this._emit_controller=this._emit_controller||new s.EmitController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expression_controller",{get:function(){return this._expression_controller},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serializer",{get:function(){return this._serializer=this._serializer||new u.ParamSerializer(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return this._states=this._states||new _.StatesController(this)},enumerable:!0,configurable:!0}),t.prototype.initialize_value=function(){},t.prototype.initialize_param=function(){},t.type=function(){return l.ParamType.FLOAT},Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_numeric",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.set_name=function(t){e.prototype.set_name.call(this,t)},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.convert=function(e){return null},t.are_raw_input_equal=function(e,t){return!1},t.prototype.is_raw_input_equal=function(e){return this.constructor.are_raw_input_equal(this._raw_input,e)},t.are_values_equal=function(e,t){return!1},t.prototype.is_value_equal=function(e){return this.constructor.are_values_equal(this.value,e)},t.prototype._clone_raw_input=function(e){return e},t.prototype.set=function(e){this._raw_input=this._clone_raw_input(e),this.emit_controller.emit(c.ParamEvent.RAW_INPUT_UPDATED),this.process_raw_input()},Object.defineProperty(t.prototype,"default_value",{get:function(){return this._default_value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_default",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input",{get:function(){return this._raw_input},enumerable:!0,configurable:!0}),t.prototype.process_raw_input=function(){},t.prototype.compute=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){switch(n.label){case 0:return this.scene.loading_controller.is_loading&&console.warn("param attempt to compute "+this.full_path()),this.is_dirty?this._is_computing?[3,2]:(this._is_computing=!0,[4,this.process_computation()]):[3,3];case 1:if(n.sent(),this._is_computing=!1,this._compute_resolves)for(e=void 0;e=this._compute_resolves.pop();)e();return[3,3];case 2:return[2,new Promise((function(e,n){t._compute_resolves=t._compute_resolves||[],t._compute_resolves.push(e)}))];case 3:return[2]}}))}))},t.prototype.process_computation=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2]}))}))},t.prototype.set_init_value=function(e){this._default_value=e,this._raw_input=this._clone_raw_input(e),this.is_multiple||this.set(e)},t.prototype.set_node=function(e){var t,n;if(e?(this._node=e,this.options.makes_node_dirty_when_dirty()&&!this.parent_param&&(null===(n=e.params.params_node)||void 0===n||n.add_graph_input(this))):this._node&&(null===(t=this._node.params.params_node)||void 0===t||t.remove_graph_input(this)),this.components)for(var r=0,o=this.components;r<o.length;r++){o[r].set_node(e)}},Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.node},enumerable:!0,configurable:!0}),t.prototype.set_parent_param=function(e){e.add_graph_input(this),this._parent_param=e},Object.defineProperty(t.prototype,"parent_param",{get:function(){return this._parent_param},enumerable:!0,configurable:!0}),t.prototype.has_parent_param=function(){return null!=this._parent_param},t.prototype.full_path=function(){var e;return(null===(e=this.node)||void 0===e?void 0:e.full_path())+"/"+this.name},t.prototype.path_relative_to=function(e){return o.CoreWalker.relative_path(e,this)},t.prototype.emit=function(e){this.emit_controller.emit_allowed&&(this.emit_controller.increment_count(e),this.scene.events_controller.dispatch(this,e))},Object.defineProperty(t.prototype,"components",{get:function(){return this._components},enumerable:!0,configurable:!0}),Object.defineProperty(t,"component_names",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component_names",{get:function(){return this.constructor.component_names},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_multiple",{get:function(){return this.component_names.length>0},enumerable:!0,configurable:!0}),t.prototype.init_components=function(){},t.prototype.has_expression=function(){return null!=this.expression_controller&&this.expression_controller.active},t.prototype.to_json=function(){return this.serializer.to_json()},t}(i.CoreGraphNode);t.TypedParam=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return"BaseParamClass.default_value_serialized overriden"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return"BaseParamClass.raw_input_serialized overriden"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return"BaseParamClass.value_serialized overriden"},enumerable:!0,configurable:!0}),t}(p);t.BaseParamClass=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(240),i=n(4),a=n(96),s=n(83),u=n(9),_=n(68);function l(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.transform=u.ParamConfig.FOLDER(),t.t=u.ParamConfig.VECTOR3([0,0,0]),t.r=u.ParamConfig.VECTOR3([0,0,0]),t.s=u.ParamConfig.VECTOR3([1,1,1]),t.scale=u.ParamConfig.FLOAT(1),t}return r.__extends(t,e),t}(e)}t.TransformedParamConfig=l;!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l(u.NodeParamsConfig));var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.transform_controller=new p(t),t}return r.__extends(t,e),t}(_.TypedObjNode);t.TransformedObjNode=c;var p=function(){function e(e){this.node=e,this._cook_main_without_inputs_when_dirty_bound=this._cook_main_without_inputs_when_dirty.bind(this),this._update_transform_from_params_scale=new i.Vector3}return e.prototype.initialize_node=function(){var e=this;this.node.io.inputs.set_count(0,1),this.node.io.inputs.set_depends_on_inputs(!1),this.node.io.outputs.set_has_one_output(),this.node.io.inputs.add_hook((function(){e.on_input_updated()}));var t="_cook_main_without_inputs_when_dirty";this.node.dirty_controller.has_hook(t)||this.node.dirty_controller.add_post_dirty_hook(t,this._cook_main_without_inputs_when_dirty_bound)},e.prototype._cook_main_without_inputs_when_dirty=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.node.cook_controller.cook_main_without_inputs()];case 1:return e.sent(),[2]}}))}))},e.on_input_updated=function(e){null!=e.io.inputs.input(0)?e.root.add_to_parent_transform(e):e.root.remove_from_parent_transform(e)},e.prototype.on_input_updated=function(){e.on_input_updated(this.node)},e.prototype.update=function(e){this.update_transform_with_matrix(e)},e.prototype.update_transform_with_matrix=function(e){var t=this.node.object;return null==e||e.equals(t.matrix)?this.update_transform_from_params():(t.matrixAutoUpdate=!1,t.matrix=e,t.dispatchEvent({type:"change"}))},e.prototype.update_transform_from_params=function(){var e=this.node.object;if(e){var t=this.node.pv.t,n=this.node.pv.r;this._update_transform_from_params_scale.copy(this.node.pv.s).multiplyScalar(this.node.pv.scale),e.matrixAutoUpdate=!1,e.position.copy(t);var r=[a.CoreMath.degrees_to_radians(n.x),a.CoreMath.degrees_to_radians(n.y),a.CoreMath.degrees_to_radians(n.z)],i=new o.Euler(r[0],r[1],r[2]);e.rotation.copy(i),e.scale.copy(this._update_transform_from_params_scale),e.matrixAutoUpdate=!0,e.updateMatrix(),e.dispatchEvent({type:"change"})}},e.prototype.set_params_from_matrix=function(e,t){void 0===t&&(t={}),s.CoreTransform.set_params_from_matrix(e,this.node,t)},e}();t.TransformController=p},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.VISIBLE_UPDATED="param_visible_updated",e.RAW_INPUT_UPDATED="raw_input_updated",e.VALUE_UPDATED="param_value_updated",e.EXPRESSION_UPDATED="param_expression_update",e.ERROR_UPDATED="param_error_updated",e.DELETED="param_deleted"}(t.ParamEvent||(t.ParamEvent={}))},function(e,t,n){"use strict";var r,o,i,a;Object.defineProperty(t,"__esModule",{value:!0});var s,u=n(23),_=n(105);!function(e){e.BOOL="bool",e.INT="int",e.FLOAT="float",e.VEC2="vec2",e.VEC3="vec3",e.VEC4="vec4",e.SAMPLER_2D="sampler2D"}(s=t.ConnectionPointType||(t.ConnectionPointType={})),t.ConnectionPointTypes=[s.BOOL,s.INT,s.FLOAT,s.VEC2,s.VEC3,s.VEC4],t.ConnectionPointTypeToParamTypeMap=((r={})[s.BOOL]=u.ParamType.BOOLEAN,r[s.INT]=u.ParamType.INTEGER,r[s.FLOAT]=u.ParamType.FLOAT,r[s.VEC2]=u.ParamType.VECTOR2,r[s.VEC3]=u.ParamType.VECTOR3,r[s.VEC4]=u.ParamType.VECTOR4,r[s.SAMPLER_2D]=u.ParamType.RAMP,r),t.ParamTypeToConnectionPointTypeMap=((o={})[u.ParamType.BOOLEAN]=s.BOOL,o[u.ParamType.COLOR]=s.VEC3,o[u.ParamType.INTEGER]=s.INT,o[u.ParamType.FLOAT]=s.FLOAT,o[u.ParamType.FOLDER]=void 0,o[u.ParamType.VECTOR2]=s.VEC2,o[u.ParamType.VECTOR3]=s.VEC3,o[u.ParamType.VECTOR4]=s.VEC4,o[u.ParamType.BUTTON]=void 0,o[u.ParamType.OPERATOR_PATH]=void 0,o[u.ParamType.RAMP]=void 0,o[u.ParamType.SEPARATOR]=void 0,o[u.ParamType.STRING]=void 0,o),t.ConnectionPointInitValueMap=((i={})[s.BOOL]=!1,i[s.INT]=0,i[s.FLOAT]=0,i[s.VEC2]=[0,0],i[s.VEC3]=[0,0,0],i[s.VEC4]=[0,0,0,0],i[s.SAMPLER_2D]=_.RampParam.DEFAULT_VALUE_JSON,i),t.ConnectionPointComponentsCountMap=((a={})[s.BOOL]=1,a[s.INT]=1,a[s.FLOAT]=1,a[s.VEC2]=2,a[s.VEC3]=3,a[s.VEC4]=4,a[s.SAMPLER_2D]=1,a)},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.find_param=function(e,n,r){if(!e)return null;var o=n.split(t.SEPARATOR);if(1===o.length)return e.params.get(o[0]);var i=o.slice(0,+(o.length-2)+1||void 0).join(t.SEPARATOR),a=this.find_node(e,i,r);if(null!=a){var s=o[o.length-1],u=a.params.get(s);return r&&u&&r.add_node(s,u),u}return null},t.relative_path=function(e,n){var r=this.closest_common_parent(e,n);if(r){var o=this.distance_to_parent(e,r),i="";if(o-1>0){for(var a=0,s=[];a++<o-1;)s.push(t.PARENT);i=s.join(t.SEPARATOR)+t.SEPARATOR}for(var u=r.full_path().split(t.SEPARATOR).filter((function(e){return e.length>0})),_=[],l=0,c=0,p=n.full_path().split(t.SEPARATOR).filter((function(e){return e.length>0}));c<p.length;c++){var d=p[c];u[l]||_.push(d),l++}return""+i+_.join(t.SEPARATOR)}return n.full_path()},t.closest_common_parent=function(e,t){for(var n=this.parents(e).reverse(),r=this.parents(t).reverse(),o=Math.min(n.length,r.length),i=null,a=0;a<o;a++)n[a].graph_node_id==r[a].graph_node_id&&(i=n[a]);return i},t.parents=function(e){for(var t=[],n=e.parent;n;)t.push(n),n=n.parent;return t},t.distance_to_parent=function(e,t){for(var n=0,r=e,o=t.graph_node_id;r&&r.graph_node_id!=o;)n+=1,r=r.parent;return r&&r.graph_node_id==o?n:-1},t.SEPARATOR="/",t.CURRENT=".",t.PARENT="..",t.CURRENT_WITH_SLASH=t.CURRENT+"/",t.PARENT_WITH_SLASH=t.PARENT+"/",t}(n(628).CoreWalkerEmbed);t.CoreWalker=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(693),i=n(694),a=function(){function e(e){this.node=e}return e.prototype.has_display=function(){return!1},e.prototype.has_bypass=function(){return!1},e}();function s(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.display=new i.DisplayFlag(t.node),t}return r.__extends(t,e),t.prototype.has_display=function(){return!0},t}(e)}function u(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bypass=new o.BypassFlag(t.node),t}return r.__extends(t,e),t.prototype.has_bypass=function(){return!0},t}(e)}t.FlagsController=a;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(s(a));t.FlagsControllerD=_;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(u(a));t.FlagsControllerB=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(u(s(a)));t.FlagsControllerDB=c},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.VERTEX="vertex",e.FRAGMENT="fragment",e.LEAVES_FROM_NODES_SHADER="leaves_from_nodes_shader",e.PARTICLES_0="particles_0",e.PARTICLES_1="particles_1",e.PARTICLES_2="particles_2",e.PARTICLES_3="particles_3",e.PARTICLES_4="particles_4",e.PARTICLES_5="particles_5",e.PARTICLES_6="particles_6",e.PARTICLES_7="particles_7",e.PARTICLES_8="particles_8",e.PARTICLES_9="particles_9"}(r=t.ShaderName||(t.ShaderName={})),t.ParticleShaderNames=[r.PARTICLES_0,r.PARTICLES_1,r.PARTICLES_2,r.PARTICLES_3,r.PARTICLES_4,r.PARTICLES_5,r.PARTICLES_6,r.PARTICLES_7,r.PARTICLES_8,r.PARTICLES_9]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(64),i=n(27),a=n(240),s=function(){function e(){this._translation_matrix=new i.Matrix4,this._translation_matrix_q=new o.Quaternion,this._translation_matrix_s=new r.Vector3(1,1,1),this._matrix=(new i.Matrix4).identity(),this._matrix_q=new o.Quaternion,this._matrix_e=new a.Euler,this._matrix_s=new r.Vector3,this._rotate_geometry_m=new i.Matrix4,this._rotate_geometry_q=new o.Quaternion,this._rotate_geometry_vec_dest=new r.Vector3}return e.set_params_from_matrix=function(e,t,n){void 0===n&&(n={});var i=n.scale;null==i&&(i=!0);var s=new r.Vector3,u=new o.Quaternion,_=new r.Vector3;e.decompose(s,u,_);var l=(new a.Euler).setFromQuaternion(u).toVector3();l.divideScalar(Math.PI/180),t.scene.batch_update((function(){t.params.set_vector3("r",l.toArray()),t.params.set_vector3("t",s.toArray()),t.params.set_vector3("s",_.toArray()),i&&t.params.set_float("scale",1)}))},e.set_params_from_object=function(e,t){var n=e.position.toArray(),r=e.rotation.toArray().map((function(e){return e*(180/Math.PI)}));t.scene.batch_update((function(){t.params.set_vector3("t",n),t.params.set_vector3("r",r)}))},e.prototype.translation_matrix=function(e){return this._translation_matrix.compose(e,this._translation_matrix_q,this._translation_matrix_s),this._translation_matrix},e.matrix_quaternion=function(e){var t=new r.Vector3,n=new o.Quaternion,i=new r.Vector3;return e.decompose(t,n,i),n},e.prototype.matrix=function(e,t,n,r){return this._matrix_e.set(t.x,t.y,t.z,"XYZ"),this._matrix_q.setFromEuler(this._matrix_e),this._matrix_s.copy(n).multiplyScalar(r),this._matrix.compose(e,this._matrix_q,this._matrix_s),this._matrix},e.prototype.rotate_geometry=function(e,t,n){this._rotate_geometry_vec_dest.copy(n),this._rotate_geometry_vec_dest.normalize(),this._rotate_geometry_q.setFromUnitVectors(t,this._rotate_geometry_vec_dest),this._rotate_geometry_m.makeRotationFromQuaternion(this._rotate_geometry_q),e.applyMatrix(this._rotate_geometry_m)},e}();t.CoreTransform=s},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i={Triangle:n(143).Triangle,Vector3:o.Vector3},a=r.__importDefault(n(47)),s=n(288),u=Math.PI/180,_=function(){function e(){}return e.clamp=function(e,t,n){return e<t?t:e>n?n:e},e.fit01=function(e,t,n){return this.fit(e,0,1,t,n)},e.fit=function(e,t,n,r,o){return(e-t)/(n-t)*(o-r)+r},e.degrees_to_radians=function(e){return e*u},e.radians_to_degrees=function(e){return e/u},e.deg2rad=function(e){return this.degrees_to_radians(e)},e.rad2deg=function(e){return this.radians_to_degrees(e)},e.rand=function(e){return a.default(e)?this.rand_float(e):this.rand_vec2(e)},e.round=function(e,t){var n=e/t,r=e<0?Math.ceil(n):Math.floor(n);return console.log("round",t,e,n,r,r*t),r*t},e.highest_even=function(e){return 2*Math.ceil(.5*e)},e.rand_float=function(e){var t={x:e,y:136574};return this.rand_vec2(t)},e.rand_vec2=function(e){var t=(12.9898*e.x+78.233*e.y)%Math.PI;return this.fract(43758.5453*Math.sin(t))},e.geodesic_distance=function(e,t){var n=this.deg2rad(e.lat),r=this.deg2rad(t.lat),o=this.deg2rad(t.lat-e.lat),i=this.deg2rad(t.lng-e.lng),a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n)*Math.cos(r)*Math.sin(i/2)*Math.sin(i/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},e.expand_triangle=function(e,t){var n,r=new i.Vector3;e.getMidpoint(r),function(e){e.a="a",e.b="b",e.c="c"}(n||(n={}));for(var o=0,a=["a","b","c"];o<a.length;o++){var s=a[o],u=e[s].clone().sub(r),_=u.clone().normalize(),l=u.length()+t;e[s]=r.clone().add(_.multiplyScalar(l))}return e},e.nearestPower2=function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))},e.Easing=s.Easing,e.fract=function(e){return e-Math.floor(e)},e}();t.CoreMath=_},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e,t){this.node=e,this._callbacks=[],this._container=new t(this.node)}return Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),e.prototype.request_container=function(){var e=this;return new Promise((function(t,n){e._callbacks.push(t),e.node.scene.cook_controller.add_node(e.node),setTimeout(e.process_container_request.bind(e),0)}))},e.prototype.process_container_request=function(){var e,t,n=this;if(null===(t=null===(e=this.node.flags)||void 0===e?void 0:e.bypass)||void 0===t?void 0:t.active){this.request_input_container(0).then((function(e){n.node.remove_dirty_state(),e?n.notify_requesters(e):n.node.states.error.set("input invalid")}))}else this.node.is_dirty?(this.node.container_controller.container.reset_caches(),this.node.cook_controller.cook_main()):this.notify_requesters()},e.prototype.request_input_container=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return(t=this.node.io.inputs.input(e))?(t.processing_context.copy(this.node.processing_context),[4,t.container_controller.request_container()]):[3,2];case 1:return[2,n.sent()];case 2:return this.node.states.error.set("input "+e+" required"),this.notify_requesters(),[2,null]}}))}))},e.prototype.notify_requesters=function(e){for(var t,n=[];t=this._callbacks.pop();)n.push(t);for(e||(e=this.node.container_controller.container.clone());t=n.pop();)t(e);this.node.scene.cook_controller.remove_node(this.node)},e}();t.TypedContainerController=o;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(o);t.BaseContainerController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o={Vector2:n(6).Vector2,Vector3:r.Vector3},i={P:"position",N:"normal",Cd:"color"},a=function(){function e(){}return e.remap_name=function(e){return i[e]||e},e.array_to_indexed_arrays=function(e){for(var t={},n=0,r=[],o=[],i=0;i<e.length;){var a=e[i],s=t[a];null!=s?r.push(s):(o.push(a),r.push(n),t[a]=n,n+=1),i++}return{indices:r,values:o}},e.default_value=function(e){switch(e){case 1:return 0;case 2:return new o.Vector2(0,0);case 3:return new o.Vector3(0,0,0);default:throw"size "+e+" not yet implemented"}},e}();t.CoreAttribute=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(80)),i=n(1),a=n(113),s=n(361),u=n(71),_=n(340),l=n(23),c=n(75),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._reset_ramp_interpolant_and_texture_bound=t._reset_ramp_interpolant_and_texture.bind(t),t}return r.__extends(t,e),t.type=function(){return l.ParamType.RAMP},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return this.default_value instanceof _.RampValue?this.default_value.to_json():this.default_value},enumerable:!0,configurable:!0}),t.prototype._clone_raw_input=function(e){return e instanceof _.RampValue?e.clone():_.RampValue.from_json(e).to_json()},Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return this._raw_input instanceof _.RampValue?this._raw_input.to_json():_.RampValue.from_json(this._raw_input).to_json()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value.to_json()},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return e instanceof _.RampValue?t instanceof _.RampValue?e.is_equal(t):e.is_equal_json(t):t instanceof _.RampValue?t.is_equal_json(e):_.RampValue.are_json_equal(e,t)},t.are_values_equal=function(e,t){return e.is_equal(t)},t.prototype.initialize_param=function(){this.add_post_dirty_hook("_reset_ramp_interpolant_and_texture",this._reset_ramp_interpolant_and_texture_bound)},Object.defineProperty(t.prototype,"is_default",{get:function(){return this.default_value instanceof _.RampValue?this.value.is_equal(this.default_value):this.value.is_equal_json(this.default_value)},enumerable:!0,configurable:!0}),t.prototype.process_raw_input=function(){this._raw_input instanceof _.RampValue?this._value?this._value.copy(this._raw_input):this._value=this._raw_input:this._value?this._value.from_json(this._raw_input):this._value=_.RampValue.from_json(this._raw_input),this.emit_controller.emit(c.ParamEvent.VALUE_UPDATED)},t.prototype.has_expression=function(){return!1},t.prototype._reset_ramp_interpolant_and_texture=function(){this._ramp_interpolant=void 0,this._ramp_texture=void 0},t.prototype.ramp_texture=function(){return this._ramp_texture=this._ramp_texture||this._create_ramp_texture()},t.prototype._create_ramp_texture=function(){for(var e=new Uint8Array(3072),t=0,n=0,r=0,o=0;o<1024;o++)t=3*o,n=o/1024,r=this.value_at_position(n),e[t]=255*r;var s=new a.DataTexture(e,1024,1,i.RGBFormat);return s.needsUpdate=!0,s},t.create_interpolant=function(e,t){var n=new Float32Array(1);return new s.CubicInterpolant(e,t,1,n)},t.prototype.interpolant=function(){return this._ramp_interpolant=this._ramp_interpolant||this._create_interpolant()},t.prototype._create_interpolant=function(){for(var e=this.value.points,n=o.default(e,(function(e){return e.position})),r=new Float32Array(n.length),i=new Float32Array(n.length),a=0,s=0,u=n;s<u.length;s++){var _=u[s];r[a]=_.position,i[a]=_.value,a++}return t.create_interpolant(r,i)},t.prototype.value_at_position=function(e){return this.interpolant().evaluate(e)[0]},t.DEFAULT_VALUE=new _.RampValue(_.RampInterpolation.LINEAR,[new _.RampPoint(0,0),new _.RampPoint(1,1)]),t.DEFAULT_VALUE_JSON=t.DEFAULT_VALUE.to_json(),t}(u.TypedParam);t.RampParam=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t){var n=e.call(this)||this;return n._node=t,n}return r.__extends(t,e),t.prototype.set_node=function(e){this._node=e},t.prototype.node=function(){return this._node},t.prototype.clone=function(){var e,t=new this.constructor;return t.set_node(this.node()),null!=(e=this.content())&&t.set_content(e),t},t.prototype.reset_caches=function(){},t.prototype.set_content=function(e){this.reset_caches(),this._content=e,this._post_set_content()},t.prototype.has_content=function(){return null!=this._content},t.prototype.content=function(){return this._content},t.prototype._post_set_content=function(){},t.prototype.core_content=function(){return this._content},t.prototype.core_content_cloned=function(){return this._content},t.prototype.infos=function(){return[]},t}(n(202).CoreObject);t.TypedContainer=o;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(o);t.BaseContainer=i},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(29)),i=n(71),a=n(233),s=n(75),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._components_contructor=a.FloatParam,t}return r.__extends(t,e),Object.defineProperty(t.prototype,"components",{get:function(){return this._components},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_numeric",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_default",{get:function(){for(var e=0,t=this.components;e<t.length;e++){if(!t[e].is_default)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input",{get:function(){return this._components.map((function(e){return e.raw_input}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return this.raw_input},enumerable:!0,configurable:!0}),t.prototype.init_components=function(){if(null==this._components){var e=0;this._components=new Array(this.component_names.length);for(var t=0,n=this.component_names;t<n.length;t++){var r=n[t],i=new this._components_contructor(this.scene),a=void 0;a=o.default(this._default_value)?this._default_value[e]:this._default_value[r],i.options.copy(this.options),i.set_init_value(a),i.set_name(""+this.name+r),i.set_parent_param(this),this.add_graph_input(i),this._components[e]=i,e++}}},t.prototype.process_computation=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.compute_components()];case 1:return e.sent(),this.set_value_from_components(),[2]}}))}))},t.prototype.set_value_from_components=function(){},t.prototype.has_expression=function(){for(var e,t=0,n=this.components;t<n.length;t++){if(null===(e=n[t].expression_controller)||void 0===e?void 0:e.active)return!0}return!1},t.prototype.compute_components=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:for(e=this.components,t=[],n=0,o=e;n<o.length;n++)(i=o[n]).is_dirty&&t.push(i.compute());return[4,Promise.all(t)];case 1:return r.sent(),this.remove_dirty_state(),[2]}}))}))},t.prototype.process_raw_input=function(){var e=this.scene.cooker;e.block();for(var t=this.components,n=0,r=t;n<r.length;n++){r[n].emit_controller.block_parent_emit()}var i=this._raw_input;if(o.default(i))for(var a=0;a<t.length;a++)t[a].set(i[a]);else for(a=0;a<t.length;a++){var u=this.component_names[a];t[a].set(i[u])}e.unblock();for(a=0;a<t.length;a++)t[a].emit_controller.unblock_parent_emit();this.emit_controller.emit(s.ParamEvent.VALUE_UPDATED)},t}(i.TypedParam);t.TypedMultipleParam=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),o=function(){function e(e,t,n){this._name=e,this._type=t,this._init_value=n,void 0===this._init_value&&(this._init_value=r.ConnectionPointInitValueMap[this._type])}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"param_type",{get:function(){return r.ConnectionPointTypeToParamTypeMap[this._type]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"init_value",{get:function(){return this._init_value},enumerable:!0,configurable:!0}),e.prototype.to_json=function(){return this._json=this._json||this._create_json()},e.prototype._create_json=function(){return{name:this._name,type:this._type}},e}();t.TypedNamedConnectionPoint=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(20);t.SetupFieldCommonProps={json_param:{type:Object,default:function(){return{}}},tabindex:{type:Number,default:-1},displays_expression_result:{type:Boolean,default:!1}};var i=n(19),a=n(152),s=n(233),u=n(339);t.SetupFieldCommon=function(e){var t=this,n=o.StoreController.engine.param(e.json_param.graph_node_id),_=i.computed((function(){return e.json_param.name})),l=i.computed((function(){return e.json_param.raw_input})),c=i.computed((function(){return e.json_param.value})),p=i.computed((function(){return e.json_param.expression})),d=i.computed((function(){return null!=p.value})),f=i.computed((function(){return e.json_param.error_message})),h=i.computed((function(){return null!=f.value})),m=i.computed((function(){return e.json_param.type})),g=i.computed((function(){return{displays_expression_result:e.displays_expression_result}})),v=i.computed((function(){return{has_expression:d.value,is_errored:h.value}})),y=i.computed((function(){return!n.options.is_field_hidden()})),b=i.computed((function(){return e.displays_expression_result}));function w(e){new a.ParamSetCommand(n,e).push()}return i.watch(b,(function(e,o){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return e&&n.is_dirty?[4,n.compute()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})),{name:_,value:c,expression:p,raw_input:l,has_expression:d,error_message:f,is_errored:h,field_component_type:m,class_object:g,input_value_class_object:v,is_field_visible:y,on_update_value:function(e){var t=e.currentTarget;if(t){var r=t.value;n.is_raw_input_equal(r)||w(t.value)}},on_keyup:function(e){var t=void 0;switch(e.key){case"ArrowUp":t=1;break;case"ArrowDown":t=-1}if(t&&(e.ctrlKey?t*=.1:e.shiftKey&&(t*=10),n instanceof s.FloatParam||n instanceof u.IntegerParam)){var r=n.value;new a.ParamSetCommand(n,r+t).push()}e.preventDefault()},reset_to_default:function(){n.is_default||w(n.default_value)}}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_OBJ={LIGHT:"lights",MANAGER:"managers",GEOMETRY:"geometries",CAMERA:"cameras",MISC:"misc"},t.CATEGORY_COP={INPUT:"inputs",ADVANCED:"advanced",MISC:"misc"},t.CATEGORY_EVENT={CAMERA:"cameras",MISC:"misc"},t.CATEGORY_GL={COLOR:"color",CONVERSION:"conversion",DYNAMICS:"dynamics",GEOMETRY:"geometry",GLOBALS:"globals",MATH:"math",QUAT:"quat",TRIGO:"trigo",UTIL:"util",INSTANCE:"instance"},t.CATEGORY_MAT={ADVANCED:"advanced",MESH:"meshes",POINTS:"points",LINE:"lines",VOLUME:"volumes",INSTANCE:"instances"},t.CATEGORY_SOP={ANIMATION:"animation",ATTRIBUTE:"attributes",DYNAMICS:"dynamics",INPUT:"inputs",MISC:"misc",MODIFIER:"modifiers",RENDER:"render"},t.CATEGORY_POST={PASS:"passes"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(63),i=n(124),a=n(30),s=n(52),u=n(111),_=n(76),l=n(706),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._set_mat_to_recompile_bound=t._set_mat_to_recompile.bind(t),t._allow_inputs_created_from_params=!0,t}return r.__extends(t,e),t.node_context=function(){return a.NodeContext.GL},t.prototype.initialize_base_node=function(){this.io.inputs.set_depends_on_inputs(!1),this.io.connections.init_inputs(),this.ui_data.set_layout_horizontal(),this.io.outputs.set_named_output_connection_points([]),this.add_post_dirty_hook("_set_mat_to_recompile",this._set_mat_to_recompile_bound),this.params.set_post_create_params_hook(this.create_inputs_from_params.bind(this))},t.prototype._set_mat_to_recompile=function(){var e;null===(e=this.material_node)||void 0===e||e.assembler_controller.set_compilation_required_and_dirty(this)},Object.defineProperty(t.prototype,"material_node",{get:function(){var e;if(this.parent)return this.parent.type==this.type?null===(e=this.parent)||void 0===e?void 0:e.material_node:this.parent},enumerable:!0,configurable:!0}),t.prototype.gl_var_name=function(e){return"v_POLY_"+this.name+"_"+e},t.prototype.variable_for_input=function(e){var t,n=this.io.inputs.get_input_index(e),r=this.io.connections.input_connection(n);if(r){var o=r.node_src,a=o.io.outputs.named_output_connection_points[r.output_index].name;return o.gl_var_name(a)}return i.ThreeToGl.any(null===(t=this.params.get(e))||void 0===t?void 0:t.value)},t.prototype.set_lines=function(e){},t.prototype.reset_code=function(){var e;null===(e=this._param_configs_controller)||void 0===e||e.reset()},t.prototype.create_inputs_from_params=function(){var e=this;if(this._allow_inputs_created_from_params){var t=[],n=this.inputless_params_names();this.params.names.forEach((function(r){var o=!0;if(n.length>0&&n.includes(r)&&(o=!1),o){var i=e.params.get(r);if(i&&!i.parent_param){var a=_.ParamTypeToConnectionPointTypeMap[i.type];if(a){var s=new u.TypedNamedConnectionPoint(i.name,a);t.push(s)}}}})),this.io.inputs.set_named_input_connection_points(t)}},t.prototype.inputless_params_names=function(){return[]},t.prototype.create_spare_parameters=function(){var e=this,t=new Map,n=this.params.spare_names,r=!1,o=!1;n.forEach((function(n){var o=e.params.get(n);o&&(t.set(n,o.value),e.params.delete_param(n),r=!0)})),this.io.inputs.named_input_connection_points.forEach((function(n){var r=n.name,i=t.get(r);if(null!=i){var a=n.param_type,s=l.ParamValueToDefaultConverter.from_value(a,i);if(null==s){var u=e.gl_input_default_value(r);null!=u&&(s=u)}null==s&&n.init_value&&(s=n.init_value),e.add_param(a,r,s,{spare:!0,cook:!0}),o=!0}})),(o||r)&&(this.scene.loading_controller.is_loading||this.emit(s.NodeEvent.PARAMS_UPDATED))},t.prototype.set_param_configs=function(){},t.prototype.param_configs=function(){var e;return null===(e=this._param_configs_controller)||void 0===e?void 0:e.list},t.prototype.gl_input_default_value=function(e){return null},t.prototype.make_output_nodes_dirty=function(){var e=this;this.io.connections.output_connections().map((function(e){return e.node_dest})).forEach((function(t){t.set_dirty(e)}))},t}(o.TypedNode);t.TypedGlNode=c;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(c);t.BaseGlNodeClass=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._param=e,this._complex_data={}}return Object.defineProperty(e.prototype,"required",{get:function(){var e=this._param.options.is_spare&&!this._param.parent_param,t=!this._param.is_default;return e||t},enumerable:!0,configurable:!0}),e.prototype.data=function(){if(this._param.parent_param)throw"no component should be saved";return this._require_data_complex()?this._data_complex():this._data_simple()},e.prototype._data_simple=function(){return this._param.raw_input_serialized},e.prototype._data_complex=function(){if(this._complex_data={},this._param.options.is_spare&&!this._param.parent_param&&(this._complex_data.type=this._param.type,this._complex_data.default_value=this._param.default_value_serialized,this._complex_data.options=this._param.options.current),this._param.is_default||this.add_main(),this._param.options.has_options_overridden){for(var e={},t=this._param.options.overridden_options,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n],i=t[o];e[o]=JSON.stringify(i)}this._complex_data.overriden_options=e}return this._complex_data},e.prototype._require_data_complex=function(){return!!this._param.options.is_spare||!!this._param.options.has_options_overridden},e.prototype.add_main=function(){},e}();t.ParamJsonExporter=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(348),i=n(84),a=n(34),s=n(87),u=n(30),_=n(9);t.CameraBackgroundParamConfig=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=_.ParamConfig.FOLDER(),t.use_background=_.ParamConfig.BOOLEAN(0),t.use_material=_.ParamConfig.BOOLEAN(0,{visible_if:{use_background:!0}}),t.background_color=_.ParamConfig.COLOR([0,0,0],{visible_if:{use_background:!0,use_material:!1}}),t.background_material=_.ParamConfig.OPERATOR_PATH("",{visible_if:{use_background:!0,use_material:!0},node_selection:{context:u.NodeContext.MAT},dependent_on_found_node:!1}),t.background_ratio=_.ParamConfig.FLOAT(1,{visible_if:{use_background:!0,use_material:!0}}),t}return r.__extends(t,e),t}(e)};var l=function(){function e(e){this.node=e,this._bg_raycaster=new o.Raycaster}return Object.defineProperty(e.prototype,"screen_quad",{get:function(){return this._screen_quad=this._screen_quad||this._create_screen_quad()},enumerable:!0,configurable:!0}),e.prototype._create_screen_quad=function(){var e=new i.PlaneBufferGeometry(2,2,1,1),t=new a.Mesh(e);return this.node.object.add(t),t},e.prototype.screen_quad_flat_material=function(){return this._screen_quad_flat_material=this._screen_quad_flat_material||new s.MeshBasicMaterial},e.prototype.add_params=function(){},Object.defineProperty(e.prototype,"use_background",{get:function(){return this.node.params.boolean("use_background")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"use_background_material",{get:function(){return this.use_background&&this.node.params.boolean("use_material")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"use_background_color",{get:function(){return this.use_background&&!this.node.params.boolean("use_material")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background_color",{get:function(){return this.use_background_color?this.node.params.color("background_color"):null},enumerable:!0,configurable:!0}),e.prototype.update_screen_quad=function(){},e.prototype.update=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.use_background?(this.update_screen_quad(),[4,this.update_background_color()]):[3,4];case 1:return e.sent(),this.use_background_material?[4,this.update_background_material()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:this._screen_quad&&this.node.object.remove(this._screen_quad),e.label=5;case 5:return[2]}}))}))},e.prototype.update_background_color=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){return(e=this.screen_quad_flat_material()).color=this.node.pv.background_color,this.screen_quad.material=e,[2]}))}))},e.prototype.update_background_material=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=this.node.p.background_material.found_node())?[4,e.request_container()]:[3,2];case 1:return n.sent(),t=e.material,this.screen_quad.material=t,[3,3];case 2:this.node.states.error.set("bg node not found"),n.label=3;case 3:return[2]}}))}))},e}();t.BaseBackgroundController=l},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(50),i=r.__importDefault(n(47)),a=r.__importDefault(n(232)),s=r.__importDefault(n(51)),u=function(){function e(){}return e.any=function(e){if(s.default(e))return e;if(a.default(e))return""+e;if(i.default(e))return""+o.CoreString.ensure_float(e);var t=e.toArray().map((function(e){return""+o.CoreString.ensure_float(e)}));return"vec"+t.length+"("+t.join(", ")+")"},e.vector3=function(e){return s.default(e)?e:"vec3("+e.toArray().map((function(e){return""+o.CoreString.ensure_float(e)})).join(", ")+")"},e.vector2=function(e){return s.default(e)?e:"vec2("+e.toArray().map((function(e){return""+o.CoreString.ensure_float(e)})).join(", ")+")"},e.vector3_float=function(e,t){return s.default(t)||(t=o.CoreString.ensure_float(t)),"vec4("+this.vector3(e)+", "+t+")"},e.float3=function(e,t,n){return s.default(e)||(e=o.CoreString.ensure_float(e)),s.default(t)||(t=o.CoreString.ensure_float(t)),s.default(n)||(n=o.CoreString.ensure_float(n)),"vec3("+e+", "+t+", "+n+")"},e.float2=function(e,t){return s.default(e)||(e=o.CoreString.ensure_float(e)),s.default(t)||(t=o.CoreString.ensure_float(t)),"vec2("+e+", "+t+")"},e.float=function(e){return s.default(e)||(e=o.CoreString.ensure_float(e)),""+e},e.int=function(e){return""+e},e.bool=function(e){return""+e},e}();t.ThreeToGl=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Constants={NODE_HEIGHT:50,CONNECTION_VERTICAL_MARGIN:12,CONNECTION_VERTICAL_SPACING:20,CONNECTION_VERTICAL_START:10,NODE_UNIT:50}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20);t.SetupContextMenu=function(e,t){function n(){r.StoreController.editor.context_menu.set_param_id(null)}return{on_contextmenu:function(t){var o=r.StoreController.editor.context_menu.param_id(),i=e.graph_node_id;o==i?n():r.StoreController.editor.context_menu.set_param_id(i),r.StoreController.editor.context_menu.set_position({x:t.pageX,y:t.pageY})},on_contextmenu_close:n}}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r=n(3),o=n(63),i=n(692),a=n(103),s=n(30),u=n(81),_=n(113),l=n(1),c=["input texture","input texture","input texture","input texture"],p=new Uint16Array(32),d=0;d<32;d++)p[d]=28898;var f=new _.DataTexture(p,32,1,l.LuminanceFormat,l.HalfFloatType),h=function(e){function t(t){var n=e.call(this,t,"BaseCopNode")||this;return n.container_controller=new a.TypedContainerController(n,i.TextureContainer),n.flags=new u.FlagsControllerB(n),n}return r.__extends(t,e),t.node_context=function(){return s.NodeContext.COP},t.displayed_input_names=function(){return c},t.prototype.initialize_base_node=function(){this.io.outputs.set_has_one_output()},t.prototype.set_texture=function(e){e.name=this.full_path(),this.set_container(e)},t.prototype.clear_texture=function(){this.set_container(f)},t}(o.TypedNode);t.TypedCopNode=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(h);t.BaseCopNodeClass=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(235),i=n(1),a=n(134),s=n(695),u=n(23),_=n(52),l=[{UVMapping:i.UVMapping},{CubeReflectionMapping:i.CubeReflectionMapping},{CubeRefractionMapping:i.CubeRefractionMapping},{EquirectangularReflectionMapping:i.EquirectangularReflectionMapping},{EquirectangularRefractionMapping:i.EquirectangularRefractionMapping},{SphericalReflectionMapping:i.SphericalReflectionMapping},{CubeUVReflectionMapping:i.CubeUVReflectionMapping},{CubeUVRefractionMapping:i.CubeUVRefractionMapping}],c=[{ClampToEdgeWrapping:i.ClampToEdgeWrapping},{RepeatWrapping:i.RepeatWrapping},{MirroredRepeatWrapping:i.MirroredRepeatWrapping}],p=[{LinearFilter:i.LinearFilter},{NearestFilter:i.NearestFilter}],d=[{NearestFilter:i.NearestFilter},{NearestMipMapNearestFilter:i.NearestMipMapNearestFilter},{NearestMipMapLinearFilter:i.NearestMipMapLinearFilter},{LinearFilter:i.LinearFilter},{LinearMipMapNearestFilter:i.LinearMipMapNearestFilter},{LinearMipMapLinearFilter:i.LinearMipMapLinearFilter}],f=["mapping","wrapS","wrapT","minFilter","magFilter"],h={mapping:"mapping",wrapS:"wrap_s",wrapT:"wrap_t",minFilter:"min_filter",magFilter:"mag_filter"},m=n(9),g=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url=m.ParamConfig.STRING(s.CoreTextureLoader.PARAM_DEFAULT,{desktop_browse:{file_type:"texture"}}),t.reload=m.ParamConfig.BUTTON(null,{callback:function(e,t){v.PARAM_CALLBACK_reload(e,t)}}),t.mapping=m.ParamConfig.INTEGER(i.UVMapping,{menu:{entries:l.map((function(e){return{name:Object.keys(e)[0],value:Object.values(e)[0]}}))}}),t.wrap_s=m.ParamConfig.INTEGER(Object.values(c[0])[0],{menu:{entries:c.map((function(e){return{name:Object.keys(e)[0],value:Object.values(e)[0]}}))}}),t.wrap_t=m.ParamConfig.INTEGER(Object.values(c[0])[0],{menu:{entries:c.map((function(e){return{name:Object.keys(e)[0],value:Object.values(e)[0]}}))}}),t.mag_filter=m.ParamConfig.INTEGER(Object.values(p[0])[0],{menu:{entries:p.map((function(e){return{name:Object.keys(e)[0],value:Object.values(e)[0]}}))}}),t.min_filter=m.ParamConfig.INTEGER(Object.values(d[0])[0],{menu:{entries:d.map((function(e){return{name:Object.keys(e)[0],value:Object.values(e)[0]}}))}}),t}return r.__extends(t,e),t}(m.NodeParamsConfig)),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=g,t}return r.__extends(t,e),t.type=function(){return"file"},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._is_static_image_url(this.pv.url)?[4,this.cook_for_image()]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,this.cook_for_video()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},t.prototype._is_static_image_url=function(e){return!0},t.prototype.cook_for_image=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._load_texture(this.pv.url)];case 1:return(e=t.sent())?(this._update_texture_params(e),this.set_texture(e)):this.clear_texture(),[2]}}))}))},t.prototype.cook_for_video=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this._param_url_changed()?[4,this._load_texture(this.pv.url)]:[3,2];case 1:return(e=t.sent())&&this._add_video_spare_params_if_required(e),this._previous_param_url=this.pv.url,this._set_video_current_time(),e?(this._update_texture_params(e),this.set_texture(e)):this.cook_controller.end_cook(),[3,2];case 2:return[2]}}))}))},t.prototype.resolved_url=function(){return this.pv.url},t.prototype._update_texture_params=function(e){for(var t=0,n=f;t<n.length;t++){var r=n[t],o=h[r],i=this.params.float(o);null!=i&&e&&e[r]!=i&&(e[r]=i,e.needsUpdate=!0)}},t.PARAM_CALLBACK_reload=function(e,t){e.param_callback_reload()},t.prototype.param_callback_reload=function(){this._previous_param_url=void 0,this.p.url.set_successors_dirty()},t.prototype._set_video_current_time=function(){this._video&&this.params.has("video_time")&&(this._video.currentTime=this.params.float("video_time"))},t.prototype._add_video_spare_params_if_required=function(e){if(e)if(e.constructor==o.VideoTexture){if(this._video=e.image,this._video&&!this.params.has_param(t.VIDEO_TIME_PARAM_NAME)){var n=this._video.duration;this.add_param(u.ParamType.FLOAT,t.VIDEO_TIME_PARAM_NAME,"$T",{spare:!0,cook:!0,range:[0,n],range_locked:[!0,!0]}),this.emit(_.NodeEvent.PARAMS_UPDATED)}}else this._remove_spare_params();else this._remove_spare_params()},t.prototype._remove_spare_params=function(){this.params.has_param(t.VIDEO_TIME_PARAM_NAME)&&(this.params.delete_param(t.VIDEO_TIME_PARAM_NAME),this.emit(_.NodeEvent.PARAMS_UPDATED))},t.prototype._param_url_changed=function(){return this._previous_param_url!=this.pv.url},t.prototype._load_texture=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(t=null,n=this.params.get("url"),!e||!n)return[3,5];this._texture_loader=this._texture_loader||new s.CoreTextureLoader(this,n),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._texture_loader.load_texture_from_url_or_op(e)];case 2:return t=r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return t||this.states.error.set("could not load texture '"+e+"'"),[3,6];case 5:this.states.error.set("not url given to Mat/Base._load_texture"),r.label=6;case 6:return[2,t]}}))}))},t.VIDEO_TIME_PARAM_NAME="video_time",t.DEFAULT_NODE_PATH={UV:"/COP/file_uv",ENV_MAP:"/COP/env_map"},t}(a.TypedCopNode);t.FileCopNode=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(292);!function(e){e.ATTRIBUTE="attribute",e.FUNCTION="function",e.UNIFORM="uniform",e.VARYING="varying"}(r=t.GLDefinitionType||(t.GLDefinitionType={}));var a=function(){function e(e,t,n,r){this._definition_type=e,this._data_type=t,this._node=n,this._name=r}return Object.defineProperty(e.prototype,"definition_type",{get:function(){return this._definition_type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data_type",{get:function(){return this._data_type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.collection_instance=function(){return new i.TypedGLDefinitionCollection},e}();t.TypedGLDefinition=a;var s=function(e){function t(t,n,o){var i=e.call(this,r.ATTRIBUTE,n,t,o)||this;return i._node=t,i._data_type=n,i._name=o,i}return o.__extends(t,e),Object.defineProperty(t.prototype,"line",{get:function(){return"attribute "+this.data_type+" "+this.name},enumerable:!0,configurable:!0}),t}(a);t.AttributeGLDefinition=s;var u=function(e){function t(t,n,o){var i=e.call(this,r.FUNCTION,n,t,o)||this;return i._node=t,i._data_type=n,i._name=o,i}return o.__extends(t,e),Object.defineProperty(t.prototype,"line",{get:function(){return this.name},enumerable:!0,configurable:!0}),t}(a);t.FunctionGLDefinition=u;var _=function(e){function t(t,n,o){var i=e.call(this,r.UNIFORM,n,t,o)||this;return i._node=t,i._data_type=n,i._name=o,i}return o.__extends(t,e),Object.defineProperty(t.prototype,"line",{get:function(){return"uniform "+this.data_type+" "+this.name},enumerable:!0,configurable:!0}),t}(a);t.UniformGLDefinition=_;var l=function(e){function t(t,n,o){var i=e.call(this,r.VARYING,n,t,o)||this;return i._node=t,i._data_type=n,i._name=o,i}return o.__extends(t,e),Object.defineProperty(t.prototype,"line",{get:function(){return"varying "+this.data_type+" "+this.name},enumerable:!0,configurable:!0}),t}(a);t.VaryingGLDefinition=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(161),i=n(67),a=n(1),s=n(1),u=n(16),_=n(9);function l(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=_.ParamConfig.COLOR([1,1,1]),t.use_vertex_colors=_.ParamConfig.BOOLEAN(0),t.transparent=_.ParamConfig.BOOLEAN(0),t.opacity=_.ParamConfig.FLOAT(1),t.alpha_test=_.ParamConfig.FLOAT(0),t.use_fog=_.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(e)}t.ColorParamConfig=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(u.Material),p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l(_.NodeParamsConfig)),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e),t.prototype.create_material=function(){return new c}}(i.TypedMatNode),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.update=function(e){var t=e.material,n=e.pv;t.color.copy(n.color),t.vertexColors=n.use_vertex_colors?a.VertexColors:s.NoColors,t.opacity=n.opacity,t.transparent=n.transparent||n.opacity<1,t.transparent&&(t.depthTest=!0),t.alphaTest=n.alpha_test,t.fog=n.use_fog},t}(o.BaseController));t.ColorsController=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(161),i=n(1),a=n(1),s=n(1),u=n(16),_=n(67),l=n(9);function c(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.double_sided=l.ParamConfig.BOOLEAN(0),t.front=l.ParamConfig.BOOLEAN(1,{visible_if:{double_sided:!1}}),t}return r.__extends(t,e),t}(e)}t.SideParamConfig=c;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(u.Material),d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(c(l.NodeParamsConfig)),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e),t.prototype.create_material=function(){return new p}}(_.TypedMatNode),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.update=function(e){var t=e.material.side,n=e.pv.front?i.FrontSide:s.BackSide;e.material.side=e.pv.double_sided?a.DoubleSide:n,t!=e.material.side&&(e.material.needsUpdate=!0)},t}(o.BaseController));t.SideController=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(342),i=n(124),a=n(82),s=n(136),u=n(76),_=n(140);!function(e){e.DISTANCE="customDistanceMaterial",e.DEPTH="customDepthMaterial",e.DEPTH_DOF="customDepthDOFMaterial"}(t.CustomMaterialName||(t.CustomMaterialName={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._assemblers_by_custom_name=new Map,t}return r.__extends(t,e),t.prototype.custom_assembler_class_by_custom_name=function(){},t.prototype.compile_custom_materials=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(o){return(t=this.custom_assembler_class_by_custom_name())&&t.forEach((function(t,o){return r.__awaiter(n,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return this._code_builder?((n=this._assemblers_by_custom_name.get(o))||(n=new t(this._gl_parent_node),this._assemblers_by_custom_name.set(o,n)),n.set_root_nodes(this._root_nodes),n.set_param_configs_owner(this._code_builder),n.set_shader_configs(this.shader_configs),n.set_variable_configs(this.variable_configs()),(i=e.custom_materials[o])?[4,n.compile_material(i)]:[3,2]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))})),[2]}))}))},t.prototype.compile_material=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2]}))}))},t.prototype.shadow_assembler_class_by_custom_name=function(){return{}},t.prototype.add_output_body_line=function(e,t,n){var r,o=e.io.inputs.named_input(n),a=e.variable_for_input(n),s=this.variable_config(n),u=null;if(o)u=i.ThreeToGl.vector3(a);else if(s.default_from_attribute()){var _=e.io.inputs.named_input_connection_points_by_name(n);if(_){var l=_.type,c=null===(r=this.globals_handler)||void 0===r?void 0:r.read_attribute(e,l,n,t);c&&(u=c)}}else{var p=s.default();p&&(u=p)}if(u){var d=s.prefix(),f=s.suffix(),h=s.if_condition();h&&t.add_body_lines(e,["#if "+h]),t.add_body_lines(e,[""+d+u+f]),h&&t.add_body_lines(e,["#endif"])}},t.prototype.set_node_lines_output=function(e,t){var n,r=t.current_shader_name,o=null===(n=this.shader_config(r))||void 0===n?void 0:n.input_names();if(o)for(var i=0,a=o;i<a.length;i++){var s=a[i];this.add_output_body_line(e,t,s)}},t.prototype.set_node_lines_attribute=function(e,t){var n,r=e.gl_type(),o=null===(n=this.globals_handler)||void 0===n?void 0:n.read_attribute(e,r,e.attribute_name,t),i=e.gl_var_name(e.output_name);t.add_body_lines(e,[r+" "+i+" = "+o])},t.prototype.handle_gl_FragCoord=function(e,t,n){t==a.ShaderName.FRAGMENT&&e.push("vec4 "+n+" = gl_FragCoord")},t.prototype.handle_resolution=function(e,t,n){t==a.ShaderName.FRAGMENT&&e.push("vec2 "+n+" = resolution")},t.prototype.set_node_lines_globals=function(e,t){var n,r=[],o=t.current_shader_name,i=this.shader_config(o);if(i){for(var l,c,p=i.dependencies(),d=new Map,f=new Map,h=0,m=e.io.outputs.used_output_names();h<m.length;h++){var g=m[h],v=e.gl_var_name(g),y=t.current_shader_name;switch(g){case"frame":l=new s.UniformGLDefinition(e,u.ConnectionPointType.FLOAT,g),y&&_.MapUtils.push_on_array_at_entry(d,y,l),c="float "+v+" = "+g;for(var b=0,w=p;b<w.length;b++){var x=w[b];_.MapUtils.push_on_array_at_entry(d,x,l),_.MapUtils.push_on_array_at_entry(f,x,c)}r.push(c),this.set_frame_dependent();break;case"gl_FragCoord":this.handle_gl_FragCoord(r,o,v);break;case"resolution":this.handle_resolution(r,o,v),l=new s.UniformGLDefinition(e,u.ConnectionPointType.VEC2,g),y&&_.MapUtils.push_on_array_at_entry(d,y,l);for(var C=0,P=p;C<P.length;C++){x=P[C];_.MapUtils.push_on_array_at_entry(d,x,l)}this.set_resolution_dependent();break;case"gl_PointCoord":o==a.ShaderName.FRAGMENT&&r.push("vec2 "+v+" = gl_PointCoord");break;default:null===(n=this.globals_handler)||void 0===n||n.handle_globals_node(e,g,t)}}d.forEach((function(n,r){t.add_definitions(e,n,r)})),f.forEach((function(n,r){t.add_body_lines(e,n,r)})),t.add_body_lines(e,r)}},t}(o.BaseGlShaderAssembler);t.ShaderAssemblerRender=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.push_on_array_at_entry=function(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,[n])},e.unshift_on_array_at_entry=function(e,t,n){e.has(t)?e.get(t).unshift(n):e.set(t,[n])},e.concat_on_array_at_entry=function(e,t,n){if(e.has(t))for(var r=e.get(t),o=0,i=n;o<i.length;o++){var a=i[o];r.push(a)}else e.set(t,n)},e}();t.MapUtils=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(853),o=function(){function e(){}return e.prototype.push=function(){r.HistoryStack.instance().push_command(this)},e}();t.BaseCommand=o},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(51)),i=n(71),a=n(286),s=n(75),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"is_numeric",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_default",{get:function(){return this._raw_input==this.default_value},enumerable:!0,configurable:!0}),t.prototype.process_raw_input=function(){this.states.error.clear();var e=this.convert(this._raw_input);null!=e?(this._expression_controller&&(this._expression_controller.set_expression(void 0,!1),this.emit_controller.emit(s.ParamEvent.EXPRESSION_UPDATED)),e!=this._value&&(this._update_value(e),this.set_successors_dirty(this))):o.default(this._raw_input)?(this._expression_controller=this._expression_controller||new a.ExpressionController(this),this._raw_input!=this._expression_controller.expression&&(this._expression_controller.set_expression(this._raw_input),this.emit_controller.emit(s.ParamEvent.EXPRESSION_UPDATED))):this.states.error.set("param input is invalid ("+this.full_path()+")")},t.prototype.process_computation=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return null===(e=this.expression_controller)||void 0===e||!e.active||this.expression_controller.requires_entities?[3,2]:[4,this.expression_controller.compute_expression()];case 1:t=r.sent(),this.expression_controller.is_errored?this.states.error.set('expression error: "'+this.expression_controller.expression+'" ('+this.expression_controller.error_message+")"):null!=(n=this.convert(t))?this._update_value(n):this.states.error.set("expression returns an invalid type ("+t+") ("+this.expression_controller.expression+")"),r.label=2;case 2:return[2]}}))}))},t.prototype._update_value=function(e){this._value=e,this.parent_param&&this.parent_param.set_value_from_components(),this.options.execute_callback(),this.emit_controller.emit(s.ParamEvent.VALUE_UPDATED),this.remove_dirty_state()},t}(i.TypedParam);t.TypedNumericParam=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.unreachable=function(e){throw new Error("Didn't expect to get here")},e}();t.TypeAssert=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t,n,r){var o=e.call(this)||this;return o._param=t,o._new_raw_input=n,o._old_raw_input=r,void 0===o._old_raw_input&&(o._old_raw_input=o._param.raw_input),o}return r.__extends(t,e),t.prototype.do=function(){this._param.set(this._new_raw_input)},t.prototype.undo=function(){this._param.set(this._old_raw_input)},t}(n(141).BaseCommand);t.ParamSetCommand=o},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.node=e}return e.prototype.add_params=function(){},e.prototype.update=function(){},Object.defineProperty(e.prototype,"material",{get:function(){return this.node.material},enumerable:!0,configurable:!0}),e}();t.BaseController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(161),i=n(16),a=n(9),s=n(67);function u(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skinning=a.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(e)}t.SkinningParamConfig=u;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(i.Material),l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(u(a.NodeParamsConfig)),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e),t.prototype.create_material=function(){return new _}}(s.TypedMatNode),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.update=function(e){e.material.skinning=e.pv.skinning},t}(o.BaseController));t.SkinningController=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(16),i=n(135),a=n(67),s=n(9),u=n(206);function _(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_map=s.ParamConfig.BOOLEAN(0,u.BooleanParamOptions(c)),t.map=s.ParamConfig.OPERATOR_PATH(i.FileCopNode.DEFAULT_NODE_PATH.UV,u.OperatorPathOptions(c,"use_map")),t}return r.__extends(t,e),t}(e)}t.TextureMapParamConfig=_;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(o.Material),c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(_(s.NodeParamsConfig)),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e),t.prototype.create_material=function(){return new l}}(a.TypedMatNode),function(e){function t(t){var n=e.call(this,t)||this;return n.node=t,n}return r.__extends(t,e),t.prototype.initialize_node=function(){this.add_hooks(this.node.p.use_map,this.node.p.map)},t.prototype.update=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this._update_texture(this.node.material,"map",this.node.p.use_map,this.node.p.map),[2]}))}))},t.update=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return e.texture_map_controller.update(),[2]}))}))},t}(u.BaseTextureMapController));t.TextureMapController=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(16),i=n(135),a=n(67),s=n(9),u=n(206);function _(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_alpha_map=s.ParamConfig.BOOLEAN(0,u.BooleanParamOptions(c)),t.alpha_map=s.ParamConfig.OPERATOR_PATH(i.FileCopNode.DEFAULT_NODE_PATH.UV,u.OperatorPathOptions(c,"use_alpha_map")),t}return r.__extends(t,e),t}(e)}t.TextureAlphaMapParamConfig=_;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(o.Material),c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(_(s.NodeParamsConfig)),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e),t.prototype.create_material=function(){return new l}}(a.TypedMatNode),function(e){function t(t){var n=e.call(this,t)||this;return n.node=t,n}return r.__extends(t,e),t.prototype.initialize_node=function(){this.add_hooks(this.node.p.use_alpha_map,this.node.p.alpha_map)},t.prototype.update=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this._update_texture(this.node.material,"alphaMap",this.node.p.use_alpha_map,this.node.p.alpha_map),[2]}))}))},t.update=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return e.texture_alpha_map_controller.update(),[2]}))}))},t}(u.BaseTextureMapController));t.TextureAlphaMapController=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(731),o=n(117),i=n(732),a=n(733),s=n(734),u=n(735),_=n(736),l=n(110),c=n(150),p=n(234),d=n(180),f=n(105),h=function(){function e(){}return e.dispatch_node=function(e){return new r.NodeJsonExporter(e)},e.dispatch_param=function(e){return e instanceof l.TypedMultipleParam?new i.ParamMultipleJsonExporter(e):e instanceof c.TypedNumericParam?new a.ParamNumericJsonExporter(e):e instanceof p.OperatorPathParam?new s.ParamOperatorPathJsonExporter(e):e instanceof d.StringParam?new u.ParamStringJsonExporter(e):e instanceof f.RampParam?new _.ParamRampJsonExporter(e):new o.ParamJsonExporter(e)},e}();t.JsonExportDispatcher=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),o=n(165),i=function(){function e(e){this._scene=e,this._data={}}return e.prototype.data=function(){this._scene.nodes_controller.reset_node_context_signatures();var e=o.JsonExportDispatcher.dispatch_node(this._scene.root),t=e.data(),n=e.ui_data();return this._data={properties:{frame:this._scene.frame||1,frame_range:this._scene.frame_range,frame_range_locked:this._scene.time_controller.frame_range_locked,fps:this._scene.time_controller.fps,master_camera_node_path:this._scene.cameras_controller.master_camera_node_path},root:t,ui:n},this._data},e.sanitize_string=function(e){return e=e.replace(/'/g,"'"),e=r.CoreString.escape_line_breaks(e)},e}();t.SceneJsonExporter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(208),i=n(9),a=n(72),s=n(81),u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(a.TransformedParamConfig(i.NodeParamsConfig)),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flags=new s.FlagsControllerD(t),t.transform_controller=new a.TransformController(t),t}return r.__extends(t,e),t.prototype.initialize_base_node=function(){e.prototype.initialize_base_node.call(this),this.transform_controller.initialize_node()},t.prototype.cook=function(){this.transform_controller.update(),this.update_light_params(),this.update_shadow_params(),this.cook_controller.end_cook()},t}(o.TypedLightObjNode));t.BaseLightTransformedObjNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(34),i=n(87),a=n(9),s=n(68),u=n(81);function _(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.show_helper=a.ParamConfig.BOOLEAN(1),t.helper_size=a.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}}),t}return r.__extends(t,e),t}(e)}t.BaseLightHelperParamConfig=_;!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(_(a.NodeParamsConfig));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flags=new u.FlagsControllerD(t),t}return r.__extends(t,e),t}(s.TypedObjNode);t.BaseLightHelperObjNode=l;var c=function(){function e(e,t){this.node=e,this._name=t,this._object=new o.Mesh,this._material=new i.MeshBasicMaterial({wireframe:!0,fog:!1})}return e.prototype.build=function(){this._object.name=this._name,this.build_helper()},Object.defineProperty(e.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),e}();t.BaseLightHelper=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.node=e,this._helper_constructor=t,this._name=n}return e.prototype.initialize_node=function(){var e=this;this.node.flags.display.add_hook((function(){e.update_helper_attachment()}))},e.prototype.update_helper_attachment=function(){var e,t,n,r;this.node.flags.display.active?(r=null===(e=this.helper)||void 0===e?void 0:e.object)&&(this.node.object.add(r),null===(t=this._helper)||void 0===t||t.update()):(r=null===(n=this._helper)||void 0===n?void 0:n.object)&&this.node.object.remove(r)},Object.defineProperty(e.prototype,"helper",{get:function(){if(this.node.flags.display.active)return this._helper=this._helper||this._create_helper()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.node.flags.display.active&&this.node.pv.show_helper},enumerable:!0,configurable:!0}),e.prototype._create_helper=function(){var e=new this._helper_constructor(this.node,this._name);return e.build(),this.node.light.add(e.object),e},e.prototype.update=function(){this.visible?(this._helper||(this._helper=this._create_helper()),this._helper&&(this._helper.object.visible=!0,this._helper.update())):this._helper&&(this._helper.object.visible=!1)},e}();t.HelperController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(68),i=n(59),a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(n(9).NodeParamsConfig),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._attachable_to_hierarchy=!1,t}return r.__extends(t,e),t.prototype.create_object=function(){return new i.Group},t.prototype.cook=function(){this.cook_controller.end_cook()},t}(o.TypedObjNode));t.BaseManagerObjNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(9);t.LayerParamConfig=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layer=o.ParamConfig.INTEGER(0,{range:[0,31],range_locked:[!0,!0]}),t}return r.__extends(t,e),t}(e)};var i=function(){function e(e){this.node=e}return e.prototype.update=function(){var e=this.node.object;e.layers.set(0),e.layers.enable(this.node.params.integer("layer"))},e}();t.LayersController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1024),i=n(1),a=n(6),s=r.__importDefault(n(86)),u=n(859),_=n(764),l=n(30),c=n(23),p=n(56);function d(e){var t;return{node_selection:{context:l.NodeContext.POST},visible_if:(t={do_post_process:1},t["use_post_process_node"+e]=1,t)}}var f=n(9);t.CameraPostProcessParamConfig=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.post_process=f.ParamConfig.FOLDER(),t.do_post_process=f.ParamConfig.BOOLEAN(0),t.use_post_process_node0=f.ParamConfig.BOOLEAN(0,{visible_if:{do_post_process:1}}),t.post_process_node0=f.ParamConfig.OPERATOR_PATH("",d(0)),t.use_post_process_node1=f.ParamConfig.BOOLEAN(0,{visible_if:{do_post_process:1}}),t.post_process_node1=f.ParamConfig.OPERATOR_PATH("",d(1)),t.use_post_process_node2=f.ParamConfig.BOOLEAN(0,{visible_if:{do_post_process:1}}),t.post_process_node2=f.ParamConfig.OPERATOR_PATH("",d(2)),t.use_post_process_node3=f.ParamConfig.BOOLEAN(0,{visible_if:{do_post_process:1}}),t.post_process_node3=f.ParamConfig.OPERATOR_PATH("",d(3)),t}return r.__extends(t,e),t}(e)};var h=function(){function e(e){this.node=e,this._renderers_by_canvas_id={},this._composers_by_canvas_id={},this._resolution_by_canvas_id={},this._composers_set_in_progress_by_canvas_id={},this._fetch_post_process_nodes_in_progress=!1,this._post_process_nodes=[],this._post_process_use_node_path_params=[],this._post_process_node_path_params=[]}return e.prototype.render=function(e,t,n){var r=this.renderer(e);if(r)if(this.node.params.boolean("do_post_process")){var o=this.composer(e);o&&(o.setSize(t.x,t.y),o.render())}else this.node.setup_for_aspect_ratio(n),r.render(this.node.scene.display_scene,this.node.object)},e.prototype.renderer=function(e){return this._renderers_by_canvas_id[e.id]},e.prototype.create_renderer=function(e,t){var n=p.POLY.renderers_controller.rendering_context(e),r=new o.WebGLRenderer({canvas:e,antialias:!0,alpha:!0,context:n});return r.shadowMap.enabled=!0,r.physicallyCorrectLights=!0,r.toneMapping=i.ACESFilmicToneMapping,r.toneMappingExposure=1,r.outputEncoding=i.sRGBEncoding,p.POLY.renderers_controller.register_renderer(r),this._renderers_by_canvas_id[e.id]=r,this.set_renderer_size(e,t),r.setPixelRatio(window.devicePixelRatio),r},e.prototype.delete_renderer=function(e){var t=this.renderer(e);t&&p.POLY.renderers_controller.deregister_renderer(t)},e.prototype.set_renderer_size=function(e,t){this._resolution_by_canvas_id[e.id]=this._resolution_by_canvas_id[e.id]||new a.Vector2,this._resolution_by_canvas_id[e.id].copy(t);var n=this.renderer(e);n&&n.setSize(t.x,t.y);var r=this.composer(e);r&&r.setSize(t.x,t.y)},e.prototype.composer=function(e){return this._composers_by_canvas_id[e.id]=this._composers_by_canvas_id[e.id]||this._create_composer(e)},e.prototype._create_composer=function(e){var t=this.renderer(e);if(t){var n=new u.EffectComposer(t);return n.setPixelRatio(2*window.devicePixelRatio),this.set_composer_passes(e.id,n,t),n}},e.prototype.update_composer_passes=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this.node.params.boolean("do_post_process"))return[3,6];if(this._post_process_nodes=[],this._fetch_post_process_nodes_in_progress)return[2];if(this._fetch_post_process_nodes_in_progress=!0,!this.composer_passes_nodes_changed())return[3,5];this._post_process_nodes=[],e=0,t=s.default(4),r.label=1;case 1:return e<t.length?(n=t[e],o=this._post_process_use_node_path_params[n],o.value?(i=this._post_process_node_path_params[n],(a=i.found_node())?[4,a.request_container()]:[3,3]):[3,3]):[3,4];case 2:r.sent(),this._post_process_nodes.push(a),r.label=3;case 3:return e++,[3,1];case 4:this.set_composers_passes(),r.label=5;case 5:return this._fetch_post_process_nodes_in_progress=!1,[3,7];case 6:this._post_process_nodes=[],r.label=7;case 7:return[2]}}))}))},e.prototype.set_composers_passes=function(){for(var e=0,t=Object.keys(this._composers_by_canvas_id);e<t.length;e++){var n=t[e],r=this._composers_by_canvas_id[n],o=this._renderers_by_canvas_id[n];r&&this.set_composer_passes(n,r,o)}},e.prototype.set_composer_passes=function(e,t,n){if(!this._composers_set_in_progress_by_canvas_id[e]){this._composers_set_in_progress_by_canvas_id[e]=!0,this.clear_render_passes(t);var r=new _.RenderPass(this.node.scene.display_scene,this.node.object);r.clearAlpha=0,t.addPass(r);for(var o=0,i=this._post_process_nodes;o<i.length;o++){i[o].apply_to_composer(t,this.node.object,this._resolution_by_canvas_id[e],this.node)}delete this._composers_set_in_progress_by_canvas_id[e]}},e.prototype.clear_render_passes=function(e){for(var t;t=e.passes.pop();)if(t){var n=t;if("function"==typeof n.dispose)try{n.dispose()}catch(e){console.warn(e)}}e.passes=[]},e.prototype.composer_passes_nodes_changed=function(){return!0},e.prototype.add_params=function(){var e=this;this.node.add_param(c.ParamType.BOOLEAN,"do_post_process",0),s.default(4).forEach((function(t){var n,r=e.node.add_param(c.ParamType.BOOLEAN,"use_post_process_node"+(t+1),0,{visible_if:{do_post_process:1}});if(r){var o=((n={do_post_process:1})[r.name]=1,n),i={node_selection:{context:l.NodeContext.POST},visible_if:o},a=e.node.add_param(c.ParamType.OPERATOR_PATH,"post_process_node"+(t+1),"",i);a&&(e._post_process_use_node_path_params.push(r),e._post_process_node_path_params.push(a))}}))},e}();t.PostProcessController=h},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._param=e}return e.prototype.process_data=function(e){var t=e.raw_input;void 0!==t&&this._param.set(t),this.add_main(e)},e.prototype.add_main=function(e){},e}();t.ParamJsonImporter=r},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(51)),i=n(71),a=n(287),s=n(23),u=n(286),_=n(75),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.type=function(){return s.ParamType.STRING},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return this.default_value},enumerable:!0,configurable:!0}),t.prototype._clone_raw_input=function(e){return""+e},Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return""+this._raw_input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return""+this.value},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return e==t},t.are_values_equal=function(e,t){return e==t},Object.defineProperty(t.prototype,"is_default",{get:function(){return this._raw_input==this.default_value},enumerable:!0,configurable:!0}),t.prototype.convert=function(e){return o.default(e)?e:""+e},Object.defineProperty(t.prototype,"raw_input",{get:function(){return this._raw_input},enumerable:!0,configurable:!0}),t.prototype.process_raw_input=function(){this.states.error.clear(),this._value_elements(this._raw_input).length>=3?(this._expression_controller=this._expression_controller||new u.ExpressionController(this),this._raw_input!=this._expression_controller.expression&&(this._expression_controller.set_expression(this._raw_input),this.set_dirty(),this.emit_controller.emit(_.ParamEvent.EXPRESSION_UPDATED))):this._raw_input!=this._value&&(this._value=this._raw_input,this.remove_dirty_state(),this.set_successors_dirty(this),this.emit_controller.emit(_.ParamEvent.VALUE_UPDATED),this._expression_controller&&(this._expression_controller.set_expression(void 0,!1),this.emit_controller.emit(_.ParamEvent.EXPRESSION_UPDATED)))},t.prototype.process_computation=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return null===(e=this.expression_controller)||void 0===e||!e.active||this.expression_controller.requires_entities?[3,2]:[4,this.expression_controller.compute_expression()];case 1:t=r.sent(),this.expression_controller.is_errored?this.states.error.set("expression error: "+this.expression_controller.error_message):((n=this.convert(t))?(this._value=n,this.emit_controller.emit(_.ParamEvent.VALUE_UPDATED)):this.states.error.set("expression returns an invalid type ("+t+")"),this.remove_dirty_state()),r.label=2;case 2:return[2]}}))}))},t.prototype._value_elements=function(e){return a.ParsedTree.string_value_elements(e)},t}(i.TypedParam);t.StringParam=l},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3).__importDefault(n(29));!function(e){e.customDistanceMaterial="customDistanceMaterial",e.customDepthMaterial="customDepthMaterial",e.customDepthDOFMaterial="customDepthDOFMaterial"}(r||(r={}));var i=function(){function e(){}return e.node=function(e,t){return e.node(t.name)},e.clone=function(e){var t=this;return o.default(e)?e.map((function(e){return t.clone_single(e)})):this.clone_single(e)},e.clone_single=function(e){var t=e.clone();return t.linewidth=e.linewidth,t},e.apply_custom_materials=function(e,t){var n=t;if(n.custom_materials)for(var r=0,o=Object.keys(n.custom_materials);r<o.length;r++){var i=o[r],a=n.custom_materials[i];a&&(e[i]=a,a.needsUpdate=!0)}},e.assign_custom_uniforms=function(e,t,n){var r=e;if(r.custom_materials)for(var o=0,i=Object.keys(r.custom_materials);o<i.length;o++){var a=i[o],s=r.custom_materials[a];s&&(s.uniforms[t].value=n)}},e.init_custom_material_uniforms=function(e,t,n){var r=e;if(r.custom_materials)for(var o=0,i=Object.keys(r.custom_materials);o<i.length;o++){var a=i[o],s=r.custom_materials[a];s&&(s.uniforms[t]=s.uniforms[t]||n)}},e}();t.CoreMaterial=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.add_drag_classes=function(){document.body.classList.add("disable-select")},e.remove_drag_classes=function(){document.body.classList.remove("disable-select")},e.set_cursor_col_resize=function(){document.body.classList.add("cursor_col_resize")},e.unset_cursor_col_resize=function(){document.body.classList.remove("cursor_col_resize")},e}();t.CoreDom=r},,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(149)),o=n(57),i=n(52),a=function(){function e(e){this.node=e,this._graph_node=new o.CoreGraphNode(e.scene,"node_name_controller")}return Object.defineProperty(e.prototype,"graph_node",{get:function(){return this._graph_node},enumerable:!0,configurable:!0}),e.base_name=function(e){var t=e.type,n=t[t.length-1];return r.default(parseInt(n))||(t+="_"),t+"1"},e.prototype.request_name_to_parent=function(e){var t=this.node.parent;t&&t.children_allowed()&&t.children_controller?t.children_controller.set_child_name(this.node,e):console.warn("request_name_to_parent failed, no parent found")},e.prototype.set_name=function(e){e!=this.node.name&&this.request_name_to_parent(e)},e.prototype.update_name_from_parent=function(e){var t;this.node._set_core_name(e),this.post_set_name(),this.post_set_full_path(),this.node.children_allowed()&&(null===(t=this.node.children_controller)||void 0===t||t.children().forEach((function(e){e.name_controller.post_set_full_path()}))),this._graph_node.set_successors_dirty(),this.node.emit(i.NodeEvent.NAME_UPDATED)},e.prototype.add_post_set_name_hook=function(e){this._on_set_name_hooks=this._on_set_name_hooks||[],this._on_set_name_hooks.push(e)},e.prototype.add_post_set_full_path_hook=function(e){this._on_set_full_path_hooks=this._on_set_full_path_hooks||[],this._on_set_full_path_hooks.push(e)},e.prototype.post_set_name=function(){if(this._on_set_name_hooks)for(var e=0,t=this._on_set_name_hooks;e<t.length;e++){(0,t[e])()}},e.prototype.post_set_full_path=function(){if(this._on_set_full_path_hooks)for(var e=0,t=this._on_set_full_path_hooks;e<t.length;e++){(0,t[e])()}},e}();t.NameController=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(79).CoreWalker.SEPARATOR,o=function(){function e(){this.named_nodes=[],this.graph_node_ids=[],this.node_element_by_graph_node_id={}}return e.prototype.add_node=function(e,t){e==t.name&&this.named_nodes.push(t),this.graph_node_ids.push(t.graph_node_id),this.node_element_by_graph_node_id[t.graph_node_id]=e},e.prototype.update_from_name_change=function(e){this.named_nodes.map((function(e){return e.graph_node_id})).includes(e.graph_node_id)&&(this.node_element_by_graph_node_id[e.graph_node_id]=e.name)},e.prototype.to_path=function(){var e=this;return this.graph_node_ids.map((function(t){return e.node_element_by_graph_node_id[t]})).join(r)},e}();t.DecomposedPath=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["extended","included"];var o=function(){function e(){}return e.include=function(e){var t,n;t=e,n=this,Object.keys(n).forEach((function(e){r.includes(e)||(t.prototype[e]=n[e])})),n.included&&n.included.apply(t)},e.is_a=function(e,t){for(var n=e;n;){if(n.constructor==t)return!0;n=n.__proto__}return!1},e.prototype.is_a=function(t){return e.is_a(this,t)},e}();t.CoreObject=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VARIABLE_PREFIX="$";var r=function(){function e(e){this.param=e}return e.prototype.set_error=function(e){this.error_message=this.error_message||e},e.prototype.traverse_node=function(e){var t="traverse_"+e.type;if(this[t])return this[t](e);this.set_error("expression unknown node type: "+e.type)},e.prototype.traverse_BinaryExpression=function(e){return this.traverse_node(e.left)+" "+e.operator+" "+this.traverse_node(e.right)},e.prototype.traverse_LogicalExpression=function(e){return this.traverse_node(e.left)+" "+e.operator+" "+this.traverse_node(e.right)},e.prototype.traverse_MemberExpression=function(e){return this.traverse_node(e.object)+"."+this.traverse_node(e.property)},e.prototype.traverse_ConditionalExpression=function(e){return"("+this.traverse_node(e.test)+") ? ("+this.traverse_node(e.consequent)+") : ("+this.traverse_node(e.alternate)+")"},e.prototype.traverse_Compound=function(e){var n=e.body;console.log(n);for(var r=[],o=0;o<n.length;o++){var i=n[o];"Identifier"==i.type?i.name[0]==t.VARIABLE_PREFIX?r.push("`${"+this.traverse_node(i)+"}`"):r.push("'"+i.name+"'"):r.push("`${"+this.traverse_node(i)+"}`")}return r.join(" + ")},e.prototype.traverse_Literal=function(e){return""+e.raw},e}();t.BaseTraverser=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(702),i=n(290),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allow_pan=a.ParamConfig.BOOLEAN(1),t.allow_rotate=a.ParamConfig.BOOLEAN(1),t.allow_zoom=a.ParamConfig.BOOLEAN(1),t.tdamping=a.ParamConfig.BOOLEAN(1),t.damping=a.ParamConfig.FLOAT(.1,{visible_if:{tdamping:!0}}),t.screen_space_panning=a.ParamConfig.BOOLEAN(1),t.rotate_speed=a.ParamConfig.FLOAT(.5),t.min_distance=a.ParamConfig.FLOAT(1,{range:[0,100],range_locked:[!0,!1]}),t.max_distance=a.ParamConfig.FLOAT(50,{range:[0,100],range_locked:[!0,!1]}),t.polar_angle_range=a.ParamConfig.VECTOR2([0,"$PI"]),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"camera_orbit_controls"},t.prototype.create_controls_instance=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return[2,new i.OrbitControls(e,t)]}))}))},t.prototype.setup_controls=function(e){e.enablePan=this.pv.allow_pan,e.enableRotate=this.pv.allow_rotate,e.enableZoom=this.pv.allow_zoom,e.enableDamping=this.pv.tdamping,e.dampingFactor=this.pv.damping,e.rotateSpeed=this.pv.rotate_speed,e.screenSpacePanning=this.pv.screen_space_panning,e.minDistance=this.pv.min_distance,e.maxDistance=this.pv.max_distance,e.minPolarAngle=this.pv.polar_angle_range.x,e.maxPolarAngle=this.pv.polar_angle_range.y,e.enableKeys=!1},t.prototype.set_from_camera_node=function(e,t){var n=t.params.vector3("target");e.target.copy(n)},t}(o.TypedCameraControlsEventNode);t.CameraOrbitControlsEventNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(178)),i=n(116),a=n(76),s=n(23),u=n(111),_=[a.ConnectionPointType.FLOAT,a.ConnectionPointType.VEC2,a.ConnectionPointType.VEC3,a.ConnectionPointType.VEC4],l=n(9),c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=l.ParamConfig.STRING(""),t.type=l.ParamConfig.INTEGER(0,{menu:{entries:_.map((function(e,t){return{name:e,value:t}}))}}),t}return r.__extends(t,e),t}(l.NodeParamsConfig)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t._update_signature_if_required_bound=t._update_signature_if_required.bind(t),t}return r.__extends(t,e),t.type=function(){return"attribute"},t.prototype.initialize_node=function(){this.params.add_on_scene_load_hook("_update_signature_if_required",this._update_signature_if_required_bound),this.add_post_dirty_hook("_update_signature_if_required",this._update_signature_if_required_bound)},t.prototype.create_params=function(){var e;(null===(e=this.material_node)||void 0===e?void 0:e.assembler_controller.allow_attribute_exports())&&this.add_param(s.ParamType.BOOLEAN,"export_when_connected",0)},t.prototype.inputless_params_names=function(){return["type"]},Object.defineProperty(t.prototype,"input_name",{get:function(){return"export"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"output_name",{get:function(){return"val"},enumerable:!0,configurable:!0}),t.prototype.set_lines=function(e){var t;null===(t=this.material_node)||void 0===t||t.assembler_controller.assembler.set_node_lines_attribute(this,e)},Object.defineProperty(t.prototype,"attribute_name",{get:function(){return o.default(this.pv.name)},enumerable:!0,configurable:!0}),t.prototype.gl_type=function(){return this.io.outputs.named_output_connection_points[0].type},t.prototype.connected_input_node=function(){return this.io.inputs.named_input("export")},t.prototype.connected_input_connection_point=function(){return this.io.inputs.named_input_connection_point("export")},t.prototype.output_connection_point=function(){return this.io.outputs.named_output_connection_points_by_name(this.input_name)},Object.defineProperty(t.prototype,"is_importing",{get:function(){return this.io.outputs.used_output_names().length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_exporting",{get:function(){return!!this.pv.export_when_connected&&null!=this.io.inputs.named_input("export")},enumerable:!0,configurable:!0}),t.prototype._update_signature_if_required=function(e){var t;this.lifecycle.creation_completed&&e!=this.p.type||(this.update_input_and_output_types(),this.remove_dirty_state(),this.make_output_nodes_dirty()),null===(t=this.material_node)||void 0===t||t.assembler_controller.set_compilation_required_and_dirty(this)},t.prototype.update_input_and_output_types=function(){var e;this.io.outputs.set_named_output_connection_points([new u.TypedNamedConnectionPoint(this.output_name,_[this.pv.type])]),(null===(e=this.material_node)||void 0===e?void 0:e.assembler_controller.allow_attribute_exports())&&this.io.inputs.set_named_input_connection_points([new u.TypedNamedConnectionPoint(this.input_name,_[this.pv.type])])},t}(i.TypedGlNode);t.AttributeGlNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(161),i=n(135),a=n(9),s=n(30);t.TextureMapParamConfig=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_map=a.ParamConfig.BOOLEAN(0),t.map=a.ParamConfig.OPERATOR_PATH(i.FileCopNode.DEFAULT_NODE_PATH.UV,{visible_if:{use_map:1}}),t}return r.__extends(t,e),t}(e)},t.BooleanParamOptions=function(e){return{cook:!1,callback:function(t,n){e.update(t)}}},t.OperatorPathOptions=function(e,t){var n;return{visible_if:(n={},n[t]=1,n),node_selection:{context:s.NodeContext.COP},cook:!1,callback:function(t,n){e.update(t)}}};var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_hooks=function(e,t){var n=this;e.add_post_dirty_hook("TextureController",(function(){n.update()})),t.add_post_dirty_hook("TextureController",(function(){n.update()}))},t.update=function(e){},t.prototype._update_texture=function(e,t,n,o){return r.__awaiter(this,void 0,void 0,(function(){var i,a,u,_,l;return r.__generator(this,(function(r){switch(r.label){case 0:return n.is_dirty&&n.compute(),n.value?o.is_dirty?[4,o.compute()]:[3,2]:[3,7];case 1:r.sent(),r.label=2;case 2:return(i=o.found_node())?i.node_context()!=s.NodeContext.COP?[3,4]:[4,i.request_container()]:[3,6];case 3:return a=r.sent(),(u=a.texture())?(_=null==e[t],l=!1,e[t]&&e[t].uuid!=u.uuid&&(l=!0),(_||l)&&(e[t]=u,e.needsUpdate=!0),[2]):(this.node.states.error.set("found node has no texture"),[3,5]);case 4:this.node.states.error.set("found map node is not a COP node"),r.label=5;case 5:return[3,7];case 6:this.node.states.error.set("could not find map node "+o.name+" with path "+o.value),r.label=7;case 7:return e[t]&&(e[t]=null,e.needsUpdate=!0),[2]}}))}))},t}(o.BaseController);t.BaseTextureMapController=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FUNCTION_DECLARATION="function_declaration",e.DEFINE="define",e.BODY="body"}(t.LineType||(t.LineType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(68),i=n(14),a=n(81),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flags=new a.FlagsControllerD(t),t.render_order=o.ObjNodeRenderOrder.LIGHT,t._color_with_intensity=new i.Color(0),t._used_in_scene=!0,t._cook_main_without_inputs_when_dirty_bound=t._cook_main_without_inputs_when_dirty.bind(t),t}return r.__extends(t,e),Object.defineProperty(t.prototype,"light",{get:function(){return this._light},enumerable:!0,configurable:!0}),t.prototype.initialize_base_node=function(){var t=this;e.prototype.initialize_base_node.call(this),this._light=this.create_light(),this.object.add(this._light),this.flags.display.add_hook((function(){t.update_light_attachment()})),this.dirty_controller.add_post_dirty_hook("_cook_main_without_inputs_when_dirty",this._cook_main_without_inputs_when_dirty_bound)},t.prototype._cook_main_without_inputs_when_dirty=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.cook_controller.cook_main_without_inputs()];case 1:return e.sent(),[2]}}))}))},t.prototype.update_light_attachment=function(){this.flags.display.active?(this.object.add(this.light),this._cook_main_without_inputs_when_dirty()):this.object.remove(this.light)},t.prototype.create_shadow_params_main=function(){if(null!=this._light.shadow)return this.create_shadow_params()},t.prototype.create_light_params=function(){},t.prototype.update_light_params=function(){},t.prototype.create_shadow_params=function(){},t.prototype.cook=function(){this.update_light_params(),this.update_shadow_params(),this.cook_controller.end_cook()},t.prototype.update_shadow_params=function(){},Object.defineProperty(t.prototype,"color_with_intensity",{get:function(){var e=this.params.color("color"),t=this.params.float("intensity");return this._color_with_intensity.copy(e).multiplyScalar(t),this._color_with_intensity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this.flags.display.active},enumerable:!0,configurable:!0}),t}(o.TypedObjNode);t.TypedLightObjNode=s},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i=n(6),a=n(14),s=n(54),u=n(104),_=n(36),l=n(184),c=n(50),p=r.__importDefault(n(179)),d=r.__importDefault(n(51)),f=r.__importDefault(n(29)),h=r.__importDefault(n(47)),m=n(298),g=function(e){function t(t,n){var r=e.call(this,n)||this;return r._object=t,null==r._object.userData.attributes&&(r._object.userData.attributes={}),r}return r.__extends(t,e),t.prototype.object=function(){return this._object},t.prototype.geometry=function(){return this._object.geometry},t.prototype.core_geometry=function(){var e=this.geometry();return new s.CoreGeometry(e)},t.prototype.points=function(){return this.core_geometry().points()},t.prototype.points_from_group=function(e){if(e){var t=c.CoreString.indices(e);if(t){var n=this.points();return t.map((function(e){return n[e]}))}return[]}return this.points()},t.prototype.compute_vertex_normals=function(){this.core_geometry().compute_vertex_normals()},t.prototype.add_attribute=function(e,t){var n;n=h.default(t)||f.default(t)||d.default(t)?t:t.toArray(),this._object.userData.attributes[e]=n},t.prototype.add_numeric_attrib=function(e,t){this.add_attribute(e,t)},t.prototype.set_attrib_value=function(e,t){this.add_attribute(e,t)},t.prototype.add_numeric_vertex_attrib=function(e,t,n){null==n&&(n=u.CoreAttribute.default_value(t)),this.core_geometry().add_numeric_attrib(e,t,n)},t.prototype.attribute_names=function(){return Object.keys(this._object.userData.attributes)},t.prototype.attrib_names=function(){return this.attribute_names()},t.prototype.has_attrib=function(e){return this.attribute_names().includes(e)},t.prototype.rename_attribute=function(e,t){this.add_attribute(t,this.attrib_value(e)),this.delete_attribute(e)},t.prototype.delete_attribute=function(e){delete this._object.userData.attributes[e]},t.prototype.attrib_value=function(e){if("ptnum"===e)return this.index;var t=this._object.userData.attributes[e];return null==t&&"name"==e&&(t=this._object.name),t},t.prototype.name=function(){return this.attrib_value("name")},t.prototype.human_type=function(){return _.CoreConstant.CONSTRUCTOR_NAMES_BY_CONSTRUCTOR_NAME[this._object.constructor.name]},t.prototype.attrib_type=function(e){var t=this.attrib_value(e);return d.default(t)?_.CoreConstant.ATTRIB_TYPE.STRING:_.CoreConstant.ATTRIB_TYPE.NUMERIC},t.prototype.attrib_size=function(e){var t=this.attrib_value(e);if(null==t)return 0;if(d.default(t)||h.default(t))return 1;switch(t.constructor){case i.Vector2:return 2;case o.Vector3:return 3;default:return 0}},t.prototype.clone=function(){return t.clone(this._object)},t.clone=function(e){var n=e.clone(),r=new Map,o=new Map;return t.parallelTraverse(e,n,(function(e,t){r.set(t,e),o.set(e,t)})),n.traverse((function(t){var n=r.get(t),i=t;if(i.geometry){var u=n.geometry;i.geometry=s.CoreGeometry.clone(u);var _=i.geometry;_.userData&&(_.userData=p.default(u.userData))}if(i.material){i.material=n.material,l.CoreMaterial.apply_custom_materials(t,i.material);var c=i.material;null==c.color&&(c.color=new a.Color(1,1,1))}e.userData&&(t.userData=p.default(n.userData));var d=n;d.animations&&(t.animations=d.animations.map((function(e){return e.clone()})));var f=t;if(f.isSkinnedMesh){var h=f,m=n,g=m.skeleton.bones;h.skeleton=m.skeleton.clone(),h.bindMatrix.copy(m.bindMatrix);var v=g.map((function(e){return o.get(e)}));h.skeleton.bones=v,h.bind(h.skeleton,h.bindMatrix)}})),n},t.parallelTraverse=function(e,t,n){n(e,t);for(var r=0;r<e.children.length;r++)this.parallelTraverse(e.children[r],t.children[r],n)},t}(m.CoreEntity);t.CoreObject=g},function(e,t,n){"use strict";n.r(t),n.d(t,"BufferGeometryUtils",(function(){return l}));var r=n(10),o=n(12),i=n(191),a=n(121),s=n(1),u=n(6),_=n(4),l={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var o=t.array,i=n.position.array,a=n.normal.array,s=n.uv.array,l=i.length/3;void 0===n.tangent&&e.setAttribute("tangent",new r.BufferAttribute(new Float32Array(4*l),4));for(var c=n.tangent.array,p=[],d=[],f=0;f<l;f++)p[f]=new _.Vector3,d[f]=new _.Vector3;var h=new _.Vector3,m=new _.Vector3,g=new _.Vector3,v=new u.Vector2,y=new u.Vector2,b=new u.Vector2,w=new _.Vector3,x=new _.Vector3,C=e.groups;0===C.length&&(C=[{start:0,count:o.length}]);f=0;for(var P=C.length;f<P;++f)for(var E=D=(R=C[f]).start,O=D+R.count;E<O;E+=3)I(o[E+0],o[E+1],o[E+2]);var T,N,j,A=new _.Vector3,S=new _.Vector3,M=new _.Vector3,k=new _.Vector3;for(f=0,P=C.length;f<P;++f){var R,D;for(E=D=(R=C[f]).start,O=D+R.count;E<O;E+=3)L(o[E+0]),L(o[E+1]),L(o[E+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function I(e,t,n){h.fromArray(i,3*e),m.fromArray(i,3*t),g.fromArray(i,3*n),v.fromArray(s,2*e),y.fromArray(s,2*t),b.fromArray(s,2*n),m.sub(h),g.sub(h),y.sub(v),b.sub(v);var r=1/(y.x*b.y-b.x*y.y);isFinite(r)&&(w.copy(m).multiplyScalar(b.y).addScaledVector(g,-y.y).multiplyScalar(r),x.copy(g).multiplyScalar(y.x).addScaledVector(m,-b.x).multiplyScalar(r),p[e].add(w),p[t].add(w),p[n].add(w),d[e].add(x),d[t].add(x),d[n].add(x))}function L(e){M.fromArray(a,3*e),k.copy(M),N=p[e],A.copy(N),A.sub(M.multiplyScalar(M.dot(N))).normalize(),S.crossVectors(k,N),j=S.dot(d[e]),T=j<0?-1:1,c[4*e]=A.x,c[4*e+1]=A.y,c[4*e+2]=A.z,c[4*e+3]=T}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),a={},s={},u=e[0].morphTargetsRelative,_=new o.BufferGeometry,l=0,c=0;c<e.length;++c){var p=e[c];if(n!==(null!==p.index))return null;for(var d in p.attributes){if(!r.has(d))return null;void 0===a[d]&&(a[d]=[]),a[d].push(p.attributes[d])}if(u!==p.morphTargetsRelative)return null;for(var d in p.morphAttributes){if(!i.has(d))return null;void 0===s[d]&&(s[d]=[]),s[d].push(p.morphAttributes[d])}if(_.userData.mergedUserData=_.userData.mergedUserData||[],_.userData.mergedUserData.push(p.userData),t){var f;if(n)f=p.index.count;else{if(void 0===p.attributes.position)return null;f=p.attributes.position.count}_.addGroup(l,f,c),l+=f}}if(n){var h=0,m=[];for(c=0;c<e.length;++c){for(var g=e[c].index,v=0;v<g.count;++v)m.push(g.getX(v)+h);h+=e[c].attributes.position.count}_.setIndex(m)}for(var d in a){var y=this.mergeBufferAttributes(a[d]);if(!y)return null;_.setAttribute(d,y)}for(var d in s){var b=s[d][0].length;if(0===b)break;_.morphAttributes=_.morphAttributes||{},_.morphAttributes[d]=[];for(c=0;c<b;++c){var w=[];for(v=0;v<s[d].length;++v)w.push(s[d][v][c]);var x=this.mergeBufferAttributes(w);if(!x)return null;_.morphAttributes[d].push(x)}}return _},mergeBufferAttributes:function(e){for(var t,n,o,i=0,a=0;a<e.length;++a){var s=e[a];if(s.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return null;if(void 0===o&&(o=s.normalized),o!==s.normalized)return null;i+=s.array.length}var u=new t(i),_=0;for(a=0;a<e.length;++a)u.set(e[a].array,_),_+=e[a].array.length;return new r.BufferAttribute(u,n,o)},interleaveAttributes:function(e){for(var t,n=0,r=0,o=0,s=e.length;o<s;++o){var u=e[o];if(void 0===t&&(t=u.array.constructor),t!==u.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;n+=u.array.length,r+=u.itemSize}var _=new i.a(new t(n),r),l=0,c=[],p=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"],f=0;for(s=e.length;f<s;f++){var h=(u=e[f]).itemSize,m=u.count,g=new a.InterleavedBufferAttribute(_,h,l,u.normalized);c.push(g),l+=h;for(var v=0;v<m;v++)for(var y=0;y<h;y++)g[d[y]](v,u[p[y]](v))}return c},estimateBytesUsed:function(e){var t=0;for(var n in e.attributes){var r=e.getAttribute(n);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}var o=e.getIndex();return t+=o?o.count*o.itemSize*o.array.BYTES_PER_ELEMENT:0},mergeVertices:function(e,t=1e-4){t=Math.max(t,Number.EPSILON);for(var n={},o=e.getIndex(),i=e.getAttribute("position"),a=o?o.count:i.count,s=0,u=Object.keys(e.attributes),_={},l={},c=[],p=["getX","getY","getZ","getW"],d=0,f=u.length;d<f;d++){_[b=u[d]]=[],(P=e.morphAttributes[b])&&(l[b]=new Array(P.length).fill().map(()=>[]))}var h=Math.log10(1/t),m=Math.pow(10,h);for(d=0;d<a;d++){var g=o?o.getX(d):d,v="",y=0;for(f=u.length;y<f;y++)for(var b=u[y],w=(C=e.getAttribute(b)).itemSize,x=0;x<w;x++)v+=`${~~(C[p[x]](g)*m)},`;if(v in n)c.push(n[v]);else{for(y=0,f=u.length;y<f;y++){b=u[y];var C=e.getAttribute(b),P=e.morphAttributes[b],E=(w=C.itemSize,_[b]),O=l[b];for(x=0;x<w;x++){var T=p[x];if(E.push(C[T](g)),P)for(var N=0,j=P.length;N<j;N++)O[N].push(P[N][T](g))}}n[v]=s,c.push(s),s++}}const A=e.clone();for(d=0,f=u.length;d<f;d++){b=u[d];var S=e.getAttribute(b),M=new S.array.constructor(_[b]);C=new r.BufferAttribute(M,S.itemSize,S.normalized);if(A.setAttribute(b,C),b in l)for(y=0;y<l[b].length;y++){var k=e.morphAttributes[b][y],R=(M=new k.array.constructor(l[b][y]),new r.BufferAttribute(M,k.itemSize,k.normalized));A.morphAttributes[b][y]=R}}return A.setIndex(c),A},toTrianglesDrawMode:function(e,t){if(t===s.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===s.TriangleFanDrawMode||t===s.TriangleStripDrawMode){var n=e.getIndex();if(null===n){var r=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<o.count;i++)r.push(i);e.setIndex(r),n=e.getIndex()}var a=n.count-2,u=[];if(t===s.TriangleFanDrawMode)for(i=1;i<=a;i++)u.push(n.getX(0)),u.push(n.getX(i)),u.push(n.getX(i+1));else for(i=0;i<a;i++)i%2==0?(u.push(n.getX(i)),u.push(n.getX(i+1)),u.push(n.getX(i+2))):(u.push(n.getX(i+2)),u.push(n.getX(i+1)),u.push(n.getX(i)));u.length/3!==a&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var _=e.clone();return _.setIndex(u),_.clearGroups(),_}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54),o=n(10),i=n(12),a=function(){function e(){}return e.accumulated_curve_point_indices=function(e){for(var t,n=[],r=[],o=null,i=0;i<e.length;i++)if(i%2==1){t=e[i];var a=e[i-1];null==o||a===o?(0===n.length&&n.push(a),n.push(t),o=t):(r.push(n),n=[a,t],o=t)}return r.push(n),r},e.create_line_segment_geometry=function(e,t,n,r){var a=[],s={};n.forEach((function(e){s[e]=[]})),t.forEach((function(t,o){var i=e[t];n.forEach((function(e){var t=i.attrib_value(e);(t=r[e]>1?t.toArray():[t]).forEach((function(t){s[e].push(t)}))})),o>0&&(a.push(o-1),a.push(o))}));var u=new i.BufferGeometry;return n.forEach((function(e){var t=r[e],n=s[e];u.setAttribute(e,new o.Float32BufferAttribute(n,t))})),u.setIndex(a),u},e.line_segment_to_geometries=function(e){var t,n=this,o=[],i=new r.CoreGeometry(e),a=i.attrib_names(),s=i.points(),u=(null===(t=e.getIndex())||void 0===t?void 0:t.array)||[],_=this.accumulated_curve_point_indices(u);if(console.log(u,_),_.length>0){var l=i.attrib_sizes();_.forEach((function(t,r){e=n.create_line_segment_geometry(s,t,a,l),o.push(e)}))}return o},e}();t.CoreGeometryUtilCurve=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={Vector2:n(6).Vector2},o=function(){function e(e){this.element=e}return e.prototype.set_element=function(e){this.element=e},e.element_position=function(e,t,n){var r=t.getBoundingClientRect();if(e.changedTouches){var o=(e=e).changedTouches[0];n.x=o.pageX-r.x,n.y=o.pageY-r.y}else e=e,n.x=e.pageX-r.x,n.y=e.pageY-r.y},e.element_position_old=function(e,t){var n=t.getBoundingClientRect(),o=e.pageX-n.x,i=e.pageY-n.y;return new r.Vector2(o,i)},e.normalized_position=function(e,t,n){this.element_position(e,t,n);var r=t.getBoundingClientRect();n.x=(n.x-window.scrollX)/r.width*2-1,n.y=-((n.y-window.scrollY)/r.height*2-1)},e.normalized_position_0_1=function(e,t,n){this.element_position(e,t,n);var r=t.getBoundingClientRect();n.x=(n.x-window.scrollX)/r.width,n.y=(n.y-window.scrollY)/r.height},e.prototype.element_position=function(t,n){e.element_position(t,this.element,n)},e.prototype.element_position_old=function(t){return e.element_position_old(t,this.element)},e.prototype.normalized_position=function(t,n){e.normalized_position(t,this.element,n)},e}();t.EventHelper=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(855),o=n(20);t.SetupGlobalSliderOwner=function(e){return{open_numeric_slider:function(t){t.button==r.MouseButton.MIDDLE&&(o.StoreController.editor.numeric_slider.open({param_id:e.graph_node_id,position:{x:t.clientX,y:t.clientY}}),t.preventDefault())},on_paste:function(e){if(null!=o.StoreController.editor.numeric_slider.param_id())return e.preventDefault()}}}},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(47)),i=n(150),a=n(23),s=n(50),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.type=function(){return a.ParamType.FLOAT},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return this.default_value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return this._raw_input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return e==t},t.are_values_equal=function(e,t){return e==t},t.convert=function(e){if(o.default(e))return e;if(s.CoreString.is_number(e)){var t=parseFloat(e);if(o.default(t))return t}return null},t.prototype.convert=function(e){var n=t.convert(e);return n?this.options.ensure_in_range(n):n},t}(i.TypedNumericParam);t.FloatParam=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(71),i=n(79),a=n(23),s=n(75),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._found_node=null,t}return r.__extends(t,e),t.type=function(){return a.ParamType.OPERATOR_PATH},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return this.default_value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return""+this._raw_input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return""+this.value},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return e==t},t.are_values_equal=function(e,t){return e==t},Object.defineProperty(t.prototype,"is_default",{get:function(){return this._value==this.default_value},enumerable:!0,configurable:!0}),t.prototype.process_raw_input=function(){this._value=this._raw_input,this.set_dirty(),this.emit_controller.emit(s.ParamEvent.VALUE_UPDATED)},t.prototype.process_computation=function(){var e,t;return r.__awaiter(this,void 0,void 0,(function(){var n,o,a,s,u;return r.__generator(this,(function(r){return n=this._value,o=null,null!=n&&""!==n&&(o=i.CoreWalker.find_node(this.node,n)),this._found_node!==o&&(a=this.options.dependent_on_found_node(),this._found_node&&a&&this.remove_graph_input(this._found_node),this._found_node=o,o&&(s=this.options.node_selection_context,u=null===(t=null===(e=o.parent)||void 0===e?void 0:e.children_controller)||void 0===t?void 0:t.context,s==u||null==s?a&&this.add_graph_input(o):this.states.error.set("node context is "+s+" but the params expects a "+u)),this.options.execute_callback()),this.remove_dirty_state(),[2]}))}))},t.prototype.found_node=function(){return this._found_node},t}(o.TypedParam);t.OperatorPathParam=u},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(344),i=n(205),a=n(136),s=n(140),u=n(82),_={position:"vec3( position )"},l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.handle_globals_node=function(e,t,n){var r,o=e.io.outputs.named_output_connection_points_by_name(t);if(o){var i=e.gl_var_name(t),s=o.type,u=new a.VaryingGLDefinition(e,s,i);n.add_definitions(e,[u]);var _=null===(r=e.material_node)||void 0===r?void 0:r.assembler_controller.assembler;if(_){var l=_.shader_config(n.current_shader_name);if(l){for(var c=l.dependencies(),p=i+" = "+s+"("+t+")",d=0,f=c;d<f.length;d++){var h=f[d];n.add_definitions(e,[u],h),n.add_body_lines(e,[p],h)}0==c.length&&n.add_body_lines(e,[p])}}}},t.variable_config_default=function(e){return _[e]},t.prototype.variable_config_default=function(e){return t.variable_config_default(e)},t.prototype.read_attribute=function(e,n,r,o){return t.read_attribute(e,n,r,o)},t.read_attribute=function(e,n,r,o){var _;t.PRE_DEFINED_ATTRIBUTES.indexOf(r)<0&&o.add_definitions(e,[new a.AttributeGLDefinition(e,n,r)],u.ShaderName.VERTEX);var l=o.current_shader_name;switch(l){case u.ShaderName.VERTEX:return r;case u.ShaderName.FRAGMENT:if(!(e instanceof i.AttributeGlNode))return;var c="varying_"+e.gl_var_name(e.output_name),p=new a.VaryingGLDefinition(e,n,c),d=new Map;d.set(u.ShaderName.FRAGMENT,[]);var f=new Map;f.set(u.ShaderName.FRAGMENT,[]),s.MapUtils.push_on_array_at_entry(d,l,p);var h=c+" = "+n+"("+r+")",m=null===(_=e.material_node)||void 0===_?void 0:_.assembler_controller.assembler.shader_config(l);if(m){for(var g=0,v=m.dependencies();g<v.length;g++){var y=v[g];s.MapUtils.push_on_array_at_entry(d,y,p),s.MapUtils.push_on_array_at_entry(f,y,h)}d.forEach((function(t,n){o.add_definitions(e,t,n)})),f.forEach((function(t,n){o.add_body_lines(e,t,n)}))}return c}},t.prototype.handle_attribute_node=function(e,n,r,o){return t.read_attribute(e,n,r,o)},t.PRE_DEFINED_ATTRIBUTES=["position","color","normal","uv","uv2","morphTarget0","morphTarget1","morphTarget2","morphTarget3","skinIndex","skinWeight"],t.IF_RULE={uv:"defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )"},t}(o.GlobalsBaseController);t.GlobalsGeometryHandler=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(29)),i=r.__importDefault(n(51)),a=n(311),s=function(){function e(e){this._param=e,this._lines=[]}return e.prototype.process=function(){this._lines=[];var e=this.default_value();if(i.default(e)&&(e="'"+e+"'"),o.default(e)&&(e="["+e+"]"),this._param.options.is_spare&&!this._param.parent_param){var t=this.node_var_name()+".add_param('"+this._param.type+"', '"+this._param.name+"', "+e+", "+JSON.stringify(this._param.options.current)+")";this._lines.push(t)}return this._param.is_default||this.add_main(),this.add_options(),this._lines},e.prototype.default_value=function(){return this._param.default_value},e.prototype.node_var_name=function(){return a.CodeExporterDispatcher.dispatch_node(this._param.node).var_name()},e.prototype.prefix=function(){return this.node_var_name()+".params.get('"+this._param.name+"')"},e.prototype.add_main=function(){throw"as_code_main abstract call"},e.prototype.add_options=function(){if(this._param.options.has_options_overridden)for(var e=this._param.options.overridden_options,t=0,n=this._param.options.overridden_option_names;t<n.length;t++){var r=n[t],o=e[r],i=this.prefix()+".options.set('"+r+"', "+JSON.stringify(o)+")";this._lines.push(i)}},e}();t.ParamCodeExporter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=function(){function e(){}return e.copy_node=function(e){this._copied_node=e,this.copy(e.full_path()),r.StoreController.editor.clipboard.set_node_id(e.graph_node_id)},Object.defineProperty(e,"copied_node",{get:function(){return this._copied_node},enumerable:!0,configurable:!0}),e.copy_param=function(e){this._copied_param=e,this.copy(e.full_path()),r.StoreController.editor.clipboard.set_param_id(e.graph_node_id)},Object.defineProperty(e,"copied_param",{get:function(){return this._copied_param},enumerable:!0,configurable:!0}),e.copy=function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)},e}();t.ClipboardHelper=o},function(e,t,n){"use strict";n.r(t);var r=n(888),o=n(441);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Numeric.vue",t.default=s.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(588),i=n(589),a=n(590),s=n(611),u=n(612),_=n(615),l=n(616),c=n(617),p=n(619),d=n(683),f=n(685),h=n(686),m=n(687),g=n(688),v=n(99),y=function(){function e(){this._display_scene=new v.Scene,this._cameras_controller=new o.CamerasController(this),this._cooker=new i.Cooker(this),this.cook_controller=new s.CookController,this._graph=new a.CoreGraph,this._missing_expression_references_controller=new c.MissingReferencesController,this._nodes_controller=new p.NodesController(this),this._time_controller=new f.TimeController(this),this._graph.set_scene(this),this.nodes_controller.init()}return Object.defineProperty(e.prototype,"display_scene",{get:function(){return this._display_scene},enumerable:!0,configurable:!0}),e.prototype.set_uuid=function(e){return this._uuid=e},Object.defineProperty(e.prototype,"uuid",{get:function(){return this._uuid},enumerable:!0,configurable:!0}),e.prototype.set_name=function(e){return this._name=e},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameras_controller",{get:function(){return this._cameras_controller},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cooker",{get:function(){return this._cooker},enumerable:!0,configurable:!0}),e.prototype.wait_for_cooks_completed=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.cook_controller.wait_for_cooks_completed()]}))}))},Object.defineProperty(e.prototype,"events_controller",{get:function(){return this._events_controller=this._events_controller||new u.EventsController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graph",{get:function(){return this._graph},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lifecycle_controller",{get:function(){return this._lifecycle_controller=this._lifecycle_controller||new _.LifeCycleController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading_controller",{get:function(){return this._loading_controller=this._loading_controller||new l.LoadingController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"missing_expression_references_controller",{get:function(){return this._missing_expression_references_controller},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodes_controller",{get:function(){return this._nodes_controller},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"performance",{get:function(){return this._performance=this._performance||new d.CorePerformance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time_controller",{get:function(){return this._time_controller},enumerable:!0,configurable:!0}),e.prototype.set_frame=function(e){this.time_controller.set_frame(e)},Object.defineProperty(e.prototype,"frame",{get:function(){return this.time_controller.frame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame_range",{get:function(){return this.time_controller.frame_range},enumerable:!0,configurable:!0}),e.prototype.play=function(){this.time_controller.play()},e.prototype.pause=function(){this.time_controller.pause()},Object.defineProperty(e.prototype,"serializer",{get:function(){return this._serializer=this._serializer||new h.PolySceneSerializer(this)},enumerable:!0,configurable:!0}),e.prototype.to_json=function(){return this.serializer.to_json()},Object.defineProperty(e.prototype,"uniforms_controller",{get:function(){return this._uniforms_controller=this._uniforms_controller||new m.UniformsController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webgl_controller",{get:function(){return this._webgl_controller=this._webgl_controller||new g.WebGLController},enumerable:!0,configurable:!0}),e.prototype.batch_update=function(e){this._cooker.block(),e(),this._cooker.unblock()},e.prototype.node=function(e){return this.nodes_controller.node(e)},Object.defineProperty(e.prototype,"root",{get:function(){return this.nodes_controller.root},enumerable:!0,configurable:!0}),e}();t.PolyScene=y},,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.node=e}return e.prototype.to_json=function(e){var t,n,r,o;void 0===e&&(e=!1);var i={name:this.node.name,type:this.node.type,graph_node_id:this.node.graph_node_id,is_dirty:this.node.is_dirty,ui_data_json:this.node.ui_data.to_json(),error_message:this.node.states.error.message,children:this.children_ids(),inputs:this.input_ids(),input_connection_output_indices:this.connection_input_indices(),named_input_connections:this.named_input_connections(),named_output_connections:this.named_output_connections(),param_ids:this.to_json_params(e),override_clonable_state:this.node.io.inputs.override_clonable_state(),inputs_clonable_state_with_override:this.node.io.inputs.inputs_clonable_state_with_override(),flags:{display:null===(n=null===(t=this.node.flags)||void 0===t?void 0:t.display)||void 0===n?void 0:n.active,bypass:null===(o=null===(r=this.node.flags)||void 0===r?void 0:r.bypass)||void 0===o?void 0:o.active},selection:void 0};return this.node.children_allowed()&&this.node.children_controller&&(i.selection=this.node.children_controller.selection.to_json()),i},e.prototype.children_ids=function(){return this.node.children().map((function(e){return e.graph_node_id}))},e.prototype.input_ids=function(){return this.node.io.inputs.inputs().map((function(e){return null!=e?e.graph_node_id:void 0}))},e.prototype.connection_input_indices=function(){var e;return null===(e=this.node.io.connections.input_connections())||void 0===e?void 0:e.map((function(e){return null!=e?e.output_index:void 0}))},e.prototype.named_input_connections=function(){return this.node.io.inputs.named_input_connection_points.map((function(e){return e.to_json()}))},e.prototype.named_output_connections=function(){return this.node.io.outputs.named_output_connection_points.map((function(e){return e.to_json()}))},e.prototype.to_json_params_from_names=function(e,t){var n=this;return void 0===t&&(t=!1),e.map((function(e){return n.node.params.get(e).graph_node_id}))},e.prototype.to_json_params=function(e){return void 0===e&&(e=!1),this.to_json_params_from_names(this.node.params.names,e)},e}();t.NodeSerializer=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(645),i=n(667),a=n(668),s=n(233),u=n(669),_=n(339),l=n(234),c=n(105),p=n(670),d=n(180),f=n(671),h=n(672),m=n(673),g=n(23);t.ParamConstructorByType=((r={})[g.ParamType.BOOLEAN]=o.BooleanParam,r[g.ParamType.BUTTON]=i.ButtonParam,r[g.ParamType.COLOR]=a.ColorParam,r[g.ParamType.FLOAT]=s.FloatParam,r[g.ParamType.FOLDER]=u.FolderParam,r[g.ParamType.INTEGER]=_.IntegerParam,r[g.ParamType.OPERATOR_PATH]=l.OperatorPathParam,r[g.ParamType.RAMP]=c.RampParam,r[g.ParamType.SEPARATOR]=p.SeparatorParam,r[g.ParamType.STRING]=d.StringParam,r[g.ParamType.VECTOR2]=f.Vector2Param,r[g.ParamType.VECTOR3]=h.Vector3Param,r[g.ParamType.VECTOR4]=m.Vector4Param,r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(646),i=function(){function e(e){this.param=e}return Object.defineProperty(e.prototype,"active",{get:function(){return null!=this._expression},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expression",{get:function(){return this._expression},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_errored",{get:function(){return!!this._manager&&this._manager.is_errored},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error_message",{get:function(){return this._manager?this._manager.error_message:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requires_entities",{get:function(){return this.param.options.is_expression_for_entities},enumerable:!0,configurable:!0}),e.prototype.set_expression=function(e,t){void 0===t&&(t=!0),this._expression!=e&&(this._expression=e,this._expression?(this._manager=this._manager||new o.ExpressionManager(this.param),this._manager.parse_expression(this._expression)):this._manager&&this._manager.reset(),t&&this.param.set_dirty())},e.prototype.update_from_method_dependency_name_change=function(){},e.prototype.compute_expression=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this._manager&&this.active?[2,this._manager.compute_function()]:[2]}))}))},e.prototype.compute_expression_for_entities=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:this.set_entities(e,t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.compute_expression()];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),console.warn("expression evalution error"),console.warn(n),this.param.node.states.error.set("expression evalution error: "+n),[3,4];case 4:return this.reset_entities(),[2]}}))}))},e.prototype.compute_expression_for_points=function(e,t){return this.compute_expression_for_entities(e,t)},e.prototype.compute_expression_for_objects=function(e,t){return this.compute_expression_for_entities(e,t)},Object.defineProperty(e.prototype,"entities",{get:function(){return this._entities},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entity_callback",{get:function(){return this._entity_callback},enumerable:!0,configurable:!0}),e.prototype.set_entities=function(e,t){this._entities=e,this._entity_callback=t},e.prototype.reset_entities=function(){this._entities=void 0,this._entity_callback=void 0},e}();t.ExpressionController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(51)),i=r.__importDefault(n(953));i.default.addUnaryOp("@");i.default.addBinaryOp("**",10);var a=function(){function e(){}return e.prototype.parse_expression=function(e){try{this.reset(),this.node=i.default(e)}catch(n){var t="could not parse the expression '"+e+"' (error: "+n+")";this.error_message=t}},e.prototype.parse_expression_for_string_param=function(t){try{this.reset();for(var n=e.string_value_elements(t),r=[],o=0;o<n.length;o++){var a=n[o],s=void 0;s=o%2==1?i.default(a):{type:"Literal",value:"'"+a+"'",raw:"'"+a+"'"},r.push(s)}this.node={type:"CallExpression",arguments:r,callee:{type:"Identifier",name:"str_concat"}}}catch(e){var u="could not parse the expression '"+t+"' (error: "+e+")";this.error_message=u}},e.string_value_elements=function(e){return null!=e&&o.default(e)?e.split("`"):[]},e.prototype.reset=function(){this.node=void 0,this.error_message=void 0},e}();t.ParsedTree=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function(t){return Math.pow(t,e)}},o=function(e){return function(t){return 1-Math.abs(Math.pow(t-1,e))}},i=function(e){return function(t){return t<.5?r(e)(2*t)/2:o(e)(2*t-1)/2+.5}};t.Easing={linear:i(1),ease_i:function(e,t){return r(t)(e)},ease_o:function(e,t){return o(t)(e)},ease_io:function(e,t){return i(t)(e)},ease_i2:r(2),ease_o2:o(2),ease_io2:i(2),ease_i3:i(3),ease_o3:i(3),ease_io3:i(3),ease_i4:i(4),ease_o4:i(4),ease_io4:i(4),ease_i_sin:function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},ease_o_sin:function(e){return Math.sin(Math.PI/2*e)},ease_io_sin:function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},ease_i_elastic:function(e){return(.04-.04/e)*Math.sin(25*e)+1},ease_o_elastic:function(e){return.04*e/--e*Math.sin(25*e)},ease_io_elastic:function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.node=e,this._state=!0,this._hooks=null}return e.prototype.add_hook=function(e){this._hooks=this._hooks||[],this._hooks.push(e)},e.prototype.on_update=function(){},e.prototype.set=function(e){this._state!=e&&(this._state=e,this.on_update(),this.run_hooks())},Object.defineProperty(e.prototype,"active",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.toggle=function(){this.set(!this._state)},e.prototype.run_hooks=function(){if(this._hooks)for(var e=0,t=this._hooks;e<t.length;e++){(0,t[e])()}},e}();t.BaseFlag=r},function(e,t,n){"use strict";n.r(t),n.d(t,"OrbitControls",(function(){return _})),n.d(t,"MapControls",(function(){return l}));var r=n(69),o=n(1),i=n(64),a=n(268),s=n(6),u=n(4),_=function(e,t){var n,r,_,l,c;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new u.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN},this.touches={ONE:o.TOUCH.ROTATE,TWO:o.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return y.phi},this.getAzimuthalAngle=function(){return y.theta},this.saveState=function(){p.target0.copy(p.target),p.position0.copy(p.object.position),p.zoom0=p.object.zoom},this.reset=function(){p.target.copy(p.target0),p.object.position.copy(p.position0),p.object.zoom=p.zoom0,p.object.updateProjectionMatrix(),p.dispatchEvent(d),p.update(),g=m.NONE},this.update=(n=new u.Vector3,r=(new i.Quaternion).setFromUnitVectors(e.up,new u.Vector3(0,1,0)),_=r.clone().inverse(),l=new u.Vector3,c=new i.Quaternion,function(){var e=p.object.position;return n.copy(e).sub(p.target),n.applyQuaternion(r),y.setFromVector3(n),p.autoRotate&&g===m.NONE&&R(2*Math.PI/60/60*p.autoRotateSpeed),p.enableDamping?(y.theta+=b.theta*p.dampingFactor,y.phi+=b.phi*p.dampingFactor):(y.theta+=b.theta,y.phi+=b.phi),y.theta=Math.max(p.minAzimuthAngle,Math.min(p.maxAzimuthAngle,y.theta)),y.phi=Math.max(p.minPolarAngle,Math.min(p.maxPolarAngle,y.phi)),y.makeSafe(),y.radius*=w,y.radius=Math.max(p.minDistance,Math.min(p.maxDistance,y.radius)),!0===p.enableDamping?p.target.addScaledVector(x,p.dampingFactor):p.target.add(x),n.setFromSpherical(y),n.applyQuaternion(_),e.copy(p.target).add(n),p.object.lookAt(p.target),!0===p.enableDamping?(b.theta*=1-p.dampingFactor,b.phi*=1-p.dampingFactor,x.multiplyScalar(1-p.dampingFactor)):(b.set(0,0,0),x.set(0,0,0)),w=1,!!(C||l.distanceToSquared(p.object.position)>v||8*(1-c.dot(p.object.quaternion))>v)&&(p.dispatchEvent(d),l.copy(p.object.position),c.copy(p.object.quaternion),C=!1,!0)}),this.dispose=function(){p.domElement.removeEventListener("contextmenu",oe,!1),p.domElement.removeEventListener("mousedown",K,!1),p.domElement.removeEventListener("wheel",Q,!1),p.domElement.removeEventListener("touchstart",te,!1),p.domElement.removeEventListener("touchend",re,!1),p.domElement.removeEventListener("touchmove",ne,!1),document.removeEventListener("mousemove",$,!1),document.removeEventListener("mouseup",Z,!1),p.domElement.removeEventListener("keydown",ee,!1)};var p=this,d={type:"change"},f={type:"start"},h={type:"end"},m={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},g=m.NONE,v=1e-6,y=new a.a,b=new a.a,w=1,x=new u.Vector3,C=!1,P=new s.Vector2,E=new s.Vector2,O=new s.Vector2,T=new s.Vector2,N=new s.Vector2,j=new s.Vector2,A=new s.Vector2,S=new s.Vector2,M=new s.Vector2;function k(){return Math.pow(.95,p.zoomSpeed)}function R(e){b.theta-=e}function D(e){b.phi-=e}var I,L=(I=new u.Vector3,function(e,t){I.setFromMatrixColumn(t,0),I.multiplyScalar(-e),x.add(I)}),B=function(){var e=new u.Vector3;return function(t,n){!0===p.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(p.object.up,e)),e.multiplyScalar(t),x.add(e)}}(),z=function(){var e=new u.Vector3;return function(t,n){var r=p.domElement;if(p.object.isPerspectiveCamera){var o=p.object.position;e.copy(o).sub(p.target);var i=e.length();i*=Math.tan(p.object.fov/2*Math.PI/180),L(2*t*i/r.clientHeight,p.object.matrix),B(2*n*i/r.clientHeight,p.object.matrix)}else p.object.isOrthographicCamera?(L(t*(p.object.right-p.object.left)/p.object.zoom/r.clientWidth,p.object.matrix),B(n*(p.object.top-p.object.bottom)/p.object.zoom/r.clientHeight,p.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),p.enablePan=!1)}}();function F(e){p.object.isPerspectiveCamera?w/=e:p.object.isOrthographicCamera?(p.object.zoom=Math.max(p.minZoom,Math.min(p.maxZoom,p.object.zoom*e)),p.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),p.enableZoom=!1)}function G(e){p.object.isPerspectiveCamera?w*=e:p.object.isOrthographicCamera?(p.object.zoom=Math.max(p.minZoom,Math.min(p.maxZoom,p.object.zoom/e)),p.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),p.enableZoom=!1)}function V(e){P.set(e.clientX,e.clientY)}function U(e){T.set(e.clientX,e.clientY)}function q(e){if(1==e.touches.length)P.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);P.set(t,n)}}function H(e){if(1==e.touches.length)T.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(t,n)}}function Y(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);A.set(0,r)}function X(e){if(1==e.touches.length)E.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);E.set(t,n)}O.subVectors(E,P).multiplyScalar(p.rotateSpeed);var r=p.domElement;R(2*Math.PI*O.x/r.clientHeight),D(2*Math.PI*O.y/r.clientHeight),P.copy(E)}function J(e){if(1==e.touches.length)N.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);N.set(t,n)}j.subVectors(N,T).multiplyScalar(p.panSpeed),z(j.x,j.y),T.copy(N)}function W(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);S.set(0,r),M.set(0,Math.pow(S.y/A.y,p.zoomSpeed)),F(M.y),A.copy(S)}function K(e){if(!1!==p.enabled){switch(e.preventDefault(),p.domElement.focus?p.domElement.focus():window.focus(),e.button){case 0:switch(p.mouseButtons.LEFT){case o.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===p.enablePan)return;U(e),g=m.PAN}else{if(!1===p.enableRotate)return;V(e),g=m.ROTATE}break;case o.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===p.enableRotate)return;V(e),g=m.ROTATE}else{if(!1===p.enablePan)return;U(e),g=m.PAN}break;default:g=m.NONE}break;case 1:switch(p.mouseButtons.MIDDLE){case o.MOUSE.DOLLY:if(!1===p.enableZoom)return;!function(e){A.set(e.clientX,e.clientY)}(e),g=m.DOLLY;break;default:g=m.NONE}break;case 2:switch(p.mouseButtons.RIGHT){case o.MOUSE.ROTATE:if(!1===p.enableRotate)return;V(e),g=m.ROTATE;break;case o.MOUSE.PAN:if(!1===p.enablePan)return;U(e),g=m.PAN;break;default:g=m.NONE}}g!==m.NONE&&(document.addEventListener("mousemove",$,!1),document.addEventListener("mouseup",Z,!1),p.dispatchEvent(f))}}function $(e){if(!1!==p.enabled)switch(e.preventDefault(),g){case m.ROTATE:if(!1===p.enableRotate)return;!function(e){E.set(e.clientX,e.clientY),O.subVectors(E,P).multiplyScalar(p.rotateSpeed);var t=p.domElement;R(2*Math.PI*O.x/t.clientHeight),D(2*Math.PI*O.y/t.clientHeight),P.copy(E),p.update()}(e);break;case m.DOLLY:if(!1===p.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),M.subVectors(S,A),M.y>0?F(k()):M.y<0&&G(k()),A.copy(S),p.update()}(e);break;case m.PAN:if(!1===p.enablePan)return;!function(e){N.set(e.clientX,e.clientY),j.subVectors(N,T).multiplyScalar(p.panSpeed),z(j.x,j.y),T.copy(N),p.update()}(e)}}function Z(e){!1!==p.enabled&&(document.removeEventListener("mousemove",$,!1),document.removeEventListener("mouseup",Z,!1),p.dispatchEvent(h),g=m.NONE)}function Q(e){!1===p.enabled||!1===p.enableZoom||g!==m.NONE&&g!==m.ROTATE||(e.preventDefault(),e.stopPropagation(),p.dispatchEvent(f),function(e){e.deltaY<0?G(k()):e.deltaY>0&&F(k()),p.update()}(e),p.dispatchEvent(h))}function ee(e){!1!==p.enabled&&!1!==p.enableKeys&&!1!==p.enablePan&&function(e){var t=!1;switch(e.keyCode){case p.keys.UP:z(0,p.keyPanSpeed),t=!0;break;case p.keys.BOTTOM:z(0,-p.keyPanSpeed),t=!0;break;case p.keys.LEFT:z(p.keyPanSpeed,0),t=!0;break;case p.keys.RIGHT:z(-p.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),p.update())}(e)}function te(e){if(!1!==p.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(p.touches.ONE){case o.TOUCH.ROTATE:if(!1===p.enableRotate)return;q(e),g=m.TOUCH_ROTATE;break;case o.TOUCH.PAN:if(!1===p.enablePan)return;H(e),g=m.TOUCH_PAN;break;default:g=m.NONE}break;case 2:switch(p.touches.TWO){case o.TOUCH.DOLLY_PAN:if(!1===p.enableZoom&&!1===p.enablePan)return;!function(e){p.enableZoom&&Y(e),p.enablePan&&H(e)}(e),g=m.TOUCH_DOLLY_PAN;break;case o.TOUCH.DOLLY_ROTATE:if(!1===p.enableZoom&&!1===p.enableRotate)return;!function(e){p.enableZoom&&Y(e),p.enableRotate&&q(e)}(e),g=m.TOUCH_DOLLY_ROTATE;break;default:g=m.NONE}break;default:g=m.NONE}g!==m.NONE&&p.dispatchEvent(f)}}function ne(e){if(!1!==p.enabled)switch(e.preventDefault(),e.stopPropagation(),g){case m.TOUCH_ROTATE:if(!1===p.enableRotate)return;X(e),p.update();break;case m.TOUCH_PAN:if(!1===p.enablePan)return;J(e),p.update();break;case m.TOUCH_DOLLY_PAN:if(!1===p.enableZoom&&!1===p.enablePan)return;!function(e){p.enableZoom&&W(e),p.enablePan&&J(e)}(e),p.update();break;case m.TOUCH_DOLLY_ROTATE:if(!1===p.enableZoom&&!1===p.enableRotate)return;!function(e){p.enableZoom&&W(e),p.enableRotate&&X(e)}(e),p.update();break;default:g=m.NONE}}function re(e){!1!==p.enabled&&(p.dispatchEvent(h),g=m.NONE)}function oe(e){!1!==p.enabled&&e.preventDefault()}p.domElement.addEventListener("contextmenu",oe,!1),p.domElement.addEventListener("mousedown",K,!1),p.domElement.addEventListener("wheel",Q,!1),p.domElement.addEventListener("touchstart",te,!1),p.domElement.addEventListener("touchend",re,!1),p.domElement.addEventListener("touchmove",ne,!1),p.domElement.addEventListener("keydown",ee,!1),-1===p.domElement.tabIndex&&(p.domElement.tabIndex=0),this.update()};_.prototype=Object.create(r.a.prototype),_.prototype.constructor=_;var l=function(e,t){_.call(this,e,t),this.mouseButtons.LEFT=o.MOUSE.PAN,this.mouseButtons.RIGHT=o.MOUSE.ROTATE,this.touches.ONE=o.TOUCH.PAN,this.touches.TWO=o.TOUCH.DOLLY_ROTATE};l.prototype=Object.create(r.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(116),i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(n(9).NodeParamsConfig)),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=i,t}return r.__extends(t,e),t.type=function(){return"globals"},t.prototype.create_params=function(){var e;null===(e=this.material_node)||void 0===e||e.assembler_controller.add_globals_params(this)},t.prototype.set_lines=function(e){var t,n;null===(n=null===(t=this.material_node)||void 0===t?void 0:t.assembler_controller)||void 0===n||n.assembler.set_node_lines_globals(this,e)},t}(o.TypedGlNode);t.GlobalsGlNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=[]),this._definitions=e,this._errored=!1}return Object.defineProperty(e.prototype,"errored",{get:function(){return this._errored},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error_message",{get:function(){return this._error_message},enumerable:!0,configurable:!0}),e.prototype.uniq=function(){for(var e=new Map,t=[],n=0,r=this._definitions;n<r.length;n++){var o=r[n];if(!this._errored){var i=o.name,a=e.get(i);a?a.data_type!=o.data_type&&(this._errored=!0,this._error_message="attempt to create "+o.name+" with types "+o.data_type,console.warn("emitting error message",this._error_message)):(e.set(i,o),t.push(i))}}for(var s=[],u=0,_=t;u<_.length;u++){var l=_[u];(o=e.get(l))&&s.push(o)}return s},e}();t.TypedGLDefinitionCollection=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(711),o=function(){function e(){this._param_configs=[]}return e.prototype.reset=function(){this._param_configs=[]},e.prototype.push=function(e){this._param_configs.push(e)},e.prototype.create_and_push=function(e,t,n,o){var i=new r.ParamConfig(e,t,n,o);this._param_configs.push(i)},Object.defineProperty(e.prototype,"list",{get:function(){return this._param_configs},enumerable:!0,configurable:!0}),e}();t.ParamConfigsController=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(149)),i=n(83),a=n(68),s=n(762),u=n(171),_=n(172),l=n(765),c=n(118),p=n(30),d={type:"change"};t.BASE_CAMERA_DEFAULT={near:1,far:100};var f=n(81),h=n(172),m=n(118),g=n(171),v=n(9),y=n(72),b=n(68);function w(e){return function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.camera=v.ParamConfig.FOLDER(),n.controls=v.ParamConfig.OPERATOR_PATH("",{node_selection:{context:p.NodeContext.EVENT}}),n.target=v.ParamConfig.VECTOR3([0,0,0],{cook:!1}),n.near=v.ParamConfig.FLOAT(t.BASE_CAMERA_DEFAULT.near,{range:[0,100]}),n.far=v.ParamConfig.FLOAT(t.BASE_CAMERA_DEFAULT.far,{range:[0,100]}),n.set_master_camera=v.ParamConfig.BUTTON(null,{callback:function(e,t){P.PARAM_CALLBACK_set_master_camera(e)}}),n}return r.__extends(n,e),n}(e)}t.CameraTransformParamConfig=w;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(h.CameraPostProcessParamConfig(m.CameraBackgroundParamConfig(y.TransformedParamConfig(g.LayerParamConfig(w(v.NodeParamsConfig))))));t.BaseCameraObjParamsConfig=x;var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render_order=a.ObjNodeRenderOrder.CAMERA,t._aspect=-1,t.transform_controller=new y.TransformController(t),t.flags=new f.FlagsControllerD(t),t}return r.__extends(t,e),Object.defineProperty(t.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"background_controller",{get:function(){return this._background_controller=this._background_controller||new this.background_controller_constructor(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"background_controller_constructor",{get:function(){return c.BaseBackgroundController},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls_controller",{get:function(){return this._controls_controller=this._controls_controller||new s.ControlsController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layers_controller",{get:function(){return this._layers_controller=this._layers_controller||new u.LayersController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"post_process_controller",{get:function(){return this._post_process_controller=this._post_process_controller||new _.PostProcessController(this)},enumerable:!0,configurable:!0}),t.prototype.initialize_base_node=function(){e.prototype.initialize_base_node.call(this),this.io.outputs.set_has_one_output(),this.transform_controller.initialize_node()},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.transform_controller.update(),this.layers_controller.update(),[4,this.background_controller.update()];case 1:return e.sent(),this._object.near==this.pv.near&&this._object.far==this.pv.far||(this._object.near=this.pv.near,this._object.far=this.pv.far,this._object.updateProjectionMatrix()),[4,this.post_process_controller.update_composer_passes()];case 2:return e.sent(),this.update_camera(),this.controls_controller.update_controls(),this._object.dispatchEvent(d),this.cook_controller.end_cook(),[2]}}))}))},t.prototype.on_create=function(){},t.prototype.on_delete=function(){},t.prototype.camera=function(){return this._object},t.prototype.update_camera=function(){},t.PARAM_CALLBACK_set_master_camera=function(e){e.set_as_master_camera()},t.prototype.set_as_master_camera=function(){this.scene.cameras_controller.set_master_camera_node_path(this.full_path())},t.prototype.setup_for_aspect_ratio=function(e){o.default(e)||e&&this._aspect!=e&&(this._aspect=e,this._update_for_aspect_ratio())},t.prototype._update_for_aspect_ratio=function(){},t.prototype.update_transform_params_from_object=function(){i.CoreTransform.set_params_from_object(this._object,this)},t.prototype.create_viewer=function(e){return new l.ThreejsViewer(e,this.scene,this)},t}(b.TypedObjNode);t.TypedCameraObjNode=C;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(C);t.BaseCameraObjNodeClass=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(95)),i=r.__importDefault(n(85)),a=r.__importDefault(n(149)),s=r.__importDefault(n(178)),u=r.__importDefault(n(74)),_=r.__importDefault(n(182)),l=n(4),c=n(59),p=n(97),d=n(210),f=n(54),h=n(104),m=n(50),g=n(36),v=function(){function e(){this.touch()}return e.prototype.timestamp=function(){return this._timestamp},e.prototype.touch=function(){this._timestamp=performance.now(),this.reset()},e.prototype.reset=function(){this._bounding_box=void 0,this._core_geometries=void 0,this._core_objects=void 0},e.prototype.clone=function(){var t=new e;if(this._objects){for(var n=[],r=0,o=this._objects;r<o.length;r++){var i=o[r];n.push(d.CoreObject.clone(i))}t.set_objects(n)}return t},e.prototype.set_objects=function(e){this._objects=e,this.touch()},e.prototype.objects=function(){return this._objects},e.prototype.core_objects=function(){return this._core_objects=this._core_objects||this._create_core_objects()},e.prototype._create_core_objects=function(){var e=[];if(this._objects)for(var t=function(t){n._objects[t].traverse((function(n){var r=new d.CoreObject(n,t);e.push(r)}))},n=this,r=0;r<this._objects.length;r++)t(r);return e},e.prototype.geometries=function(){for(var e=[],t=0,n=this.core_objects();t<n.length;t++){var r=n[t].object().geometry;r&&e.push(r)}return e},e.prototype.core_geometries=function(){return this._core_geometries=this._core_geometries||this.create_core_geometries()},e.prototype.create_core_geometries=function(){for(var e=[],t=0,n=this.geometries();t<n.length;t++){var r=n[t];e.push(new f.CoreGeometry(r))}return e},e.prototype.__geometry_from_object=function(e,t){if(t.geometry)return e.push(t.geometry)},e.geometry_from_object=function(e){return e.isMesh||e.isLine||e.isPoints?e.geometry:null},e.prototype.faces=function(){return u.default(this.core_geometries().map((function(e){return e.faces()})))},e.prototype.points=function(){return u.default(this.core_geometries().map((function(e){return e.points()})))},e.prototype.points_count=function(){return _.default(this.core_geometries().map((function(e){return e.points_count()})))},e.prototype.points_from_group=function(e){if(e){var t=m.CoreString.indices(e),n=this.points();return t.map((function(e){return n[e]}))}return this.points()},e.from_objects=function(t){var n=new e;return n.set_objects(t),n},e.prototype.objects_from_group=function(e){return this.core_objects_from_group(e).map((function(e){return e.object()}))},e.prototype.core_objects_from_group=function(e){if(""!==(e=s.default(e))){var t=parseInt(e);return a.default(t)?this.core_objects().filter((function(t){return m.CoreString.match_mask(e,t.name())})):i.default([this.core_objects()[t]])}return this.core_objects()},e.prototype.bounding_box=function(){return this._bounding_box=this._bounding_box||this._compute_bounding_box()},e.prototype.center=function(){var e=new l.Vector3;return this.bounding_box().getCenter(e),e},e.prototype.size=function(){var e=new l.Vector3;return this.bounding_box().getSize(e),e},e.prototype._compute_bounding_box=function(){var e=new p.Box3;if(this._objects)for(var t=0,n=this._objects;t<n.length;t++){var r=n[t];e.expandByObject(r)}return e},e.prototype.compute_vertex_normals=function(){for(var e=0,t=this.core_objects();e<t.length;e++){t[e].compute_vertex_normals()}},e.prototype.has_attrib=function(e){var t;return null!=(t=this.core_geometries()[0])&&t.has_attrib(e)},e.prototype.attrib_type=function(e){var t=this.core_geometries()[0];return null!=t?t.attrib_type(e):null},e.prototype.rename_attrib=function(t,n,r){switch(r){case g.CoreConstant.ATTRIB_CLASS.VERTEX:if(this.has_attrib(t)&&this._objects)for(var o=0,i=this._objects;o<i.length;o++){i[o].traverse((function(r){var o=e.geometry_from_object(r);o&&new f.CoreGeometry(o).rename_attribute(t,n)}))}break;case g.CoreConstant.ATTRIB_CLASS.OBJECT:if(this.has_attrib(t)&&this._objects)for(var a=0,s=this._objects;a<s.length;a++){s[a].traverse((function(e){new d.CoreObject(e,0).rename_attribute(t,n)}))}}},e.prototype.attrib_names=function(){var e;return null!=(e=this.core_geometries()[0])?e.attrib_names():[]},e.prototype.object_attrib_names=function(){var e;return null!=(e=this.core_objects()[0])?e.attrib_names():[]},e.prototype.attrib_names_matching_mask=function(e){for(var t=m.CoreString.attrib_names(e),n=[],r=0,i=this.attrib_names();r<i.length;r++)for(var a=i[r],s=0,u=t;s<u.length;s++){var _=u[s];m.CoreString.match_mask(a,_)&&n.push(a)}return o.default(n)},e.prototype.attrib_sizes=function(){var e;return null!=(e=this.core_geometries()[0])?e.attrib_sizes():{}},e.prototype.attrib_size=function(e){var t;return null!=(t=this.core_geometries()[0])?t.attrib_size(e):0},e.prototype.add_numeric_vertex_attrib=function(e,t,n){null==n&&(n=h.CoreAttribute.default_value(t));for(var r=0,o=this.core_geometries();r<o.length;r++){o[r].add_numeric_attrib(e,t,n)}},e.prototype.add_numeric_object_attrib=function(e,t,n){null==n&&(n=h.CoreAttribute.default_value(t));for(var r=0,o=this.core_objects();r<o.length;r++){o[r].add_numeric_attrib(e,n)}},e.clone=function(e){var t=new c.Group;return e.children.forEach((function(e){var n=d.CoreObject.clone(e);t.add(n)})),t},e}();t.CoreGroup=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(37),a=n(4),s=n(6),u=n(104),_=n(298),l="position",c="normal";!function(e){e.x="x",e.y="y",e.z="z",e.w="w",e.r="r",e.g="g",e.b="b"}(r||(r={}));var p={x:0,y:1,z:2,w:3,r:0,g:1,b:2},d=function(e){function t(t,n){var r=e.call(this,n)||this;return r._core_geometry=t,r._geometry=r._core_geometry.geometry(),r}return o.__extends(t,e),t.prototype.geometry_wrapper=function(){return this._core_geometry},t.prototype.geometry=function(){return this._geometry=this._geometry||this._core_geometry.geometry()},t.prototype.attrib_size=function(e){return e=u.CoreAttribute.remap_name(e),this._geometry.getAttribute(e).itemSize},t.prototype.has_attrib=function(e){var t=u.CoreAttribute.remap_name(e);return this._core_geometry.has_attrib(t)},t.prototype.attrib_value=function(e){if("ptnum"===e)return this.index;var t=null,n=null;"."===e[e.length-2]&&(t=e[e.length-1],n=p[t],e=e.substring(0,e.length-2));var r=u.CoreAttribute.remap_name(e),o=this._geometry.getAttribute(r);if(!o){var _="attrib "+e+" not found. availables are: "+Object.keys(this._geometry.attributes||{}).join(",");throw console.warn(_),_}var l=o.array;if(this._core_geometry.is_attrib_indexed(r)){var c=this.attrib_value_index(r);return this._core_geometry.user_data_attrib(r)[c]}var d=o.itemSize,f=this._index*d;if(null==n)switch(d){case 1:return l[f];case 2:return new s.Vector2(l[f+0],l[f+1]);case 3:return new a.Vector3(l[f+0],l[f+1],l[f+2]);case 4:return new i.Vector4(l[f+0],l[f+1],l[f+2],l[f+3]);default:throw"size not valid ("+d+")"}else switch(d){case 1:return l[f];default:return l[f+n]}},t.prototype.attrib_value_index=function(e){return this._core_geometry.is_attrib_indexed(e)?this._geometry.getAttribute(e).array[this._index]:-1},t.prototype.position=function(){var e=this._geometry.getAttribute(l).array;return this._position=this._position||new a.Vector3,this._position.fromArray(e,3*this._index)},t.prototype.set_position=function(e){this.set_attrib_value_vector3(l,e)},t.prototype.normal=function(){var e=this._geometry.getAttribute(c).array;return this._normal=this._normal||new a.Vector3,this._normal.fromArray(e,3*this._index)},t.prototype.set_normal=function(e){return this.set_attrib_value_vector3(c,e)},t.prototype.set_attrib_value=function(e,t){if(null!=t){if(null==e)throw"Point.set_attrib_value requires a name";var n=this._geometry.getAttribute(e),r=n.array,o=n.itemSize;switch(o){case 1:r[this._index]=t;break;case 2:var i=t;r[2*this._index+0]=i.x,r[2*this._index+1]=i.y;break;case 3:if(null!=t.r){var a=t;r[3*this._index+0]=a.r,r[3*this._index+1]=a.g,r[3*this._index+2]=a.b}else{var s=t;r[3*this._index+0]=s.x,r[3*this._index+1]=s.y,r[3*this._index+2]=s.z}break;default:throw console.warn("Point.set_attrib_value does not yet allow attrib size "+o),"attrib size "+o+" not implemented"}}},t.prototype.set_attrib_value_vector3=function(e,t){if(null!=t){if(null==e)throw"Point.set_attrib_value requires a name";var n=this._geometry.getAttribute(e).array,r=3*this._index;n[r]=t.x,n[r+1]=t.y,n[r+2]=t.z}},t.prototype.set_attrib_index=function(e,t){return this._geometry.getAttribute(e).array[this._index]=t},t}(_.CoreEntity);t.CorePoint=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._index=e}return Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e}();t.CoreEntity=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e){void 0===e&&(e={}),this._array_index=0,this._count=0,this._current_count_index=0,this._resolve=null,this._max_time_per_chunk=e.max_time_per_chunk||10,this._check_every_interations=e.check_every_interations||100}return e.prototype.start_with_count=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){if(this._count=e,this._current_count_index=0,this._iteratee_method_count=t,this._bound_next_with_count=this.next_with_count.bind(this),this._resolve)throw"an iterator cannot be started twice";return[2,new Promise((function(e,t){n._resolve=e,n.next_with_count()}))]}))}))},e.prototype.next_with_count=function(){var e=performance.now();if(this._iteratee_method_count&&this._bound_next_with_count)for(;this._current_count_index<this._count;)if(this._iteratee_method_count(this._current_count_index),this._current_count_index++,this._current_count_index%this._check_every_interations==0&&performance.now()-e>this._max_time_per_chunk){setTimeout(this._bound_next_with_count,1);break}this._current_count_index>=this._count&&this._resolve&&this._resolve()},e.prototype.start_with_array=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){if(this._array=e,this._array_index=0,this._iteratee_method_array=t,this._bound_next_with_array=this.next_with_array.bind(this),this._resolve)throw"an iterator cannot be started twice";return[2,new Promise((function(e,t){n._resolve=e,n.next_with_array()}))]}))}))},e.prototype.next_with_array=function(){var e=performance.now();if(this._iteratee_method_array&&this._bound_next_with_array&&this._array)for(;this._current_array_element=this._array[this._array_index];)if(this._iteratee_method_array(this._current_array_element,this._array_index),this._array_index++,this._array_index%this._check_every_interations==0&&performance.now()-e>this._max_time_per_chunk){setTimeout(this._bound_next_with_array,1);break}void 0===this._current_array_element&&this._resolve&&this._resolve()},e}();t.CoreIterator=o},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96),o=n(6),i=n(10),a=n(12),s=function(){function e(){}return e.positions=function(e,t,n){void 0===n&&(n=360);for(var i=r.CoreMath.degrees_to_radians(n)/t,a=[],s=0;s<t;s++){var u=i*s,_=e*Math.cos(u),l=e*Math.sin(u);a.push(new o.Vector2(_,l))}return a},e.create=function(e,t,n){void 0===n&&(n=360);for(var r,o=this.positions(e,t,n),s=[],u=[],_=0;_<o.length;_++)r=o[_],s.push(r.x),s.push(r.y),s.push(0),_>0&&(u.push(_-1),u.push(_));u.push(t-1),u.push(0);var l=new a.BufferGeometry;return l.setAttribute("position",new i.Float32BufferAttribute(s,3)),l.setIndex(u),l},e}();t.CoreGeometryUtilCircle=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(29)),i=r.__importDefault(n(102)),a=r.__importDefault(n(51)),s=r.__importDefault(n(74)),u=n(114),_=n(10),l={BufferGeometry:n(12).BufferGeometry,Float32BufferAttribute:_.Float32BufferAttribute,Points:u.Points},c=r.__importDefault(n(352)),p=n(50),d=n(54),f=n(36),h=n(803),m=n(104),g=function(){function e(e){void 0===e&&(e={}),this._attribute_datas_by_name={},this._options={},this._options.data_keys_prefix=e.data_keys_prefix,this._options.skip_entries=e.skip_entries,this._options.do_convert=e.do_convert||!1,this._options.convert_to_numeric=e.convert_to_numeric}return e.prototype.load=function(e,t,n,r){var o=this;c.default.get(e).then((function(e){o._json=e.data,null!=o._options.data_keys_prefix&&""!=o._options.data_keys_prefix&&(o._json=o.get_prefixed_json(o._json,o._options.data_keys_prefix.split(".")));var n=o.create_object();t(n)})).catch((function(e){console.log("error",e),r(e)}))},e.prototype.get_prefixed_json=function(e,t){if(0==t.length)return e;var n=t.shift();return n?this.get_prefixed_json(e[n],t):[]},e.prototype.set_json=function(e){return this._json=e},e.prototype.create_object=function(){var e=new l.BufferGeometry,t=new d.CoreGeometry(e);if(null!=this._json){var n=this._json.length;t.init_position_attribute(n),this._find_attributes();for(var r=p.CoreString.attrib_names(this._options.convert_to_numeric||""),o=0,i=Object.keys(this._attribute_datas_by_name);o<i.length;o++){var u=i[o],_=s.default(this._attribute_values_for_name(u)),c=this._attribute_datas_by_name[u],h=c.size();if(c.type()===f.CoreConstant.ATTRIB_TYPE.STRING)if(this._options.do_convert&&p.CoreString.matches_one_mask(u,r)){var g=_.map((function(e){return a.default(e)?parseFloat(e)||0:e}));e.setAttribute(u,new l.Float32BufferAttribute(g,h))}else{var v=m.CoreAttribute.array_to_indexed_arrays(_);t.set_indexed_attribute(u,v.values,v.indices)}else{g=_;e.setAttribute(u,new l.Float32BufferAttribute(g,h))}}}return new l.Points(e,f.CoreConstant.MATERIALS[l.Points.name])},e.prototype._find_attributes=function(){var e,t=p.CoreString.attrib_names(this._options.skip_entries||"");if(this._json&&null!=(e=this._json[0]))for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],i=e[o];if(this._value_has_subentries(i))for(var a=0,s=Object.keys(i);a<s.length;a++){var u=[o,s[a]].join(":"),_=i[o];p.CoreString.matches_one_mask(u,t)||(this._attribute_datas_by_name[u]=h.CoreAttributeData.from_value(_))}else p.CoreString.matches_one_mask(o,t)||(this._attribute_datas_by_name[o]=h.CoreAttributeData.from_value(i))}},e.prototype._attribute_values_for_name=function(e){var t=this;return this._json?this._json.map((function(n){var r=e.split(":")[0],o=n[r];return t._value_has_subentries(o)?o[e.substring(r.length+1)]||0:o||0})):[]},e.prototype._value_has_subentries=function(e){return i.default(e)&&!o.default(e)},e}();t.JsonDataLoader=g},function(e,t,n){"use strict";n.r(t),n.d(t,"DRACOLoader",(function(){return s}));var r=n(10),o=n(12),i=n(44),a=n(28),s=function(e){a.a.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,n,r){var o=new i.a(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),"use-credentials"===this.crossOrigin&&o.setWithCredentials(!0),o.load(e,e=>{var n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)},decodeDracoFile:function(e,t,n,r){var o={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,o).then(t)},decodeGeometry:function(e,t){for(var n in t.attributeTypes){var r=t.attributeTypes[n];void 0!==r.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=r.name)}var o,i=JSON.stringify(t);if(s.taskCache.has(e)){var a=s.taskCache.get(e);if(a.key===i)return a.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u=this.workerNextTaskID++,_=e.byteLength,l=this._getWorker(u,_).then(n=>(o=n,new Promise((n,r)=>{o._callbacks[u]={resolve:n,reject:r},o.postMessage({type:"decode",id:u,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return l.finally(()=>{o&&u&&this._releaseTask(o,u)}),s.taskCache.set(e,{key:i,promise:l}),l},_createGeometry:function(e){var t=new o.BufferGeometry;e.index&&t.setIndex(new r.BufferAttribute(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n],a=i.name,s=i.array,u=i.itemSize;t.setAttribute(a,new r.BufferAttribute(s,u))}return t},_loadLibrary:function(e,t){var n=new i.a(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),new Promise((t,r)=>{n.load(e,t,void 0,r)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var r=s.DRACOWorker.toString(),o=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{var n;this.workerPool.length<this.workerLimit?((n=new Worker(this.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(n)):this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(n=this.workerPool[this.workerPool.length-1])._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),s.DRACOWorker=function(){var e,t;function n(e,t,n,r,o,i){var a,s,u=i.num_components(),_=n.num_points()*u;switch(o){case Float32Array:a=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,i,a),s=new Float32Array(_);break;case Int8Array:a=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,i,a),s=new Int8Array(_);break;case Int16Array:a=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,i,a),s=new Int16Array(_);break;case Int32Array:a=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,i,a),s=new Int32Array(_);break;case Uint8Array:a=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,i,a),s=new Uint8Array(_);break;case Uint16Array:a=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,i,a),s=new Uint16Array(_);break;case Uint32Array:a=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,i,a),s=new Uint32Array(_);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var l=0;l<_;l++)s[l]=a.GetValue(l);return e.destroy(a),{name:r,array:s,itemSize:u}}onmessage=function(r){var o=r.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var i=o.buffer,a=o.taskConfig;t.then(e=>{var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(i),i.byteLength);try{var u=function(e,t,r,o){var i,a,s=o.attributeIDs,u=o.attributeTypes,_=t.GetEncodedGeometryType(r);if(_===e.TRIANGULAR_MESH)i=new e.Mesh,a=t.DecodeBufferToMesh(r,i);else{if(_!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");i=new e.PointCloud,a=t.DecodeBufferToPointCloud(r,i)}if(!a.ok()||0===i.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var l={index:null,attributes:[]};for(var c in s){var p,d,f=self[u[c]];if(o.useUniqueIDs)d=s[c],p=t.GetAttributeByUniqueId(i,d);else{if(-1===(d=t.GetAttributeId(i,e[s[c]])))continue;p=t.GetAttribute(i,d)}l.attributes.push(n(e,t,i,c,f,p))}if(_===e.TRIANGULAR_MESH){for(var h=i.num_faces(),m=new Uint32Array(3*h),g=new e.DracoInt32Array,v=0;v<h;++v){t.GetFaceFromMesh(i,v,g);for(var y=0;y<3;++y)m[3*v+y]=g.GetValue(y)}l.index={array:m,itemSize:1},e.destroy(g)}return e.destroy(i),l}(t,r,s,a),_=u.attributes.map(e=>e.array.buffer);u.index&&_.push(u.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:u},_)}catch(e){console.error(e),self.postMessage({type:"error",id:o.id,error:e.message})}finally{t.destroy(s),t.destroy(r)}})}}},s.taskCache=new WeakMap,s.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},s.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},s.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},s.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(10),i=n(54),a=r.__importDefault(n(74)),s=r.__importDefault(n(347)),u=r.__importDefault(n(283)),_=function(){function e(e,t,n){this.geometry=e,this.geometry1=t,this.geometry0=n}return e.prototype.process=function(){var e=this,t=new i.CoreGeometry(this.geometry0),n=new i.CoreGeometry(this.geometry1),r=t.segments(),_=n.segments();if(0!==r.length&&0!==_.length){var l=r.length<_.length?[t,n]:[n,t],c=l[0],p=l[1],d=c.segments(),f=p.segments(),h=c.points(),m=p.points(),g=h.length,v=u.default(h,m),y=[];d.forEach((function(e,t){var n=f[t];y.push(e[0]),y.push(e[1]),y.push(n[0]+g),y.push(e[1]),y.push(n[1]+g),y.push(n[0]+g)})),s.default(c.attrib_names(),p.attrib_names()).forEach((function(t){var n=c.attrib_size(t),r=v.map((function(e){return e.attrib_value(t)}));n>1&&(r=a.default(r.map((function(e){return e.toArray()})))),e.geometry.setAttribute(t,new o.Float32BufferAttribute(r,n))})),this.geometry.setIndex(y),this.geometry.computeVertexNormals()}},e}();t.CoreGeometryOperationSkin=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(849),o=n(174),i=n(850),a=n(851),s=n(852),u=n(110),_=n(180),l=n(105),c=function(){function e(){}return e.dispatch_node=function(e){return new r.NodeJsonImporter(e)},e.dispatch_param=function(e){return e instanceof u.TypedMultipleParam?new i.ParamMultipleJsonImporter(e):e instanceof _.StringParam?new a.ParamStringJsonImporter(e):e instanceof l.RampParam?new s.ParamRampJsonImporter(e):new o.ParamJsonImporter(e)},e}();t.JsonImportDispatcher=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1341),o=n(237),i=n(1342),a=n(1343),s=n(1344),u=n(1345),_=n(1346),l=n(110),c=n(150),p=n(234),d=n(180),f=n(105),h=function(){function e(){}return e.dispatch_node=function(e){return new r.NodeCodeExporter(e)},e.dispatch_param=function(e){return e instanceof l.TypedMultipleParam?new i.ParamMultipleCodeExporter(e):e instanceof c.TypedNumericParam?new a.ParamNumericCodeExporter(e):e instanceof p.OperatorPathParam?new s.ParamOperatorPathCodeExporter(e):e instanceof d.StringParam?new u.ParamStringCodeExporter(e):e instanceof f.RampParam?new _.ParamRampCodeExporter(e):new o.ParamCodeExporter(e)},e}();t.CodeExporterDispatcher=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(47)),i=n(150),a=n(23),s=n(50),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.type=function(){return a.ParamType.INTEGER},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return this.default_value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return this.raw_input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return e==t},t.are_values_equal=function(e,t){return e==t},t.convert=function(e){if(o.default(e))return Math.round(e);if(s.CoreString.is_number(e)){var t=parseInt(e);if(o.default(t))return t}return null},t.prototype.convert=function(e){var n=t.convert(e);return n?this.options.ensure_in_range(n):n},t}(i.TypedNumericParam);t.IntegerParam=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(26),i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._position=e,this._value=t}return e.prototype.to_json=function(){return{position:this._position,value:this._value}},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.copy=function(e){this._position=e.position,this._value=e.value},e.prototype.clone=function(){var t=new e;return t.copy(this),t},e.prototype.is_equal=function(e){return this._position==e.position&&this._value==e.value},e.prototype.is_equal_json=function(e){return this._position==e.position&&this._value==e.value},e.prototype.from_json=function(e){this._position=e.position,this._value=e.value},e.are_equal_json=function(e,t){return e.position==t.position&&e.value==t.value},e.from_json=function(t){return new e(t.position,t.value)},e}();t.RampPoint=i,function(e){e.LINEAR="linear"}(r=t.RampInterpolation||(t.RampInterpolation={}));var a=function(){function e(e,t){void 0===e&&(e=r.LINEAR),void 0===t&&(t=[]),this._interpolation=e,this._points=t,this._uuid=o._Math.generateUUID()}return Object.defineProperty(e.prototype,"uuid",{get:function(){return this._uuid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interpolation",{get:function(){return this._interpolation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this._points},enumerable:!0,configurable:!0}),e.from_json=function(t){for(var n=[],r=0,o=t.points;r<o.length;r++){var a=o[r];n.push(i.from_json(a))}return new e(t.interpolation,n)},e.prototype.to_json=function(){return{interpolation:this._interpolation,points:this._points.map((function(e){return e.to_json()}))}},e.prototype.clone=function(){var t=new e;return t.copy(this),t},e.prototype.copy=function(e){this._interpolation=e.interpolation;for(var t=0,n=0,r=e.points;n<r.length;n++){var o=r[n],i=this._points[t];i?i.copy(o):this._points.push(o.clone()),t+=1}},e.prototype.is_equal=function(e){if(this._interpolation!=e.interpolation)return!1;var t=e.points;if(this._points.length!=t.length)return!1;for(var n=0,r=0,o=this._points;r<o.length;r++){var i=o[r],a=t[n];if(!i.is_equal(a))return!1;n+=1}return!0},e.prototype.is_equal_json=function(e){if(this._interpolation!=e.interpolation)return!1;if(this._points.length!=e.points.length)return!1;for(var t=0,n=0,r=this._points;n<r.length;n++){var o=r[n],i=e.points[t];if(!o.is_equal_json(i))return!1;t+=1}return!0},e.are_json_equal=function(e,t){if(e.interpolation!=t.interpolation)return!1;if(e.points.length!=t.points.length)return!1;for(var n=0,r=0,o=e.points;r<o.length;r++){var a=o[r],s=t.points[n];if(!i.are_equal_json(a,s))return!1;n+=1}return!0},e.prototype.from_json=function(e){this._interpolation=e.interpolation;for(var t=0,n=0,r=e.points;n<r.length;n++){var o=r[n],a=this._points[t];a?a.from_json(o):this._points.push(i.from_json(o)),t+=1}},e}();t.RampValue=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FRAME_RANGE_UPDATED="scene_frame_range_updated",e.FRAME_UPDATED="scene_frame_updated",e.PLAY_STATE_UPDATED="scene_play_state_updated"}(t.SceneEvent||(t.SceneEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(41),i=n(6),a=n(207),s=n(718),u=n(719),_=n(124),l=n(720),c=n(236),p=n(724),d=n(82),f=n(23),h=n(111),m=n(76),g=n(291),v=n(205),y=new Map([[d.ShaderName.VERTEX,"#include <common>"],[d.ShaderName.FRAGMENT,"#include <common>"]]),b=new Map([[d.ShaderName.VERTEX,"#include <color_vertex>"],[d.ShaderName.FRAGMENT,"vec4 diffuseColor = vec4( diffuse, opacity );"]]),w=new Map([[d.ShaderName.VERTEX,["#include <begin_vertex>","#include <beginnormal_vertex>"]],[d.ShaderName.FRAGMENT,[]]]),x=function(e){function t(t){var n=e.call(this)||this;return n._gl_parent_node=t,n._shaders_by_name=new Map,n._lines=new Map,n._root_nodes=[],n._leaf_nodes=[],n._frame_dependent=!1,n._resolution_dependent=!1,n}return r.__extends(t,e),t.prototype.compile=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2]}))}))},t.prototype._template_shader_for_shader_name=function(e){var t,n;switch(e){case d.ShaderName.VERTEX:return null===(t=this._template_shader)||void 0===t?void 0:t.vertexShader;case d.ShaderName.FRAGMENT:return null===(n=this._template_shader)||void 0===n?void 0:n.fragmentShader}},Object.defineProperty(t.prototype,"globals_handler",{get:function(){return this._gl_parent_node.assembler_controller.globals_handler},enumerable:!0,configurable:!0}),t.prototype.compile_allowed=function(){return null!=this._gl_parent_node.assembler_controller.globals_handler},t.prototype.shaders_by_name=function(){return this._shaders_by_name},t.prototype._create_material=function(){},t.prototype._build_lines=function(){for(var e=0,t=this.shader_names;e<t.length;e++){var n=t[e],r=this._template_shader_for_shader_name(n);r&&this._replace_template(r,n)}},t.prototype.set_root_nodes=function(e){this._root_nodes=e},Object.defineProperty(t.prototype,"_template_shader",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.build_uniforms=function(e){for(var t=e?o.UniformsUtils.clone(e):{},n=0,r=this.param_configs();n<r.length;n++){var a=r[n];t[a.uniform_name]=a.uniform}return this.frame_dependent()&&(t.frame={value:this._gl_parent_node.scene.frame}),this.resolution_dependent()&&(t.resolution={value:new i.Vector2(1e3,1e3)}),t},t.prototype.root_nodes_by_shader_name=function(e){for(var t=[],n=0,r=this._root_nodes;n<r.length;n++){var o=r[n];switch(o.type){case"output":t.push(o)}}return t},t.prototype.leaf_nodes_by_shader_name=function(e){for(var t=[],n=0,r=this._leaf_nodes;n<r.length;n++){var o=r[n];switch(o.type){case g.GlobalsGlNode.type():t.push(o);break;case v.AttributeGlNode.type():}}return t},t.prototype.set_node_lines_globals=function(e,t){},t.prototype.set_node_lines_output=function(e,t){},t.prototype.set_node_lines_attribute=function(e,t){},Object.defineProperty(t.prototype,"code_builder",{get:function(){return this._code_builder=this._code_builder||new l.CodeBuilder(this,this._gl_parent_node)},enumerable:!0,configurable:!0}),t.prototype.build_code_from_nodes=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.code_builder.build_from_nodes(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.allow_new_param_configs=function(){this.code_builder.allow_new_param_configs()},t.prototype.disallow_new_param_configs=function(){this.code_builder.disallow_new_param_configs()},t.prototype.builder_param_configs=function(){return this.code_builder.param_configs()},t.prototype.builder_lines=function(e,t){return this.code_builder.lines(e,t)},t.prototype.all_builder_lines=function(){return this.code_builder.all_lines()},t.prototype.param_configs=function(){return(this._param_config_owner||this.code_builder).param_configs()},t.prototype.set_param_configs_owner=function(e){this._param_config_owner=e,this._param_config_owner?this.code_builder.disallow_new_param_configs():this.code_builder.allow_new_param_configs()},t.add_output_params=function(e){e.params.add_param(f.ParamType.VECTOR3,"position",[0,0,0],{hidden:!0}),e.params.add_param(f.ParamType.VECTOR3,"normal",[0,0,0],{hidden:!0}),e.params.add_param(f.ParamType.COLOR,"color",[1,1,1],{hidden:!0}),e.params.add_param(f.ParamType.FLOAT,"alpha",1,{hidden:!0}),e.params.add_param(f.ParamType.VECTOR2,"uv",[0,0],{hidden:!0})},t.prototype.add_output_params=function(e){t.add_output_params(e)},t.create_globals_node_output_connections=function(){return[new h.TypedNamedConnectionPoint("position",m.ConnectionPointType.VEC3),new h.TypedNamedConnectionPoint("normal",m.ConnectionPointType.VEC3),new h.TypedNamedConnectionPoint("color",m.ConnectionPointType.VEC3),new h.TypedNamedConnectionPoint("uv",m.ConnectionPointType.VEC2),new h.TypedNamedConnectionPoint("gl_FragCoord",m.ConnectionPointType.VEC4),new h.TypedNamedConnectionPoint("resolution",m.ConnectionPointType.VEC2),new h.TypedNamedConnectionPoint("frame",m.ConnectionPointType.FLOAT)]},t.prototype.create_globals_node_output_connections=function(){return t.create_globals_node_output_connections()},t.prototype.add_globals_params=function(e){e.io.outputs.set_named_output_connection_points(this.create_globals_node_output_connections())},t.prototype.allow_attribute_exports=function(){return!1},t.prototype.reset_configs=function(){this._reset_shader_configs(),this._reset_variable_configs(),this._reset_frame_dependency(),this._reset_resolution_dependency()},Object.defineProperty(t.prototype,"shader_configs",{get:function(){return this._shader_configs=this._shader_configs||this.create_shader_configs()},enumerable:!0,configurable:!0}),t.prototype.set_shader_configs=function(e){this._shader_configs=e},Object.defineProperty(t.prototype,"shader_names",{get:function(){var e;return(null===(e=this.shader_configs)||void 0===e?void 0:e.map((function(e){return e.name()})))||[]},enumerable:!0,configurable:!0}),t.prototype._reset_shader_configs=function(){this._shader_configs=void 0},t.prototype.create_shader_configs=function(){return[new s.ShaderConfig(d.ShaderName.VERTEX,["position","normal","uv"],[]),new s.ShaderConfig(d.ShaderName.FRAGMENT,["color","alpha"],[d.ShaderName.VERTEX])]},t.prototype.shader_config=function(e){var t;return null===(t=this.shader_configs)||void 0===t?void 0:t.filter((function(t){return t.name()==e}))[0]},t.prototype.variable_configs=function(){return this._variable_configs=this._variable_configs||this.create_variable_configs()},t.prototype.set_variable_configs=function(e){this._variable_configs=e},t.prototype.variable_config=function(e){return this.variable_configs().filter((function(t){return t.name()==e}))[0]},t.create_variable_configs=function(){return[new u.VariableConfig("position",{default_from_attribute:!0,prefix:"vec3 transformed = "}),new u.VariableConfig("normal",{default_from_attribute:!0,prefix:"vec3 objectNormal = "}),new u.VariableConfig("color",{prefix:"diffuseColor.xyz = "}),new u.VariableConfig("alpha",{prefix:"diffuseColor.a = "}),new u.VariableConfig("uv",{prefix:"vUv = ",if:c.GlobalsGeometryHandler.IF_RULE.uv})]},t.prototype.create_variable_configs=function(){return t.create_variable_configs()},t.prototype._reset_variable_configs=function(){this._variable_configs=void 0,this.variable_configs()},t.prototype.input_names_for_shader_name=function(e,t){var n;return(null===(n=this.shader_config(t))||void 0===n?void 0:n.input_names())||[]},t.prototype._reset_frame_dependency=function(){this._frame_dependent=!1},t.prototype.set_frame_dependent=function(){this._frame_dependent=!0},t.prototype.frame_dependent=function(){return this._frame_dependent},t.prototype._reset_resolution_dependency=function(){this._resolution_dependent=!1},t.prototype.set_resolution_dependent=function(){this._resolution_dependent=!0},t.prototype.resolution_dependent=function(){return this._resolution_dependent},t.prototype.insert_define_after=function(e){return y.get(e)},t.prototype.insert_body_after=function(e){return b.get(e)},t.prototype.lines_to_remove=function(e){return w.get(e)},t.prototype._replace_template=function(e,t){for(var n=this.builder_lines(t,a.LineType.FUNCTION_DECLARATION),r=this.builder_lines(t,a.LineType.DEFINE),o=this.builder_lines(t,a.LineType.BODY),i=e.split("\n"),s=this._gl_parent_node.scene,u=["#define FPS "+_.ThreeToGl.float(s.time_controller.fps),"#define TIME_INCREMENT (1.0/"+_.ThreeToGl.float(s.time_controller.fps)+")","#define FRAME_RANGE_START "+_.ThreeToGl.float(s.time_controller.frame_range[0]),"#define FRAME_RANGE_END "+_.ThreeToGl.float(s.time_controller.frame_range[1])],l=this.insert_define_after(t),c=this.insert_body_after(t),p=this.lines_to_remove(t),d=!1,f=!1,h=0,m=i;h<m.length;h++){var g=m[h];1==d&&(n&&this._insert_lines(u,n),r&&this._insert_lines(u,r),d=!1),1==f&&(o&&this._insert_lines(u,o),f=!1);var v=!1;if(p)for(var y=0,b=p;y<b.length;y++){var w=b[y];g.indexOf(w)>=0&&(v=!0)}v?(u.push("// removed:"),u.push("//"+g)):u.push(g),l&&g.indexOf(l)>=0&&(d=!0),c&&g.indexOf(c)>=0&&(f=!0)}this._lines.set(t,u)},t.prototype._insert_lines=function(e,t){if(t.length>0){for(var n=0;n<3;n++)e.push("");for(var r=0,o=t;r<o.length;r++){var i=o[r];e.push(i)}for(n=0;n<3;n++)e.push("")}},t.prototype.get_custom_materials=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,new Map]}))}))},t}(p.TypedAssembler);t.BaseGlShaderAssembler=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(85)),i=r.__importDefault(n(95)),a=n(140),s=n(82),u=function(){function e(e,t){this._assembler=e,this._gl_parent_node=t,this._leaves_graph_id=new Map,this._graph_ids_by_shader_name=new Map,this._outputs_by_graph_id=new Map,this._depth_by_graph_id=new Map,this._graph_id_by_depth=new Map,this._graph=this._gl_parent_node.scene.graph}return e.prototype.reset=function(){var e=this;this._leaves_graph_id.clear(),this._outputs_by_graph_id.clear(),this._depth_by_graph_id.clear(),this._graph_id_by_depth.clear(),this.shader_names().forEach((function(t){e._graph_ids_by_shader_name.set(t,new Map)}))},e.prototype.shader_names=function(){return this._assembler.shader_names},e.prototype.input_names_for_shader_name=function(e,t){return this._assembler.input_names_for_shader_name(e,t)},e.prototype.traverse=function(e){var t=this;this.reset();for(var n=0,r=this.shader_names();n<r.length;n++){var o=r[n];this._leaves_graph_id.set(o,new Map)}for(var i=0,s=this.shader_names();i<s.length;i++){o=s[i];this._shader_name=o;for(var u=0,_=e;u<_.length;u++){var l=_[u];this.find_leaves_from_root_node(l),this.set_nodes_depth()}}this._depth_by_graph_id.forEach((function(e,n){null!=e&&a.MapUtils.push_on_array_at_entry(t._graph_id_by_depth,e,n)}))},e.prototype.leaves_from_nodes=function(e){var t;this._shader_name=s.ShaderName.LEAVES_FROM_NODES_SHADER,this._graph_ids_by_shader_name.set(this._shader_name,new Map),this._leaves_graph_id.set(this._shader_name,new Map);for(var n=0,r=e;n<r.length;n++){var o=r[n];this.find_leaves(o)}var i=[];return null===(t=this._leaves_graph_id.get(this._shader_name))||void 0===t||t.forEach((function(e,t){i.push(t)})),this._graph.nodes_from_ids(i)},e.prototype.nodes_for_shader_name=function(e){var t=this,n=[];this._graph_id_by_depth.forEach((function(e,t){n.push(t)})),n.sort((function(e,t){return e-t}));var r=[];return n.forEach((function(n){var o=t._graph_id_by_depth.get(n);o&&o.forEach((function(n){var o;if(null===(o=t._graph_ids_by_shader_name.get(e))||void 0===o?void 0:o.get(n)){var i=t._graph.node_from_id(n);r.push(i)}}))})),r},e.prototype.sorted_nodes=function(){var e=this,t=[];this._graph_id_by_depth.forEach((function(e,n){t.push(n)})),t.sort((function(e,t){return e-t}));var n=[];return t.forEach((function(t){var r=e._graph_id_by_depth.get(t);if(r)for(var o=0,i=r;o<i.length;o++){var a=i[o],s=e._graph.node_from_id(a);s&&n.push(s)}})),n},e.prototype.find_leaves_from_root_node=function(e){var t,n=this;null===(t=this._graph_ids_by_shader_name.get(this._shader_name))||void 0===t||t.set(e.graph_node_id,!0);var r=this.input_names_for_shader_name(e,this._shader_name);if(r)for(var o=0,s=r;o<s.length;o++){var u=s[o],_=e.io.inputs.named_input(u);_&&(a.MapUtils.push_on_array_at_entry(this._outputs_by_graph_id,_.graph_node_id,e.graph_node_id),this.find_leaves(_))}this._outputs_by_graph_id.forEach((function(e,t){n._outputs_by_graph_id.set(t,i.default(e))}))},e.prototype.find_leaves=function(e){var t,n=this;null===(t=this._graph_ids_by_shader_name.get(this._shader_name))||void 0===t||t.set(e.graph_node_id,!0);var r=o.default(e.io.inputs.inputs()),s=i.default(r.map((function(e){return e.graph_node_id}))).map((function(e){return n._graph.node_from_id(e)}));if(s.length>0)for(var u=0,_=s;u<_.length;u++){var l=_[u];a.MapUtils.push_on_array_at_entry(this._outputs_by_graph_id,l.graph_node_id,e.graph_node_id),this.find_leaves(l)}else this._leaves_graph_id.get(this._shader_name).set(e.graph_node_id,!0)},e.prototype.set_nodes_depth=function(){var e=this;this._leaves_graph_id.forEach((function(t,n){t.forEach((function(t,n){e.set_node_depth(n)}))}))},e.prototype.set_node_depth=function(e,t){var n=this;void 0===t&&(t=0);var r=this._depth_by_graph_id.get(e);null!=r?this._depth_by_graph_id.set(e,Math.max(r,t)):this._depth_by_graph_id.set(e,t);var o=this._outputs_by_graph_id.get(e);o&&o.forEach((function(e){n.set_node_depth(e,t+1)}))},e}();t.TypedNodeTraverser=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._id=e.__next_id++}return e.prototype.id=function(){return this._id},e.prototype.handle_globals_node=function(e,t,n){},e.__next_id=0,e}();t.GlobalsBaseController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.find_output_nodes=function(e){return e.nodes_by_type("output")},e.find_attribute_export_nodes=function(e){return e.nodes_by_type("attribute").filter((function(e){return e.is_exporting}))},e}();t.GlNodeFinder=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(956)),i=r.__importDefault(n(347)),a=r.__importDefault(n(337)),s=n(6),u=n(63),_=n(165),l=n(52),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.create_node=function(t){return e.prototype.create_node.call(this,t)},t.prototype.children=function(){return e.prototype.children.call(this)},t.prototype.nodes_by_type=function(t){return e.prototype.nodes_by_type.call(this,t)},t}(u.TypedNode);t.AssemblerControllerNode=c;var p=function(){function e(e,t){this.node=e,this._compile_required=!0,this._shaders_by_name=new Map,this._deleted_params_data=new Map,this._new_params=[],this.node.lifecycle.add_create_hook(this.on_create),this._assembler=new t(this.node)}return e.prototype.set_assembler_globals_handler=function(e){(this._globals_handler?this._globals_handler.id():null)!=(e?e.id():null)&&(this._globals_handler=e,this.set_compilation_required_and_dirty(),this._assembler.reset_configs())},Object.defineProperty(e.prototype,"assembler",{get:function(){return this._assembler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shaders_by_name",{get:function(){return this._shaders_by_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globals_handler",{get:function(){return this._globals_handler},enumerable:!0,configurable:!0}),e.prototype.add_output_params=function(e){this._assembler.add_output_params(e)},e.prototype.add_globals_params=function(e){this._assembler.add_globals_params(e)},e.prototype.allow_attribute_exports=function(){return this._assembler.allow_attribute_exports()},e.prototype.on_create=function(){var e=this.node.create_node("globals"),t=this.node.create_node("output");e.ui_data.set_position(new s.Vector2(-200,0)),t.ui_data.set_position(new s.Vector2(200,0))},e.prototype.set_compilation_required=function(){this._compile_required=!0},e.prototype.set_compilation_required_and_dirty=function(e){this.set_compilation_required(),this.node.set_dirty(e)},e.prototype.compile_required=function(){return this._compile_required},e.prototype.post_compile=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this._compile_required?(this.create_spare_parameters(),this._compile_required=!1,[2]):[2]}))}))},e.prototype.assign_uniform_values=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!this._assembler)return[3,4];e=0,t=this._assembler.param_configs(),n.label=1;case 1:return e<t.length?[4,t[e].set_uniform_value(this.node)]:[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},e.prototype.create_spare_parameters=function(){var e=this,t=this.node.params.spare_names,n=this._assembler.param_configs(),r=n.map((function(e){return e.name})),s=a.default(r,t),u=a.default(t,r);this._new_params=[];var c=this.node.params.names,p=i.default(s,c);if(p.length>0){var d=this.node.full_path()+" attempts to create spare params called '"+p.join(", ")+"' with same name as params";console.warn(d),this.node.states.error.set(d)}u.forEach((function(t){var n=e.node.params.get(t);if(n){var r=_.JsonExportDispatcher.dispatch_param(n);if(r.required){var o=r.data();e._deleted_params_data.set(n.name,o)}}e.node.params.delete_param(t)}));for(var f=0,h=n;f<h.length;f++){var m=h[f];if(s.indexOf(m.name)>=0){var g=o.default(m.param_options,{spare:!0,cook:!0}),v=this.node.add_param(m.type,m.name,m.default_value,g);if(v){this._deleted_params_data.get(v.name);this._new_params.push(v)}}}(s.length>0||u.length>0)&&(this.node.params.post_create_spare_params(),this.node.emit(l.NodeEvent.PARAMS_UPDATED))},e}();t.GlAssemblerController=p},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(360),i=n(13),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache=a.ParamConfig.STRING("",{hidden:!0}),t.reset=a.ParamConfig.BUTTON(null,{callback:function(e,t){u.PARAM_CALLBACK_reset(e,t)}}),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"cache"},t.displayed_input_names=function(){return["geometry to cache"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(0,1)},t.prototype.cook=function(e){var t=""==this.pv.cache||null==this.pv.cache,n=e[0];if(t&&n){for(var r=[],i=0,a=n.objects();i<a.length;i++){var s=a[i];r.push(s.toJSON())}this.set_core_group(n),this.p.cache.set(JSON.stringify(r))}else if(this.pv.cache){for(var u=new o.ObjectLoader,_=[],l=0,c=JSON.parse(this.pv.cache);l<c.length;l++){r=c[l];var p=u.parse(r);_.push(p)}this.set_objects(_)}else this.set_objects([])},t.PARAM_CALLBACK_reset=function(e,t){e.param_callback_PARAM_CALLBACK_reset()},t.prototype.param_callback_PARAM_CALLBACK_reset=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.p.cache.set(""),this.request_container(),[2]}))}))},t}(i.TypedSopNode);t.CacheSopNode=u},,,,,function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(862),o=n(381);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1319);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/DropDownMenu.vue",t.default=s.exports},function(e,t,n){"use strict";n.r(t);var r=n(875),o=n(387);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1324);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/dialogs/Modal.vue",t.default=s.exports},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(19);t.SetupMultipleParamCommon=function(e){var t=o.computed((function(){var t;return(null===(t=e.components)||void 0===t?void 0:t.map((function(e){return r.StoreController.engine.json_param(e)})))||[]})),n=o.computed((function(){var e;return(e={})["small-"+12/t.value.length]=!0,e}));return{json_components:t,cell_class_object:n}}},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(378),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(1318)),i=r.__importDefault(n(1323)),a=r.__importDefault(n(1328)),s=r.__importDefault(n(1331)),u=r.__importDefault(n(1334)),_=r.__importDefault(n(1490)),l=r.__importDefault(n(1493)),c=r.__importDefault(n(1496)),p=r.__importDefault(n(1501)),d=r.__importDefault(n(1504)),f=r.__importDefault(n(1509)),h=r.__importDefault(n(1512)),m=n(20),g=n(856),v=r.__importDefault(n(127));v.default.component("MultiplePanel",u.default);var y=r.__importDefault(n(356));v.default.component("DropDownMenu",y.default);var b=r.__importDefault(n(1022));v.default.component("NodeTree",b.default);var w=n(19);t.default=w.defineComponent({name:"editor",components:{DialogAlert:i.default,DialogConfirm:a.default,DialogPrompt:s.default,NavigationBar:_.default,MultiplePanel:u.default,NodeContextMenu:d.default,ParamContextMenu:f.default,PanelNodeSelector:c.default,PlayBar:l.default,Retractable:h.default,NumericSlider:p.default,TopBar:o.default},props:{scene_update_allowed:{type:Boolean,default:!1},username:{type:String,default:null}},setup:function(){var e=w.ref(null);return g.KeyEventsDispatcher.activate(),{multiple_panel:e,full_screen_activated:w.computed((function(){return null!=m.StoreController.editor.panel.fullscreen_panel_id()}))}}})},function(e,t,n){"use strict";n.r(t);var r=n(380),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,a=n(3),s=a.__importDefault(n(356));!function(e){e.SAVE="save"}(r||(r={})),function(e){e.UNDO="undo",e.REDO="redo"}(o||(o={})),function(e){e.UPLOAD="upload_assets",e.ABOUT="about"}(i||(i={}));var u=n(19),_=n(853),l=n(20);t.default=u.defineComponent({name:"top_menu",components:{DropDownMenu:s.default},props:{scene_update_allowed:{type:Boolean,default:!1},username:{type:String,default:null}},setup:function(e){return{display_desktop_entries:u.computed((function(){return!1})),file_menu_entries:u.computed((function(){return[{id:r.SAVE,disabled:!e.scene_update_allowed}]})),edit_menu_entries:u.computed((function(){return[{id:o.UNDO},{id:o.REDO}]})),desktop_menu_entries:u.computed((function(){return[{id:i.UPLOAD,label:"Upload Assets"},{id:i.ABOUT,label:"About Desktop"}]})),on_file_menu_entry_select:function(e){switch(e){case r.SAVE:return function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return l.StoreController.save_scene(),[2]}))}))}()}},on_edit_menu_entry_select:function(e){switch(e){case o.UNDO:return _.HistoryStack.instance().undo();case o.REDO:return _.HistoryStack.instance().redo()}},on_desktop_menu_entry_select:function(e){switch(e){case i.UPLOAD:case i.ABOUT:return}}}}})},function(e,t,n){"use strict";n.r(t);var r=n(382),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(80)),o=n(50),i=n(19);t.default=i.defineComponent({name:"dropdown-menu",props:{level:{type:Number,default:0},on_hover:{type:Boolean,default:!0},label:{type:String,default:"Menu"},display_label:{type:Boolean,default:!0},label_padding:{type:Array,default:function(){return[5,10]}},always_visible:{type:Boolean,default:!1},entries:{type:Array,default:function(){return["entry 1","entry 3"]}},sort_entries:{type:Boolean,default:!1},right_aligned:{type:Boolean,default:!1},event_id_prefix:{type:String,default:""},emphasis:{type:String,default:""},init_position_top:{type:Number,default:0}},setup:function(e,t){var n=i.ref(!1),a=i.ref(0),s=i.ref(1e3),u=i.ref(!1),_=i.ref(-1),l=i.ref(null),c=i.ref(null);i.onBeforeMount((function(){})),i.onMounted((function(){D()}));var p=i.computed((function(){return e.init_position_top+a.value})),d=i.computed((function(){return T.value[_.value]})),f=i.computed((function(){var e=l.value;return e&&c.value?{left:e.offsetWidth+"px"}:{}})),h=i.computed((function(){var e=l.value;if(e&&c.value){var t=c.value[_.value],n=e.getBoundingClientRect().top;return t.getBoundingClientRect().top-n+a.value}return 0})),m=i.computed((function(){return N.value[_.value]})),g=i.computed((function(){return b.value[_.value]})),v=i.computed((function(){return null!=e.emphasis&&e.emphasis.length>=0})),y=i.computed((function(){if(e.sort_entries){var t={};return e.entries.forEach((function(e){t[e.id]=e})),r.default(Object.keys(t)).map((function(e){return t[e]}))}return e.entries})),b=i.computed((function(){return y.value.map((function(e){return e.id}))})),w=i.computed((function(){return y.value.map((function(e){return e.label||o.CoreString.titleize(e.id)}))})),x=i.computed((function(){return w.value.map((function(t){return t.indexOf(e.emphasis)}))})),C=i.computed((function(){return w.value.map((function(e,t){var n=x.value[t];return 0===n?"":n>0?e.slice(0,+(n-1)+1||void 0):e}))})),P=i.computed((function(){return w.value.map((function(t,n){var r=x.value[n];return r>=t.length-e.emphasis.length?"":t.slice(r+e.emphasis.length)}))})),E=i.computed((function(){return y.value.map((function(e){return!0===e.disabled}))})),O=i.computed((function(){return y.value.map((function(e,t){return{disabled:E.value[t],active:!E.value[t]}}))})),T=i.computed((function(){return y.value.map((function(e){return null!=e.children}))})),N=i.computed((function(){return y.value.map((function(e){return e.children}))})),j=i.computed((function(){return{on_hover:e.on_hover,displayed:n.value}})),A=i.computed((function(){if(e.display_label)return{padding:e.label_padding.map((function(e){return e+"px"})).join(" ")}})),S=i.computed((function(){var t=0===e.level;return{bottom_left:t,top_right:!t,always_visible:e.always_visible||n.value,right_aligned:e.right_aligned}})),M=i.computed((function(){return{right_aligned:e.right_aligned}})),k=i.computed((function(){return u.value?{top:Math.floor(p.value)+"px",maxHeight:Math.floor(s.value)+"px",overflowY:"scroll"}:{top:Math.floor(p.value)+"px",maxHeight:null,overflowY:null}})),R=i.computed((function(){if(e.display_label)return{dropdown_menu_label:!0}}));function D(){if(u.value=!1,l.value){var e=l.value.getBoundingClientRect(),t=e.top,n=e.height,r=window.innerHeight;if(n>r)s.value=r,a.value=-t,u.value=!0;else{var o=n-(r-t);a.value=o>0?-o:0,s.value=n,u.value=!1}}}return{displayed:n,content_top_position:p,content_max_height:s,hovered_entry_index:_,dropdown_menu_content:l,entry_element:c,hovered_entry_has_children:d,sub_dropdown_style_object:f,sub_dropdown_init_position_top:h,hovered_entry_children:m,hovered_entry_id:g,has_emphasis:v,sorted_entries:y,entry_ids:b,entry_labels:w,emphasis_indices:x,entry_labels_pre_emphasis:C,entry_labels_post_emphasis:P,entry_disabled_states:E,entry_class_objects:O,entry_has_children:T,entry_children:N,dropdown_menu_class_object:j,menu_label_style_object:A,pixel_class_object:S,content_class_object:M,content_style_object:k,dropdown_menu_label_object:R,position_top_offset:a,set_hovered_entry_index:function(e){_.value=e},unset_hovered_entry:function(){},select:function(r){if(!(r.disabled||!1)){n.value=!1;var o=r.id,i=o;e.event_id_prefix&&(i=e.event_id_prefix+"/"+o),t.emit("select",i)}},on_entry_select:function(e){n.value=!1,t.emit("select",e)},toggle_display:function(){n.value=!n.value},compute_max_height:D}}})},function(e,t,n){var r=n(1320);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("170fd493",r,!1,{})},function(e,t,n){var r=n(1322);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("432e560a",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(386),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(357)),o=n(20),i=n(19);t.default=i.defineComponent({name:"dialog-alert",components:{Modal:r.default},setup:function(){return{display:i.computed((function(){return o.StoreController.editor.dialog_alert.display()})),message:i.computed((function(){return o.StoreController.editor.dialog_alert.message()})),title:i.computed((function(){return o.StoreController.editor.dialog_alert.title()})),close:function(){o.StoreController.editor.dialog_alert.hide()}}}})},function(e,t,n){"use strict";n.r(t);var r=n(388),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(185),o=n(6),i=n(19);t.default=i.defineComponent({name:"modal",props:{title:{type:String,default:"No title"},size:{type:Object,default:function(){return{x:400,y:200}}},resizable:{type:Boolean,default:!0}},setup:function(e){var t=i.ref({x:100,y:100}),n=i.ref({x:e.size.x,y:e.size.y}),a=i.computed((function(){return{top:t.value.y+"px",left:t.value.x+"px",width:n.value.x+"px",height:n.value.y+"px"}})),s=new o.Vector2,u=new o.Vector2,_=new o.Vector2,l=new o.Vector2;function c(e){_.x=e.pageX,_.y=e.pageY,l.x=_.x-s.x,l.y=_.y-s.y,t.value.x=u.x+l.x,t.value.y=u.y+l.y}function p(e){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",p),r.CoreDom.remove_drag_classes()}var d=new o.Vector2;function f(e){_.x=e.pageX,_.y=e.pageY,l.x=_.x-s.x,l.y=_.y-s.y,n.value.x=d.x+l.x,n.value.y=d.y+l.y}function h(e){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h),r.CoreDom.remove_drag_classes()}return{pos:t,style_object:a,on_move_drag:c,on_move_end:p,on_move_start:function(e){s.x=e.pageX,s.y=e.pageY,u.x=t.value.x,u.y=t.value.y,r.CoreDom.add_drag_classes(),document.addEventListener("mousemove",c),document.addEventListener("mouseup",p)},on_resize_drag:f,on_resize_end:h,on_resize_start:function(e){s.x=e.pageX,s.y=e.pageY,d.x=n.value.x,d.y=n.value.y,r.CoreDom.add_drag_classes(),document.addEventListener("mousemove",f),document.addEventListener("mouseup",h)}}}})},function(e,t,n){var r=n(1325);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("fa645422",r,!1,{})},function(e,t,n){var r=n(1327);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("24d18166",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(392),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(357)),o=n(20),i=n(19);t.default=i.defineComponent({name:"dialog-confirm",components:{Modal:r.default},setup:function(){var e=i.ref(null),t=i.computed((function(){return o.StoreController.editor.dialog_confirm.display()})),n=i.computed((function(){return o.StoreController.editor.dialog_confirm.question()})),r=i.computed((function(){return o.StoreController.editor.dialog_confirm.accept_label()}));function a(){o.StoreController.editor.dialog_confirm.hide()}return i.watch(t,(function(t){t&&e.value&&e.value.focus()})),{cancel_button:e,display:t,question:n,accept_label:r,accept:function(){var e=o.StoreController.editor.dialog_confirm.on_accept();e&&e(),a()},close:a}}})},function(e,t,n){var r=n(1330);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("78225756",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(395),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(357)),o=n(20),i=n(19);t.default=i.defineComponent({name:"dialog-prompt",components:{Modal:r.default},setup:function(){var e=i.ref(null),t=i.computed((function(){return o.StoreController.editor.dialog_prompt.display()})),n=i.computed((function(){return o.StoreController.editor.dialog_prompt.title()})),r=i.computed((function(){return o.StoreController.editor.dialog_prompt.default_value()})),a=i.computed((function(){return o.StoreController.editor.dialog_prompt.confirm_label()}));function s(){if(e.value){var t=e.value.value,n=o.StoreController.editor.dialog_prompt.on_save();n&&n(t),u()}}function u(){o.StoreController.editor.dialog_prompt.hide()}return i.watch(t,(function(t){var n,r;t&&(null===(n=e.value)||void 0===n||n.focus(),null===(r=e.value)||void 0===r||r.select())})),{main_input:e,display:t,title:n,default_value:r,confirm_label:a,on_keypress:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(s(),e.preventDefault())},save:s,close:u}}})},function(e,t,n){var r=n(1333);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("2c20850f",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(398),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1335),i=n(1006),a=n(1336),s=n(1007),u=r.__importDefault(n(1337)),_=r.__importDefault(n(1427)),l=r.__importDefault(n(1476)),c=r.__importDefault(n(1482)),p=n(1006),d=[p.PanelType.VIEWER,p.PanelType.PARAMS,p.PanelType.NETWORK],f={split_mode:s.MultiplePanelSplitMode.HORIZONTAL,sub_panels_init_properties:[{split_mode:s.MultiplePanelSplitMode.VERTICAL,sub_panels_init_properties:[{panel_types:d,current_panel_index:d.indexOf(p.PanelType.VIEWER)},{panel_types:d,current_panel_index:d.indexOf(p.PanelType.PARAMS)}]},{panel_types:d,current_panel_index:d.indexOf(p.PanelType.NETWORK)}]},h=n(19);t.default=h.defineComponent({name:"MultiplePanel",components:{Network:u.default,Params:_.default,Viewer:l.default,Spreadsheet:c.default},props:{init_properties:{type:Object,default:function(){return f}},panel_id:{type:String,default:"multi-root"},level:{type:Number,default:0},scene_update_allowed:{type:Boolean,default:!1}},setup:function(e,t){var n=h.ref([0,5]),s=h.ref(null),u=h.ref(null),_=h.ref(null),l=h.ref(null),c=i.SetupMultiplePanelPanels(e,u,_);return r.__assign(r.__assign(r.__assign({element:s,split_panel1:u,split_panel2:_,current_panel:l,tab_menu_label_padding:n},c),o.SetupMultiplePanelJson(e,c)),a.SetupMultiplePanelSplit(e,t,s,c,(function(){return{panel_types:c.panel_types.value,current_panel_index:c.current_panel_index.value}})))}})},function(e,t,n){"use strict";n.r(t);var r=n(400),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1338),i=n(1339),a=n(1347),s=n(1348),u=n(1349),_=n(1350),l=n(1351),c=n(1352),p=n(1355),d=n(1356),f=n(1357),h=r.__importDefault(n(1358)),m=r.__importDefault(n(1361)),g=r.__importDefault(n(1412)),v=n(1415),y=n(1417),b=n(1418),w=n(1419),x=n(1421),C=n(1423),P=n(20),E=n(19);t.default=E.defineComponent({name:"network-panel",components:{TabMenu:h.default,Node:m.default,InterractiveConnection:g.default},setup:function(e){var t=E.ref(null),n=E.ref(null),h=E.computed((function(){return P.StoreController.editor.current_json_node()})),m=E.computed((function(){var e=P.StoreController.editor.current_node_graph_id();return e?P.StoreController.engine.json_children(e):[]})),g=E.ref({active:!1,position:{x:0,y:0}}),O=E.ref({position:{x:0,y:0},zoom:.5}),T={},N=E.ref({node_src_id:null,node_dest_id:null,output_index:0,input_index:0,mouse_start:{x:0,y:0},mouse_progress:{x:0,y:0},active:!1}),j=E.ref({start:{x:0,y:0},end:{x:0,y:0},active:!1}),A=new y.CameraAnimationHelper(O.value),S=new b.ClipBoardHelper,M=new v.NodeCreationHelper(g.value,O.value),k=new w.NodeAnimationHelper(O.value),R=new x.ConnectionHelper(N.value,O.value),D=new C.NodeSelectionHelper(j.value,O.value),I={node_animation_helper:k,connection_helper:R,node_selection_helper:D,cam_animation_helper:A,node_creation_helper:M},L=o.SetupCamera(t,O,T,A),B=f.SetupTabMenu(t,M),z=i.SetupEventKey(S,A,B),F={camera_options:L,tab_menu_options:B,event_key_options:z},G=a.SetupEventMouse(I,F),V=E.computed((function(){return j.value.active||N.value.active}));return r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign({canvas:t,nodes_container:n,connection_data:N,json_node:h,json_children:m,action_in_progress:V},L),z),G),s.SetupJson(O.value,T)),u.SetupNodeAnimation(k,n)),_.SetupNodeConnection(N.value,R,n)),l.SetupNodeCreation(n,M)),c.SetupNodeEvent(I)),p.SetupNodeNavigation()),d.SetupNodeSelection(j.value,D,n)),B)}})},function(e,t,n){"use strict";n.r(t);var r=n(402),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(336)),i=r.__importDefault(n(199)),a=r.__importDefault(n(74)),s=n(20),u=n(56),_=n(856),l=n(19);t.default=l.defineComponent({name:"tab-menu",setup:function(e,t){var n=l.ref("");l.onMounted((function(){_.KeyEventsDispatcher.instance().deactivate(),document.addEventListener("keypress",d),document.addEventListener("keydown",f),document.addEventListener("keyup",h)})),l.onBeforeUnmount((function(){document.removeEventListener("keypress",d),document.removeEventListener("keydown",f),document.removeEventListener("keyup",h),_.KeyEventsDispatcher.instance().activate()}));var r=l.computed((function(){return s.StoreController.editor.current_node_graph_id()})),c=l.computed((function(){if(!r.value)return[];var e=v();return 0===e.length&&(m(),e=v()),e})),p=l.computed((function(){return null==n.value||""===n.value}));function d(e){var t;return t=e.key,n.value+=t,!0}function f(e){var t=!0;switch(e.key){case"Tab":g();break;default:t=!1}return t}function h(e){var t=!0;switch(e.key){case"Backspace":m();break;case"Escape":g();break;default:t=!1}return t}function m(){n.value=n.value.slice(0,n.value.length-1)}function g(){t.emit("close")}function v(){var e=s.StoreController.editor.current_node();if(!e.children_allowed()||!e.children_controller)return[];var t=function(e,t){var n={};return u.POLY.nodes_register.registered_nodes_for_context_and_parent_type(e,t).forEach((function(t){var r=u.POLY.nodes_register.registered_category(e,t.type());n[r]=n[r]||[],n[r].push(t.type())})),n}(e.children_controller.context,e.type);if(p.value){var r=[];return Object.keys(t).forEach((function(e){var n=t[e].sort().map((function(e){return{id:e,label:e}}));r.push({id:e,label:e,children:n})})),r}var _=n.value.toLowerCase();return a.default(i.default(t)).filter((function(e){return o.default(e,_)})).map((function(e){return{id:e,label:e}}))}return{menu_entries:c,filter:n,on_select:function(e){t.emit("select",e),g()}}}})},function(e,t,n){var r=n(1360);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("e219d55e",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(405),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(125),i=n(1362),a=n(1363),s=n(1364),u=n(1365),_=n(1366),l=n(1367),c=n(1368),p=n(1369),d=n(1370),f=n(1371),h=n(1372),m=n(1373),g=n(1374),v=n(1375),y=n(1376),b=r.__importDefault(n(1377)),w=r.__importDefault(n(1380)),x=n(19),C=n(20);t.default=x.defineComponent({name:"network_node",components:{Connection:b.default,NodeInfo:w.default},props:{json_node:{type:Object},json_parent:{type:Object},action_in_progress:Boolean},setup:function(e,t){var n=C.StoreController.engine.node(e.json_node.graph_node_id),b=x.computed((function(){return e.json_node.graph_node_id})),w=x.computed((function(){return(null==n?void 0:n.ui_data.is_layout_vertical())||!1})),P=x.computed((function(){return{left:e.json_node.ui_data_json.x+"px",top:e.json_node.ui_data_json.y+"px"}})),E=x.computed((function(){return{x:(null==n?void 0:n.ui_data.width())||100,y:o.Constants.NODE_UNIT}})),O=_.SetupBypassFlag(e.json_node,E),T=v.SetupPosition(e.json_node),N=y.SetupSelection(e.json_node,e.json_parent),j=i.SetupCapture(e.json_node,t),A=f.SetupInfos(),S=x.computed((function(){return{selected:N.is_selected.value,is_being_moved:T.is_being_moved.value,bypassed:O.is_bypassed.value,layout_horizontal:!w.value}})),M=x.computed((function(){return{left:-.5*((null==n?void 0:n.ui_data.width())||0)+"px",top:-.5*o.Constants.NODE_HEIGHT+"px",width:E.value.x+"px",height:E.value.y+"px",borderRadius:3}}));return r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign(r.__assign({layout_vertical:w,style_object:P,class_object:S,node_body_style_object:M,graph_node_id:b},O),a.SetupChildrenOwner(e.json_node,E,w)),u.SetupContextMenu(e.json_node)),s.SetupCommentable(e.json_node,E,w)),u.SetupContextMenu(e.json_node)),l.SetupDisplayFlag(e.json_node,E)),c.SetupErrored(e.json_node,E)),p.SetupEventMouse(e.json_node,t,j,A)),d.SetupIcon(e.json_node)),A),h.SetupInputs(e.json_node,E,w)),m.SetupNamed(e.json_node,E,w)),g.SetupOutputs(e.json_node,E,w)),T),N)}})},function(e,t,n){"use strict";n.r(t);var r=n(407),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(358),i=n(125),a=n(20),s=n(19);t.default=s.defineComponent({name:"network_node_connection",props:{src_json_node:{},dest_json_node:{},input_index:Number,output_index:Number},setup:function(e){var t=a.StoreController.engine.node(e.src_json_node.graph_node_id),n=a.StoreController.engine.node(e.dest_json_node.graph_node_id),u=s.computed((function(){return!e.dest_json_node.inputs_clonable_state_with_override[e.input_index]})),_=s.computed((function(){return t.ui_data.is_layout_vertical()})),l=new r.Vector2,c=new r.Vector2,p=s.computed((function(){return l.set(e.src_json_node.ui_data_json.x,e.src_json_node.ui_data_json.y),l})),d=s.computed((function(){return c.set(e.dest_json_node.ui_data_json.x,e.dest_json_node.ui_data_json.y),c})),f=s.computed((function(){return M(t)})),h=s.computed((function(){return M(n)})),m=s.computed((function(){return R(e.src_json_node)})),g=s.computed((function(){return R(e.dest_json_node)})),v=s.computed((function(){return n.io.inputs.max_inputs_count})),y=s.computed((function(){return n.ui_data.width()})),b=new o.Box2,w=s.computed((function(){return b.copy(m.value),b.union(g.value),b})),x=new r.Vector2,C=new r.Vector2,P=s.computed((function(){if(e.src_json_node){if(x.copy(p.value).sub(w.value.min),C.copy(x),_.value){var t=new r.Vector2(0,.5*f.value+i.Constants.CONNECTION_VERTICAL_MARGIN-2*i.Constants.CONNECTION_VERTICAL_MARGIN);return C.add(t)}t=new r.Vector2(.5*y.value+i.Constants.CONNECTION_VERTICAL_MARGIN,-.5*i.Constants.NODE_HEIGHT+i.Constants.CONNECTION_VERTICAL_START+e.output_index*i.Constants.CONNECTION_VERTICAL_SPACING);return C.add(t)}})),E=new r.Vector2,O=new r.Vector2,T=s.computed((function(){if(e.dest_json_node){if(E.copy(d.value).sub(w.value.min),O.copy(E),_.value){var t=0;if(v.value>0){var n=y.value/(v.value+1);t=-.5*y.value+(e.input_index+1)*n}var o=new r.Vector2(t,-.5*h.value+i.Constants.CONNECTION_VERTICAL_MARGIN);return O.add(o)}o=new r.Vector2(-.5*y.value-i.Constants.CONNECTION_VERTICAL_MARGIN,-.5*i.Constants.NODE_HEIGHT+i.Constants.CONNECTION_VERTICAL_START+e.input_index*i.Constants.CONNECTION_VERTICAL_SPACING);return O.add(o)}})),N=new r.Vector2,j=s.computed((function(){var t=new r.Vector2;return w.value.getSize(t),N.copy(w.value.min),N.x-=e.dest_json_node.ui_data_json.x,N.y-=e.dest_json_node.ui_data_json.y,{left:N.x+"px",top:N.y+"px",width:t.x+"px",height:t.y+"px"}})),A=s.computed((function(){var t={};if(n.io.inputs.has_named_inputs){var r=e.src_json_node.named_output_connections[e.output_index],o=e.dest_json_node.named_input_connections[e.input_index];if(r.type!=o.type)return{mismatched_types:!0};t[r.type]=!0}return u&&(t.is_src_not_cloned=!0),t}));function S(e){var t=e.ui_data.width(),n=0;if(!_.value){var a=Math.max(e.io.inputs.named_input_connection_points.length,e.io.outputs.named_output_connection_points.length);n=i.Constants.CONNECTION_VERTICAL_START+a*i.Constants.CONNECTION_VERTICAL_SPACING}var s=Math.max(i.Constants.NODE_HEIGHT,n),u=new r.Vector2(.5*t+2*i.Constants.CONNECTION_VERTICAL_MARGIN,.5*s+2*i.Constants.CONNECTION_VERTICAL_MARGIN);return new o.Box2(u.clone().multiplyScalar(-1),u)}function M(e){var t=S(e),n=new r.Vector2;return t.getSize(n),n.y}var k=new r.Vector2;function R(e){var t,n=(t=e,a.StoreController.engine.node(t.graph_node_id));return k.x=e.ui_data_json.x,k.y=e.ui_data_json.y,S(n).translate(k)}return{svg_style_object:j,line_class_object:A,src_position:P,dest_position:T}}})},function(e,t,n){var r=n(1379);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("5c7c8dcb",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(410),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(30),i=n(350),a=n(1381),s=r.__importDefault(n(1390)),u=r.__importDefault(n(1393)),_=r.__importDefault(n(1396)),l=r.__importDefault(n(1399)),c=r.__importDefault(n(1402)),p=r.__importDefault(n(1405)),d=new Map;d.set(o.NodeContext.SOP,s.default),d.set(o.NodeContext.MAT,u.default),d.set(o.NodeContext.GL,_.default),d.set(o.NodeContext.COP,l.default);var f=new Map([[o.NodeContext.SOP,new Map([[i.CacheSopNode.type(),c.default],[a.ParticlesSystemGpuSopNode.type(),p.default]])]]),h=n(20),m=n(857),g=n(19);t.default=g.defineComponent({name:"network_node_info",components:{NodeInfoSop:s.default},props:{graph_node_id:{type:String,default:null}},setup:function(e){var t=h.StoreController.engine.node(e.graph_node_id),n=g.ref(!1),o=g.ref(void 0),i=g.ref([]),a=g.ref([]),s=new Map,u=g.computed((function(){return null==t?void 0:t.name}));g.onMounted((function(){!function(){r.__awaiter(this,void 0,void 0,(function(){var e,u;return r.__generator(this,(function(r){switch(r.label){case 0:return t?[4,t.request_container()]:[2];case 1:return r.sent(),n.value=t.states.time_dependent.active,o.value=t.states.error.message,e=t.dependencies_controller.scene_predecessors(),u=t.dependencies_controller.scene_successors(),s.clear(),i.value=p(e),a.value=p(u),[2]}}))}))}()}));var _=g.computed((function(){return"time dependent: "+(n.value?"YES":"NO")})),l=g.computed((function(){return{time_dependent:n.value}})),c=g.computed((function(){if(t){var e=void 0,n=f.get(t.node_context());return n&&(e=n.get(t.type)),e||(e=d.get(t.node_context())),e}}));function p(t){if(!e.graph_node_id)return[];var n=h.StoreController.engine.node(e.graph_node_id);return t.map((function(e){var t,r,o=(null===(t=e.parent)||void 0===t?void 0:t.graph_node_id)==(null===(r=n.parent)||void 0===r?void 0:r.graph_node_id),i="./"+e.name,a=e.full_path(),u=o?i:a;return s.set(u,e),u})).sort()}return{node_name:u,time_dependent:n,error_message:o,scene_predecessor_paths:i,scene_successor_paths:a,node_by_path:s,time_dependency_label:_,time_dependency_class_object:l,current_node_info_type:c,go_to_node_path:function(e){var t=s.get(e);t&&h.StoreController.editor.set_current_node(t)},on_name_click:function(){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=h.StoreController.engine.node(e.graph_node_id))?[4,h.StoreController.editor.dialog_prompt.show({title:"Rename Node:",default_value:t.name,confirm_label:"Update Name"})]:[2];case 1:return null!=(n=r.sent())&&n.length>0&&new m.NodeSetNameCommand(t,n).push(),[2]}}))}))}}}})},function(e,t,n){"use strict";n.r(t);var r=n(412),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(36),i=n(20),a=n(19);t.default=a.defineComponent({name:"network_node_info_sop",props:{graph_node_id:null},setup:function(e){var t=i.StoreController.engine.node(e.graph_node_id),n=a.ref(0),s=a.ref(0),u=a.ref({}),_=a.ref({}),l=a.ref({}),c=a.ref({}),p=a.ref(0),d=a.ref([0,0,0]),f=a.ref([0,0,0]),h=a.ref([0,0,0]),m=a.ref([0,0,0]),g=a.computed((function(){return{center:d.value,size:f.value,min:h.value,max:m.value}})),v=a.computed((function(){return["center","size","min","max"]})),y=a.computed((function(){return{highlighted:n.value!=s.value}})),b=a.computed((function(){return Object.keys(u.value).sort()})),w=a.computed((function(){return Object.keys(l.value).sort()})),x=a.computed((function(){for(var e={},t=0,n=Object.keys(l.value);t<n.length;t++){var r=n[t],i={};i[c.value[r]==o.CoreConstant.ATTRIB_TYPE.STRING?"string":"numeric"]=!0,e[r]=i}return e})),C=a.computed((function(){for(var e={},t=0,n=Object.keys(l.value);t<n.length;t++){var r=n[t],i=c.value[r]==o.CoreConstant.ATTRIB_TYPE.STRING?"string":l.value[r]+"f";e[r]=i}return e}));return a.onMounted((function(){!function(){r.__awaiter(this,void 0,void 0,(function(){var e,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,t.request_container()];case 1:return e=r.sent(),(o=e.core_content())?(console.log(o.objects()),n.value=e.objects_count(),s.value=e.objects_visible_count(),u.value=e.objects_count_by_type(),_.value=e.objects_names_by_type(),p.value=e.points_count(),l.value=e.vertex_attribute_sizes_by_name(),c.value=e.vertex_attribute_types_by_name(),d.value=e.center().toArray(),f.value=e.size().toArray(),i=e.bounding_box(),h.value=i.min.toArray(),m.value=i.max.toArray(),[2]):[2]}}))}))}()})),{table_props:g,table_prop_names:v,points_count:p,objects_count:n,objects_count_visible_class_object:y,object_types:b,objects_count_by_type:u,objects_visible_count:s,vertex_attribute_names:w,vertex_class_objects_by_name:x,vertex_human_labels_by_name:C}}})},function(e,t,n){var r=n(1392);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("85a04f04",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(415),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(238),i=n(19),a=n(20);t.default=i.defineComponent({name:"network_node_info_sop_particles_system_gpu",props:{graph_node_id:null},setup:function(e){var t=a.StoreController.engine.node(e.graph_node_id),n=i.ref({}),s=i.computed((function(){return Object.keys(n.value)}));return i.onMounted((function(){!function(){r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return t.assembler_controller?[4,t.request_container()]:[3,2];case 1:e.sent(),t.assembler_controller.shaders_by_name.forEach((function(e,t){n.value[t]=e})),e.label=2;case 2:return[2]}}))}))}()})),{shader_names:s,copy_shader:function(e,t){void 0===t&&(t=!1);var r=n.value[e];t&&(r=(r=(r=r.replace(/(\t)/gm," ")).replace(/(\r\n|\n|\r)/gm,"\\n")).replace(/"/gm,"")),o.ClipboardHelper.copy(r)}}}})},function(e,t,n){var r=n(1395);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("66d2b9fe",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(418),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(20),i=n(238),a=n(19);t.default=a.defineComponent({name:"network_node_info_sop_particles_system_gpu",props:{graph_node_id:null},setup:function(e){var t=o.StoreController.engine.node(e.graph_node_id),n=a.ref({}),s=a.computed((function(){return Object.keys(n.value)}));return a.onMounted((function(){!function(){r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(r){switch(r.label){case 0:return(e=t.material_node)?[4,e.request_container()]:[3,2];case 1:r.sent(),e.assembler_controller.shaders_by_name.forEach((function(e,t){n.value[t]=e})),r.label=2;case 2:return[2]}}))}))}()})),{shaders_by_name:n,shader_names:s,copy_shader:function(e){i.ClipboardHelper.copy(n.value[e])}}}})},function(e,t,n){var r=n(1398);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("061b6198",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(421),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(127)),i=n(20),a=n(113),s=n(19),u=n(96);t.default=s.defineComponent({name:"network_node_info_cop",props:{graph_node_id:{type:String}},setup:function(e){var t=i.StoreController.engine.node(e.graph_node_id),n=s.ref([0,0]),_=s.ref(null);return s.onMounted((function(){!function(){r.__awaiter(this,void 0,void 0,(function(){var e,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,t.request_container()];case 1:return e=r.sent(),i=e.core_content(),console.log("texture",i,e.resolution()),s=e.resolution(),o.default.set(n.value,0,s[0]),o.default.set(n.value,1,s[1]),function(e){_.value&&(e instanceof a.DataTexture?function(e,t){var n=t.image;e.width=n.width,e.height=n.height;var r=e.getContext("2d"),o=r.createImageData(n.width,n.height),i=1;n.data instanceof Float32Array&&(i=255);o.data.values;for(var a=0;a<o.data.length;a++){var s=u.CoreMath.clamp(n.data[a]*i,0,255);o.data[a]=s}r.putImageData(o,0,0)}(_.value,e):function(e,t){var n=t.image;e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0)}(_.value,e))}(i),[2]}}))}))}()})),{resolution:n,canvas:_}}})},function(e,t,n){var r=n(1401);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("77ce767e",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(424),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(238),o=n(20),i=n(19);t.default=i.defineComponent({name:"network_node_info_sop_cache",props:{graph_node_id:null},setup:function(e){var t=o.StoreController.engine.node(e.graph_node_id);return{copy_cache:function(){var e=t.pv.cache;r.ClipboardHelper.copy(e)}}}})},function(e,t,n){var r=n(1404);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("5cfb502c",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(427),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(238),i=n(20),a=n(19);t.default=a.defineComponent({name:"network_node_info_sop_particles_system_gpu",props:{graph_node_id:null},setup:function(e){var t=i.StoreController.engine.node(e.graph_node_id),n=a.ref({}),s=a.computed((function(){return Object.keys(n.value)}));return a.onMounted((function(){!function(){r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,t.request_container()];case 1:return e.sent(),t.assembler_controller.shaders_by_name.forEach((function(e,t){n.value[t]=e})),[2]}}))}))}()})),{shader_names:s,copy_shader:function(e){o.ClipboardHelper.copy(n.value[e])}}}})},function(e,t,n){var r=n(1407);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("2756da7e",r,!1,{})},function(e,t,n){var r=n(1409);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("11f982cb",r,!1,{})},function(e,t,n){var r=n(1411);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("3f87938b",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(432),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(358),i=new r.Vector2(10,10),a=new o.Box2(i.clone().multiplyScalar(-1),i),s=n(19);t.default=s.defineComponent({name:"network_node_interractive_connection",props:{mouse_start:{type:Object,default:function(){return{x:0,y:0}}},mouse_progress:{type:Object,default:function(){return{x:0,y:0}}}},setup:function(e){var t=new r.Vector2,n=new r.Vector2,i=a.clone(),u=a.clone(),_=new o.Box2,l=new r.Vector2,c=new r.Vector2,p=new r.Vector2,d=s.computed((function(){return t.x=e.mouse_start.x,t.y=e.mouse_start.y,t})),f=s.computed((function(){return n.x=e.mouse_progress.x,n.y=e.mouse_progress.y,n})),h=s.computed((function(){return i.copy(a),i.translate(d.value),i})),m=s.computed((function(){return u.copy(a),u.translate(f.value),u})),g=s.computed((function(){return _.copy(h.value),_.union(m.value),_})),v=s.computed((function(){return l.copy(d.value),l.sub(g.value.min),l})),y=s.computed((function(){return c.copy(f.value),c.sub(d.value),c.add(v.value),c})),b=s.computed((function(){g.value.getSize(p);var e=g.value.min;return{left:e.x+"px",top:e.y+"px",width:p.x+"px",height:p.y+"px"}}));return{src_pos:d,dest_pos:f,src_box:h,dest_box:m,svg_bounds:g,src_position:v,dest_position:y,svg_style_object:b}}})},function(e,t,n){var r=n(1414);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("7d4ff9cb",r,!1,{})},function(e,t,n){var r=n(1426);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("6bd6a8f6",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(436),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1428),i=r.__importDefault(n(356)),a=r.__importDefault(n(1429)),s=n(857),u=n(20),_=n(1010),l=n(19);t.default=l.defineComponent({name:"param-panel",components:{ParamFieldContainer:a.default,DropDownMenu:i.default},props:{display_toolbar:{type:Boolean,default:!0}},setup:function(e){var t=_.SetupSelectedNode(),n=l.computed((function(){return!1})),i=l.computed((function(){return""}));return r.__assign(r.__assign({display_node_doc_help:n,node_doc_url:i,on_name_click:function(){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:return(e=t.first_selected_node())?[4,u.StoreController.editor.dialog_prompt.show({title:"Rename Node:",default_value:e.name,confirm_label:"Update Name"})]:[2];case 1:return null!==(n=r.sent())&&n.length>0&&new s.NodeSetNameCommand(e,n).push(),[2]}}))}))}},t),o.SetupFolders(t))}})},function(e,t,n){"use strict";n.r(t);var r=n(438),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(51)),i=n(215),a=n(126),s=r.__importDefault(n(1430)),u=r.__importDefault(n(1433)),_=r.__importDefault(n(1436)),l=r.__importDefault(n(1439)),c=r.__importDefault(n(1442)),p=r.__importDefault(n(1445)),d=r.__importDefault(n(239)),f=r.__importDefault(n(1448)),h=r.__importDefault(n(1451)),m=r.__importDefault(n(1454)),g=r.__importDefault(n(1457)),v=r.__importDefault(n(1460)),y=r.__importDefault(n(1463)),b=r.__importDefault(n(1466)),w=r.__importDefault(n(1469)),x=n(20),C=n(23),P=n(19);t.default=P.defineComponent({name:"param-field-container",components:{BooleanField:s.default,ButtonField:u.default,ColorField:_.default,FloatField:l.default,FolderField:c.default,IntegerField:p.default,NumericField:d.default,OperatorPathField:f.default,RadioField:h.default,SeparatorField:m.default,StringField:g.default,Vector2Field:v.default,Vector3Field:y.default,Vector4Field:b.default,RampField:w.default},props:{json_param:{},description:{},tabindex:{default:-1,type:Number}},setup:function(e){var t=x.StoreController.engine.param(e.json_param.graph_node_id),n=P.ref(!1);P.onMounted((function(){t.options.set_ui_data_dependency(),t.options.update_visibility()}));var s=P.computed((function(){return e.json_param.name})),u=P.computed((function(){return e.json_param.type})),_=P.computed((function(){if(e.description){if(o.default(e.description))return e.description;var n,r=e.description.menu_entries,i=[];return t.options.menu_entries.forEach((function(e){var t=e.name,n=r[t];i.push("- "+t+":\n"+n)})),n="\n\n"+i.join("\n\n"),e.description.description+n}})),l=P.computed((function(){return _.value?s.value+" ("+u.value+": "+_.value+")":s.value+" ("+u.value+")"})),c=P.computed((function(){var e=u.value;switch(u.value){case C.ParamType.INTEGER:e=t.options.has_menu_radio?"radio":u.value}return e.replace("_","-")+"-field"})),p=P.computed((function(){return e.json_param.is_visible})),d=P.computed((function(){return!t.options.is_label_hidden}));var f=i.SetupGlobalSliderOwner(e.json_param);return r.__assign(r.__assign({name:s,label_tooltip:l,field_component_type:c,param_visible:p,display_label:d,displays_expression_result:n,toggle_expression_mode:function(){t.has_expression()?n.value=!n.value:n.value=!1},open_numeric_slider_if_numeric_or_color:function(e){(t.is_numeric||t.type===C.ParamType.COLOR)&&f.open_numeric_slider(e)}},f),a.SetupContextMenu(e.json_param,t))}})},function(e,t,n){"use strict";n.r(t);var r=n(440),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(126),a=n(20),s=r.__importDefault(n(239)),u=n(152),_=n(19);t.default=_.defineComponent({name:"boolean-field",props:o.SetupFieldCommonProps,components:{Numeric:s.default},setup:function(e){var t=a.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e);_.onMounted((function(){t.is_dirty&&t.compute()}));var s=_.computed((function(){return"checkbox_"+e.json_param.graph_node_id})),l=_.computed((function(){return e.json_param.value}));return r.__assign(r.__assign({checkbox_id:s,checked:l,on_checkbox_update:function(e){var n=e.target;if(n){var r=n.checked;new u.ParamSetCommand(t,r).push()}},toggle_param:function(){var e=!t.value;new u.ParamSetCommand(t,e).push()}},n),i.SetupContextMenu(e.json_param,t))}})},function(e,t,n){"use strict";n.r(t);var r=n(442),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(215),a=n(126),s=n(20),u=n(19);t.default=u.defineComponent({name:"numeric-field",props:o.SetupFieldCommonProps,setup:function(e){var t=s.StoreController.engine.param(e.json_param.graph_node_id);return r.__assign(r.__assign(r.__assign({},o.SetupFieldCommon(e)),i.SetupGlobalSliderOwner(e.json_param)),a.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1432);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("208fd4fa",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(445),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(20),a=n(19);t.default=a.defineComponent({name:"button-field",props:o.SetupFieldCommonProps,setup:function(e){var t=i.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e);return r.__assign({on_click:function(e){t.press_button()}},n)}})},function(e,t,n){var r=n(1435);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("114eb89e",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(448),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(14),i=n(112),a=n(359),s=r.__importDefault(n(239)),u=n(20),_=n(19);t.default=_.defineComponent({name:"color-field",props:i.SetupFieldCommonProps,components:{Numeric:s.default},setup:function(e){var t=this,n=u.StoreController.engine.param(e.json_param.graph_node_id),s=i.SetupFieldCommon(e),l=n.value.getStyle(),c=_.ref(l);_.onMounted((function(){!function(){r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){return n.is_dirty&&n.compute(),e=n.value,c.value="#"+e.getHexString(),[2]}))}))}()}));var p=_.computed((function(){return"color_input_"+n.full_path()})),d=_.computed((function(){return e.json_param.value})),f=new o.Color;_.watch(d,(function(e,n){return r.__awaiter(t,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){return f.fromArray(e),t=f.getHexString(),c.value="#"+t,[2]}))}))}));var h=new o.Color;return _.watch(c,(function(e){n.has_expression()||(h.setStyle(e),n.is_raw_input_equal(h)||n.set(h))})),r.__assign(r.__assign({input_color:c,color_input_name:p},a.SetupMultipleParamCommon(e.json_param)),s)}})},function(e,t,n){var r=n(1438);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("5ae19139",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(451),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(215),a=n(126),s=n(1009),u=n(20),_=n(19);t.default=_.defineComponent({name:"float-field",props:o.SetupFieldCommonProps,setup:function(e){var t=u.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e),l=_.ref(!1),c=_.computed((function(){return t.options.range})),p=_.computed((function(){return t.options.step||.01})),d=_.computed((function(){return!l.value}));return r.__assign(r.__assign(r.__assign(r.__assign({param_range:c,slider_step:p,display_slider:d,on_focus:function(){t.has_expression()&&(l.value=!0)},on_blur:function(e){console.log("float on_blur"),l.value=!1,n.on_update_value(e)}},n),s.SetupNumericSlider(e.json_param,t)),i.SetupGlobalSliderOwner(e.json_param)),a.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1441);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("015d8daa",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(454),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);t.default=r.defineComponent({name:"folder-field",setup:function(){return{}}})},function(e,t,n){var r=n(1444);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("be22519e",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(457),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(215),a=n(126),s=n(1009),u=n(20),_=n(19);t.default=_.defineComponent({name:"integer-field",props:o.SetupFieldCommonProps,setup:function(e){var t=u.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e),l=_.ref(!1),c=_.computed((function(){return t.options.range})),p=_.computed((function(){return 1})),d=_.computed((function(){return!l.value}));return r.__assign(r.__assign(r.__assign(r.__assign({param_range:c,slider_step:p,display_slider:d,on_focus:function(){t.has_expression()&&(l.value=!0)},on_blur:function(e){l.value=!1,n.on_update_value(e)}},n),s.SetupNumericSlider(e.json_param,t)),i.SetupGlobalSliderOwner(e.json_param)),a.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1447);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("f01ac3a2",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(460),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(126),a=n(20),s=n(152),u=n(19),_=n(79);t.default=u.defineComponent({name:"operator-path-field",props:o.SetupFieldCommonProps,setup:function(e){var t=a.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e);return r.__assign(r.__assign({on_update_value:function(e){var n=e.target;n&&new s.ParamSetCommand(t,n.value).push()},go_to_node:function(){t.is_dirty&&t.compute();var e=t.found_node();e?e.parent&&(a.StoreController.editor.set_current_node(e.parent),e.parent.children_allowed()&&e.parent.children_controller&&e.parent.children_controller.selection.set([e])):function e(n){void 0===n&&(n=1);var r=t.value.split("/");if(1==r.length)return;for(var o=0;o<n;o++)r.pop();var i=r.join("/"),s=_.CoreWalker.find_node(t.node,i);s?a.StoreController.editor.set_current_node(s):e(n+1)}()},open_node_selector:function(){a.StoreController.editor.panel_node_selector.open({param_id:t.graph_node_id})}},n),i.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1450);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("ad1a6bde",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(463),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(126),a=n(20),s=n(152),u=n(19);t.default=u.defineComponent({name:"radio-field",props:o.SetupFieldCommonProps,setup:function(e){var t=a.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e),_=u.ref(null),l=u.computed((function(){return t.options.menu_entries})),c=u.computed((function(){return l.value.map((function(e){return e.value===t.value}))}));return r.__assign(r.__assign({select:_,entries:l,selected_states:c,set_from_select:function(){if(_.value){var e=_.value.value;new s.ParamSetCommand(t,e).push()}}},n),i.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1453);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("65b7eb2e",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(466),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(19);t.default=i.defineComponent({name:"separator-field",props:o.SetupFieldCommonProps,setup:function(e){var t=o.SetupFieldCommon(e);return r.__assign({},t)}})},function(e,t,n){var r=n(1456);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("494aa73d",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(469),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(126),a=n(20),s=n(152),u=n(19);t.default=u.defineComponent({name:"string-field",props:o.SetupFieldCommonProps,setup:function(e){var t=a.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e),_=u.computed((function(){return t.options.is_multiline})),l=u.computed((function(){return!_.value})),c=u.computed((function(){return 5})),p=u.computed((function(){return!1}));return r.__assign(r.__assign({is_multiline:_,is_single_line:l,rows:c,display_browse_button:p,on_update_value:function(e){var n=e.target;if(n){var r=n.value;new s.ParamSetCommand(t,r).push()}},browse_file:function(){}},n),i.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1459);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("f3d41ade",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(472),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(359),a=n(215),s=n(126),u=n(20),_=r.__importDefault(n(239)),l=n(19);t.default=l.defineComponent({name:"vector2-field",props:o.SetupFieldCommonProps,components:{Numeric:_.default},setup:function(e){var t=u.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e);return r.__assign(r.__assign(r.__assign(r.__assign({},n),i.SetupMultipleParamCommon(e.json_param)),a.SetupGlobalSliderOwner(e.json_param)),s.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1462);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("7cafbc11",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(475),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(359),a=n(215),s=n(126),u=n(20),_=r.__importDefault(n(239)),l=n(19);t.default=l.defineComponent({name:"vector3-field",props:o.SetupFieldCommonProps,components:{Numeric:_.default},setup:function(e){var t=u.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e);return r.__assign(r.__assign(r.__assign(r.__assign({},n),i.SetupMultipleParamCommon(e.json_param)),a.SetupGlobalSliderOwner(e.json_param)),s.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1465);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("4ba571d3",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(478),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(112),i=n(359),a=n(215),s=n(126),u=n(20),_=r.__importDefault(n(239)),l=n(19);t.default=l.defineComponent({name:"vector4-field",props:o.SetupFieldCommonProps,components:{Numeric:_.default},setup:function(e){var t=u.StoreController.engine.param(e.json_param.graph_node_id),n=o.SetupFieldCommon(e);return r.__assign(r.__assign(r.__assign(r.__assign({},n),i.SetupMultipleParamCommon(e.json_param)),a.SetupGlobalSliderOwner(e.json_param)),s.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1468);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("1a9b2795",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(481),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(80)),i=n(6),a=n(185),s=n(214),u=n(340),_=n(105),l=n(112),c=n(126),p=n(20),d=n(96),f=n(152),h=n(19);t.default=h.defineComponent({name:"ramp-field",props:l.SetupFieldCommonProps,setup:function(e){var t=p.StoreController.engine.param(e.json_param.graph_node_id),n=l.SetupFieldCommon(e),m=h.ref([]),g=h.ref([]),v=h.ref(""),y=h.ref(-1),b=h.ref(!1),w=h.ref(null),x=new i.Vector2;h.onMounted((function(){for(var e=0,n=t.value.points;e<n.length;e++){var r=n[e];m.value.push(r.to_json())}}));var C=h.computed((function(){return m.value.map((function(e){return 100*e.position+"%"}))})),P=h.computed((function(){return m.value.map((function(e){return 100*(1-e.value)+"%"}))})),E=h.computed((function(){return g.value.map((function(e){return 100*e.x+"%"}))})),O=h.computed((function(){return g.value.map((function(e){return 100*(1-e.y)+"%"}))})),T=h.computed((function(){return m.value.map((function(e,t){if(y.value===t)return{dragged:!0}}))})),N=h.computed((function(){return{point_about_to_be_removed:b.value}}));function j(){var e=o.default(m.value,(function(e){return e.position})),t=new Float32Array(e.length),n=new Float32Array(e.length);e.forEach((function(e,r){t[r]=e.position,n[r]=e.value}));var r=_.RampParam.create_interpolant(t,n);if(w.value&&w.value.parentElement)for(var i=.5*w.value.parentElement.offsetWidth,a=0;a<i;a++){var s=a/i,u=r.evaluate(s);g.value.push({x:s,y:u[0]})}}h.watch(m,(function(){j()}));var A={position:0,value:0};var S=new i.Vector2;function M(e){if(w.value){s.EventHelper.normalized_position_0_1(e,w.value,S),b.value=D(S);var t=S.x-x.x,n=S.y-x.y,r=m.value[y.value];r&&(r.position=d.CoreMath.clamp(A.position+t,0,1),r.value=d.CoreMath.clamp(A.value-n,0,1)),j()}}var k=new i.Vector2;function R(e){w.value&&(s.EventHelper.normalized_position_0_1(e,w.value,k),D(k)&&m.value.splice(y.value,1),y.value=-1,b.value=!1,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",R),a.CoreDom.remove_drag_classes(),I())}function D(e){return e.x<-.5||e.x>1.5||e.y<-.5||e.y>1.5}function I(){var e=u.RampValue.from_json({interpolation:v.value,points:m.value});new f.ParamSetCommand(t,e).push()}return r.__assign(r.__assign({svg:w,control_point_positions_percent:C,control_point_values_percent:P,curve_point_positions_percent:E,curve_point_values_percent:O,control_point_class_objects:T,interpolated_curve_class_object:N,add_point:function(e){if(w.value){s.EventHelper.normalized_position_0_1(e,w.value,x);var t=x.x,n=m.value.length-1;m.value.forEach((function(e,r){e.position<t&&(n=r)}));var r={position:x.x,value:1-x.y};m.value.splice(n+1,0,r),I()}},on_point_move_start:function(e,t){if(w.value){y.value=t,s.EventHelper.normalized_position_0_1(e,w.value,x);var n=m.value[y.value];n&&(A.position=n.position,A.value=n.value,a.CoreDom.add_drag_classes(),document.addEventListener("mousemove",M),document.addEventListener("mouseup",R))}}},n),c.SetupContextMenu(e.json_param,t))}})},function(e,t,n){var r=n(1471);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("525b4ff1",r,!1,{})},function(e,t,n){var r=n(1473);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("277e293f",r,!1,{})},function(e,t,n){var r=n(1475);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("cfce9058",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(486),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(1477)),o=n(20),i=n(19);t.default=i.defineComponent({name:"viewer-panel",components:{ThreejsViewer:r.default},props:{panel_id:{type:String,default:null}},setup:function(e){var t,n=i.ref(null===(t=o.StoreController.scene.cameras_controller.master_camera_node)||void 0===t?void 0:t.graph_node_id),r=i.computed((function(){if(n.value)return o.StoreController.scene.graph.node_from_id(n.value)}));return{camera_menu_label:i.computed((function(){var e;return(null===(e=r.value)||void 0===e?void 0:e.name)||"no camera"})),camera_menu_entries:i.computed((function(){var e=o.StoreController.scene.root.children().map((function(e){return o.StoreController.engine.json_node(e.graph_node_id)})).filter((function(e){return null!=e})),t=["perspective_camera","orthographic_camera"];return e.filter((function(e){return e&&t.includes(e.type)})).map((function(e){return{id:e.graph_node_id,label:e.name}}))})),on_select_camera_menu_entry_select:function(e){n.value=e},current_camera_node_graph_id:n,on_capture_render_completed:function(){},toggle_fullscreen:function(){o.StoreController.editor.panel.fullscreen_panel_id()?o.StoreController.editor.panel.set_fullscreen_panel_id(null):o.StoreController.editor.panel.set_fullscreen_panel_id(e.panel_id)}}}})},function(e,t,n){"use strict";n.r(t);var r=n(488),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(19);t.default=o.defineComponent({name:"viewer-threejs",props:{current_camera_node_graph_id:{type:String}},setup:function(e){var t,n=o.ref(null),i=o.computed((function(){if(e.current_camera_node_graph_id)return r.StoreController.scene.graph.node_from_id(e.current_camera_node_graph_id)}));return o.onMounted((function(){var e;n.value&&(t=null===(e=i.value)||void 0===e?void 0:e.create_viewer(n.value))})),o.onBeforeUnmount((function(){null==t||t.dispose()})),{viewer:n}}})},function(e,t,n){var r=n(1479);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("09518a1a",r,!1,{})},function(e,t,n){var r=n(1481);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("3e103248",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(492),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);n(1483),n(1484);var o=r.__importDefault(n(127)),i=n(36),a=n(1517),s=n(1485),u=n(57),_=n(20),l=n(30),c=n(1010),p=n(19);t.default=p.defineComponent({name:"spreadsheet-panel",components:{AgGridVue:s.AgGridVue},setup:function(e,t){var n=p.ref(!0),s=p.ref([]),d=p.ref(!0),f=p.ref({}),h=p.ref([]),m=p.ref([]);a.AllCommunityModules;var g=c.SetupSelectedNode(),v=g.first_selected_node_id,y=g.first_selected_node;function b(){var e=y();return e&&e.node_context()==l.NodeContext.SOP?e:null}p.onBeforeMount((function(){t.emit("created")}));var w=new u.CoreGraphNode(_.StoreController.scene,"Spreadsheet_Panel");function x(){var e=b();e&&(w.add_graph_input(e),N())}w.add_post_dirty_hook("load_geometry",(function(){N()})),p.onMounted((function(){x()})),p.onBeforeUnmount((function(){w.graph_disconnect_predecessors()}));var C=p.computed((function(){return{active:0==d.value}})),P=p.computed((function(){return{editable:!0,width:100,sortable:!0,resizable:!0}})),E=p.computed((function(){return{indexColumn:{editable:!1,width:30}}})),O=p.computed((function(){for(var e={},t=0,n=s.value;t<n.length;t++){var r=n[t];e[r]=f.value[r],null==e[r]&&(e[r]=!0)}return e})),T=p.computed((function(){return h.value.filter((function(e){var t=e.headerName;return""===t||O.value[t]}))}));function N(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,o;return r.__generator(this,(function(r){switch(r.label){case 0:return(e=b())?(n.value=!0,[4,e.request_container()]):[3,2];case 1:null!=(t=r.sent()).core_content&&((o=t.core_content())&&function(e){d?function(e){(function(e){s.value=e.attrib_names();var t=e.attrib_sizes();h.value=[],h.value.push({headerName:"",field:"index",pinned:"left",type:"indexColumn"}),h.value.push({headerName:"position",children:[{headerName:"x",field:"P_x",type:"numericColumn"},{headerName:"y",field:"P_y",type:"numericColumn"},{headerName:"z",field:"P_z",type:"numericColumn"}]}),s.value.sort();for(var n=function(n){var r=s.value[n],o=e.attrib_type(r)===i.CoreConstant.ATTRIB_TYPE.NUMERIC?"numericColumn":"";if("position"!==r)switch(t[r]){case 1:h.value.push({headerName:r,field:r+"_x",type:o});break;case 2:h.value.push({headerName:r,children:["x","y"].map((function(e){return{headerName:e,field:r+"_"+e,type:o}}))});break;case 3:h.value.push({headerName:r,children:["x","y","z"].map((function(e){return{headerName:e,field:r+"_"+e,type:o}}))});break;case 4:h.value.push({headerName:r,children:["x","y","z","w"].map((function(e){return{headerName:e,field:r+"_"+e,type:o}}))})}},r=0;r<s.value.length;r++)n(r)})(e),function(e){var t=e.points(),n=e.attrib_names(),r=e.attrib_sizes();m.value=t.map((function(e,t){var o=e.position(),i={index:t,P_x:o.x,P_y:o.y,P_z:o.z};return n.forEach((function(t,n){if("position"!==t){var o=r[t],a=e.attrib_value(t);switch(o){case 1:i[t+"_x"]=a;break;case 2:i[t+"_x"]=a.x,i[t+"_y"]=a.y;break;case 3:i[t+"_x"]=a.x,i[t+"_y"]=a.y,i[t+"_z"]=a.z;break;case 4:i[t+"_x"]=a.x,i[t+"_y"]=a.y,i[t+"_z"]=a.z,i[t+"_w"]=a.w}}})),i}))}(e)}(e):h.value=[]}(o),n.value=!1),r.label=2;case 2:return[2]}}))}))}return(p.watch(v,(function(e,t){w.graph_disconnect_predecessors(),x()})),p.watch(d,(function(){N()})),{modules:a.AllCommunityModules,loading:n,attrib_names:s,attrib_class_vertex:d,attrib_selected_states_by_name:f,header_names:h,table_data:m,class_object_object_button:C,defaultColDef:P,columnTypes:E,attrib_selected_states:O,columnDefs:T,getRowClass:function(e){if(e.node.rowIndex%2==0)return"row-odd"},set_attrib_class_vertex:function(e){d.value=e},toggle_attrib_selection:function(e){if(null==f.value[e])o.default.set(f,e,!1);else{var t=!f.value[e];o.default.set(f,e,t)}},select_all_attributes:function(){for(var e=0,t=s.value;e<t.length;e++){var n=t[e];o.default.set(f,n,!0)}},select_no_attributes:function(){for(var e=0,t=s.value;e<t.length;e++){var n=t[e];o.default.set(f,n,!1)}}})}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(1487);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("559306d4",r,!1,{})},function(e,t,n){var r=n(1489);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("5ed89e0a",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(549),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(19);t.default=o.defineComponent({name:"navigation-bar",setup:function(){var e=o.ref([]),t=o.ref(0);o.onMounted((function(){c(i.value)}));var n=o.computed((function(){return r.StoreController.editor.current_node()})),i=o.computed((function(){return n.value?n.value.full_path():""})),a=o.computed((function(){var e=i.value.split("/");return e.shift(),e})),s=o.computed((function(){return t.value>0&&e.value.length>0})),u=o.computed((function(){return t.value<e.value.length-1})),_=o.computed((function(){return{disabled:!s.value}})),l=o.computed((function(){return{disabled:!u.value}}));function c(n){e.value.push(n),t.value=e.value.length-1}function p(e){var t=r.StoreController.scene.node(e);t&&d(t)}function d(e){r.StoreController.editor.set_current_node(e)}return(o.watch((function(){var n=i.value;i.value!=e.value[t.value]&&(e.value.splice(t.value+1,e.value.length),c(n))})),{path_elements:a,go_to_path_elements_index:function(e){p(a.value.slice(0,e+1).join("/"))},go_backward_allowed:s,go_forward_allowed:u,go_backward_class_object:_,go_forward_class_object:l,go_backward:function(){t.value-=1;var n=e.value[t.value];n&&p(n)},go_forward:function(){t.value+=1;var n=e.value[t.value];n&&p(n)},go_to_path:p,go_to_node:d})}})},function(e,t,n){var r=n(1492);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("44df8b49",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(552),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(185),o=n(19),i=n(20);t.default=o.defineComponent({name:"play_bar",setup:function(){var e=o.ref(null),t=o.computed((function(){return e.value?e.value.offsetWidth:0})),n=o.computed({get:function(){return i.StoreController.engine.frame()},set:function(e){return i.StoreController.scene.set_frame(e)}}),a=o.computed((function(){return i.StoreController.engine.frame_range()})),s=o.computed((function(){return i.StoreController.engine.frame_range_locked()})),u=o.computed({get:function(){return a.value[0]},set:function(e){return i.StoreController.scene.time_controller.set_frame_range(e,a.value[1])}}),_=o.computed({get:function(){return a.value[1]},set:function(e){return i.StoreController.scene.time_controller.set_frame_range(a.value[0],e)}}),l=o.computed({get:function(){return s.value[0]},set:function(e){return i.StoreController.scene.time_controller.set_frame_range_locked(e,s.value[1])}}),c=o.computed({get:function(){return s.value[1]},set:function(e){return i.StoreController.scene.time_controller.set_frame_range_locked(s.value[0],e)}}),p=o.computed((function(){return a.value[1]-a.value[0]+1})),d=o.computed((function(){return{left:100*((n.value-a.value[0])/(p.value+1))+"%"}})),f=o.computed((function(){return i.StoreController.engine.playing_state()}));function h(e){var n=e.clientX/t.value*p.value+a.value[0];n=Math.floor(n),i.StoreController.scene.set_frame(n)}function m(){document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m),r.CoreDom.remove_drag_classes()}function g(e){h(e)}return{scrubber:e,scrubber_width:t,frame:n,frame_range:a,frame_range_locked:s,frame_range_start:u,frame_range_end:_,frame_range_start_locked:l,frame_range_end_locked:c,frames_count:p,frame_indicator_style_object:d,playing:f,toggle_play_pause:function(){i.StoreController.scene.time_controller.toggle_play_pause()},decrement_frame:function(e){e.ctrlKey?i.StoreController.scene.set_frame(a.value[0]):i.StoreController.scene.time_controller.decrement_frame()},increment_frame:function(e){e.ctrlKey?i.StoreController.scene.set_frame(a.value[1]):i.StoreController.scene.time_controller.increment_frame()},on_mouse_down:function(){r.CoreDom.add_drag_classes(),document.addEventListener("mousemove",g),document.addEventListener("mouseup",m)},scrubber_set_frame:h}}})},function(e,t,n){var r=n(1495);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("5df98095",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(555),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(357)),i=r.__importDefault(n(1022)),a=n(20),s=n(152),u=n(19);t.default=u.defineComponent({name:"panel-node-selector",components:{Modal:o.default,NodeTree:i.default},setup:function(){var e=u.ref(null),t=a.StoreController.engine.scene.root.graph_node_id,n=u.computed((function(){return a.StoreController.editor.panel_node_selector.param_id()})),r=u.computed((function(){if(n.value){var e=a.StoreController.engine.param(n.value);if(e)return e.options.node_selection_context}})),o=u.computed((function(){return null!=n.value})),i=u.computed((function(){return{disabled:null==e.value}}));function _(){a.StoreController.editor.panel_node_selector.close()}return u.watch(o,(function(){e.value=null})),{root_id:t,node_context:r,selected_graph_node_id:e,param_id:n,display:o,accept_button_class_object:i,on_select:function(t){e.value=t},accept_selected:function(){if(e.value){var t=a.StoreController.engine.node(e.value),n=a.StoreController.editor.panel_node_selector.param_id();if(n){var r=a.StoreController.engine.param(n);if(t&&r)new s.ParamSetCommand(r,t.full_path()).push()}_()}},close:_}}})},function(e,t,n){"use strict";n.r(t);var r=n(557),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(80)),o=n(20),i=n(19);t.default=i.defineComponent({name:"node-tree",props:{graph_node_id:{type:String,default:null},node_context:{type:String,default:function(){return null}},selected_graph_node_id:{type:String,default:null},init_expanded:{type:Boolean,default:!1}},setup:function(e,t){var n=i.ref(e.init_expanded||!1),a=o.StoreController.engine.node(e.graph_node_id),s=i.computed((function(){return a.graph_node_id==e.selected_graph_node_id})),u=i.computed((function(){return{selected:s.value}})),_=i.computed((function(){return n.value?"-":"+"})),l=i.computed((function(){return{opacity:d.value?1:0}})),c=i.computed((function(){return a.parent?a.name:"/"})),p=i.computed((function(){var t=r.default(a.children(),(function(e){return e.name})),n=[];if(e.node_context)for(var o=0,i=t;o<i.length;o++){var s=(c=i[o]).children_allowed()&&c.children_controller&&c.children_controller.has_children_and_grandchildren_with_context(e.node_context),u=c.node_context()==e.node_context;(s||u)&&n.push(c)}else for(var _=0,l=t;_<l.length;_++){var c=l[_];n.push(c)}return n})),d=i.computed((function(){return a.children_allowed()&&a.children().length>0}));return{expanded:n,selected:s,class_object:u,expand_label:_,expand_button_class_object:l,node_name:c,children:p,expandable:d,toggle_expanded:function(){n.value=!n.value},on_click:function(){t.emit("select",e.graph_node_id)},on_child_select:function(e){t.emit("select",e)}}}})},function(e,t,n){var r=n(1498);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("27975dda",r,!1,{})},function(e,t,n){var r=n(1500);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("44ce95d5",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(561),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(47)),i=r.__importDefault(n(283)),a=n(185),s=n(20),u=n(23),_=[100,10,1],l=[.1,.01,.001,1e-4],c=n(152),p=n(14),d=n(6),f=n(4),h=n(37),m=n(19);t.default=m.defineComponent({name:"numeric-slider",setup:function(){var e=this,t=m.ref(null),n=m.ref(null),g=m.ref(0),v=m.ref(null),y=m.ref(!1),b=m.computed((function(){return s.StoreController.editor.numeric_slider.param_id()})),w=m.computed((function(){if(b.value)return s.StoreController.engine.json_param(b.value)})),x=m.computed((function(){var e=s.StoreController.editor.numeric_slider.position();return{left:e.x+"px",top:e.y+"px"}})),C=m.computed((function(){return null!=b.value})),P=m.computed((function(){return 1==O.value?{integer:!0}:{}})),E=void 0;m.watch(b,(function(){E=b.value?s.StoreController.scene.graph.node_from_id(b.value):void 0}));var O=m.computed((function(){if(w.value)return w.value.type==u.ParamType.INTEGER})),T=m.computed((function(){return O.value?_:i.default(_,l)})),N=m.computed((function(){return T.value.map((function(e,t){return t==g.value?{active:!0}:{inactive:!0}}))})),j=m.computed((function(){return T.value.map((function(e,t){return t==g.value}))})),A=m.computed((function(){return T.value[g.value]})),S=m.computed((function(){if(null!=t.value){if(o.default(t.value))return t.value;var e=t.value;if(e instanceof p.Color||e instanceof d.Vector2||e instanceof f.Vector3||e instanceof h.Vector4)return e.toArray().join("/")}}));function M(){document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",R),a.CoreDom.remove_drag_classes(),a.CoreDom.unset_cursor_col_resize()}function k(e){null==v.value&&(v.value=e.clientX);var r=e.clientX-v.value,i=r/20,a=r>0?Math.floor(i):Math.ceil(i);if(Math.abs(a)>=1||1==y.value){var s=a*A.value;if(A.value<1){var u=Math.floor(1/A.value);s=Math.floor(s*u)/u}if(o.default(n.value))t.value=n.value+s;else{var _=n.value;if(_ instanceof p.Color||_ instanceof d.Vector2||_ instanceof f.Vector3||_ instanceof h.Vector4){var l=_.clone().addScalar(s);t.value=l}}E&&E.set(t.value),y.value=!0}}function R(){!function(){if(E){new c.ParamSetCommand(E,t.value,n.value).push()}setTimeout((function(){s.StoreController.editor.numeric_slider.close()}),25)}()}return m.watch(C,(function(t){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(r){switch(r.label){case 0:return t?E?[4,E.compute()]:[3,2]:[3,4];case 1:return r.sent(),e=E.value,v.value=null,o.default(e)?n.value=e:(e instanceof p.Color||e instanceof d.Vector2||e instanceof f.Vector3||e instanceof h.Vector4)&&(n.value=e.clone()),document.addEventListener("mousemove",k),document.addEventListener("mouseup",R),a.CoreDom.add_drag_classes(),a.CoreDom.set_cursor_col_resize(),[3,3];case 2:M(),r.label=3;case 3:return[3,5];case 4:M(),r.label=5;case 5:return[2]}}))}))})),{display:C,main_style_object:x,starters_container_class_object:P,increment_starter_class_objects:N,current_increment_index:g,increment_starter_class_actives:j,displayed_value:S,increments:T,set_current_increment_index:function(e){g.value=e}}}})},function(e,t,n){var r=n(1503);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("96658186",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(564),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(238),a=o.__importDefault(n(356)),s=n(1505),u=n(1506),_=n(20);!function(e){e.EDIT_COMMENT="edit_comment",e.COPY_FULL_PATH="copy_full_path",e.TOGGLE_CLONE_INPUTS="toggle_clone_inputs"}(r||(r={}));var l=n(19);t.default=l.defineComponent({name:"node-context-menu",components:{DropDownMenu:a.default},setup:function(){var e=l.computed((function(){return _.StoreController.editor.context_menu.node_id()})),t=_.StoreController.engine.node(e.value);l.watch(e,(function(){t=_.StoreController.engine.node(e.value)}));var n=l.computed((function(){return _.StoreController.editor.context_menu.position()})),a=l.computed((function(){return _.StoreController.engine.json_node(e.value)}));return{active:l.computed((function(){return null!=e.value})),menu_entries:l.computed((function(){var e=[{id:r.EDIT_COMMENT},{id:r.COPY_FULL_PATH}];if(t&&t.io.inputs.override_clonable_state_allowed()){var n=a.value.override_clonable_state?"set clone inputs ON":"set clone inputs OFF";e.push({id:r.TOGGLE_CLONE_INPUTS,label:n})}return e})),style_object:l.computed((function(){return{top:Math.floor(n.value.y)+"px",left:Math.floor(n.value.x)+"px"}})),on_select:function(e){switch(e){case r.EDIT_COMMENT:!function(){o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return n=(e=t).ui_data.comment,r=null!=n&&""!=n?"Change comment":"Add comment",[4,_.StoreController.editor.dialog_prompt.show({title:r,default_value:n||"",confirm_label:"Save"})];case 1:return i=o.sent(),new s.NodeSetCommentCommand(e,i).push(),[2]}}))}))}();break;case r.COPY_FULL_PATH:a=t.full_path(),i.ClipboardHelper.copy(a);break;case r.TOGGLE_CLONE_INPUTS:n=!t.io.inputs.override_clonable_state(),new u.NodeSetOverrideClonableStateCommand(t,n).push()}var n,a;setTimeout((function(){_.StoreController.editor.context_menu.set_node_id(null)}),10)}}}})},function(e,t,n){var r=n(1508);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("e8588d34",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(567),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(3),a=n(79),s=n(20),u=n(152);!function(e){e.COPY="copy",e.PASTE="paste",e.REVERT_TO_DEFAULT="revert_to_default"}(r||(r={})),function(e){e.VALUE="value",e.AS_RELATIVE="as_relative",e.AS_ABSOLUTE="as_absolute"}(o||(o={}));var _=n(19),l=n(238);t.default=_.defineComponent({name:"param-context-menu",setup:function(){var e=_.computed((function(){return s.StoreController.editor.context_menu.position()})),t=_.computed((function(){return s.StoreController.editor.context_menu.param_id()})),n=_.computed((function(){var e=s.StoreController.editor.clipboard.param_id();if(e)return s.StoreController.scene.graph.node_from_id(e)})),c=_.computed((function(){return null!=t.value})),p=null;function d(e,t){if(n.value&&t){var r=n.value.is_multiple&&t.is_multiple,o=!n.value.is_multiple&&!t.is_multiple;if(r||o);else if(n.value.is_multiple&&!t.is_multiple)e=e.toArray()[0];else{var i=[];if(t.components)for(var a=0;a<t.components.length;a++)i.push(e);e=i}}new u.ParamSetCommand(t,e).push()}return _.watch(c,(function(e){p=e&&t.value?s.StoreController.scene.graph.node_from_id(t.value):null})),{active:c,on_select:function(e){switch(e){case r.COPY:p&&l.ClipboardHelper.copy_param(p);break;case r.PASTE+"/"+o.VALUE:!function(){i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return n.value&&p?[4,n.value.compute()]:[3,2];case 1:e.sent(),d(n.value.value,p),e.label=2;case 2:return[2]}}))}))}();break;case r.PASTE+"/"+o.AS_RELATIVE:!function(){if(n.value&&p){var e=void 0;if(n.value.is_multiple&&n.value.components)p.is_multiple||(e='ch("'+a.CoreWalker.relative_path(p,n.value.components[0])+'")');else{var t=a.CoreWalker.relative_path(p,n.value);e='ch("'+t+'")'}p&&e&&d(e,p)}}();break;case r.PASTE+"/"+o.AS_ABSOLUTE:!function(){if(n.value&&p){var e=void 0;if(n.value.is_multiple&&null!=n.value.components)if(p.is_multiple);else{var t=n.value.components[0];t&&(e='ch("'+t.full_path()+'")')}else e='ch("'+n.value.full_path()+'")';e&&p&&d(e,p)}}();break;case r.REVERT_TO_DEFAULT:!function(){if(p){d(p.default_value,p)}}()}setTimeout((function(){s.StoreController.editor.context_menu.set_param_id(null)}),10)},menu_entries:_.computed((function(){var e=[],t=null==n.value;return e.push({id:o.VALUE,label:"Values",disabled:t}),e.push({id:o.AS_RELATIVE,label:"As Relative",disabled:t}),e.push({id:o.AS_ABSOLUTE,label:"As Absolute",disabled:t}),[{id:r.COPY},{id:r.PASTE,children:e},{id:"revert_to_default"}]})),style_object:_.computed((function(){return{top:Math.floor(e.value.y)+"px",left:Math.floor(e.value.x)+"px"}}))}}})},function(e,t,n){var r=n(1511);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("d05a00d4",r,!1,{})},function(e,t,n){"use strict";n.r(t);var r=n(570),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=o.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);t.default=r.defineComponent({name:"retractable",setup:function(){var e=r.ref(!1);return{retracted:e,toggle:function(){e.value=!e.value}}}})},function(e,t,n){var r=n(1514);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("44f9fc15",r,!1,{})},function(e,t,n){var r=n(1516);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(32).default)("d90fb24e",r,!1,{})},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r={},o=void 0,i=r;function a(e,t){var n,r=e.split("."),a=i;!(r[0]in a)&&a.execScript&&a.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||t===o?a=a[n]?a[n]:a[n]={}:a[n]=t}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function u(e){var t,n,r,o,i,a,u,_,l,c,p=e.length,d=0,f=Number.POSITIVE_INFINITY;for(_=0;_<p;++_)e[_]>d&&(d=e[_]),e[_]<f&&(f=e[_]);for(t=1<<d,n=new(s?Uint32Array:Array)(t),r=1,o=0,i=2;r<=d;){for(_=0;_<p;++_)if(e[_]===r){for(a=0,u=o,l=0;l<r;++l)a=a<<1|1&u,u>>=1;for(c=r<<16|_,l=a;l<t;l+=i)n[l]=c;++o}++r,o<<=1,i<<=1}return[n,d,f]}function _(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=s?new Uint8Array(e):e,this.m=!1,this.i=c,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case l:this.b=32768,this.c=new(s?Uint8Array:Array)(32768+this.h+258);break;case c:this.b=0,this.c=new(s?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var l=0,c=1,p={t:l,s:c};_.prototype.k=function(){for(;!this.m;){var e=S(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,n=this.a,r=this.c,i=this.b,a=t.length,_=o,p=r.length,d=o;if(this.d=this.f=0,n+1>=a)throw Error("invalid uncompressed block header: LEN");if(_=t[n++]|t[n++]<<8,n+1>=a)throw Error("invalid uncompressed block header: NLEN");if(_===~(t[n++]|t[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+_>t.length)throw Error("input buffer is broken");switch(this.i){case l:for(;i+_>r.length;){if(_-=d=p-i,s)r.set(t.subarray(n,n+d),i),i+=d,n+=d;else for(;d--;)r[i++]=t[n++];this.b=i,r=this.e(),i=this.b}break;case c:for(;i+_>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(s)r.set(t.subarray(n,n+_),i),i+=_,n+=_;else for(;_--;)r[i++]=t[n++];this.a=n,this.b=i,this.c=r;break;case 1:this.j(N,A);break;case 2:var f,h,g,v,y=S(this,5)+257,b=S(this,5)+1,w=S(this,4)+4,x=new(s?Uint8Array:Array)(m.length),C=o,P=o,E=o,O=o,T=o;for(T=0;T<w;++T)x[m[T]]=S(this,3);if(!s)for(T=w,w=x.length;T<w;++T)x[m[T]]=0;for(f=u(x),C=new(s?Uint8Array:Array)(y+b),T=0,v=y+b;T<v;)switch(P=M(this,f),P){case 16:for(O=3+S(this,2);O--;)C[T++]=E;break;case 17:for(O=3+S(this,3);O--;)C[T++]=0;E=0;break;case 18:for(O=11+S(this,7);O--;)C[T++]=0;E=0;break;default:E=C[T++]=P}h=u(s?C.subarray(0,y):C.slice(0,y)),g=u(s?C.subarray(y):C.slice(y)),this.j(h,g);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var d,f,h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],m=s?new Uint16Array(h):h,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],v=s?new Uint16Array(g):g,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],b=s?new Uint8Array(y):y,w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],x=s?new Uint16Array(w):w,C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=s?new Uint8Array(C):C,E=new(s?Uint8Array:Array)(288);for(d=0,f=E.length;d<f;++d)E[d]=143>=d?8:255>=d?9:279>=d?7:8;var O,T,N=u(E),j=new(s?Uint8Array:Array)(30);for(O=0,T=j.length;O<T;++O)j[O]=5;var A=u(j);function S(e,t){for(var n,r=e.f,o=e.d,i=e.input,a=e.a,s=i.length;o<t;){if(a>=s)throw Error("input buffer is broken");r|=i[a++]<<o,o+=8}return n=r&(1<<t)-1,e.f=r>>>t,e.d=o-t,e.a=a,n}function M(e,t){for(var n,r,o=e.f,i=e.d,a=e.input,s=e.a,u=a.length,_=t[0],l=t[1];i<l&&!(s>=u);)o|=a[s++]<<i,i+=8;if((r=(n=_[o&(1<<l)-1])>>>16)>i)throw Error("invalid code length: "+r);return e.f=o>>r,e.d=i-r,e.a=s,65535&n}function k(e,t){var n,r;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),n=e[this.a++],r=e[this.a++],15&n){case R:this.method=R;break;default:throw Error("unsupported compression method")}if(0!=((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new _(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}_.prototype.j=function(e,t){var n=this.c,r=this.b;this.o=e;for(var o,i,a,s,u=n.length-258;256!==(o=M(this,e));)if(256>o)r>=u&&(this.b=r,n=this.e(),r=this.b),n[r++]=o;else for(s=v[i=o-257],0<b[i]&&(s+=S(this,b[i])),o=M(this,t),a=x[o],0<P[o]&&(a+=S(this,P[o])),r>=u&&(this.b=r,n=this.e(),r=this.b);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},_.prototype.w=function(e,t){var n=this.c,r=this.b;this.o=e;for(var o,i,a,s,u=n.length;256!==(o=M(this,e));)if(256>o)r>=u&&(u=(n=this.e()).length),n[r++]=o;else for(s=v[i=o-257],0<b[i]&&(s+=S(this,b[i])),o=M(this,t),a=x[o],0<P[o]&&(a+=S(this,P[o])),r+s>u&&(u=(n=this.e()).length);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},_.prototype.e=function(){var e,t,n=new(s?Uint8Array:Array)(this.b-32768),r=this.b-32768,o=this.c;if(s)n.set(o.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=o[e+32768];if(this.g.push(n),this.l+=n.length,s)o.set(o.subarray(r,r+32768));else for(e=0;32768>e;++e)o[e]=o[r+e];return this.b=32768,o},_.prototype.z=function(e){var t,n,r,o=this.input.length/this.a+1|0,i=this.input,a=this.c;return e&&("number"==typeof e.p&&(o=e.p),"number"==typeof e.u&&(o+=e.u)),2>o?n=(r=(i.length-this.a)/this.o[2]/2*258|0)<a.length?a.length+r:a.length<<1:n=a.length*o,s?(t=new Uint8Array(n)).set(a):t=a,this.c=t},_.prototype.n=function(){var e,t,n,r,o,i=0,a=this.c,u=this.g,_=new(s?Uint8Array:Array)(this.l+(this.b-32768));if(0===u.length)return s?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,n=u.length;t<n;++t)for(r=0,o=(e=u[t]).length;r<o;++r)_[i++]=e[r];for(t=32768,n=this.b;t<n;++t)_[i++]=a[t];return this.g=[],this.buffer=_},_.prototype.v=function(){var e,t=this.b;return s?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},k.prototype.k=function(){var e,t,n=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var r=e;if("string"==typeof r){var o,i,a=r.split("");for(o=0,i=a.length;o<i;o++)a[o]=(255&a[o].charCodeAt(0))>>>0;r=a}for(var s,u=1,_=0,l=r.length,c=0;0<l;){l-=s=1024<l?1024:l;do{_+=u+=r[c++]}while(--s);u%=65521,_%=65521}if(t!==(_<<16|u)>>>0)throw Error("invalid adler-32 checksum")}return e};var R=8;a("Zlib.Inflate",k),a("Zlib.Inflate.prototype.decompress",k.prototype.k);var D,I,L,B,z={ADAPTIVE:p.s,BLOCK:p.t};if(Object.keys)D=Object.keys(z);else for(I in D=[],L=0,z)D[L++]=I;for(L=0,B=D.length;L<B;++L)a("Zlib.Inflate.BufferType."+(I=D[L]),z[I]);var F=r.Zlib},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.scene=e,this._master_camera_node_path=null}return e.prototype.set_master_camera_node_path=function(e){this._master_camera_node_path=e},Object.defineProperty(e.prototype,"master_camera_node_path",{get:function(){return this._master_camera_node_path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"master_camera_node",{get:function(){return this.master_camera_node_path?this.scene.node(this.master_camera_node_path):(console.warn("master camera node not found"),this._find_any_camera())},enumerable:!0,configurable:!0}),e.prototype._find_any_camera=function(){var e=this.scene.root;return e.nodes_by_type("perspective_camera")[0]||e.nodes_by_type("orthographic_camera")[0]},e}();t.CamerasController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._scene=e,this._queue=new Map,this._block_level=0,this._process_item_bound=this._process_item.bind(this),this._block_level=0}return e.prototype.block=function(){this._block_level+=1},e.prototype.unblock=function(){this._block_level-=1,this._block_level<0&&(this._block_level=0),this.process_queue()},Object.defineProperty(e.prototype,"blocked",{get:function(){return this._block_level>0},enumerable:!0,configurable:!0}),e.prototype.enqueue=function(e,t){this._queue.set(e.graph_node_id,t)},e.prototype.process_queue=function(){this.blocked||this._queue.forEach(this._process_item_bound)},e.prototype._process_item=function(e,t){var n=this._scene.graph.node_from_id(t);n&&(this._queue.delete(t),n.dirty_controller.run_post_dirty_hooks(e))},e}();t.Cooker=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(908),o=function(){function e(){this._next_id=0,this._graph=new r.Graph({directed:!0,compound:!1,multigraph:!0})}return e.prototype.graph=function(){return this._graph},e.prototype.set_scene=function(e){this._scene=e},e.prototype.scene=function(){return this._scene},e.prototype.next_id=function(){return""+(this._next_id+=1)},e.prototype.setNode=function(e){this._graph.setNode(e.graph_node_id,e)},e.prototype.removeNode=function(e){this._graph.removeNode(e.graph_node_id)},e.prototype.nodes_from_ids=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n],i=this.node_from_id(o);i&&t.push(i)}return t},e.prototype.node_from_id=function(e){return this._graph.node(e)},e.prototype.connect=function(e,t){var n=e.graph_node_id,o=t.graph_node_id;if(this._graph.hasNode(n)&&this._graph.hasNode(o)){this._graph.setEdge(n,o);var i=!1;return!(!this._scene||this._scene.loading_controller.is_loading)&&(i=!r.alg.isAcyclic(this._graph)),i?(this._graph.removeEdge(n,o),!1):(e.dirty_controller.clear_successors_cache_with_predecessors(),!0)}return console.warn("attempt to connect non existing node "+n+" or "+o),!1},e.prototype.disconnect=function(e,t){if(e&&t){var n=e.graph_node_id,r=t.graph_node_id;this._graph.removeEdge(n,r),e.dirty_controller.clear_successors_cache_with_predecessors()}},e.prototype.disconnect_predecessors=function(e){for(var t=0,n=this.predecessors(e);t<n.length;t++){var r=n[t];this.disconnect(r,e)}},e.prototype.disconnect_successors=function(e){for(var t=0,n=this.successors(e);t<n.length;t++){var r=n[t];this.disconnect(e,r)}},e.prototype.predecessor_ids=function(e){return this._graph.predecessors(e)||[]},e.prototype.predecessors=function(e){var t=this.predecessor_ids(e.graph_node_id);return this.nodes_from_ids(t)},e.prototype.successor_ids=function(e){return this._graph.successors(e)||[]},e.prototype.successors=function(e){var t=this.successor_ids(e.graph_node_id)||[];return this.nodes_from_ids(t)},e.prototype.all_next_ids=function(e,t){for(var n=[],r=this[t](e.graph_node_id);r.length>0;){for(var o=[],i=0,a=r;i<a.length;i++)for(var s=a[i],u=0,_=this[t](s);u<_.length;u++){var l=_[u];o.push(l)}for(var c=0,p=r;c<p.length;c++){var d=p[c];n.push(d)}for(var f=0,h=o;f<h.length;f++){d=h[f];r.push(d)}r=o}return n},e.prototype.all_predecessor_ids=function(e){return this.all_next_ids(e,"predecessor_ids")},e.prototype.all_successor_ids=function(e){return this.all_next_ids(e,"successor_ids")},e.prototype.all_predecessors=function(e){var t=this.all_predecessor_ids(e);return this.nodes_from_ids(t)},e.prototype.all_successors=function(e){var t=this.all_successor_ids(e);return this.nodes_from_ids(t)},e}();t.CoreGraph=o},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(){this._cooking_nodes_by_id=new Map,this._resolves=[]}return e.prototype.add_node=function(e){this._cooking_nodes_by_id.set(e.graph_node_id,e)},e.prototype.remove_node=function(e){this._cooking_nodes_by_id.delete(e.graph_node_id),0==this._cooking_nodes_by_id.size&&this.flush()},e.prototype.flush=function(){for(var e;e=this._resolves.pop();)e()},e.prototype.wait_for_cooks_completed=function(){return r.__awaiter(this,void 0,void 0,(function(){var e=this;return r.__generator(this,(function(t){return 0==this._cooking_nodes_by_id.size?[2]:[2,new Promise((function(t,n){e._resolves.push(t)}))]}))}))},e}();t.CookController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(56);var r=n(56),o=function(){function e(e){this.scene=e}return e.prototype.set_listener=function(e){this._events_listener=e},Object.defineProperty(e.prototype,"events_listener",{get:function(){return this._events_listener},enumerable:!0,configurable:!0}),e.prototype.dispatch=function(e,t,n){var r;null===(r=this._events_listener)||void 0===r||r.process_events(e,t,n)},Object.defineProperty(e.prototype,"emit_allowed",{get:function(){return this.scene.loading_controller.loaded&&null!=this._events_listener&&this.scene.loading_controller.auto_updating&&!r.POLY.player_mode()},enumerable:!0,configurable:!0}),e}();t.EventsController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o={antialias:!0},i=function(){function e(){this._next_renderer_id=0,this._next_env_map_id=0,this._renderers={},this._env_maps={},this._require_webgl2=!1,this._resolves=[]}return e.prototype.set_require_webgl2=function(){this._require_webgl2||(this._require_webgl2=!0)},e.prototype.rendering_context=function(e){var t=null;return this._require_webgl2&&(t=this._rendering_context_webgl(e,!0)),t||(t=this._rendering_context_webgl(e,!1)),t},e.prototype._rendering_context_webgl=function(e,t){var n=t?"webgl2":"webgl",r=e.getContext(n,o);return r||(n=t?"experimental-webgl2":"experimental-webgl",r=e.getContext(n,o)),r},e.prototype.register_renderer=function(e){if(e._polygon_id)throw new Error("render already registered");e._polygon_id=this._next_renderer_id+=1,this._renderers[e._polygon_id]=e,1==Object.keys(this._renderers).length&&this.flush_callbacks_with_renderer(e)},e.prototype.deregister_renderer=function(e){delete this._renderers[e._polygon_id],e.dispose()},e.prototype.first_renderer=function(){var e=Object.keys(this._renderers)[0];return e?this._renderers[e]:null},e.prototype.renderers=function(){return Object.values(this._renderers)},e.prototype.flush_callbacks_with_renderer=function(e){for(var t;t=this._resolves.pop();)t(e)},e.prototype.wait_for_renderer=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){return(e=this.first_renderer())?[2,e]:[2,new Promise((function(e,n){t._resolves.push(e)}))]}))}))},e}();t.RenderersController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._node_register={},this._node_register_categories={},this._node_register_options={}}return e.prototype.register_node=function(e,t,n){var r=e.node_context(),o=e.type();if(this._node_register[r]=this._node_register[r]||{},this._node_register[r][o])throw new Error("node "+r+"/"+o+" already registered");this._node_register[r][o]=e,t&&(this._node_register_categories[r]=this._node_register_categories[r]||{},this._node_register_categories[r][o]=t),this._node_register_options[r]=this._node_register_options[r]||{},n&&(this._node_register_options[r][o]=n)},e.prototype.deregister_node=function(e,t){delete this._node_register[e][t],delete this._node_register_categories[e][t],delete this._node_register_options[e][t]},e.prototype.registered_nodes_for_context_and_parent_type=function(e,t){var n=this;return this._node_register[e]?Object.values(this._node_register[e]).filter((function(r){var o,i=n._node_register_options[e][r.type()];return!i||(null===(o=i.only)||void 0===o?void 0:o.includes(t))})):[]},e.prototype.registered_nodes=function(e,t){for(var n={},r=0,o=this.registered_nodes_for_context_and_parent_type(e,t);r<o.length;r++){var i=o[r];n[i.type()]=i}return n},e.prototype.registered_category=function(e,t){return this._node_register_categories[e][t]},e}();t.NodesRegister=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.scene=e,this._lifecycle_on_create_allowed=!0}return e.prototype.on_create_hook_allowed=function(){return this.scene.loading_controller.loaded&&this._lifecycle_on_create_allowed},e.prototype.on_create_prevent=function(e){this._lifecycle_on_create_allowed=!1,e(),this._lifecycle_on_create_allowed=!0},e}();t.LifeCycleController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e){this.scene=e,this._loading_state=!0,this._auto_updating=!0,this._first_object_loaded=!1}return e.prototype.mark_as_loading=function(){this._set_loading_state(!0)},e.prototype.mark_as_loaded=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._set_loading_state(!1)];case 1:return e.sent(),[2]}}))}))},e.prototype._set_loading_state=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this._loading_state=e,[4,this.set_auto_update(!this._loading_state)];case 1:return t.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"is_loading",{get:function(){return this._loading_state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return!this._loading_state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"auto_updating",{get:function(){return this._auto_updating},enumerable:!0,configurable:!0}),e.prototype.set_auto_update=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return this._auto_updating===e?[3,4]:(this._auto_updating=e,this._auto_updating?(t=this.scene.root)?[4,t.process_queue()]:[3,2]:[3,3]);case 1:n.sent(),n.label=2;case 2:return[3,3];case 3:return[3,4];case 4:return[2]}}))}))},e.prototype.on_first_object_loaded=function(){var e;if(!this._first_object_loaded){this._first_object_loaded=!0;var t=document.getElementById("scene_loading_container");t&&(null===(e=t.parentElement)||void 0===e||e.removeChild(t))}},e}();t.LoadingController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(618),o=function(){function e(){this.references={},this.next_id=0,this.next_id_s="0"}return e.prototype.register=function(e,t,n){var o=this.next_id_s,i=new r.MissingExpressionReference(e,t,n,o);return this.references[n]=this.references[n]||{},this.references[n][o]=i,this.next_id+=1,this.next_id_s=""+this.next_id,i},e.prototype.unregister=function(e){this.references[e.full_path]&&delete this.references[e.full_path][e.id]},e.prototype.check_for_references=function(e){var t=e.full_path(),n=this.references[t];n&&(Object.keys(n).forEach((function(t){n[t].resolve_with_node(e)})),delete this.references[t])},e}();t.MissingReferencesController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){this.param=e,this.jsep_node=t,this.full_path=n,this.id=r,console.log(this.jsep_node,this.param)}return e.prototype.resolve_with_node=function(e){console.warn("this should not work! REFACTOR asap")},e}();t.MissingExpressionReference=r;var o=function(){function e(){this.found_graph_nodes=[],this.missing_paths=[]}return e.prototype.set_found_graph_nodes=function(e){this.found_graph_nodes=e},e.prototype.set_missing_paths=function(e){this.missing_paths=e},e}();t.ReferenceSearchResult=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(283)),i=r.__importDefault(n(74)),a=r.__importDefault(n(85)),s=n(620),u=n(50),_=function(){function e(e){this.scene=e,this._node_context_signatures={},this._instanciated_nodes_by_context_and_type={}}return e.prototype.init=function(){this._root=new s.ObjectsManagerNode(this.scene),this._root.initialize_base_and_node(),this._root.init_display_scene()},Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.objects_from_mask=function(e){var t=e.split(" "),n=this.root.children(),r=(n=n.filter((function(e){return u.CoreString.matches_one_mask(e.name,t)}))).map((function(e){return e.object}));return a.default(r)},e.prototype.clear=function(){for(var e,t=0,n=this.root.children();t<n.length;t++){var r=n[t];null===(e=this.root.children_controller)||void 0===e||e.remove_node(r)}},e.prototype.node=function(e){return"/"===e?this.root:this.root.node(e)},e.prototype.all_nodes=function(){for(var e=[this.root],t=[this.root],n=0;t.length>0&&n<10;){var r=i.default(t.map((function(e){return e.children_allowed()?e.children():[]})));e=o.default(e,r),t=r,n+=1}return i.default(e)},e.prototype.reset_node_context_signatures=function(){this._node_context_signatures={}},e.prototype.register_node_context_signature=function(e){e.children_allowed()&&e.children_controller&&(this._node_context_signatures[e.children_controller.node_context_signature()]=!0)},e.prototype.node_context_signatures=function(){return Object.keys(this._node_context_signatures).sort().map((function(e){return e.toLowerCase()}))},e.prototype.add_to_instanciated_node=function(e){var t=e.node_context(),n=e.type;this._instanciated_nodes_by_context_and_type[t]=this._instanciated_nodes_by_context_and_type[t]||{},this._instanciated_nodes_by_context_and_type[t][n]=this._instanciated_nodes_by_context_and_type[t][n]||{},this._instanciated_nodes_by_context_and_type[t][n][e.graph_node_id]=e},e.prototype.remove_from_instanciated_node=function(e){var t=e.node_context(),n=e.type;delete this._instanciated_nodes_by_context_and_type[t][n][e.graph_node_id]},e.prototype.instanciated_nodes=function(e,t){var n=[];if(this._instanciated_nodes_by_context_and_type[e]){var r=this._instanciated_nodes_by_context_and_type[e][t];if(r)for(var o=0,i=Object.keys(r);o<i.length;o++){var a=i[o];n.push(r[a])}}return n},e}();t.NodesController=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(59),i=n(621);n(56);var a=n(30),s=n(9),u=n(56),_=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(s.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t._object=new o.Group,t._queued_nodes_by_id={},t._queued_nodes_by_path={},t._expected_geo_nodes={},t._process_queue_start=-1,t._children_controller_context=a.NodeContext.OBJ,t}return r.__extends(t,e),t.type=function(){return"obj"},t.prototype.initialize_node=function(){var e;null===(e=this.children_controller)||void 0===e||e.init(),this.lifecycle.add_on_child_add_hook(this._on_child_add.bind(this)),this.lifecycle.add_on_child_remove_hook(this._on_child_remove.bind(this))},t.prototype.init_display_scene=function(){this._object.name="_WORLD_",this._scene.display_scene.add(this._object)},t.prototype.object=function(){return this._object},t.prototype.create_node=function(t){return e.prototype.create_node.call(this,t)},t.prototype.children=function(){return e.prototype.children.call(this)},t.prototype.nodes_by_type=function(t){return e.prototype.nodes_by_type.call(this,t)},t.prototype.multiple_display_flags_allowed=function(){return!0},t.prototype.add_to_queue=function(e){var t=e.graph_node_id;if(null==this._queued_nodes_by_id[t])return this._queued_nodes_by_id[t]=e},t.prototype.process_queue=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i,a,s,_,l,c=this;return r.__generator(this,(function(r){switch(r.label){case 0:for(this._queued_nodes_by_path={},e=Object.keys(this._queued_nodes_by_id),t=0,n=e;t<n.length;t++)o=n[t],i=this._queued_nodes_by_id[o],delete this._queued_nodes_by_id[o],a="_____"+i.render_order+"__"+i.full_path(),this._queued_nodes_by_path[a]=i;return s=Object.keys(this._queued_nodes_by_path).sort().map((function(e){var t=c._queued_nodes_by_path[e];return c.update_object(t)})),_=this,(l=this._expected_geo_nodes)?[3,2]:[4,this.expected_loading_geo_nodes_by_id()];case 1:l=r.sent(),r.label=2;case 2:return _._expected_geo_nodes=l,this._process_queue_start=performance.now(),Promise.all(s).then((function(){u.POLY.log("SCENE LOADED '"+c.scene.name+"' in "+(performance.now()-c._process_queue_start))})),[2]}}))}))},t.prototype.update_object=function(e){this.scene.loading_controller.auto_updating?this.add_to_scene(e):this.add_to_queue(e)},t.prototype.get_parent_for_node=function(e){if(e.attachable_to_hierarchy){var t=e.io.inputs.input(0);return t?t.children_group:this._object}return null},t.prototype.add_to_scene=function(e){if(e.attachable_to_hierarchy){var t=this.get_parent_for_node(e);t&&(e.used_in_scene?e.add_object_to_parent(t):e.remove_object_from_parent())}},t.prototype.remove_from_scene=function(e){e.remove_object_from_parent()},t.prototype.are_children_cooking=function(){for(var e=0,t=this.children();e<t.length;e++){if(t[e].is_display_node_cooking())return!0}return!1},t.prototype.expected_loading_geo_nodes_by_id=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:e=this.nodes_by_type("geo"),t={},n=0,o=e,r.label=1;case 1:return n<o.length?[4,(i=o[n]).is_displayed()]:[3,4];case 2:r.sent()&&(t[i.graph_node_id]=i),r.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},t.prototype.add_to_parent_transform=function(e){this.update_object(e)},t.prototype.remove_from_parent_transform=function(e){this.update_object(e)},t.prototype._on_child_add=function(e){e&&this.update_object(e)},t.prototype._on_child_remove=function(e){e&&this.remove_from_scene(e)},t}(i.TypedBaseManagerNode);t.ObjectsManagerNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(63),i=n(30),a=n(103),s=n(682),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new a.TypedContainerController(t,s.ManagerContainer),t}return r.__extends(t,e),t.node_context=function(){return i.NodeContext.MANAGER},t}(o.TypedNode);t.TypedBaseManagerNode=u;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(u);t.BaseManagerNodeClass=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.node=e,this._dirty_count=0,this._dirty=!0}return Object.defineProperty(e.prototype,"is_dirty",{get:function(){return!0===this._dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty_timestamp",{get:function(){return this._dirty_timestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty_count",{get:function(){return this._dirty_count},enumerable:!0,configurable:!0}),e.prototype.add_post_dirty_hook=function(e,t){this._post_dirty_hook_names=this._post_dirty_hook_names||[],this._post_dirty_hooks=this._post_dirty_hooks||[],this._post_dirty_hook_names.includes(e)?console.warn("hook with name "+e+" already exists",this._post_dirty_hook_names):(this._post_dirty_hook_names.push(e),this._post_dirty_hooks.push(t))},e.prototype.has_hook=function(e){return!!this._post_dirty_hook_names&&this._post_dirty_hook_names.includes(e)},e.prototype.remove_dirty_state=function(){this._dirty=!1},e.prototype.set_forbidden_trigger_nodes=function(e){this._forbidden_trigger_nodes=e.map((function(e){return e.graph_node_id}))},e.prototype.set_dirty=function(e,t){null==t&&(t=!0),e&&this._forbidden_trigger_nodes&&this._forbidden_trigger_nodes.includes(e.graph_node_id)||(null==e&&(e=this.node),this._dirty=!0,this._dirty_timestamp=performance.now(),this._dirty_count+=1,this.run_post_dirty_hooks(e),!0===t&&this.set_successors_dirty(e))},e.prototype.run_post_dirty_hooks=function(e){if(this._post_dirty_hooks){var t=this.node.scene.cooker;if(t.blocked)t.enqueue(this.node,e);else for(var n=0,r=this._post_dirty_hooks;n<r.length;n++){(0,r[n])(e)}}},e.prototype.set_successors_dirty=function(e){this._cached_successors=this._cached_successors||this.node.graph_all_successors();for(var t=0,n=this._cached_successors;t<n.length;t++){n[t].dirty_controller.set_dirty(e,!1)}},e.prototype.clear_successors_cache=function(){this._cached_successors=void 0},e.prototype.clear_successors_cache_with_predecessors=function(){this.clear_successors_cache();for(var e=0,t=this.node.graph_all_predecessors();e<t.length;e++){t[e].dirty_controller.clear_successors_cache()}},e}();t.DirtyController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(14),i=n(52),a=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.node=e,this._position=new r.Vector2,this._width=50,this._border_radius=3,this._color=new o.Color(.75,.75,.75),this._layout_vertical=!0,this._json={x:0,y:0},this._position.x=t,this._position.y=n}return e.prototype.set_border_radius=function(e){this._border_radius=e},e.prototype.border_radius=function(){return this._border_radius},e.prototype.set_width=function(e){this._width=e},e.prototype.width=function(){return this._width},e.prototype.set_comment=function(e){this._comment=e,this.node.emit(i.NodeEvent.UI_DATA_COMMENT_UPDATED)},Object.defineProperty(e.prototype,"comment",{get:function(){return this._comment},enumerable:!0,configurable:!0}),e.prototype.set_color=function(e){this._color=e},e.prototype.color=function(){return this._color},e.prototype.set_layout_horizontal=function(){this._layout_vertical=!1},e.prototype.is_layout_vertical=function(){return this._layout_vertical},e.prototype.copy=function(e){this._position.copy(e.position),this._color.copy(e.color())},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),e.prototype.set_position=function(e,t){if(void 0===t&&(t=0),e instanceof r.Vector2)this._position.copy(e);else{var n=e;this._position.set(n,t)}this.node.emit(i.NodeEvent.UI_DATA_POSITION_UPDATED)},e.prototype.translate=function(e,t){void 0===t&&(t=!1),this._position.add(e),t&&(this._position.x=Math.round(this._position.x),this._position.y=Math.round(this._position.y)),this.node.emit(i.NodeEvent.UI_DATA_POSITION_UPDATED)},e.prototype.to_json=function(){return this._json.x=this._position.x,this._json.y=this._position.y,this._json.comment=this._comment,this._json},e}();t.UIData=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(625),o=n(626),i=function(e){this.node=e,this.time_dependent=new r.TimeDependentState(this.node),this.error=new o.ErrorState(this.node)};t.StatesController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.node=e}return Object.defineProperty(e.prototype,"active",{get:function(){return this.are_params_time_dependent()||this.are_inputs_time_dependent()},enumerable:!0,configurable:!0}),e.prototype.are_params_time_dependent=function(){for(var e=0,t=this.node.params.names;e<t.length;e++){var n=t[e],r=this.node.params.get(n);if(r&&r.states.time_dependent.active)return!0}return!1},e.prototype.are_inputs_time_dependent=function(){for(var e=0,t=this.node.io.inputs.inputs();e<t.length;e++){var n=t[e];if(n&&n.states.time_dependent.active)return!0}return!1},e.prototype.force_time_dependent=function(){var e=this.node.graph_predecessors().map((function(e){return e.graph_node_id})),t=this.node.scene.time_controller.graph_node;e.includes(t.graph_node_id)||this.node.add_graph_input(t)},e.prototype.unforce_time_dependent=function(){var e=this.node.scene.time_controller.graph_node;this.node.remove_graph_input(e)},e}();t.TimeDependentState=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),o=function(){function e(e){this.node=e}return e.prototype.set=function(e){this._message!=e&&(console.warn("error",e),this._message=e,this.on_update())},Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.set(void 0)},Object.defineProperty(e.prototype,"active",{get:function(){return null!=this._message},enumerable:!0,configurable:!0}),e.prototype.on_update=function(){null!=this._message&&this.node.set_container(null,"from error '"+this._message+"'"),this.node.emit(r.NodeEvent.ERROR_UPDATED)},e}();t.ErrorState=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(200),o=n(79),i=function(){function e(e){this.node=e,this._parent=null}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),e.prototype.set_parent=function(e){e!=this.node.parent_controller.parent&&(this._parent=e,this._parent&&this.node.name_controller.request_name_to_parent(r.NameController.base_name(this.node)))},e.prototype.is_selected=function(){var e,t,n;return(null===(n=null===(t=null===(e=this.parent)||void 0===e?void 0:e.children_controller)||void 0===t?void 0:t.selection)||void 0===n?void 0:n.contains(this.node))||!1},e.prototype.full_path=function(){var e=o.CoreWalker.SEPARATOR;if(null!=this._parent){var t=this._parent.full_path();return t===e?t+this.node.name:t+e+this.node.name}return e},e.prototype.on_set_parent=function(){if(this._on_set_parent_hooks)for(var e=0,t=this._on_set_parent_hooks;e<t.length;e++){(0,t[e])()}},e}();t.HierarchyParentController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.separator=function(){return"/"},e.find_node=function(e,t,n){if(!e)return null;var r=t.split("/").filter((function(e){return e.length>0})),o=r[0],i=null;if("/"!==t[0]){switch(o){case"..":i=e.parent;break;case".":i=e;break;default:i=e.node(o)}if(i&&n&&n.add_node(o,i),null!=i&&r.length>1){var a=r.slice(1).join("/");i=this.find_node(i,a,n)}return i}var s=t.substr(1);return i=this.find_node(e.root,s,n)},e}();t.CoreWalkerEmbed=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(50),i=n(79),a=n(57),s=r.__importDefault(n(336)),u=r.__importDefault(n(159)),_=r.__importDefault(n(80)),l=r.__importDefault(n(199)),c=n(52),p=n(200),d=r.__importDefault(n(634)),f=n(56),h=function(){function e(e,t){this.node=e,this._context=t,this._children={},this._children_by_type={},this._children_and_grandchildren_by_context={},this._is_dependent_on_children=!1}return Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection=this._selection||new d.default(this.node)},enumerable:!0,configurable:!0}),e.prototype.init=function(e){void 0===e&&(e=!1),this._children={},e&&(this._is_dependent_on_children=e,this._is_dependent_on_children&&(this._children_node=new a.CoreGraphNode(this.node.scene,"children"),this.node.add_graph_input(this._children_node)))},Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),e.prototype.set_child_name=function(e,t){var n;if(t=(t=t.replace(/[^A-Za-z0-9]/g,"_")).replace(/^[0-9]/,"_"),null!=(n=this._children[t])){if(e.name===t&&n.graph_node_id===e.graph_node_id)return;return t=o.CoreString.increment(t),this.set_child_name(e,t)}var r=e.name;this._children[r]&&delete this._children[r],this._children[t]=e,e.name_controller.update_name_from_parent(t),this._add_to_nodes_by_type(e),this.node.scene.nodes_controller.add_to_instanciated_node(e)},e.prototype.node_context_signature=function(){return this.node.node_context()+"/"+this.node.type},e.prototype.available_children_classes=function(){return this._context?f.POLY.registered_nodes(this._context,this.node.type):(console.warn("children controller not initialized for node",this.node.type,this.node),{})},e.prototype.create_node=function(e){if(null==this.available_children_classes())throw"no children available for "+this.node.full_path()+".";var t=this.available_children_classes()[e];if(null==t){var n="node type "+e+" not found for "+this.node.full_path()+" ("+Object.keys(this.available_children_classes()).join(", ")+", "+this._context+", "+this.node.type+")";throw console.error(n),n}var r=new t(this.node.scene,"child_node_"+e);return r.initialize_base_and_node(),this.add_node(r),r},e.prototype.add_node=function(e){if(e.set_parent(this.node),e.params.init(),e.parent_controller.on_set_parent(),e.name_controller.post_set_full_path(),e.children_allowed()&&e.children_controller)for(var t=0,n=e.children_controller.children();t<n.length;t++){n[t].name_controller.post_set_full_path()}return this.node.emit(c.NodeEvent.CREATED,{child_node_json:e.to_json()}),this.node.scene.lifecycle_controller.on_create_hook_allowed()&&e.lifecycle.on_create(),this.set_child_name(e,p.NameController.base_name(e)),this.node.lifecycle.on_child_add(e),this._is_dependent_on_children&&this._children_node&&this._children_node.add_graph_input(e),e.require_webgl2()&&this.node.scene.webgl_controller.set_require_webgl2(),e},e.prototype.remove_node=function(e){var t,n;if(e.parent!=this.node)return console.warn("node "+e.name+" not under parent "+this.node.full_path());e.set_successors_dirty(this.node),this._is_dependent_on_children&&this._children_node&&this._children_node.remove_graph_input(e),this.selection.contains(e)&&this.selection.remove([e]);var r=e.io.connections.first_input_connection();null===(t=e.io.connections.input_connections())||void 0===t||t.forEach((function(e){e&&e.disconnect({set_input:!0})})),null===(n=e.io.connections.output_connections())||void 0===n||n.forEach((function(e){if(e&&(e.disconnect({set_input:!0}),r)){var t=r.node_src,n=e.output_index,o=e.node_dest,i=e.input_index;o.io.inputs.set_input(i,t,n)}})),e.graph_disconnect_successors(),e.set_parent(null),delete this._children[e.name],this._remove_from_nodes_by_type(e),this.node.scene.nodes_controller.remove_from_instanciated_node(e),this.node.lifecycle.on_child_remove(e),e.lifecycle.on_delete(),e.emit(c.NodeEvent.DELETED,{parent_id:this.node.graph_node_id})},e.prototype.find_node=function(e){if(null==e)return null;if(e===i.CoreWalker.CURRENT||e===i.CoreWalker.CURRENT_WITH_SLASH)return this.node;if(e===i.CoreWalker.PARENT||e===i.CoreWalker.PARENT_WITH_SLASH)return this.node.parent;var t=i.CoreWalker.separator();e[0]===t&&(e=e.substring(1,e.length));var n=e.split(t);if(1===n.length){var r=n[0];return this._children[r]}return i.CoreWalker.find_node(this.node,e)},e.prototype._add_to_nodes_by_type=function(e){var t=e.graph_node_id,n=e.type;this._children_by_type[n]=this._children_by_type[n]||[],s.default(this._children_by_type[n],t)||this._children_by_type[n].push(t),this.add_to_children_and_grandchildren_by_context(e)},e.prototype._remove_from_nodes_by_type=function(e){var t=e.graph_node_id,n=e.type;if(this._children_by_type[n]){var r=this._children_by_type[n].indexOf(t);r>=0&&(this._children_by_type[n].splice(r,1),0==this._children_by_type[n].length&&delete this._children_by_type[n])}this.remove_from_children_and_grandchildren_by_context(e)},e.prototype.add_to_children_and_grandchildren_by_context=function(e){var t,n=e.graph_node_id,r=e.node_context();this._children_and_grandchildren_by_context[r]=this._children_and_grandchildren_by_context[r]||[],s.default(this._children_and_grandchildren_by_context[r],n)||this._children_and_grandchildren_by_context[r].push(n),this.node.parent&&this.node.parent.children_allowed()&&(null===(t=this.node.parent.children_controller)||void 0===t||t.add_to_children_and_grandchildren_by_context(e))},e.prototype.remove_from_children_and_grandchildren_by_context=function(e){var t,n=e.graph_node_id,r=e.node_context();if(this._children_and_grandchildren_by_context[r]){var o=this._children_and_grandchildren_by_context[r].indexOf(n);o>=0&&(this._children_and_grandchildren_by_context[r].splice(o,1),0==this._children_and_grandchildren_by_context[r].length&&delete this._children_and_grandchildren_by_context[r])}this.node.parent&&this.node.parent.children_allowed()&&(null===(t=this.node.parent.children_controller)||void 0===t||t.remove_from_children_and_grandchildren_by_context(e))},e.prototype.nodes_by_type=function(e){var t=this._children_by_type[e]||[],n=this.node.scene.graph,r=[];return t.forEach((function(e){var t=n.node_from_id(e);t&&r.push(t)})),r},e.prototype.has_children_and_grandchildren_with_context=function(e){return null!=this._children_and_grandchildren_by_context[e]},e.prototype.children=function(){return l.default(this._children)},e.prototype.children_names=function(){return _.default(u.default(this._children))},e.prototype.traverse_children=function(e){for(var t,n=0,r=this.children();n<r.length;n++){var o=r[n];e(o),null===(t=o.children_controller)||void 0===t||t.traverse_children(e)}},e}();t.HierarchyChildrenController=h},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(337)),i=r.__importDefault(n(608)),a=r.__importDefault(n(338)),s=n(52),u=function(){function e(e){this._node=e,this._node_ids=[],this._json=[]}return e.prototype.node=function(){return this._node},e.prototype.nodes=function(){return this._node.scene.graph.nodes_from_ids(this._node_ids)},e.prototype.contains=function(e){return this._node_ids.includes(e.graph_node_id)},e.prototype.equals=function(e){var t=e.map((function(e){return e.graph_node_id})).sort();return a.default(t,this._node_ids)},e.prototype.clear=function(){this._node_ids=[],this.send_update_event()},e.prototype.set=function(e){this._node_ids=[],this.add(e)},e.prototype.add=function(e){var t=e.map((function(e){return e.graph_node_id}));this._node_ids=i.default(this._node_ids,t),this.send_update_event()},e.prototype.remove=function(e){var t=e.map((function(e){return e.graph_node_id}));this._node_ids=o.default(this._node_ids,t),this.send_update_event()},e.prototype.send_update_event=function(){this._node.emit(s.NodeEvent.SELECTION_UPDATED)},e.prototype.to_json=function(){return this._json=this._json||[],this._json=this._node_ids.map((function(e){return e})),this._json},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.node=e,this._creation_completed=!1,this._on_child_add_hooks=[],this._on_child_remove_hooks=[],this._on_create_hooks=[],this._on_delete_hooks=[]}return e.prototype.set_creation_completed=function(){this._creation_completed=!0},Object.defineProperty(e.prototype,"creation_completed",{get:function(){return this.node.scene.loading_controller.loaded&&this._creation_completed},enumerable:!0,configurable:!0}),e.prototype.add_on_child_add_hook=function(e){this._on_child_add_hooks.push(e)},e.prototype.on_child_add=function(e){this.execute_hooks_with_child_node(this._on_child_add_hooks,e)},e.prototype.add_on_child_remove_hook=function(e){this._on_child_remove_hooks.push(e)},e.prototype.on_child_remove=function(e){this.execute_hooks_with_child_node(this._on_child_remove_hooks,e)},e.prototype.add_create_hook=function(e){this._on_create_hooks.push(e)},e.prototype.on_create=function(){this.execute_hooks(this._on_create_hooks)},e.prototype.add_delete_hook=function(e){this._on_delete_hooks.push(e)},e.prototype.on_delete=function(){this.execute_hooks(this._on_delete_hooks)},e.prototype.execute_hooks=function(e){for(var t=0,n=e;t<n.length;t++){(0,n[t])()}},e.prototype.execute_hooks_with_child_node=function(e,t){for(var n=0,r=e;n<r.length;n++){(0,r[n])(t)}},e}();t.LifeCycleController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(56),i=function(){function e(e){this.node=e,this._cooking=!1,this._cooks_count=0,this._max_cook_time=-1,this._cook_time_with_inputs=0,this._cook_time=0,this._cook_time_params=0,this._inputs_evaluation_required=!0}return e.prototype.disallow_inputs_evaluation=function(){this._inputs_evaluation_required=!1},Object.defineProperty(e.prototype,"is_cooking",{get:function(){return!0===this._cooking},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cooks_count",{get:function(){return this._cooks_count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cook_time",{get:function(){return this._cook_time},enumerable:!0,configurable:!0}),e.prototype._init_cooking_state=function(){this._cooking=!0,this._cooking_dirty_timestamp=this.node.dirty_controller.dirty_timestamp},e.prototype._init_cooking_start_time=function(e){null==e&&(e=this.node.scene.performance.started),e&&(this._cook_time_start=performance.now())},e.prototype._start_cook_if_no_errors=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return this.node.states.error.active?(this.end_cook(),[3,4]):[3,1];case 1:return n.trys.push([1,3,,4]),[4,this.node.cook(e)];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),this.node.states.error.set("node internal error: '"+t+"'."),console.error(this.node.full_path(),t),this.end_cook(),[3,4];case 4:return[2]}}))}))},e.prototype.cook_main=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:return this.is_cooking?[2]:(this._init_cooking_state(),(e=this.node.scene.performance.started)&&(this._cook_time_with_inputs_start=performance.now()),this.node.states.error.clear(),[4,this.evaluate_inputs_and_params()]);case 1:if(t=r.sent(),this._init_cooking_start_time(e),n=[],t)for(o=void 0,i=0;i<t.length;i++)(o=t[i])&&(this.node.io.inputs.input_clonable_state_with_override(i)?n.push(o.core_content_cloned()):n.push(o.core_content()));return[4,this._start_cook_if_no_errors(n)];case 2:return r.sent(),[2]}}))}))},e.prototype.cook_main_without_inputs=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.node.scene.cook_controller.add_node(this.node),this.is_cooking?(console.warn("cook_main_without_inputs already cooking",this.node.full_path()),[2]):(this._init_cooking_state(),this._init_cooking_start_time(),this.node.states.error.clear(),[4,this.node.params.eval_all()]);case 1:return e.sent(),[4,this._start_cook_if_no_errors([])];case 2:return e.sent(),[2]}}))}))},e.prototype.end_cook=function(e){this._increment_cooks_count();var t=this.node.dirty_controller.dirty_timestamp;null==t||t===this._cooking_dirty_timestamp?(this.node.remove_dirty_state(),this._terminate_cook_process()):(o.POLY.log("COOK AGAIN",t,this._cooking_dirty_timestamp,this.node.full_path()),this._cooking=!1,this.cook_main())},e.prototype._terminate_cook_process=function(){this.is_cooking&&(this._cooking=!1,this._record_cook_time(),setTimeout(this.node.container_controller.notify_requesters.bind(this.node.container_controller),0))},e.prototype._increment_cooks_count=function(){this.is_cooking&&null!=this._cook_time_start&&(this._cooks_count+=1)},e.prototype._record_cook_time=function(){if(this.node.scene.performance.started){var e=performance.now();null!=this._cook_time_with_inputs_start&&(this._cook_time_with_inputs=e-this._cook_time_with_inputs_start,this._cook_time_with_inputs_start=void 0),null!=this._cook_time_params_start&&null!=this._cook_time_start&&(this._cook_time_params=this._cook_time_start-this._cook_time_params_start),null!=this._cook_time_start&&(this._cook_time=e-this._cook_time_start,this._cook_time_start=void 0),this._max_cook_time=Math.max(this._max_cook_time,this._cook_time)}this.node.scene.performance.started&&this.node.scene.performance.record_node_cook_data(this.node)},e.prototype.evaluate_inputs_and_params=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=[],this._inputs_evaluation_required?[4,this.node.io.inputs.eval_required_inputs_p()]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return this.node.scene.performance.started&&(this._cook_time_params_start=performance.now()),[4,this.node.params.eval_all()];case 3:return t.sent(),[2,e]}}))}))},Object.defineProperty(e.prototype,"cook_time_with_inputs",{get:function(){return this._cook_time_with_inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cook_time_params",{get:function(){return this._cook_time_params},enumerable:!0,configurable:!0}),e.prototype._time_with_precision=function(e){return Math.round(1e3*e)/1e3},e}();t.CookController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3).__importDefault(n(952)),i=n(63),a=n(71);!function(e){e.SUCCESSORS="graph_successors",e.PREDECESSORS="graph_predecessors"}(r||(r={}));var s=function(){function e(e){this.node=e}return e.prototype.scene_successors=function(){return this._find_scene_node_scene_nodes(r.SUCCESSORS)},e.prototype.scene_predecessors=function(){return this._find_scene_node_scene_nodes(r.PREDECESSORS)},e.prototype._find_scene_node_scene_nodes=function(e){for(var t=this,n=[],i=0,a=this.node.params.all;i<a.length;i++){var s=a[i];n.push(s)}n.push(this.node);for(var u=[],_=0,l=n;_<l.length;_++){var c=l[_];this._find_base_nodes_from_node(c,e,u)}if(e==r.SUCCESSORS)for(var p=0,d=this.param_nodes_referree();p<d.length;p++){var f=d[p];u.push(f)}u=u.filter((function(e){return e.graph_node_id!=t.node.graph_node_id}));var h=o.default(u,(function(e){return e.graph_node_id})),m=[];return Object.keys(h).forEach((function(e){m.push(h[e][0])})),m},e.prototype._find_base_nodes_from_node=function(e,t,n){for(var r,o,s=0,u=e[t]();s<u.length;s++){var _=u[s];_ instanceof a.BaseParamClass?n.push(_.node):(r=_,("string"==typeof(o=i.BaseNodeClass)?typeof r===o:r instanceof o)?n.push(_):this._find_base_nodes_from_node(_,t,n))}return n},e.prototype.add_param_referree=function(e){this._params_referrees_by_graph_node_id=this._params_referrees_by_graph_node_id||{},this._params_referrees_by_graph_node_id[e.graph_node_id]=e},e.prototype.remove_param_referree=function(e){this._params_referrees_by_graph_node_id&&delete this._params_referrees_by_graph_node_id[e.graph_node_id]},e.prototype.params_referree=function(){var e=[];if(this._params_referrees_by_graph_node_id)for(var t=0,n=Object.keys(this._params_referrees_by_graph_node_id);t<n.length;t++){var r=n[t];e.push(this._params_referrees_by_graph_node_id[r])}return e},e.prototype.param_nodes_referree=function(){for(var e,t={},n=0,r=this.params_referree();n<r.length;n++){t[(e=r[n].node).graph_node_id]=e}for(var o=[],i=0,a=Object.keys(t);i<a.length;i++){var s=a[i];o.push(t[s])}return o},e}();t.DependenciesController=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(85)),i=r.__importDefault(n(179)),a=r.__importDefault(n(338)),s=n(23),u=n(75),_=n(57),l=function(){function e(e){this._param=e,this._programatic_visible_state=!0,this._update_visibility_and_remove_dirty_bound=this.update_visibility_and_remove_dirty.bind(this),this._ui_data_dependency_set=!1}return e.prototype.set=function(e){this._default_options=e,this._options=i.default(this._default_options)},e.prototype.copy=function(e){this._default_options=i.default(e.default),this._options=i.default(e.current)},e.prototype.set_option=function(e,t){return Object.assign(this._options,e,t)},Object.defineProperty(e.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){return this._param.node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"default",{get:function(){return this._default_options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_options_overridden",{get:function(){return!a.default(this._options,this._default_options)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overridden_options",{get:function(){for(var e={},t=0,n=Object.keys(this._options);t<n.length;t++){var r=n[t];a.default(this._options[r],this._default_options[r])||Object.assign(e,r,i.default(this._options[r]))}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overridden_option_names",{get:function(){return Object.keys(this.overridden_options)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"always_reference_asset",{get:function(){return this._options.always_reference_asset||!1},enumerable:!0,configurable:!0}),e.prototype.has_callback=function(){return null!=this._options.callback||null!=this._options.callback_string},e.prototype.execute_callback=function(){if(this.node&&this.node.scene.loading_controller.loaded){var e=this.get_callback();null!=e&&this.node&&!this.node.cook_controller.is_cooking&&e(this.node,this.param)}},e.prototype.get_callback=function(){if(this.has_callback())return this._options.callback=this._options.callback||this.create_callback_from_string()},e.prototype.create_callback_from_string=function(){var e=this,t=this._options.callback_string;if(t){var n=new Function("node","scene","window","location",t);return function(){n(e.node,e.node.scene,null,null)}}},e.prototype.makes_node_dirty_when_dirty=function(){var e;if(null!=this.param.parent_param)return!1;var t=!0;return null!=(e=this._options.cook)&&(t=e),t},Object.defineProperty(e.prototype,"desktop_browse_option",{get:function(){return this._options.desktop_browse},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"desktop_browse_allowed",{get:function(){return null!=this.desktop_browse_option},enumerable:!0,configurable:!0}),e.prototype.desktop_browse_file_type=function(){return this.desktop_browse_option?this.desktop_browse_option.file_type:null},Object.defineProperty(e.prototype,"is_expression_for_entities",{get:function(){var e=this._options.expression;return e&&e.for_entities||!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._options.level||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_menu",{get:function(){return null!=this.menu_options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menu_options",{get:function(){return this._options.menu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menu_entries",{get:function(){return this.menu_options?this.menu_options.entries:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_menu_radio",{get:function(){return this.has_menu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_multiline",{get:function(){return!0===this._options.multiline},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"node_selection_options",{get:function(){return this._options.node_selection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"node_selection_context",{get:function(){if(this.node_selection_options)return this.node_selection_options.context},enumerable:!0,configurable:!0}),e.prototype.dependent_on_found_node=function(){return!("dependent_on_found_node"in this._options)||this._options.dependent_on_found_node},Object.defineProperty(e.prototype,"range",{get:function(){return this._options.range||[0,1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._options.step||.01},enumerable:!0,configurable:!0}),e.prototype.range_locked=function(){return this._options.range_locked||[!1,!1]},e.prototype.ensure_in_range=function(e){var t=this.range;return e>=t[0]&&e<=t[1]?e:e<t[0]?!0===this.range_locked()[0]?t[0]:e:!0===this.range_locked()[1]?t[1]:e},Object.defineProperty(e.prototype,"is_spare",{get:function(){return this._options.spare||!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture_options",{get:function(){return this._options.texture},enumerable:!0,configurable:!0}),e.prototype.texture_as_env=function(){var e=this.texture_options;return null!=e&&!0===e.env},Object.defineProperty(e.prototype,"is_hidden",{get:function(){return!0===this._options.hidden||!1===this._programatic_visible_state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_visible",{get:function(){return!this.is_hidden},enumerable:!0,configurable:!0}),e.prototype.set_visible_state=function(e){this._options.hidden=!e,this.param.emit(u.ParamEvent.VISIBLE_UPDATED)},Object.defineProperty(e.prototype,"is_label_hidden",{get:function(){var e=this.param.type;return!1===this._options.label||e===s.ParamType.BUTTON||e===s.ParamType.SEPARATOR||e===s.ParamType.BOOLEAN&&this.is_field_hidden()},enumerable:!0,configurable:!0}),e.prototype.is_field_hidden=function(){return!1===this._options.field},e.prototype.ui_data_depends_on_other_params=function(){return"visible_if"in this._options},e.prototype.visibility_predecessors=function(){var e=this,t=Object.keys(this._options.visible_if||{}),n=this.param.node;return o.default(t.map((function(t){var r=n.params.get(t);if(r)return r;console.error("param "+t+" not found as visibility condition for "+e.param.name+" in node "+e.param.node.type)})))},e.prototype.set_ui_data_dependency=function(){if(!this._ui_data_dependency_set){this._ui_data_dependency_set=!0;var e=this.visibility_predecessors();if(e.length>0){this._visibility_graph_node=new _.CoreGraphNode(this.param.scene,"param_visibility");for(var t=0,n=e;t<n.length;t++){var r=n[t];this._visibility_graph_node.add_graph_input(r)}this._visibility_graph_node.add_post_dirty_hook("_update_visibility_and_remove_dirty",this._update_visibility_and_remove_dirty_bound)}}},e.prototype.update_visibility_and_remove_dirty=function(){this.update_visibility(),this.param.remove_dirty_state()},e.prototype.update_visibility=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i,a,s,_;return r.__generator(this,(function(r){switch(r.label){case 0:return(e=this._options.visible_if)?(t=this.visibility_predecessors(),n=t.map((function(e){return e.compute()})),this._programatic_visible_state=!0,[4,Promise.all(n)]):[3,2];case 1:for(r.sent(),o=0,i=t;o<i.length;o++)a=i[o],s=e[a.name],_=a.value,s!=_&&(this._programatic_visible_state=!1);this.param.emit(u.ParamEvent.VISIBLE_UPDATED),r.label=2;case 2:return[2]}}))}))},e}();t.OptionsController=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.param=e,this._blocked_emit=!1,this._blocked_parent_emit=!1,this._count_by_event_name={}}return Object.defineProperty(e.prototype,"emit_allowed",{get:function(){return!0!==this._blocked_emit&&(!this.param.scene.loading_controller.is_loading&&this.param.scene.events_controller.emit_allowed)},enumerable:!0,configurable:!0}),e.prototype.block_emit=function(){return this._blocked_emit=!0,this.param.is_multiple&&this.param.components&&this.param.components.forEach((function(e){return e.emit_controller.block_emit()})),!0},e.prototype.unblock_emit=function(){return this._blocked_emit=!1,this.param.is_multiple&&this.param.components&&this.param.components.forEach((function(e){return e.emit_controller.unblock_emit()})),!0},e.prototype.block_parent_emit=function(){return this._blocked_parent_emit=!0,!0},e.prototype.unblock_parent_emit=function(){return this._blocked_parent_emit=!1,!0},e.prototype.increment_count=function(e){this._count_by_event_name[e]=this._count_by_event_name[e]||0,this._count_by_event_name[e]+=1},e.prototype.events_count=function(e){return this._count_by_event_name[e]||0},e.prototype.emit=function(e){this.emit_allowed&&(this.param.emit(e),null!=this.param.parent_param&&!0!==this._blocked_parent_emit&&this.param.parent_param.emit(e))},e}();t.EmitController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.param=e}return e.prototype.to_json=function(){var e={name:this.param.name,type:this.param.type,raw_input:this.raw_input(),value:this.value(),expression:this.expression(),graph_node_id:this.param.graph_node_id,error_message:this.error_message(),is_visible:this.is_visible(),components:void 0};return this.param.is_multiple&&this.param.components&&(e.components=this.param.components.map((function(e){return e.graph_node_id}))),e},e.prototype.raw_input=function(){return this.param.raw_input_serialized},e.prototype.value=function(){return this.param.value_serialized},e.prototype.expression=function(){var e;return this.param.has_expression()?null===(e=this.param.expression_controller)||void 0===e?void 0:e.expression:void 0},e.prototype.error_message=function(){return this.param.states.error.message},e.prototype.is_visible=function(){return this.param.options.is_visible},e}();t.ParamSerializer=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(642),o=n(643),i=function(e){this.param=e,this.time_dependent=new r.TimeDependentState(this.param),this.error=new o.ErrorState(this.param)};t.StatesController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.param=e}return Object.defineProperty(e.prototype,"active",{get:function(){var e=this.param.scene.time_controller.graph_node.graph_node_id;return this.param.graph_predecessor_ids().includes(e)},enumerable:!0,configurable:!0}),e}();t.TimeDependentState=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75),o=function(){function e(e){this.param=e}return e.prototype.set=function(e){this._message!=e&&(this._message=e,this.param.emit_controller.emit(r.ParamEvent.ERROR_UPDATED))},Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.set(void 0)},Object.defineProperty(e.prototype,"active",{get:function(){return null!=this._message},enumerable:!0,configurable:!0}),e}();t.ErrorState=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(57),i=n(23),a=n(75),s=n(285),u=function(){function e(e){this.node=e,this._param_create_mode=!1,this._params_by_name={},this._params_list=[],this._param_names=[],this._non_spare_params=[],this._spare_params=[],this._non_spare_param_names=[],this._spare_param_names=[],this._params_added_since_last_params_eval=!1}return e.prototype.init_dependency_node=function(){this._params_node||(this._params_node=new o.CoreGraphNode(this.node.scene,"params"),this.node.add_graph_input(this._params_node))},e.prototype.init=function(){this.init_dependency_node(),this._param_create_mode=!0,this.init_from_params_config(),this.node.create_params(),this._post_create_params()},e.prototype._post_create_params=function(){this._update_caches(),this.init_param_accessors(),this._param_create_mode=!1,this.run_post_create_params_hook()},e.prototype.post_create_spare_params=function(){this._update_caches(),this.init_param_accessors()},e.prototype.init_from_params_config=function(){var e=this.node.params_config;if(e)for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],o=e[r];this.add_param(o.type,r,o.init_value,o.options)}},e.prototype.init_param_accessors=function(){var e=Object.getOwnPropertyNames(this.node.pv);this._remove_unneeded_accessors(e),e=Object.getOwnPropertyNames(this.node.pv);for(var t=function(t){var r=t.options.is_spare;(!e.includes(t.name)||r)&&(Object.defineProperty(n.node.pv,t.name,{get:function(){return t.value},configurable:r}),Object.defineProperty(n.node.p,t.name,{get:function(){return t},configurable:r}))},n=this,r=0,o=this.all;r<o.length;r++){t(o[r])}},e.prototype._remove_unneeded_accessors=function(e){for(var t=this._param_names,n=[],r=0,o=e;r<o.length;r++){var i=o[r];t.includes(i)||n.push(i)}for(var a=0,s=n;a<s.length;a++){var u=s[a];Object.defineProperty(this.node.pv,u,{get:function(){},configurable:!0}),Object.defineProperty(this.node.p,u,{get:function(){},configurable:!0})}},Object.defineProperty(e.prototype,"params_node",{get:function(){return this._params_node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all",{get:function(){return this._params_list},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"non_spare",{get:function(){return this._non_spare_params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spare",{get:function(){return this._spare_params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"names",{get:function(){return this._param_names},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"non_spare_names",{get:function(){return this._non_spare_param_names},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spare_names",{get:function(){return this._spare_param_names},enumerable:!0,configurable:!0}),e.prototype.set_with_type=function(e,t,n){var r=this.param_with_type(e,n);r?r.set(t):console.warn("param "+e+" not found with type "+n)},e.prototype.set_float=function(e,t){this.set_with_type(e,t,i.ParamType.FLOAT)},e.prototype.set_vector3=function(e,t){this.set_with_type(e,t,i.ParamType.VECTOR3)},e.prototype.has_param=function(e){return null!=this._params_by_name[e]},e.prototype.has=function(e){return this.has_param(e)},e.prototype.get=function(e){return this.param(e)},e.prototype.param_with_type=function(e,t){var n=this.param(e);if(n&&n.type==t)return n},e.prototype.get_float=function(e){return this.param_with_type(e,i.ParamType.FLOAT)},e.prototype.get_operator_path=function(e){return this.param_with_type(e,i.ParamType.OPERATOR_PATH)},e.prototype.value=function(e){var t;return null===(t=this.param(e))||void 0===t?void 0:t.value},e.prototype.value_with_type=function(e,t){var n;return null===(n=this.param_with_type(e,t))||void 0===n?void 0:n.value},e.prototype.boolean=function(e){return this.value_with_type(e,i.ParamType.BOOLEAN)},e.prototype.float=function(e){return this.value_with_type(e,i.ParamType.FLOAT)},e.prototype.integer=function(e){return this.value_with_type(e,i.ParamType.INTEGER)},e.prototype.string=function(e){return this.value_with_type(e,i.ParamType.STRING)},e.prototype.vector2=function(e){return this.value_with_type(e,i.ParamType.VECTOR2)},e.prototype.vector3=function(e){return this.value_with_type(e,i.ParamType.VECTOR3)},e.prototype.color=function(e){return this.value_with_type(e,i.ParamType.COLOR)},e.prototype.param=function(e){var t=this._params_by_name[e];return null!=t?t:(console.warn("tried to access param '"+e+"' in node "+this.node.full_path()+", but existing params are: "+this.names),null)},e.prototype.delete_params=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.delete_param(r)}this._update_caches()},e.prototype.delete_param=function(e){var t=this._params_by_name[e];if(!t)throw new Error("param '"+e+"' does not exist on node "+this.node.full_path());if(this._params_node&&this._params_node.remove_graph_input(this._params_by_name[e]),t.set_node(null),delete this._params_by_name[e],t.is_multiple&&t.components)for(var n=0,r=t.components;n<r.length;n++){var o=r[n].name;delete this._params_by_name[o]}t.emit(a.ParamEvent.DELETED)},e.prototype.add_param=function(e,t,n,r){void 0===r&&(r={});var o=r.spare||!1;!1!==this._param_create_mode||o||console.warn("node "+this.node.full_path()+" ("+this.node.type+") param '"+t+"' cannot be created outside of create_params"),null==this.node.scene&&console.warn("node "+this.node.full_path()+" ("+this.node.type+") has no scene assigned");var i=s.ParamConstructorByType[e];if(null!=i){var a=this._params_by_name[t];a&&(o?a.type!=e&&this.delete_param(a.name):console.warn("a param named "+t+" already exists",this.node));var u=new i(this.node.scene);if(u.options.set(r),u.set_name(t),u.set_init_value(n),u.init_components(),u.set_node(this.node),this._params_by_name[u.name]=u,u.is_multiple&&u.components)for(var _=0,l=u.components;_<l.length;_++){var c=l[_];this._params_by_name[c.name]=c}return this._params_added_since_last_params_eval=!0,u}},e.prototype._update_caches=function(){this._params_list=Object.values(this._params_by_name),this._param_names=Object.keys(this._params_by_name),this._non_spare_params=Object.values(this._params_by_name).filter((function(e){return!e.options.is_spare})),this._spare_params=Object.values(this._params_by_name).filter((function(e){return e.options.is_spare})),this._non_spare_param_names=Object.values(this._params_by_name).filter((function(e){return!e.options.is_spare})).map((function(e){return e.name})),this._spare_param_names=Object.values(this._params_by_name).filter((function(e){return e.options.is_spare})).map((function(e){return e.name}))},e.prototype._eval_param=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return e.is_dirty?[4,e.compute()]:[3,2];case 1:return t.sent(),e.states.error.active&&this.node.states.error.set("param '"+e.name+"' error: "+e.states.error.message),[3,2];case 2:return[2]}}))}))},e.prototype.eval_params=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:for(t=[],n=0;n<e.length;n++)e[n].is_dirty&&t.push(this._eval_param(e[n]));return[4,Promise.all(t)];case 1:return r.sent(),this.node.states.error.active&&this.node.set_container(null),[2]}}))}))},e.prototype.eval_all=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._params_node&&(this._params_node.is_dirty||this._params_added_since_last_params_eval)?[4,this.eval_params(this._params_list)]:[3,2];case 1:e.sent(),this._params_node.remove_dirty_state(),this._params_added_since_last_params_eval=!1,e.label=2;case 2:return[2]}}))}))},e.prototype.set_post_create_params_hook=function(e){this._post_create_params_hook=e},e.prototype.run_post_create_params_hook=function(){this._post_create_params_hook&&this._post_create_params_hook()},e.prototype.add_on_scene_load_hook=function(e,t){this._on_scene_load_hook_names=this._on_scene_load_hook_names||[],this._on_scene_load_hooks=this._on_scene_load_hooks||[],this._on_scene_load_hook_names.includes(e)?console.warn("hook with name "+e+" already exists",this._on_scene_load_hook_names):(this._on_scene_load_hook_names.push(e),this._on_scene_load_hooks.push(t))},e.prototype.run_on_scene_load_hooks=function(){if(this._on_scene_load_hooks)for(var e=0,t=this._on_scene_load_hooks;e<t.length;e++){(0,t[e])()}},e}();t.ParamsController=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(47)),i=r.__importDefault(n(232)),a=r.__importDefault(n(51)),s=n(150),u=n(23),_=n(50),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.type=function(){return u.ParamType.BOOLEAN},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return a.default(this.default_value)?this.default_value:this.convert(this.default_value)||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return this._raw_input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return e==t},t.are_values_equal=function(e,t){return e==t},t.prototype.convert=function(e){if(i.default(e))return e;if(o.default(e))return e>=1;if(a.default(e)){if(_.CoreString.is_boolean(e))return _.CoreString.to_boolean(e);if(_.CoreString.is_number(e))return parseFloat(e)>=1}return null},t}(s.TypedNumericParam);t.BooleanParam=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(287),o=n(647),i=n(665),a=n(666),s=n(23),u=function(){function e(e){this.param=e,this.parse_completed=!1,this.parse_started=!1,this.parsed_tree=new r.ParsedTree,this.function_generator=new o.FunctionGenerator(this.param),this.dependencies_controller=new a.DependenciesController(this.param)}return e.prototype.parse_expression=function(e){if(this.parse_started)throw new Error("parse in progress for param "+this.param.full_path());this.parse_started=!0,this.parse_completed=!1,this.parsed_tree=this.parsed_tree||new r.ParsedTree,this.reset(),this.param.type==s.ParamType.STRING?this.parsed_tree.parse_expression_for_string_param(e):this.parsed_tree.parse_expression(e),this.function_generator.parse_tree(this.parsed_tree),null==this.function_generator.error_message?(this.dependencies_controller.update(this.function_generator),this.dependencies_controller.error_message?this.param.states.error.set(this.dependencies_controller.error_message):(this.parse_completed=!0,this.parse_started=!1)):this.set_error(this.function_generator.error_message)},e.prototype.compute_function=function(){if(!this.compute_allowed())return new Promise((function(e,t){e(null)}));try{return this.function_generator.eval_function()}catch(e){return console.warn("compute_function"),console.warn(e),new Promise((function(e,t){return e()}))}},e.prototype.reset=function(){this.parse_completed=!1,this.parse_started=!1,this._error_message=void 0,this.dependencies_controller.reset(),this.function_generator.reset()},e.prototype.set_error=function(e){this._error_message=this._error_message||e},Object.defineProperty(e.prototype,"is_errored",{get:function(){return null!=this._error_message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error_message",{get:function(){return this._error_message},enumerable:!0,configurable:!0}),e.prototype.compute_allowed=function(){return null==this._error_message&&this.function_generator.eval_allowed()},e.prototype.update_from_method_dependency_name_change=function(){var e;this.expression_string_generator=this.expression_string_generator||new i.ExpressionStringGenerator(this.param);var t=this.expression_string_generator.parse_tree(this.parsed_tree);null===(e=this.param.expression_controller)||void 0===e||e.set_expression(t),t&&this.parse_expression(t)},e}();t.ExpressionManager=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(648),i=n(649),a=n(104),s={math_random:"random"},u=n(288),_=Object.keys(u.Easing),l={};["abs","acos","asin","atan","ceil","cos","exp","floor","max","min","pow","round","sign","sin","sqrt","tan"].forEach((function(e){l[e]="Math."+e})),Object.keys(s).forEach((function(e){var t=s[e];l[e]="Math."+t})),["fit","fit01","fract","deg2rad","rad2deg","rand","clamp"].forEach((function(e){l[e]="POLY.Core.Math."+e})),_.forEach((function(e){l[e]="POLY.Core.Math.Easing."+e})),["precision"].forEach((function(e){l[e]="POLY.Core.String."+e}));var c={if:o.LiteralConstructsController.if},p={};["PI","E"].forEach((function(e){p[e]="Math."+e}));var d=i.MethodModule,f=n(203),h={x:0,y:1,z:2,w:3,r:0,g:1,b:2},m=n(203),g=n(664),v=Object.getPrototypeOf((function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2]}))}))})).constructor,y=function(e){function t(t){var n=e.call(this,t)||this;return n.param=t,n._attribute_requirements_controller=new g.AttributeRequirementsController,n.methods=[],n.method_index=0,n.method_dependencies=[],n.immutable_dependencies=[],n}return r.__extends(t,e),t.prototype.parse_tree=function(e){if(this.reset(),null==e.error_message){try{if(this._attribute_requirements_controller.reset(),e.node){var t=this.traverse_node(e.node);t&&null==this.error_message&&(this.function_main_string=t)}else console.warn("no parsed_tree.node")}catch(e){console.warn("error in expression for param "+this.param.full_path()),console.warn(e)}if(this.function_main_string)try{this.function=new v("param","methods","\n\t\t\t\t\ttry {\n\t\t\t\t\t\t"+this.function_body()+"\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tparam.states.error.set(e.message || e);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}")}catch(e){console.warn(e),this.set_error("cannot generate function")}else this.set_error("cannot generate function body")}else this.set_error("cannot parse expression")},t.prototype.reset=function(){this.error_message=void 0,this.function_main_string=void 0,this.methods=[],this.method_index=0,this.function=void 0,this.method_dependencies=[],this.immutable_dependencies=[]},t.prototype.function_body=function(){return this.param.options.is_expression_for_entities?"\n\t\t\tconst entities = param.expression_controller.entities;\n\t\t\tif(entities){\n\t\t\t\treturn new Promise( async (resolve, reject)=>{\n\t\t\t\t\tlet entity;\n\t\t\t\t\tconst entity_callback = param.expression_controller.entity_callback;\n\t\t\t\t\t"+this._attribute_requirements_controller.assign_attributes_lines()+"\n\t\t\t\t\tif( "+this._attribute_requirements_controller.attribute_presence_check_line()+" ){\n\t\t\t\t\t\t"+this._attribute_requirements_controller.assign_arrays_lines()+"\n\t\t\t\t\t\tfor(let index=0; index < entities.length; index++){\n\t\t\t\t\t\t\tentity = entities[index];\n\t\t\t\t\t\t\tresult = "+this.function_main_string+";\n\t\t\t\t\t\t\tentity_callback(entity, result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('attribute not found'))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn []":"\n\t\t\treturn new Promise( async (resolve, reject)=>{\n\t\t\t\tresolve("+this.function_main_string+")\n\t\t\t})\n\t\t\t"},t.prototype.eval_allowed=function(){return null!=this.function},t.prototype.eval_function=function(){if(this.function)return this.function(this.param,this.methods)},t.prototype.traverse_CallExpression=function(e){var t=this,n=e.arguments.map((function(e){return t.traverse_node(e)})),r=e.callee.name;if(r){var o=c[r];if(o)return o(n);var i=""+n.join(", "),a=l[r];if(a)return a+"("+i+")";if(d[r]){var s=e.arguments[0],u="return "+n[0],_=[];try{_=new Function(u)()}catch(e){}return this._create_method_and_dependencies(r,_,s),"(await methods["+this.method_index+"].process_arguments(["+i+"]))"}}this.set_error("unknown method: "+r)},t.prototype.traverse_BinaryExpression=function(e){return"("+this.traverse_node(e.left)+" "+e.operator+" "+this.traverse_node(e.right)+")"},t.prototype.traverse_LogicalExpression=function(e){return"("+this.traverse_node(e.left)+" "+e.operator+" "+this.traverse_node(e.right)+")"},t.prototype.traverse_MemberExpression=function(e){return this.traverse_node(e.object)+"."+this.traverse_node(e.property)},t.prototype.traverse_UnaryExpression=function(e){if("@"===e.operator){var t=e.argument,n=void 0,r=void 0;switch(t.type){case"Identifier":n=t.name;break;case"MemberExpression":var o=t,i=o.object,s=o.property;n=i.name,r=s.name}if(n){if("ptnum"==(n=a.CoreAttribute.remap_name(n)))return"((entity != null) ? entity.index : 0)";var u=this._attribute_requirements_controller.var_attribute_size(n),_=this._attribute_requirements_controller.var_array(n);return this._attribute_requirements_controller.add(n),r?_+"[entity.index*"+u+"+"+h[r]+"]":_+"[entity.index*"+u+"]"}return console.warn("attribute not found"),""}return""+e.operator+this.traverse_node(e.argument)},t.prototype.traverse_Literal=function(e){return""+e.raw},t.prototype.traverse_Identifier=function(e){if(e.name[0]!=f.VARIABLE_PREFIX)return e.name;var t=e.name.substr(1),n=p[t];if(n)return n;var r="traverse_Identifier_"+t;if(this[r])return this[r]();this.set_error("identifier unknown: "+e.name)},t.prototype.traverse_Identifier_F=function(){return this.immutable_dependencies.push(this.param.scene.time_controller.graph_node),"param.scene.time_controller.frame"},t.prototype.traverse_Identifier_FPS=function(){return this.immutable_dependencies.push(this.param.scene.time_controller.graph_node),"param.scene.time_controller.fps"},t.prototype.traverse_Identifier_T=function(){return this.immutable_dependencies.push(this.param.scene.time_controller.graph_node),"param.scene.time_controller.time"},t.prototype.traverse_Identifier_CH=function(){return"'"+this.param.name+"'"},t.prototype.traverse_Identifier_CEX=function(){return this._method_centroid("x")},t.prototype.traverse_Identifier_CEY=function(){return this._method_centroid("y")},t.prototype.traverse_Identifier_CEZ=function(){return this._method_centroid("z")},t.prototype._method_centroid=function(e){var t=[0,"'"+e+"'"].join(", ");return this._create_method_and_dependencies("centroid",0),"(await methods["+this.method_index+"].process_arguments(["+t+"]))"},t.prototype._create_method_and_dependencies=function(e,t,n){var r=new(0,d[e])(this.param);this.method_index+=1,this.methods[this.method_index]=r;var o=r.find_dependency(t);o&&(n&&o.set_jsep_node(n),this.method_dependencies.push(o))},t}(m.BaseTraverser);t.FunctionGenerator=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.if=function(e){return"("+e[0]+") ? ("+e[1]+") : ("+e[2]+")"},e}();t.LiteralConstructsController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(650),o=n(652),i=n(653),a=n(654),s=n(655),u=n(656),_=n(657),l=n(658),c=n(659),p=n(660),d=n(661),f=n(662),h=n(663);t.MethodModule={bbox:r.Bbox,ch:i.Ch,centroid:o.Centroid,cop_res:s.CopRes,local:u.Local,opdigits:_.Opdigits,point:l.Point,points_count:c.PointsCount,copy:a.Copy,str_chars_count:p.StrCharsCount,str_concat:d.StrConcat,str_index:f.StrIndex,str_sub:h.StrSub}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(58),i=n(4),a=["min","max","size","center"],s=["x","y","z"],u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path to node"],["string","vector name, min, max, size or center"],["string","component_name, x,y or z"]]},t.prototype.find_dependency=function(e){return this.create_dependency_from_index_or_path(e)},t.prototype.process_arguments=function(e){var t=this,n=0;return new Promise((function(o,i){return r.__awaiter(t,void 0,void 0,(function(){var t,a,s,u,_;return r.__generator(this,(function(r){switch(r.label){case 0:if(3!=e.length)return[3,5];t=e[0],a=e[1],s=e[2],u=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.get_referenced_node_container(t)];case 2:return u=r.sent(),[3,4];case 3:return _=r.sent(),i(_),[3,4];case 4:return u&&(n=this._get_value_from_container(u,a,s),o(n)),[3,6];case 5:o(0),r.label=6;case 6:return[2]}}))}))}))},t.prototype._get_value_from_container=function(e,t,n){if(a.indexOf(t)>=0){var r=e.bounding_box(),o=new i.Vector3;switch(t){case"size":r.getSize(o);break;case"center":r.getCenter(o);break;default:o=r[t]}return s.indexOf(n)>=0?o[n]:-1}return-1},t}(o.BaseMethod);t.Bbox=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(47)),i=n(201),a=n(57),s=n(202),u=n(63),_=function(e){function t(t,n,r){var o=e.call(this,t.scene,"MethodDependency")||this;return o.param=t,o.path_argument=n,o.decomposed_path=r,o._update_from_name_change_bound=o._update_from_name_change.bind(o),o.add_post_dirty_hook("_update_from_name_change",o._update_from_name_change_bound),o}return r.__extends(t,e),t.prototype._update_from_name_change=function(e){if(s.CoreObject.is_a(e,u.TypedNode)&&this.decomposed_path){var t=e;this.decomposed_path.update_from_name_change(t);var n=this.decomposed_path.to_path(),r=this.jsep_node;r&&(r.value=(""+r.value).replace(""+this.path_argument,n),r.raw=r.raw.replace(""+this.path_argument,n)),this.param.expression_controller&&this.param.expression_controller.update_from_method_dependency_name_change()}},t.prototype.reset=function(){this.graph_disconnect_predecessors()},t.prototype.listen_for_name_changes=function(){var e=this;this.jsep_node&&this.decomposed_path&&this.decomposed_path.named_nodes.forEach((function(t){t&&t instanceof u.BaseNodeClass&&e.add_graph_input(t.name_controller.graph_node)}))},t.prototype.set_jsep_node=function(e){this.jsep_node=e},t.prototype.set_resolved_graph_node=function(e){this.resolved_graph_node=e},t.prototype.set_unresolved_path=function(e){this.unresolved_path=e},t.create=function(e,n,r,a){var s=o.default(n),u=void 0;if(a){u=new i.DecomposedPath;for(var _=0,l=a;_<l.length;_++){var c=l[_];u.add_node(c.name,c)}}var p=new t(e,n,u);if(r)p.set_resolved_graph_node(r);else if(!s){var d=n;p.set_unresolved_path(d)}return p},t}(a.CoreGraphNode);t.MethodDependency=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path to node"],["string","component_name, x,y or z"]]},t.prototype.find_dependency=function(e){return this.create_dependency_from_index_or_path(e)},t.prototype.process_arguments=function(e){var t=this;return new Promise((function(n,o){return r.__awaiter(t,void 0,void 0,(function(){var t,i,a,s,u,_,l;return r.__generator(this,(function(r){switch(r.label){case 0:if(2!=e.length)return[3,5];t=e[0],i=e[1],a=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.get_referenced_node_container(t)];case 2:return a=r.sent(),[3,4];case 3:return s=r.sent(),o(s),[3,4];case 4:return a&&(u=a.bounding_box(),_=u.min.clone().add(u.max).multiplyScalar(.5),l=_[i],n(null!=l?l:0)),[3,6];case 5:n(0),r.label=6;case 6:return[2]}}))}))}))},t}(n(58).BaseMethod);t.Centroid=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(58),i=n(201),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path to param"]]},t.prototype.find_dependency=function(e){var t=new i.DecomposedPath,n=this.get_referenced_param(e,t);return n?this.create_dependency(n,e,t):null},t.prototype.process_arguments=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:return t=0,1!=e.length?[3,2]:(n=e[0],(o=this.get_referenced_param(n))?[4,o.compute()]:[3,2]);case 1:r.sent(),null!=(i=o.value)&&(t=i),r.label=2;case 2:return[2,t]}}))}))},t}(o.BaseMethod);t.Ch=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(58),i=n(79),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path to copy"],["integer","default value"]]},t.optional_arguments=function(){return[["string","attribute name (optional)"]]},t.prototype.find_dependency=function(e){var t=this.find_referenced_graph_node(e);if(t&&"copy"==t.type){var n=t.stamp_node;return this.create_dependency(n,e)}return null},t.prototype.process_arguments=function(e){var t=this;return new Promise((function(n,r){if(2==e.length||3==e.length){var o=e[0],a=e[1],s=e[2],u=i.CoreWalker.find_node(t.node,o),_=void 0;u&&"copy"==u.type&&(_=u.stamp_value(s)),null==_&&(_=a),n(_)}else n(0)}))},t}(o.BaseMethod);t.Copy=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path to node"],["string","component_name: x or y"]]},t.prototype.find_dependency=function(e){return this.create_dependency_from_index_or_path(e)},t.prototype.process_arguments=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:return t=0,2!=e.length?[3,2]:(n=e[0],o=e[1],[4,this.get_referenced_node_container(n)]);case 1:(i=r.sent())&&(a=i.resolution(),[0,"0","x"].includes(o)?t=a[0]:[1,"1","y"].includes(o)&&(t=a[1])),r.label=2;case 2:return[2,t]}}))}))},t}(n(58).BaseMethod);t.CopRes=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(58),i=n(56),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path"]]},t.prototype.process_arguments=function(e){var t=this;return new Promise((function(n,r){t.request_asset_url(e[0]).then((function(e){n(e)}))}))},t.prototype.request_asset_url=function(e){var t=this;return new Promise((function(n,r){if(!i.POLY.desktop_controller().active())return n("");i.POLY.desktop_controller().add_local_path(e,t.param),n(i.POLY.desktop_controller().local_path_server_url(e))}))},t}(o.BaseMethod);t.Local=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(58),i=n(63),a=n(50),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path to node"]]},t.prototype.find_dependency=function(e){var t=this.find_referenced_graph_node(e);if(t&&t instanceof i.BaseNodeClass){var n=t.name_controller.graph_node;return this.create_dependency(n,e)}return null},t.prototype.process_arguments=function(e){var t=this;return new Promise((function(n,r){if(1==e.length){var o=e[0],i=t.get_referenced_node(o);if(i){var s=i.name;n(a.CoreString.tail_digits(s))}else n(0)}else n(0)}))},t}(o.BaseMethod);t.Opdigits=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path to node"],["index","point index"],["string","attribute name"]]},t.prototype.find_dependency=function(e){return this.create_dependency_from_index_or_path(e)},t.prototype.process_arguments=function(e){var t=this;return new Promise((function(n,o){return r.__awaiter(t,void 0,void 0,(function(){var t,i,a,s,u,_;return r.__generator(this,(function(r){switch(r.label){case 0:if(3!=e.length)return[3,5];t=e[0],i=e[1],a=e[2],s=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.get_referenced_node_container(t)];case 2:return s=r.sent(),[3,4];case 3:return u=r.sent(),o(u),[3,4];case 4:return s&&(_=this._get_value_from_container(s,i,a),n(_)),[3,6];case 5:n(0),r.label=6;case 6:return[2]}}))}))}))},t.prototype._get_value_from_container=function(e,t,n){var r=e.core_content();if(r){var o=r.points()[n];return o?o.attrib_value(t):0}return null},t}(n(58).BaseMethod);t.Point=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","path to node"]]},t.prototype.find_dependency=function(e){return this.create_dependency_from_index_or_path(e)},t.prototype.process_arguments=function(e){var t=this;return new Promise((function(n,o){return r.__awaiter(t,void 0,void 0,(function(){var t,i,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:if(1!=e.length)return[3,5];t=e[0],i=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.get_referenced_node_container(t)];case 2:return i=r.sent(),[3,4];case 3:return a=r.sent(),o(a),[2];case 4:return i&&(s=i.points_count(),n(s)),[3,6];case 5:n(0),r.label=6;case 6:return[2]}}))}))}))},t}(n(58).BaseMethod);t.PointsCount=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","string to count characters of"]]},t.prototype.process_arguments=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){return t=0,1==e.length&&(n=e[0],t=n.length),[2,t]}))}))},t}(n(58).BaseMethod);t.StrCharsCount=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[]},t.prototype.process_arguments=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i;return r.__generator(this,(function(r){for(t="",n=0,o=e;n<o.length;n++)null==(i=o[n])&&(i=""),t+=""+i;return[2,t]}))}))},t}(n(58).BaseMethod);t.StrConcat=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","string to get index from"],["string","char to find index of"]]},t.prototype.process_arguments=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o;return r.__generator(this,(function(r){return t=-1,2==e.length&&(n=e[0],o=e[1],t=n.indexOf(o)),[2,t]}))}))},t}(n(58).BaseMethod);t.StrIndex=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.required_arguments=function(){return[["string","string to get range from"],["integer","range start"],["integer","range size"]]},t.prototype.process_arguments=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i;return r.__generator(this,(function(r){return t="",n=e[0],o=e[1]||0,i=e[2]||1,n&&(t=n.substr(o,i)),[2,t]}))}))},t}(n(58).BaseMethod);t.StrSub=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.reset=function(){this._attribute_names&&this._attribute_names.clear()},e.prototype.assign_attributes_lines=function(){var t;if(this._attribute_names){var n=[];return null===(t=this._attribute_names)||void 0===t||t.forEach((function(t){n.push(e.assign_attribute_line(t))})),n.join(";\n")}return""},e.prototype.assign_arrays_lines=function(){var t;if(this._attribute_names){var n=[];return null===(t=this._attribute_names)||void 0===t||t.forEach((function(t){n.push(e.assign_item_size_line(t)),n.push(e.assign_array_line(t))})),n.join(";\n")}return""},e.prototype.attribute_presence_check_line=function(){var t;if(this._attribute_names){var n=[];return null===(t=this._attribute_names)||void 0===t||t.forEach((function(t){var r=e.var_attribute(t);n.push(r)})),n.join(" && ")}return"true"},e.prototype.add=function(e){this._attribute_names=this._attribute_names||new Set,this._attribute_names.add(e)},e.assign_attribute_line=function(e){return"const "+this.var_attribute(e)+" = entities[0].geometry().attributes['"+e+"']"},e.assign_item_size_line=function(e){var t=this.var_attribute(e);return"const "+this.var_attribute_size(e)+" = "+t+".itemSize"},e.assign_array_line=function(e){var t=this.var_attribute(e);return"const "+this.var_array(e)+" = "+t+".array"},e.var_attribute=function(e){return"attrib_"+e},e.var_attribute_size=function(e){return"attrib_size_"+e},e.var_array=function(e){return"array_"+e},e.prototype.var_attribute_size=function(t){return e.var_attribute_size(t)},e.prototype.var_array=function(t){return e.var_array(t)},e}();t.AttributeRequirementsController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t){var n=e.call(this,t)||this;return n.param=t,n}return r.__extends(t,e),t.prototype.parse_tree=function(e){if(null==e.error_message&&e.node)try{return this.traverse_node(e.node)}catch(e){this.set_error("could not traverse tree")}else this.set_error("cannot parse tree")},t.prototype.traverse_CallExpression=function(e){var t=this,n=""+e.arguments.map((function(e){return t.traverse_node(e)})).join(", ");return e.callee.name+"("+n+")"},t.prototype.traverse_UnaryExpression=function(e){return""+e.operator+this.traverse_node(e.argument)},t.prototype.traverse_Identifier=function(e){return""+e.name},t}(n(203).BaseTraverser);t.ExpressionStringGenerator=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.param=e,this.cyclic_graph_detected=!1,this.method_dependencies=[]}return e.prototype.set_error=function(e){this.error_message=this.error_message||e},e.prototype.reset=function(){this.param.graph_disconnect_predecessors(),this.method_dependencies.forEach((function(e){e.reset()})),this.method_dependencies=[]},e.prototype.update=function(e){this.cyclic_graph_detected=!1,this.connect_immutable_dependencies(e),this.method_dependencies=e.method_dependencies,this.handle_method_dependencies(),this.listen_for_name_changes()},e.prototype.connect_immutable_dependencies=function(e){var t=this;e.immutable_dependencies.forEach((function(e){if(0==t.cyclic_graph_detected&&0==t.param.add_graph_input(e))return t.cyclic_graph_detected=!0,t.set_error("cannot create expression, infinite graph detected"),void t.reset()}))},e.prototype.handle_method_dependencies=function(){var e=this;this.method_dependencies.forEach((function(t){0==e.cyclic_graph_detected&&e.handle_method_dependency(t)}))},e.prototype.handle_method_dependency=function(e){var t=e.resolved_graph_node;if(t&&!this.param.add_graph_input(t))return this.cyclic_graph_detected=!0,this.set_error("cannot create expression, infinite graph detected"),void this.reset()},e.prototype.listen_for_name_changes=function(){this.method_dependencies.forEach((function(e){e.listen_for_name_changes()}))},e}();t.DependenciesController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(71),i=n(23),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.type=function(){return i.ParamType.BUTTON},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return this.default_value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return this._raw_input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return!0},t.are_values_equal=function(e,t){return!0},t.prototype.press_button=function(){this.options.execute_callback()},t}(o.TypedParam);t.ButtonParam=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(110),i=r.__importDefault(n(29)),a=n(14),s=n(23),u=["r","g","b"],_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=new a.Color,t}return r.__extends(t,e),t.type=function(){return s.ParamType.COLOR},Object.defineProperty(t,"component_names",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return i.default(this.default_value)?this.default_value:this.default_value.toArray()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value.toArray()},enumerable:!0,configurable:!0}),t.prototype._clone_raw_input=function(e){return e instanceof a.Color?e.clone():[e[0],e[1],e[2]]},t.are_raw_input_equal=function(e,t){return e==t},t.are_values_equal=function(e,t){return e.equals(t)},t.prototype.init_components=function(){e.prototype.init_components.call(this),this.r=this.components[0],this.g=this.components[1],this.b=this.components[2]},t.prototype.set_value_from_components=function(){this._value.r=this.r.value,this._value.g=this.g.value,this._value.b=this.b.value},t}(o.TypedMultipleParam);t.ColorParam=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(71),i=n(23),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.type=function(){return i.ParamType.FOLDER},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return this.default_value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return this._raw_input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return!0},t.are_values_equal=function(e,t){return!0},t}(o.TypedParam);t.FolderParam=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(71),i=n(23),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.type=function(){return i.ParamType.SEPARATOR},Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return this.default_value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raw_input_serialized",{get:function(){return this._raw_input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value},enumerable:!0,configurable:!0}),t.are_raw_input_equal=function(e,t){return!0},t.are_values_equal=function(e,t){return!0},t}(o.TypedParam);t.SeparatorParam=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(110),i=r.__importDefault(n(29)),a=n(6),s=n(23),u=["x","y"],_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=new a.Vector2,t}return r.__extends(t,e),t.type=function(){return s.ParamType.VECTOR2},Object.defineProperty(t,"component_names",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return i.default(this.default_value)?this.default_value:this.default_value.toArray()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value.toArray()},enumerable:!0,configurable:!0}),t.prototype._clone_raw_input=function(e){return e instanceof a.Vector2?e.clone():[e[0],e[1]]},t.are_raw_input_equal=function(e,t){return e instanceof a.Vector2?t instanceof a.Vector2?e.equals(t):e.x==t[0]&&e.y==t[1]:t instanceof a.Vector2?e[0]==t.x&&e[1]==t.y:e[0]==t[0]&&e[1]==t[1]},t.are_values_equal=function(e,t){return e.equals(t)},t.prototype.init_components=function(){e.prototype.init_components.call(this),this.x=this.components[0],this.y=this.components[1]},t.prototype.set_value_from_components=function(){this._value.x=this.x.value,this._value.y=this.y.value},t}(o.TypedMultipleParam);t.Vector2Param=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(110),i=r.__importDefault(n(29)),a=n(4),s=n(23),u=["x","y","z"],_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=new a.Vector3,t}return r.__extends(t,e),t.type=function(){return s.ParamType.VECTOR3},Object.defineProperty(t,"component_names",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return i.default(this.default_value)?this.default_value:this.default_value.toArray()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value.toArray()},enumerable:!0,configurable:!0}),t.prototype._clone_raw_input=function(e){return e instanceof a.Vector3?e.clone():[e[0],e[1],e[2]]},t.are_raw_input_equal=function(e,t){return e instanceof a.Vector3?t instanceof a.Vector3?e.equals(t):e.x==t[0]&&e.y==t[1]&&e.z==t[2]:t instanceof a.Vector3?e[0]==t.x&&e[1]==t.y&&e[2]==t.z:e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]},t.are_values_equal=function(e,t){return e.equals(t)},t.prototype.init_components=function(){e.prototype.init_components.call(this),this.x=this.components[0],this.y=this.components[1],this.z=this.components[2]},t.prototype.set_value_from_components=function(){this._value.x=this.x.value,this._value.y=this.y.value,this._value.z=this.z.value},t}(o.TypedMultipleParam);t.Vector3Param=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(110),i=r.__importDefault(n(29)),a=n(37),s=n(23),u=["x","y","z","w"],_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=new a.Vector4,t}return r.__extends(t,e),t.type=function(){return s.ParamType.VECTOR4},Object.defineProperty(t,"component_names",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"default_value_serialized",{get:function(){return i.default(this.default_value)?this.default_value:this.default_value.toArray()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value_serialized",{get:function(){return this.value.toArray()},enumerable:!0,configurable:!0}),t.prototype._clone_raw_input=function(e){return e instanceof a.Vector4?e.clone():[e[0],e[1],e[2],e[3]]},t.are_raw_input_equal=function(e,t){return e instanceof a.Vector4?t instanceof a.Vector4?e.equals(t):e.x==t[0]&&e.y==t[1]&&e.z==t[2]&&e.w==t[3]:t instanceof a.Vector4?e[0]==t.x&&e[1]==t.y&&e[2]==t.z&&e[3]==t.w:e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3]},t.are_values_equal=function(e,t){return e.equals(t)},t.prototype.init_components=function(){e.prototype.init_components.call(this),this.x=this.components[0],this.y=this.components[1],this.z=this.components[2],this.w=this.components[3]},t.prototype.set_value_from_components=function(){this._value.x=this.x.value,this._value.y=this.y.value,this._value.z=this.z.value,this._value.w=this.w.value},t}(o.TypedMultipleParam);t.Vector4Param=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.ParamsValueAccessor=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._frame=0}return e.prototype.copy=function(e){this._frame=e.frame},Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),e}();t.ProcessingContext=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(677),o=n(678),i=n(680),a=function(){function e(e){this.node=e,this._connections=new r.ConnectionsController(this.node)}return Object.defineProperty(e.prototype,"connections",{get:function(){return this._connections},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this._inputs=this._inputs||new o.InputsController(this.node)},enumerable:!0,configurable:!0}),e.prototype.has_inputs=function(){return null!=this._inputs},Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs=this._outputs||new i.OutputsController(this.node)},enumerable:!0,configurable:!0}),e.prototype.has_outputs=function(){return null!=this._outputs},e}();t.IOController=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(85)),o=function(){function e(e){this._node=e,this._output_connections=new Map}return e.prototype.init_inputs=function(){var e=this._node.io.inputs.max_inputs_count;this._input_connections=new Array(e)},e.prototype.add_input_connection=function(e){this._input_connections?this._input_connections[e.input_index]=e:console.warn("input connections array not initialized")},e.prototype.remove_input_connection=function(e){this._input_connections?e.input_index<this._input_connections.length?this._input_connections[e.input_index]=void 0:console.warn("attempt to remove an input connection at index "+e.input_index):console.warn("input connections array not initialized")},e.prototype.input_connection=function(e){if(this._input_connections)return this._input_connections[e]},e.prototype.first_input_connection=function(){return r.default(this._input_connections)[0]},e.prototype.last_input_connection=function(){var e=r.default(this._input_connections);return e[e.length-1]},e.prototype.input_connections=function(){return this._input_connections},e.prototype.add_output_connection=function(e){var t=e.output_index,n=e.id,r=this._output_connections.get(t);r||(r=new Map,this._output_connections.set(t,r)),r.set(n,e)},e.prototype.remove_output_connection=function(e){var t=e.output_index,n=e.id,r=this._output_connections.get(t);r&&r.delete(n)},e.prototype.output_connections=function(){var e=[];return this._output_connections.forEach((function(t,n){t.forEach((function(t,n){t&&e.push(t)}))})),e},e}();t.ConnectionsController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(196)),i=r.__importDefault(n(51)),a=n(679),s=n(57),u=n(52),_=n(17),l=n(151),c=function(){function e(e){this.node=e,this._graph_node_inputs=[],this._inputs=[],this._has_named_inputs=!1,this._min_inputs_count=0,this._max_inputs_count=0,this._depends_on_inputs=!0,this._override_clonable_state=!1}return e.prototype.set_depends_on_inputs=function(e){this._depends_on_inputs=e},e.prototype.set_min_inputs_count=function(e){this._min_inputs_count=e},e.prototype.set_max_inputs_count=function(e){this._max_inputs_count=e,this.init_graph_node_inputs()},e.prototype.named_input_connection_points_by_name=function(e){if(this._named_input_connection_points)for(var t=0,n=this._named_input_connection_points;t<n.length;t++){var r=n[t];if(r.name==e)return r}},e.prototype.set_named_input_connection_points=function(e){this._has_named_inputs=!0,this._named_input_connection_points=e,this.set_min_inputs_count(0),this.set_max_inputs_count(e.length),this.init_graph_node_inputs(),this.node.emit(u.NodeEvent.NAMED_INPUTS_UPDATED)},Object.defineProperty(e.prototype,"has_named_inputs",{get:function(){return this._has_named_inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"named_input_connection_points",{get:function(){return this._named_input_connection_points||[]},enumerable:!0,configurable:!0}),e.prototype.init_graph_node_inputs=function(){for(var e=0;e<this._max_inputs_count;e++)this._graph_node_inputs[e]=this._graph_node_inputs[e]||this._create_graph_node_input(e)},e.prototype._create_graph_node_input=function(e){var t=new s.CoreGraphNode(this.node.scene,"input_"+e);return this.node.add_graph_input(t),t},Object.defineProperty(e.prototype,"max_inputs_count",{get:function(){return this._max_inputs_count||0},enumerable:!0,configurable:!0}),e.prototype.input_graph_node=function(e){return this._graph_node_inputs[e]},e.prototype.set_count=function(e,t){null==t&&(t=e),this.set_min_inputs_count(e),this.set_max_inputs_count(t),this.init_inputs_clonable_state(),this.init_connections_controller_inputs()},e.prototype.init_connections_controller_inputs=function(){this.node.io.connections.init_inputs()},e.prototype.eval_required_inputs_p=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return e=[],this._max_inputs_count>0?(t=[],this.inputs().forEach((function(e,n){e&&t.push(n)})),t.length<this._min_inputs_count?(this.node.states.error.set("inputs are missing"),[3,3]):[3,1]):[3,3];case 1:return t.length>0?(n=t.map((function(e){return o.node.io.inputs.eval_required_input(e)})),[4,Promise.all(n)]):[3,3];case 2:e=r.sent(),r.label=3;case 3:return[2,e]}}))}))},e.prototype.eval_required_input=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.node.container_controller.request_input_container(e)];case 1:return(t=r.sent())&&t.core_content()||(n=this.input(e))&&(o=n.states.error.message)&&this.node.states.error.set("input "+e+" is invalid (error: "+o+")"),[2,t]}}))}))},e.prototype.get_named_input_index=function(e){if(this._named_input_connection_points)for(var t=0;t<this._named_input_connection_points.length;t++)if(this._named_input_connection_points[t].name==e)return t;return-1},e.prototype.get_input_index=function(e){if(i.default(e)){if(this.has_named_inputs)return this.get_named_input_index(e);throw new Error("node "+this.node.full_path()+" has no named inputs")}return e},e.prototype.set_input=function(e,t,n){void 0===n&&(n=0);var r=this.get_input_index(e)||0,o=0;t&&t.io.outputs.has_named_outputs&&(o=t.io.outputs.get_output_index(n)||0);var i=this._graph_node_inputs[r];if(null==i)throw"graph_input_node not found at index "+r;if(!t||this.node.parent==t.parent){var s=this._inputs[r],_=null,l=void 0;this.node.io.connections&&(l=this.node.io.connections.input_connection(r)),l&&(_=l.output_index),t===s&&o==_||(null!=s&&this._depends_on_inputs&&i.remove_graph_input(s),null!=t?i.add_graph_input(t)?(this._depends_on_inputs||i.remove_graph_input(t),l&&l.disconnect({set_input:!1}),this._inputs[r]=t,new a.NodeConnection(t,this.node,o,r)):console.warn("cannot connect "+t.full_path()+" to "+this.node.full_path()):(this._inputs[r]=null,l&&l.disconnect({set_input:!1})),this.run_hooks(),this.node.set_dirty(t),this.node.emit(u.NodeEvent.INPUTS_UPDATED))}},e.prototype.add_hook=function(e){this._on_update_hooks=this._on_update_hooks||[],this._on_update_hooks.push(e)},e.prototype.run_hooks=function(){if(this._on_update_hooks)for(var e=0,t=this._on_update_hooks;e<t.length;e++){(0,t[e])()}},e.prototype.remove_input=function(e){var t=this;o.default(this.inputs(),(function(n,r){null!=n&&null!=e&&n.graph_node_id===e.graph_node_id&&t.set_input(r,null)}))},e.prototype.input=function(e){return this._inputs[e]},e.prototype.named_input=function(e){if(this.has_named_inputs){var t=this.get_input_index(e);return this._inputs[t]}return null},e.prototype.named_input_connection_point=function(e){if(this.has_named_inputs&&this._named_input_connection_points){var t=this.get_input_index(e);return this._named_input_connection_points[t]}},e.prototype.has_named_input=function(e){return this.get_named_input_index(e)>=0},e.prototype.has_input=function(e){return null!=this._inputs[e]},e.prototype.inputs=function(){return this._inputs},e.prototype.override_clonable_state_allowed=function(){for(var e=!1,t=0,n=this.inputs_clonable_state();t<n.length;t++){n[t]==_.InputCloneMode.FROM_NODE&&(e=!0)}return e},e.prototype.inputs_clonable_state=function(){return this._inputs_clonable_states=this._inputs_clonable_states||this.init_inputs_clonable_state()},e.prototype.input_cloned=function(e){return this.input_clonable_state_with_override(e)},e.prototype.inputs_clonable_state_with_override=function(){for(var e=[],t=this.inputs_clonable_state(),n=0;n<t.length;n++)e.push(this.input_clonable_state_with_override(n));return e},e.prototype.input_clonable_state_with_override=function(e){var t=this.inputs_clonable_state()[e];switch(t){case _.InputCloneMode.ALWAYS:return!0;case _.InputCloneMode.NEVER:return!1;case _.InputCloneMode.FROM_NODE:return!this._override_clonable_state}return l.TypeAssert.unreachable(t)},e.prototype.init_inputs_clonable_state=function(e){return void 0===e&&(e=null),e&&(this._user_inputs_clonable_states=e),this._inputs_clonable_states=this._user_inputs_clonable_states||this._default_inputs_clonale_state_values(),this._inputs_clonable_states},e.prototype._default_inputs_clonale_state_values=function(){for(var e=[],t=0;t<this._max_inputs_count;t++)e.push(_.InputCloneMode.ALWAYS);return e},e.prototype.set_override_clonable_state=function(e){this._override_clonable_state=e,this.node.emit(u.NodeEvent.OVERRIDE_CLONABLE_STATE_UPDATE)},e.prototype.override_clonable_state=function(){return this._override_clonable_state},e}();t.InputsController=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0),this._node_src=t,this._node_dest=n,this._output_index=r,this._input_index=o,this._id=e._next_id++,this._node_src.io.connections&&this._node_dest.io.connections&&(this._node_src.io.connections.add_output_connection(this),this._node_dest.io.connections.add_input_connection(this))}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"node_src",{get:function(){return this._node_src},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"node_dest",{get:function(){return this._node_dest},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output_index",{get:function(){return this._output_index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"input_index",{get:function(){return this._input_index},enumerable:!0,configurable:!0}),e.prototype.disconnect=function(e){void 0===e&&(e={}),this._node_src.io.connections&&this._node_dest.io.connections&&(this._node_src.io.connections.remove_output_connection(this),this._node_dest.io.connections.remove_input_connection(this)),!0===e.set_input&&this._node_dest.io.inputs.set_input(this._input_index,null)},e._next_id=0,e}();t.NodeConnection=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(47)),i=r.__importDefault(n(95)),a=r.__importDefault(n(51)),s=n(52),u=function(){function e(e){this.node=e,this._has_outputs=!1,this._has_named_outputs=!1}return e.prototype.set_has_one_output=function(){this._has_outputs=!0},e.prototype.set_has_no_output=function(){this._has_outputs=!1},Object.defineProperty(e.prototype,"has_outputs",{get:function(){return this._has_outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_named_outputs",{get:function(){return this._has_named_outputs},enumerable:!0,configurable:!0}),e.prototype.has_named_output=function(e){return this.get_named_output_index(e)>=0},Object.defineProperty(e.prototype,"named_output_connection_points",{get:function(){return this._named_output_connection_points||[]},enumerable:!0,configurable:!0}),e.prototype.named_output_connection=function(e){if(this._named_output_connection_points)return this._named_output_connection_points[e]},e.prototype.get_named_output_index=function(e){if(this._named_output_connection_points)for(var t=0;t<this._named_output_connection_points.length;t++)if(this._named_output_connection_points[t].name==e)return t;return-1},e.prototype.get_output_index=function(e){return null!=e?a.default(e)?this.has_named_outputs?this.get_named_output_index(e):(console.warn("node "+this.node.full_path()+" has no named outputs"),-1):e:-1},e.prototype.named_output_connection_points_by_name=function(e){if(this._named_output_connection_points)for(var t=0,n=this._named_output_connection_points;t<n.length;t++){var r=n[t];if(r.name==e)return r}},e.prototype.set_named_output_connection_points=function(e){this._has_named_outputs=!0,this._named_output_connection_points=e,this.node.scene&&this.node.set_dirty(this.node),this.node.emit(s.NodeEvent.NAMED_OUTPUTS_UPDATED)},e.prototype.used_output_names=function(){var e=this;if(this.node.io.connections){var t=i.default(this.node.io.connections.output_connections().map((function(e){return e?e.output_index:null}))),n=[];return t.forEach((function(e){o.default(e)&&n.push(e)})),n.map((function(t){return e.named_output_connection_points[t].name}))}return[]},e}();t.OutputsController=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.ParamsAccessor=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.set_content=function(t){e.prototype.set_content.call(this,t)},t}(n(106).TypedContainer);t.ManagerContainer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(95)),i=r.__importDefault(n(274)),a=r.__importDefault(n(80)),s=n(684),u=function(){function e(){this._started=!1,this._start_time=0,this._previous_timestamp=0,this._nodes_cook_data={},this._durations_by_name={},this._durations_count_by_name={}}return e.prototype.profile=function(e,t){var n=performance.now();t();var r=performance.now()-n;console.log(e+": "+r)},e.prototype.start=function(){this._started||(this.reset(),this._started=!0,this._start_time=performance.now(),this._nodes_cook_data={},this._previous_timestamp=this._start_time)},e.prototype.stop=function(){this.reset()},e.prototype.reset=function(){this._started=!1,this._start_time=null,this._durations_by_name={},this._durations_count_by_name={},this._nodes_cook_data={}},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.record_node_cook_data=function(e){var t=e.graph_node_id;null==this._nodes_cook_data[t]&&(this._nodes_cook_data[t]=new s.PerformanceNode(e)),this._nodes_cook_data[t].update_cook_data()},e.prototype.record=function(e){this.started||this.start();var t=performance.now();return null==this._durations_by_name[e]&&(this._durations_by_name[e]=0),this._durations_by_name[e]+=t-this._previous_timestamp,null==this._durations_count_by_name[e]&&(this._durations_count_by_name[e]=0),this._durations_count_by_name[e]+=1,this._previous_timestamp=t},e.prototype.print=function(){this.print_node_cook_data(),this.print_recordings()},e.prototype.print_node_cook_data=function(){var e=Object.values(this._nodes_cook_data),t=(e=a.default(e,(function(e){return-e.cook_time_total}))).map((function(e){return e.print_object()}));console.log("--------------- NODES COOK TIME -----------");for(var n=[],r=0,o=a.default(t,(function(e){return-e.cook_time_total}));r<o.length;r++){var i=o[r];n.push(i)}return console.table(n),t},e.prototype.print_recordings=function(){for(var e=i.default(this._durations_by_name),t=i.default(this._durations_count_by_name),n=[],r={},a=0,s=Object.keys(e);a<s.length;a++){var u=s[a],_=e[u];n.push(_),null==r[_]&&(r[_]=[]),r[_].push(u)}n.sort((function(e,t){return e-t}));var l=o.default(n);console.log("--------------- PERF RECORDINGS -----------");for(var c=[],p=0,d=l;p<d.length;p++)for(var f=0,h=r[_=d[p]];f<h.length;f++){var m=h[f],g=t[m],v={duration:_,name:m,count:g,duration_per_iteration:_/g};c.push(v)}return console.table(c),c},e}();t.CorePerformance=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._node=e,this._cooks_count=0,this._cook_time_total=0,this._cook_time_total_with_inputs=0,this._cook_time_total_params=0}return e.prototype.update_cook_data=function(){this._cooks_count+=1,this._cook_time_total+=this._node.cook_controller.cook_time,this._cook_time_total_with_inputs+=this._node.cook_controller.cook_time_with_inputs,this._cook_time_total_params+=this._node.cook_controller.cook_time_params},Object.defineProperty(e.prototype,"cook_time_total",{get:function(){return this._cook_time_total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cook_time_per_iteration",{get:function(){return this._cooks_count>0?this._cook_time_total/this._cooks_count:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cook_time_total_with_inputs",{get:function(){return this._cook_time_total_with_inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cook_time_total_with_inputs_per_iteration",{get:function(){return this._cooks_count>0?this._cook_time_total_with_inputs/this._cooks_count:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cook_time_total_params",{get:function(){return this._cook_time_total_params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cook_time_total_params_per_iteration",{get:function(){return this._cooks_count>0?this._cook_time_total_params/this._cooks_count:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cooks_count",{get:function(){return this._cooks_count},enumerable:!0,configurable:!0}),e.prototype.print_object=function(){return{full_path:this._node.full_path(),cooks_count:this.cooks_count,cook_time_total:this.cook_time_total,cook_time_per_iteration:this.cook_time_per_iteration,cook_time_total_with_inputs:this.cook_time_total_with_inputs,cook_time_total_with_inputs_per_iteration:this.cook_time_total_with_inputs_per_iteration,cook_time_total_params:this.cook_time_total_params,cook_time_total_params_per_iteration:this.cook_time_total_params_per_iteration}},e}();t.PerformanceNode=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(57),o=n(341),i=function(){function e(e){this.scene=e,this.self=this,this._frame=1,this._frame_range=[1,600],this._frame_range_locked=[!0,!0],this._playing=!1,this._fps=60,this._frame_interval=1e3/60,this._next_frame_bound=this.play_next_frame.bind(this),this._graph_node=new r.CoreGraphNode(e,"time controller")}return Object.defineProperty(e.prototype,"graph_node",{get:function(){return this._graph_node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fps",{get:function(){return this._fps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this._frame/this._fps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame_range",{get:function(){return this._frame_range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame_range_locked",{get:function(){return this._frame_range_locked},enumerable:!0,configurable:!0}),e.prototype.set_frame_range=function(e,t){this._frame_range[0]=Math.floor(e),this._frame_range[1]=Math.floor(t),this.scene.events_controller.dispatch(this._graph_node,o.SceneEvent.FRAME_RANGE_UPDATED)},e.prototype.set_frame_range_locked=function(e,t){this._frame_range_locked[0]=e,this._frame_range_locked[1]=t,this.scene.events_controller.dispatch(this._graph_node,o.SceneEvent.FRAME_RANGE_UPDATED)},e.prototype.set_fps=function(e){this._fps=Math.floor(e),this._frame_interval=1e3/this._fps,this.scene.events_controller.dispatch(this._graph_node,o.SceneEvent.FRAME_RANGE_UPDATED)},e.prototype.set_frame=function(e){(e=this._ensure_frame_within_bounds(e))!=this.frame&&(this._frame=e,this.scene.events_controller.dispatch(this._graph_node,o.SceneEvent.FRAME_UPDATED),this.scene.uniforms_controller.update_frame_dependent_uniform_owners(),this.scene.cooker.block(),this.graph_node.set_successors_dirty(),this.scene.cooker.unblock())},e.prototype.increment_frame=function(){this.set_frame(this.frame+1)},e.prototype.decrement_frame=function(){this.set_frame(this.frame-1)},e.prototype.set_first_frame=function(){this.set_frame(this.frame_range[0])},e.prototype._ensure_frame_within_bounds=function(e){return this._frame_range_locked[0]&&e<this._frame_range[0]?this._frame_range[1]:this._frame_range_locked[1]&&e>this._frame_range[1]?this._frame_range[0]:e},Object.defineProperty(e.prototype,"playing",{get:function(){return!0===this._playing},enumerable:!0,configurable:!0}),e.prototype.pause=function(){this._playing=!1,this.scene.events_controller.dispatch(this._graph_node,o.SceneEvent.PLAY_STATE_UPDATED)},e.prototype.play=function(){!0!==this._playing&&setTimeout(this.play_next_frame.bind(this),this._frame_interval),this._playing=!0,this.scene.events_controller.dispatch(this._graph_node,o.SceneEvent.PLAY_STATE_UPDATED)},e.prototype.toggle_play_pause=function(){this.playing?this.pause():this.play()},e.prototype.play_next_frame=function(){this.playing&&(this.scene.root.are_children_cooking()||this.increment_frame(),setTimeout(this._next_frame_bound,this._frame_interval))},e}();t.TimeController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(284),o=function(){function e(e){this.scene=e}return e.prototype.to_json=function(e){void 0===e&&(e=!1);for(var t={},n={},o=0,i=this.scene.nodes_controller.all_nodes();o<i.length;o++){var a=i[o],s=new r.NodeSerializer(a);t[a.graph_node_id]=s.to_json(e);for(var u=0,_=a.params.all;u<_.length;u++){var l=_[u];n[l.graph_node_id]=l.to_json()}}return{nodes_by_graph_node_id:t,params_by_graph_node_id:n}},e}();t.PolySceneSerializer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(e){this.scene=e,this._frame_dependent_uniform_owners={},this._frame_dependent_uniform_owners_ids=null,this._resolution=new r.Vector2(1,1),this._resolution_dependent_uniform_owners={},this._resolution_dependent_uniform_owners_ids=[]}return e.prototype.add_frame_dependent_uniform_owner=function(e,t){this._frame_dependent_uniform_owners[e]=t,this._update_frame_dependent_uniform_owners_ids()},e.prototype.remove_frame_dependent_uniform_owner=function(e){delete this._frame_dependent_uniform_owners[e],this._update_frame_dependent_uniform_owners_ids()},e.prototype._update_frame_dependent_uniform_owners_ids=function(){this._frame_dependent_uniform_owners_ids=Object.keys(this._frame_dependent_uniform_owners)},e.prototype.update_frame_dependent_uniform_owners=function(){var e=this.scene.frame;if(this._frame_dependent_uniform_owners_ids)for(var t=0,n=this._frame_dependent_uniform_owners_ids;t<n.length;t++){var r=n[t];this._frame_dependent_uniform_owners[r].frame.value=e}},e.prototype.add_resolution_dependent_uniform_owner=function(e,t){this._resolution_dependent_uniform_owners[e]=t,this._update_resolution_dependent_uniform_owners_ids(),this._resolution&&this.update_resolution_dependent_uniforms(t)},e.prototype.remove_resolution_dependent_uniform_owner=function(e){delete this._resolution_dependent_uniform_owners[e],this._update_resolution_dependent_uniform_owners_ids()},e.prototype._update_resolution_dependent_uniform_owners_ids=function(){this._resolution_dependent_uniform_owners_ids=Object.keys(this._resolution_dependent_uniform_owners)},e.prototype.update_resolution_dependent_uniform_owners=function(e){this._resolution.copy(e);for(var t=0,n=this._resolution_dependent_uniform_owners_ids;t<n.length;t++){var r=n[t],o=this._resolution_dependent_uniform_owners[r];this.update_resolution_dependent_uniforms(o)}},e.prototype.update_resolution_dependent_uniforms=function(e){e.resolution.value.x=this._resolution.x*window.devicePixelRatio,e.resolution.value.y=this._resolution.y*window.devicePixelRatio},e}();t.UniformsController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(56),o=function(){function e(){this._require_webgl2=!1}return e.prototype.require_webgl2=function(){return this._require_webgl2},e.prototype.set_require_webgl2=function(){this._require_webgl2||(this._require_webgl2=!0,r.POLY.renderers_controller.set_require_webgl2())},e}();t.WebGLController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(690),o=n(700),i=n(705),a=n(712),s=n(741),u=n(774),_=n(56);r.CopRegister.run(_.POLY),o.EventRegister.run(_.POLY),i.GlRegister.run(_.POLY),a.MatRegister.run(_.POLY),s.ObjRegister.run(_.POLY),u.SopRegister.run(_.POLY)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115),o=n(691),i=n(135),a=n(698),s=n(699),u=function(){function e(){}return e.run=function(e){e.register_node(o.EnvMapCopNode,r.CATEGORY_COP.INPUT),e.register_node(i.FileCopNode,r.CATEGORY_COP.INPUT),e.register_node(a.NullCopNode,r.CATEGORY_COP.MISC),e.register_node(s.SwitchCopNode,r.CATEGORY_COP.MISC)},e}();t.CopRegister=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(954),i=n(134),a=n(9),s=n(17),u=n(56),_=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(a.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t}return r.__extends(t,e),t.type=function(){return"env_map"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.NEVER])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e[0],[4,this.convert_texture_to_env_map(t)];case 1:return(n=r.sent())?this.set_texture(n):this.cook_controller.end_cook(),[2]}}))}))},t.prototype.convert_texture_to_env_map=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,u.POLY.renderers_controller.wait_for_renderer()];case 1:return(t=r.sent())?(n=new o.PMREMGenerator(t),i=n.fromEquirectangular(e),[2,i.texture]):(this.states.error.set("no renderer found to convert the texture to an env map"),[2])}}))}))},t}(i.TypedCopNode);t.EnvMapCopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.set_content=function(t){e.prototype.set_content.call(this,t)},t.prototype.texture=function(){return this._content},t.prototype.core_content=function(){return this._content},t.prototype.core_content_cloned=function(){var e;console.log("clone",this._content);var t=null===(e=this._content)||void 0===e?void 0:e.clone();return t&&(t.needsUpdate=!0),t},t.prototype.object=function(){return this.texture()},t.prototype.infos=function(){if(null!=this._content)return[this._content]},t.prototype.resolution=function(){return this._content&&this._content.image?[this._content.image.width,this._content.image.height]:[-1,-1]},t}(n(106).TypedContainer);t.TextureContainer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(289),i=n(52),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._state=!1,t}return r.__extends(t,e),t.prototype.on_update=function(){this.node.emit(i.NodeEvent.FLAG_BYPASS_UPDATED),this.node.set_dirty()},t}(o.BaseFlag);t.BypassFlag=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(289),i=n(52),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.on_update=function(){this.node.emit(i.NodeEvent.FLAG_DISPLAY_UPDATED)},t}(o.BaseFlag);t.DisplayFlag=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(235),a=n(362),s=n(1),u=n(79),_=n(134),l=n(56);!function(e){e.EXR="exr",e.BASIS="basis",e.HDR="hdr"}(r||(r={}));var c=function(){function e(e,t){this._node=e,this._param=t}return e.prototype.load_texture_from_url_or_op=function(t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return n=null,"op:"!=t.substring(0,3)?[3,6]:(i=t.substring(3),(r=u.CoreWalker.find_node(this._node,i))?r instanceof _.BaseCopNodeClass?[4,r.request_container()]:[3,2]:[3,4]);case 1:return a=o.sent(),n=a.texture(),[3,3];case 2:this._node.states.error.set("found node is not a texture node"),o.label=3;case 3:return[3,5];case 4:this._node.states.error.set("no node found in path '"+i+"'"),o.label=5;case 5:return[3,8];case 6:return[4,this.load_url(t)];case 7:(n=o.sent())?this._param.options.texture_as_env()||(n=e.set_texture_for_mapping(n)):this._node.states.error.set("could not load texture "+t),o.label=8;case 8:return r&&this._param.graph_predecessors()[0]!=r&&(this._param.graph_disconnect_predecessors(),this._param.add_graph_input(r)),[2,n]}}))}))},e.prototype.load_url=function(t){return o.__awaiter(this,void 0,void 0,(function(){var n=this;return o.__generator(this,(function(r){return[2,new Promise((function(r,i){return o.__awaiter(n,void 0,void 0,(function(){var n;return o.__generator(this,(function(o){switch(o.label){case 0:return n=e._ext(t),e.VIDEO_EXTENSIONS.includes(n)?[4,this._load_as_video(t)]:[3,2];case 1:return[2,o.sent()];case 2:this.loader_for_ext(n).then((function(e){e.load(t,r,void 0,(function(e){console.warn("error",e),i()}))})),o.label=3;case 3:return[2]}}))}))}))]}))}))},e.prototype.loader_for_ext=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,i,u,_,c;return o.__generator(this,(function(p){switch(p.label){case 0:switch(t=e.toLowerCase(),t){case r.EXR:return[3,1];case r.HDR:return[3,3];case r.BASIS:return[3,5]}return[3,8];case 1:return[4,Promise.resolve().then((function(){return o.__importStar(n(955))}))];case 2:return[2,new(0,p.sent().EXRLoader)];case 3:return[4,Promise.resolve().then((function(){return o.__importStar(n(696))}))];case 4:return i=p.sent().RGBELoader,(_=new i).setDataType(s.UnsignedByteType),[2,_];case 5:return[4,Promise.resolve().then((function(){return o.__importStar(n(697))}))];case 6:return u=p.sent().BasisTextureLoader,(_=new u).setTranscoderPath("/three/js/libs/basis/"),[4,l.POLY.renderers_controller.wait_for_renderer()];case 7:return(c=p.sent())?_.detectSupport(c):console.warn("texture loader found no renderer for basis texture loader"),[2,_];case 8:return[2,new a.TextureLoader]}}))}))},e.prototype._load_as_video=function(t){return new Promise((function(n,r){var o=document.createElement("video");o.setAttribute("crossOrigin","anonymous"),o.setAttribute("autoplay",""+!0),o.setAttribute("loop",""+!0),o.onloadedmetadata=function(){o.pause();var e=new i.VideoTexture(o);n(e)};var a=document.createElement("source"),s=e._ext(t),u=e.VIDEO_SOURCE_TYPE_BY_EXT[s];u=u||e._default_video_source_type(t),a.setAttribute("type",u),a.setAttribute("src",t),o.appendChild(a)}))},e._default_video_source_type=function(e){return"video/"+this._ext(e)},e.pixel_data=function(e){var t=e.image,n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");if(r)return r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)},e._ext=function(e){var t=e.split(".");return t[t.length-1].toLowerCase()},e.set_texture_for_mapping=function(e){return e},e.PARAM_DEFAULT="/examples/textures/uv.jpg",e.PARAM_ENV_DEFAULT="/examples/textures/piz_compressed.exr",e.VIDEO_EXTENSIONS=["mp4","webm","ogv"],e.VIDEO_SOURCE_TYPE_BY_EXT={ogg:'video/ogg; codecs="theora, vorbis"',ogv:'video/ogg; codecs="theora, vorbis"',mp4:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'},e}();t.CoreTextureLoader=c},function(e,t,n){"use strict";n.r(t),n.d(t,"RGBELoader",(function(){return i}));var r=n(130),o=n(1),i=function(e){r.a.call(this,e),this.type=o.UnsignedByteType};i.prototype=Object.assign(Object.create(r.a.prototype),{constructor:i,parse:function(e){var t=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,o=-1,i=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(o=s.indexOf("\n"))&&i<t&&r<e.byteLength;)a+=s,i+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<o&&(!1!==n&&(e.pos+=i+o+1),a+s.slice(0,o))},r=function(){var e=new Float32Array(1),t=new Int32Array(e.buffer);function n(n){e[0]=n;var r=t[0],o=r>>16&32768,i=r>>12&2047,a=r>>23&255;return a<103?o:a>142?(o|=31744,o|=(255==a?0:1)&&8388607&r):a<113?o|=((i|=2048)>>114-a)+(i>>113-a&1):(o|=a-112<<10|i>>1,o+=1&i)}return function(e,t,r,o){var i=e[t+3],a=Math.pow(2,i-128)/255;r[o+0]=n(e[t+0]*a),r[o+1]=n(e[t+1]*a),r[o+2]=n(e[t+2]*a)}}(),i=new Uint8Array(e);i.pos=0;var a,s,u,_,l,c,p=function(e){var r,o,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,u=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,_={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(o=r.match(/^#\?(\S+)$/)))return t(3,"bad initial token");for(_.valid|=1,_.programtype=o[1],_.string+=r+"\n";!1!==(r=n(e));)if(_.string+=r+"\n","#"!==r.charAt(0)){if((o=r.match(i))&&(_.gamma=parseFloat(o[1],10)),(o=r.match(a))&&(_.exposure=parseFloat(o[1],10)),(o=r.match(s))&&(_.valid|=2,_.format=o[1]),(o=r.match(u))&&(_.valid|=4,_.height=parseInt(o[1],10),_.width=parseInt(o[2],10)),2&_.valid&&4&_.valid)break}else _.comments+=r+"\n";return 2&_.valid?4&_.valid?_:t(3,"missing image size specifier"):t(3,"missing format specifier")}(i);if(-1!==p){var d=p.width,f=p.height,h=function(e,n,r){var o,i,a,s,u,_,l,c,p,d,f,h,m,g=n,v=r;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(o=new Uint8Array(4*n*r))||!o.length)return t(4,"unable to allocate buffer space");for(i=0,a=0,c=4*g,m=new Uint8Array(4),_=new Uint8Array(c);v>0&&a<e.byteLength;){if(a+4>e.byteLength)return t(1);if(m[0]=e[a++],m[1]=e[a++],m[2]=e[a++],m[3]=e[a++],2!=m[0]||2!=m[1]||(m[2]<<8|m[3])!=g)return t(3,"bad rgbe scanline format");for(l=0;l<c&&a<e.byteLength;){if((h=(s=e[a++])>128)&&(s-=128),0===s||l+s>c)return t(3,"bad scanline data");if(h)for(u=e[a++],p=0;p<s;p++)_[l++]=u;else _.set(e.subarray(a,a+s),l),l+=s,a+=s}for(d=g,p=0;p<d;p++)f=0,o[i]=_[p+f],f+=g,o[i+1]=_[p+f],f+=g,o[i+2]=_[p+f],f+=g,o[i+3]=_[p+f],i+=4;v--}return o}(i.subarray(i.pos),d,f);if(-1!==h){switch(this.type){case o.UnsignedByteType:var m=h,g=o.RGBEFormat,v=o.UnsignedByteType;break;case o.FloatType:for(var y=h.length/4*3,b=new Float32Array(y),w=0;w<y;w++)u=b,_=3*w,l=void 0,c=void 0,l=(a=h)[(s=4*w)+3],c=Math.pow(2,l-128)/255,u[_+0]=a[s+0]*c,u[_+1]=a[s+1]*c,u[_+2]=a[s+2]*c;m=b,g=o.RGBFormat,v=o.FloatType;break;case o.HalfFloatType:y=h.length/4*3;var x=new Uint16Array(y);for(w=0;w<y;w++)r(h,4*w,x,3*w);m=x,g=o.RGBFormat,v=o.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:d,height:f,data:m,header:p.string,gamma:p.gamma,exposure:p.exposure,format:g,type:v}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,t,n,i){return r.a.prototype.load.call(this,e,(function(e,n){switch(e.type){case o.UnsignedByteType:e.encoding=o.RGBEEncoding,e.minFilter=o.NearestFilter,e.magFilter=o.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case o.FloatType:case o.HalfFloatType:e.encoding=o.LinearEncoding,e.minFilter=o.LinearFilter,e.magFilter=o.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,i)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"BasisTextureLoader",(function(){return s}));var r=n(132),o=n(44),i=n(1),a=n(28),s=function(e){a.a.call(this,e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig={format:null,astcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1}};s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,setTranscoderPath:function(e){return this.transcoderPath=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},detectSupport:function(e){var t=this.workerConfig;if(t.astcSupported=!!e.extensions.get("WEBGL_compressed_texture_astc"),t.etcSupported=!!e.extensions.get("WEBGL_compressed_texture_etc1"),t.dxtSupported=!!e.extensions.get("WEBGL_compressed_texture_s3tc"),t.pvrtcSupported=!!e.extensions.get("WEBGL_compressed_texture_pvrtc")||!!e.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),t.astcSupported)t.format=s.BASIS_FORMAT.cTFASTC_4x4;else if(t.dxtSupported)t.format=s.BASIS_FORMAT.cTFBC3;else if(t.pvrtcSupported)t.format=s.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!t.etcSupported)throw new Error("THREE.BasisTextureLoader: No suitable compressed texture format found.");t.format=s.BASIS_FORMAT.cTFETC1}return this},load:function(e,t,n,r){var i=new o.a(this.manager);i.setResponseType("arraybuffer"),i.load(e,e=>{this._createTexture(e).then(t).catch(r)},n,r)},_createTexture:function(e){var t,n,o=e.byteLength,a=this._allocateWorker(o).then(r=>(t=r,n=this.workerNextTaskID++,new Promise((r,o)=>{t._callbacks[n]={resolve:r,reject:o},t.postMessage({type:"transcode",id:n,buffer:e},[e])}))).then(e=>{var t,n=this.workerConfig,{width:o,height:a,mipmaps:u,format:_}=e;switch(_){case s.BASIS_FORMAT.cTFASTC_4x4:t=new r.a(u,o,a,i.RGBA_ASTC_4x4_Format);break;case s.BASIS_FORMAT.cTFBC1:case s.BASIS_FORMAT.cTFBC3:t=new r.a(u,o,a,s.DXT_FORMAT_MAP[n.format],i.UnsignedByteType);break;case s.BASIS_FORMAT.cTFETC1:t=new r.a(u,o,a,i.RGB_ETC1_Format);break;case s.BASIS_FORMAT.cTFPVRTC1_4_RGB:t=new r.a(u,o,a,i.RGB_PVRTC_4BPPV1_Format);break;case s.BASIS_FORMAT.cTFPVRTC1_4_RGBA:t=new r.a(u,o,a,i.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("THREE.BasisTextureLoader: No supported format available.")}return t.minFilter=1===u.length?i.LinearFilter:i.LinearMipmapLinearFilter,t.magFilter=i.LinearFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t});return a.finally(()=>{t&&n&&(t._taskLoad-=o,delete t._callbacks[n])}),a},_initTranscoder:function(){if(!this.transcoderPending){var e=new o.a(this.manager);e.setPath(this.transcoderPath);var t=new Promise((t,n)=>{e.load("basis_transcoder.js",t,void 0,n)}),n=new o.a(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer");var r=new Promise((e,t)=>{n.load("basis_transcoder.wasm",e,void 0,t)});this.transcoderPending=Promise.all([t,r]).then(([e,t])=>{var n=s.BasisWorker.toString(),r=["/* basis_transcoder.js */",e,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r])),this.transcoderBinary=t})}return this.transcoderPending},_allocateWorker:function(e){return this._initTranscoder().then(()=>{var t;this.workerPool.length<this.workerLimit?((t=new Worker(this.workerSourceURL))._callbacks={},t._taskLoad=0,t.postMessage({type:"init",config:this.workerConfig,transcoderBinary:this.transcoderBinary}),t.onmessage=function(e){var n=e.data;switch(n.type){case"transcode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(t)):this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(t=this.workerPool[this.workerPool.length-1])._taskLoad+=e,t})},dispose:function(){for(var e=0;e<this.workerPool.length;e++)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),s.BASIS_FORMAT={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},s.DXT_FORMAT={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},s.DXT_FORMAT_MAP={},s.DXT_FORMAT_MAP[s.BASIS_FORMAT.cTFBC1]=s.DXT_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT,s.DXT_FORMAT_MAP[s.BASIS_FORMAT.cTFBC3]=s.DXT_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT,s.BasisWorker=function(){var e,t,n;onmessage=function(r){var o,i,a=r.data;switch(a.type){case"init":e=a.config,o=a.transcoderBinary,t=new Promise(e=>{i={wasmBinary:o,onRuntimeInitialized:e},BASIS(i)}).then(()=>{var{BasisFile:e,initializeBasis:t}=i;n=e,t()});break;case"transcode":t.then(()=>{try{for(var{width:t,height:r,hasAlpha:o,mipmaps:i,format:s}=function(t){var r=new n(new Uint8Array(t)),o=r.getImageWidth(0,0),i=r.getImageHeight(0,0),a=r.getNumLevels(0),s=r.getHasAlpha();function u(){r.close(),r.delete()}if(!s)switch(e.format){case 9:e.format=8}if(!o||!i||!a)throw u(),new Error("THREE.BasisTextureLoader:  Invalid .basis file");if(!r.startTranscoding())throw u(),new Error("THREE.BasisTextureLoader: .startTranscoding failed");for(var _=[],l=0;l<a;l++){var c=r.getImageWidth(0,l),p=r.getImageHeight(0,l),d=new Uint8Array(r.getImageTranscodedSizeInBytes(0,l,e.format));if(!r.transcodeImage(d,0,l,e.format,0,s))throw u(),new Error("THREE.BasisTextureLoader: .transcodeImage failed.");_.push({data:d,width:c,height:p})}return u(),{width:o,height:i,hasAlpha:s,mipmaps:_,format:e.format}}(a.buffer),u=[],_=0;_<i.length;++_)u.push(i[_].data.buffer);self.postMessage({type:"transcode",id:a.id,width:t,height:r,hasAlpha:o,mipmaps:i,format:s},u)}catch(e){console.error(e),self.postMessage({type:"error",id:a.id,error:e.message})}})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(134),i=n(9),a=n(17),s=new i.NodeParamsConfig,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"null"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.NEVER])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){return t=e[0],this.set_texture(t),[2]}))}))},t}(o.TypedCopNode);t.NullCopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(134),i=n(9),a=n(17),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.input=i.ParamConfig.INTEGER(0,{range:[0,3],range_locked:[!0,!0]}),t}return r.__extends(t,e),t}(i.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"switch"},t.prototype.initialize_node=function(){this.io.inputs.set_count(0,4),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.NEVER,a.InputCloneMode.NEVER,a.InputCloneMode.NEVER,a.InputCloneMode.NEVER]),this.ui_data.set_width(100),this.cook_controller.disallow_inputs_evaluation()},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return e=this.pv.input,this.io.inputs.has_input(e)?[4,this.container_controller.request_input_container(e)]:[3,2];case 1:return t=n.sent(),this.set_texture(t.texture()),[3,3];case 2:this.states.error.set("no input "+e),n.label=3;case 3:return[2]}}))}))},t}(o.TypedCopNode);t.SwitchCopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115),o=n(701),i=n(204),a=function(){function e(){}return e.run=function(e){e.register_node(o.CameraMapControlsEventNode,r.CATEGORY_EVENT.CAMERA),e.register_node(i.CameraOrbitControlsEventNode,r.CATEGORY_EVENT.CAMERA)},e}();t.EventRegister=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(290),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.type=function(){return"camera_map_controls"},t.prototype.create_controls_instance=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return[2,new o.MapControls(e,t)]}))}))},t}(n(204).CameraOrbitControlsEventNode);t.CameraMapControlsEventNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.apply_controls=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.create_controls_instance(e,t)];case 1:return n=r.sent(),o=performance.now(),n.name=this.full_path()+":"+e.name+":"+o+":"+this.controls_id(),[4,this.params.eval_all()];case 2:return r.sent(),this.setup_controls(n),[2,n]}}))}))},t.prototype.controls_id=function(){return JSON.stringify(this.params.all.map((function(e){return e.value_serialized})))},t}(n(703).TypedEventNode);t.TypedCameraControlsEventNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(63),i=n(704),a=n(30),s=n(103),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new s.TypedContainerController(t,i.EventContainer),t._eval_all_params_on_dirty_bound=t._eval_all_params_on_dirty.bind(t),t}return r.__extends(t,e),t.node_context=function(){return a.NodeContext.EVENT},t.prototype.initialize_base_node=function(){this.add_post_dirty_hook("_eval_all_params_on_dirty",this._eval_all_params_on_dirty_bound)},t.prototype._eval_all_params_on_dirty=function(){this.params.eval_all()},t}(o.TypedNode);t.TypedEventNode=u;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(u);t.BaseEventNodeClass=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.set_content=function(t){e.prototype.set_content.call(this,t)},t}(n(106).TypedContainer);t.EventContainer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115),o=n(205),i=n(707),a=n(708),s=n(291),u=n(709),_=n(710),l=function(){function e(){}return e.run=function(e){e.register_node(o.AttributeGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(i.ConstantGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(a.FloatToVec3GlNode,r.CATEGORY_GL.CONVERSION),e.register_node(s.GlobalsGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(u.OutputGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(_.ParamGlNode,r.CATEGORY_GL.GLOBALS)},e}();t.GlRegister=l},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(23),a=o.__importDefault(n(47)),s=n(6),u=n(4),_=n(37),l=n(14),c=n(105);var p=((r={})[i.ParamType.BOOLEAN]=function(e){return e?1:0},r[i.ParamType.BUTTON]=function(e){return null},r[i.ParamType.COLOR]=function(e){if(a.default(e))return[e,e,e];if(e instanceof s.Vector2){var t=e.toArray();return[t[0],t[1],t[0]]}if(e instanceof u.Vector3)return e.toArray();if(e instanceof l.Color)return e.toArray();if(e instanceof _.Vector4){var n=e.toArray();return[n[0],n[1],n[2]]}return[0,0,0]},r[i.ParamType.FLOAT]=function(e){return a.default(e)?e:e instanceof s.Vector2||e instanceof u.Vector3||e instanceof _.Vector4?e.toArray()[0]:0},r[i.ParamType.FOLDER]=function(e){return null},r[i.ParamType.INTEGER]=function(e){return a.default(e)?Math.floor(e):e instanceof s.Vector2||e instanceof u.Vector3||e instanceof _.Vector4?Math.floor(e.toArray()[0]):0},r[i.ParamType.OPERATOR_PATH]=function(e){return""+e},r[i.ParamType.RAMP]=function(e){return c.RampParam.DEFAULT_VALUE},r[i.ParamType.SEPARATOR]=function(e){return null},r[i.ParamType.STRING]=function(e){return""+e},r[i.ParamType.VECTOR2]=function(e){if(a.default(e))return[e,e];if(e instanceof s.Vector2)return e.toArray();var t;if(e instanceof u.Vector3)return[(t=e.toArray())[0],t[1]];if(e instanceof l.Color)return[(t=e.toArray())[0],t[1]];if(e instanceof _.Vector4){var n=e.toArray();return[n[0],n[1]]}return[0,0]},r[i.ParamType.VECTOR3]=function(e){if(a.default(e))return[e,e,e];if(e instanceof s.Vector2){var t=e.toArray();return[t[0],t[1],t[0]]}if(e instanceof u.Vector3)return e.toArray();if(e instanceof l.Color)return e.toArray();if(e instanceof _.Vector4){var n=e.toArray();return[n[0],n[1],n[2]]}return[0,0,0]},r[i.ParamType.VECTOR4]=function(e){if(a.default(e))return[e,e,e,e];if(e instanceof s.Vector2){var t=e.toArray();return[t[0],t[1],t[0],t[0]]}var n;return e instanceof u.Vector3?[(n=e.toArray())[0],n[1],n[2],n[0]]:e instanceof l.Color?[(n=e.toArray())[0],n[1],n[2],n[0]]:e instanceof _.Vector4?e.toArray():[0,0,0,0]},r),d=function(){function e(){}return e.from_value=function(e,t){return(0,p[e])(t)},e}();t.ParamValueToDefaultConverter=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(116),i=n(124),a=n(111),s=n(76);function u(e){return{visible_if:{type:s.ConnectionPointTypes.indexOf(e)}}}var _=n(9),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=_.ParamConfig.INTEGER(0,{menu:{entries:s.ConnectionPointTypes.map((function(e,t){return{name:e,value:t}}))}}),t.value_bool=_.ParamConfig.BOOLEAN(0,u(s.ConnectionPointType.BOOL)),t.value_int=_.ParamConfig.INTEGER(0,u(s.ConnectionPointType.INT)),t.value_float=_.ParamConfig.FLOAT(0,u(s.ConnectionPointType.FLOAT)),t.value_vec2=_.ParamConfig.VECTOR2([0,0],u(s.ConnectionPointType.VEC2)),t.value_vec3=_.ParamConfig.VECTOR3([0,0,0],u(s.ConnectionPointType.VEC3)),t.value_vec4=_.ParamConfig.VECTOR4([0,0,0,0],u(s.ConnectionPointType.VEC4)),t}return r.__extends(t,e),t}(_.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t._allow_inputs_created_from_params=!1,t._update_signature_if_required_bound=t._update_signature_if_required.bind(t),t}return r.__extends(t,e),t.type=function(){return"constant"},t.prototype.initialize_node=function(){this.params.add_on_scene_load_hook("_update_signature_if_required",this._update_signature_if_required_bound),this.add_post_dirty_hook("_update_signature_if_required",this._update_signature_if_required_bound)},t.prototype._update_signature_if_required=function(e){this.lifecycle.creation_completed&&e!=this.p.type||(this.update_output_type(),this.remove_dirty_state(),this.make_output_nodes_dirty())},t.prototype.set_lines=function(e){var t=this._current_param;if(t){var n=this._current_connection_type,r=i.ThreeToGl.any(t.value),o=n+" "+this._current_var_name+" = "+r;e.add_body_lines(this,[o])}else console.warn("no param found for constant node for type '"+this.pv.type+"'")},Object.defineProperty(t.prototype,"_current_connection_type",{get:function(){null==this.pv.type&&console.warn("constant gl node type if not valid");var e=s.ConnectionPointTypes[this.pv.type];return null==e&&console.warn("constant gl node type if not valid"),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_current_param",{get:function(){this._params_by_type=this._params_by_type||new Map([[s.ConnectionPointType.BOOL,this.p.value_bool],[s.ConnectionPointType.INT,this.p.value_int],[s.ConnectionPointType.FLOAT,this.p.value_float],[s.ConnectionPointType.VEC2,this.p.value_vec2],[s.ConnectionPointType.VEC3,this.p.value_vec3],[s.ConnectionPointType.VEC4,this.p.value_vec4]]);var e=s.ConnectionPointTypes[this.pv.type];return this._params_by_type.get(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_current_var_name",{get:function(){return this.gl_var_name(this._current_connection_type)},enumerable:!0,configurable:!0}),t.prototype.update_output_type=function(){var e=this.io.outputs.named_output_connection_points[0];e&&e.type==this._current_connection_type||this.io.outputs.set_named_output_connection_points([new a.TypedNamedConnectionPoint(this._current_connection_type,this._current_connection_type)])},t}(o.TypedGlNode);t.ConstantGlNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(116),i=n(124),a=n(111),s=n(76),u=n(9),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.x=u.ParamConfig.FLOAT(0),t.y=u.ParamConfig.FLOAT(0),t.z=u.ParamConfig.FLOAT(0),t}return r.__extends(t,e),t}(u.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t}return r.__extends(t,e),t.type=function(){return"float_to_vec3"},t.prototype.initialize_node=function(){this.io.outputs.set_named_output_connection_points([new a.TypedNamedConnectionPoint("vec3",s.ConnectionPointType.VEC3)])},t.prototype.set_lines=function(e){var t=this.variable_for_input("x"),n=this.variable_for_input("y"),r=this.variable_for_input("z"),o="vec3 "+this.gl_var_name("vec3")+" = "+i.ThreeToGl.float3(t,n,r);e.add_body_lines(this,[o])},t}(o.TypedGlNode);t.FloatToVec3GlNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(116),i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(n(9).NodeParamsConfig)),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=i,t}return r.__extends(t,e),t.type=function(){return"output"},t.prototype.create_params=function(){var e;null===(e=this.material_node)||void 0===e||e.assembler_controller.add_output_params(this)},t.prototype.set_lines=function(e){var t;null===(t=this.material_node)||void 0===t||t.assembler_controller.assembler.set_node_lines_output(this,e)},t}(o.TypedGlNode);t.OutputGlNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(116),i=n(111),a=n(76),s=r.__importDefault(n(29)),u=n(9),_=n(23),l=n(136),c=n(293),p=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=u.ParamConfig.STRING(""),t.type=u.ParamConfig.INTEGER(0,{menu:{entries:a.ConnectionPointTypes.map((function(e,t){return{name:e,value:t}}))}}),t.as_color=u.ParamConfig.BOOLEAN(0,{visible_if:{type:a.ConnectionPointTypes.indexOf(a.ConnectionPointType.VEC3)}}),t}return r.__extends(t,e),t}(u.NodeParamsConfig)),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=p,t._allow_inputs_created_from_params=!1,t._update_if_type_changed_bound=t._update_if_type_changed.bind(t),t}return r.__extends(t,e),t.type=function(){return"param"},t.prototype.initialize_node=function(){this.update_output_type(),this.add_post_dirty_hook("_update_if_type_changed",this._update_if_type_changed_bound)},t.prototype._update_if_type_changed=function(e){e==this.p.type&&(this.update_output_type(),this.remove_dirty_state(),this.make_output_nodes_dirty())},t.prototype.set_lines=function(e){var t=[],n=a.ConnectionPointTypes[this.pv.type],r=this.uniform_name();t.push(new l.UniformGLDefinition(this,n,r)),e.add_definitions(this,t)},t.prototype.set_param_configs=function(){var e=a.ConnectionPointTypes[this.pv.type],t=a.ConnectionPointInitValueMap[e],n=a.ConnectionPointTypeToParamTypeMap[e];this._param_configs_controller=this._param_configs_controller||new c.ParamConfigsController,this._param_configs_controller.reset(),n==_.ParamType.VECTOR3&&this.p.as_color.value&&s.default(t)&&3==t.length?this._param_configs_controller.create_and_push(_.ParamType.COLOR,this.pv.name,t,this.uniform_name()):this._param_configs_controller.create_and_push(n,this.pv.name,t,this.uniform_name())},t.prototype.uniform_name=function(){var e=this.io.outputs.named_output_connection_points[0];return this.gl_var_name(e.name)},t.prototype.update_output_type=function(){this.io.outputs.set_named_output_connection_points([new i.TypedNamedConnectionPoint("val",a.ConnectionPointTypes[this.pv.type])])},t}(o.TypedGlNode);t.ParamGlNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(235),i=n(37),a=n(4),s=n(6),u=n(23),_=n(285),l=n(30),c=n(151),p=function(){function e(e,t,n,r){this._type=e,this._name=t,this._default_value=n,this._uniform_name=r}return e.from_param=function(t,n){return new e(t.type,t.name,t.default_value,n)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"default_value",{get:function(){return this._default_value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uniform_name",{get:function(){return this._uniform_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uniform",{get:function(){return this._uniform=this._uniform||this._create_uniform()},enumerable:!0,configurable:!0}),e.prototype._create_uniform=function(){return e.uniform_by_type(this._type)},Object.defineProperty(e.prototype,"param_options",{get:function(){var e=this._callback.bind(this);switch(this._type){case u.ParamType.OPERATOR_PATH:return{callback:e,node_selection:{context:l.NodeContext.COP}};default:return{callback:e}}},enumerable:!0,configurable:!0}),e.prototype._callback=function(e,t){this.uniform.value=t.value},e.uniform_by_type=function(e){switch(e){case u.ParamType.BOOLEAN:case u.ParamType.BUTTON:return{value:0};case u.ParamType.COLOR:return{value:new a.Vector3(0,0,0)};case u.ParamType.FLOAT:case u.ParamType.FOLDER:case u.ParamType.INTEGER:case u.ParamType.OPERATOR_PATH:return{value:0};case u.ParamType.RAMP:return{value:null};case u.ParamType.SEPARATOR:return{value:0};case u.ParamType.STRING:return{value:null};case u.ParamType.VECTOR2:return{value:new s.Vector2(0,0)};case u.ParamType.VECTOR3:return{value:new a.Vector3(0,0,0)};case u.ParamType.VECTOR4:return{value:new i.Vector4(0,0,0,0)}}c.TypeAssert.unreachable(e)},e.prototype.set_uniform_value=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this.uniform,(n=e.params.get(this._name))?[4,n.compute()]:[3,6];case 1:if(r.sent(),!(null!=(o=n.value)&&this.has_value_changed(o)||this.is_video_texture()))return[3,6];switch(this._type){case u.ParamType.OPERATOR_PATH:return[3,2];case u.ParamType.RAMP:return[3,4]}return[3,5];case 2:return[4,this.set_uniform_value_from_texture(n,t)];case 3:return r.sent(),[3,6];case 4:return this.set_uniform_value_from_ramp(n,t),[3,6];case 5:return t.value=n.value,[3,6];case 6:return[2]}}))}))},e.prototype.set_uniform_value_from_texture=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=e.found_node())?[4,n.request_container()]:[3,2];case 1:return o=r.sent(),i=o.texture(),t.value=i,[3,3];case 2:t.value=null,r.label=3;case 3:return[2]}}))}))},e.prototype.set_uniform_value_from_ramp=function(e,t){t.value=e.ramp_texture()},e.prototype.has_value_changed=function(e){var t=_.ParamConstructorByType[this._type];if(this._cached_param_value){var n=!t.are_values_equal(e,this._cached_param_value);return n&&(this._cached_param_value=t.clone_value(e)),n}return this._cached_param_value=t.clone_value(e),!1},e.prototype.is_video_texture=function(){var e=!1,t=this.uniform;if(t){var n=t.value;n&&(e=n.constructor==o.VideoTexture)}return e},e}();t.ParamConfig=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115),o=n(713),i=n(715),a=n(737),s=n(738),u=n(740),_=function(){function e(){}return e.run=function(e){e.register_node(o.MeshBasicMatNode,r.CATEGORY_MAT.MESH),e.register_node(i.MeshBasicBuilderMatNode,r.CATEGORY_MAT.ADVANCED),e.register_node(a.MeshLambertMatNode,r.CATEGORY_MAT.MESH),e.register_node(s.MeshStandardMatNode,r.CATEGORY_MAT.MESH),e.register_node(u.PointsMatNode,r.CATEGORY_MAT.POINTS)},e}();t.MatRegister=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1),i=n(87),a=n(1),s=n(67),u=n(9),_=n(137),l=n(138),c=n(162),p=n(163),d=n(164),f=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(d.TextureAlphaMapParamConfig(p.TextureMapParamConfig(c.SkinningParamConfig(l.SideParamConfig(_.ColorParamConfig(u.NodeParamsConfig))))))),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=f,t.texture_map_controller=new p.TextureMapController(t),t.texture_alpha_map_controller=new d.TextureAlphaMapController(t),t}return r.__extends(t,e),t.type=function(){return"mesh_basic"},t.prototype.create_material=function(){return new i.MeshBasicMaterial({vertexColors:o.NoColors,side:a.FrontSide,color:16777215,opacity:1})},t.prototype.initialize_node=function(){var e=this;this.params.set_post_create_params_hook((function(){e.texture_map_controller.initialize_node(),e.texture_alpha_map_controller.initialize_node()}))},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return _.ColorsController.update(this),l.SideController.update(this),c.SkinningController.update(this),this.texture_map_controller.update(),this.texture_alpha_map_controller.update(),this.set_material(this.material),[2]}))}))},t}(s.TypedMatNode);t.MeshBasicMatNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.set_content=function(t){e.prototype.set_content.call(this,t)},t.prototype.set_material=function(e){null!=this._content&&this._content.dispose(),this.set_content(e)},t.prototype.has_material=function(){return this.has_content()},t.prototype.material=function(){return this.content()},t}(n(106).TypedContainer);t.MaterialContainer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(9),i=n(137),a=n(138),s=n(162),u=n(163),_=n(164),l=n(716),c=n(730),p=n(346),d=n(30),f=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(_.TextureAlphaMapParamConfig(u.TextureMapParamConfig(s.SkinningParamConfig(a.SideParamConfig(i.ColorParamConfig(o.NodeParamsConfig))))))),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=f,t._children_controller_context=d.NodeContext.GL,t}return r.__extends(t,e),t.type=function(){return"mesh_basic_builder"},t.prototype.initialize_node=function(){var e;null===(e=this.children_controller)||void 0===e||e.init()},t.prototype._create_assembler_controller=function(){return new p.GlAssemblerController(this,l.ShaderAssemblerBasic)},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.compile_if_required(),this.set_material(this.material),[2]}))}))},t.prototype._compile=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._material?[4,this.assembler_controller.assembler.compile_material(this._material)]:[3,3];case 1:return e.sent(),[4,this.assembler_controller.post_compile()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t}(c.TypedBuilderMatNode);t.MeshBasicBuilderMatNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1),i=n(41),a=n(48),s=n(77),u=n(1),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"_template_shader",{get:function(){var e=s.ShaderLib.basic;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}},enumerable:!0,configurable:!0}),t.prototype._create_material=function(){var e=this._template_shader;return new a.ShaderMaterial({vertexColors:o.VertexColors,side:u.FrontSide,transparent:!0,fog:!0,lights:!1,depthTest:!0,alphaTest:.5,uniforms:i.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})},t}(n(717).ShaderAssemblerMesh);t.ShaderAssemblerBasic=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(139),i=n(725),a=n(726),s=n(727),u=n(345),_=n(82),l=new Map([]);l.set(o.CustomMaterialName.DISTANCE,i.ShaderAssemblerCustomMeshDistance),l.set(o.CustomMaterialName.DEPTH,a.ShaderAssemblerCustomMeshDepth),l.set(o.CustomMaterialName.DEPTH_DOF,s.ShaderAssemblerCustomMeshDepthDOF);var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.custom_assembler_class_by_custom_name=function(){return l},t.prototype.compile_material=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:return this.compile_allowed()?((n=u.GlNodeFinder.find_output_nodes(this._gl_parent_node)).length>1&&this._gl_parent_node.states.error.set("only one output node allowed"),this.set_root_nodes(n),[4,this._update_shaders()]):[2];case 1:return r.sent(),o=this._shaders_by_name.get(_.ShaderName.VERTEX),i=this._shaders_by_name.get(_.ShaderName.FRAGMENT),o&&i&&(e.vertexShader=o,e.fragmentShader=i,e.uniforms=this.build_uniforms(null===(t=this._template_shader)||void 0===t?void 0:t.uniforms),e.needsUpdate=!0),[4,this.compile_custom_materials(e)];case 2:return r.sent(),[2]}}))}))},t.prototype._update_shaders=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:for(this._shaders_by_name=new Map,this._lines=new Map,e=0,t=this.shader_names;e<t.length;e++)a=t[e],(n=this._template_shader_for_shader_name(a))&&this._lines.set(a,n.split("\n"));return this._root_nodes.length>0?[4,this.build_code_from_nodes(this._root_nodes)]:[3,2];case 1:r.sent(),this._build_lines(),r.label=2;case 2:for(o=0,i=this.shader_names;o<i.length;o++)a=i[o],(s=this._lines.get(a))&&this._shaders_by_name.set(a,s.join("\n"));return[2]}}))}))},t}(o.ShaderAssemblerRender);t.ShaderAssemblerMesh=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this._name=e,this._input_names=t,this._dependencies=n}return e.prototype.name=function(){return this._name},e.prototype.input_names=function(){return this._input_names},e.prototype.dependencies=function(){return this._dependencies},e}();t.ShaderConfig=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t={}),this._name=e,this._options=t}return e.prototype.name=function(){return this._name},e.prototype.default_from_attribute=function(){return this._options.default_from_attribute||!1},e.prototype.default=function(){return this._options.default},e.prototype.if_condition=function(){return this._options.if},e.prototype.prefix=function(){return this._options.prefix||""},e.prototype.suffix=function(){return this._options.suffix||""},e}();t.VariableConfig=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(95)),i=n(343),a=n(140),s=n(136),u=n(292),_=n(293),l=n(721),c=n(723),p=n(207),d=function(){function e(e,t){this._assembler=e,this._gl_parent_node=t,this._param_configs_controller=new _.ParamConfigsController,this._param_configs_set_allowed=!0,this._lines=new Map,this._function_declared=new Map}return e.prototype.build_from_nodes=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,s,u,_,c,p,d,f,h,m,g,v,y,b,w,x,C,P,E,O,T,N,j,A;return r.__generator(this,(function(r){switch(r.label){case 0:for((t=new i.TypedNodeTraverser(this._assembler,this._gl_parent_node)).traverse(e),n=new Map,o=0,s=this.shader_names();o<s.length;o++)O=s[o],n.set(O,t.nodes_for_shader_name(O));for(u=t.sorted_nodes(),_=function(e){var t=c._assembler.root_nodes_by_shader_name(e),r=c._assembler.leaf_nodes_by_shader_name(e),o=new Map;n.forEach((function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];o.set(i.graph_node_id,!0)}}));for(var i=0,s=t;i<s.length;i++){var u=s[i];o.get(u.graph_node_id)||(a.MapUtils.push_on_array_at_entry(n,e,u),o.set(u.graph_node_id,!0))}for(var _=0,l=r;_<l.length;_++){var p=l[_];o.get(p.graph_node_id)||a.MapUtils.unshift_on_array_at_entry(n,e,p)}},c=this,p=0,d=this.shader_names();p<d.length;p++)O=d[p],_(O);for(f=new Map,h=0,m=u;h<m.length;h++)A=m[h],f.set(A.graph_node_id,!0);for(g=0,v=e;g<v.length;g++)y=v[g],f.get(y.graph_node_id)||(u.push(y),f.set(y.graph_node_id,!0));for(b=0,w=u;b<w.length;b++)(A=w[b]).reset_code();x=0,C=u,r.label=1;case 1:return x<C.length?[4,(A=C[x]).params.eval_all()]:[3,4];case 2:r.sent(),r.label=3;case 3:return x++,[3,1];case 4:for(this._shaders_collection_controller=new l.ShadersCollectionController(this.shader_names(),this.shader_names()[0]),this.reset(),P=0,E=this.shader_names();P<E.length;P++)if(O=E[P],T=n.get(O),this._shaders_collection_controller.set_current_shader_name(O),T)for(N=0,j=T;N<j.length;N++)A=j[N],this._param_configs_set_allowed&&A.set_param_configs(),A.set_lines(this._shaders_collection_controller);return this._param_configs_set_allowed&&this.set_param_configs(u),this.set_code_lines(u),[2]}}))}))},e.prototype.disallow_new_param_configs=function(){this._param_configs_set_allowed=!1},e.prototype.allow_new_param_configs=function(){this._param_configs_set_allowed=!0},e.prototype.shader_names=function(){return this._assembler.shader_names},e.prototype.reset=function(){for(var e=0,t=this.shader_names();e<t.length;e++){var n=t[e],r=new Map;this._lines.set(n,r),this._function_declared.set(n,new Map)}},e.prototype.param_configs=function(){return this._param_configs_controller.list||[]},e.prototype.lines=function(e,t){return this._lines.get(e).get(t)},e.prototype.all_lines=function(){return this._lines},e.prototype.set_param_configs=function(e){this._param_configs_controller.reset();for(var t=0,n=e;t<n.length;t++){var r=n[t].param_configs();if(r)for(var o=0,i=r;o<i.length;o++){var a=i[o];this._param_configs_controller.push(a)}}},e.prototype.set_code_lines=function(e){for(var t=0,n=this.shader_names();t<n.length;t++){var r=n[t];this.add_code_lines(e,r)}},e.prototype.add_code_lines=function(e,t){this.add_definitions(e,t,s.GLDefinitionType.FUNCTION,p.LineType.FUNCTION_DECLARATION),this.add_definitions(e,t,s.GLDefinitionType.UNIFORM,p.LineType.DEFINE),this.add_definitions(e,t,s.GLDefinitionType.VARYING,p.LineType.DEFINE),this.add_definitions(e,t,s.GLDefinitionType.ATTRIBUTE,p.LineType.DEFINE),this.add_code_line_for_nodes_and_line_type(e,t,p.LineType.BODY)},e.prototype.add_definitions=function(e,t,n,r){if(this._shaders_collection_controller){for(var o=[],i=0,s=e;i<s.length;i++){var _=s[i],l=this._shaders_collection_controller.definitions(t,_);if(l)for(var p=0,d=l=l.filter((function(e){return e.definition_type==n}));p<d.length;p++){var f=d[p];o.push(f)}}if(o.length>0){var h=new u.TypedGLDefinitionCollection(o),m=h.uniq();if(h.errored)throw"code builder error: "+h.error_message;for(var g=new Map,v=new Map,y=0,b=m;y<b.length;y++){var w=(f=b[y]).node.graph_node_id;v.has(w)||v.set(w,!0),a.MapUtils.push_on_array_at_entry(g,w,f)}var x=this._lines.get(t);v.forEach((function(e,t){var n=g.get(t);if(n){var o=n[0];if(o){var i=c.CodeFormatter.node_comment(o.node,r);a.MapUtils.push_on_array_at_entry(x,r,i);for(var s=0,u=n;s<u.length;s++){var _=u[s],l=c.CodeFormatter.line_wrap(_.line,r);a.MapUtils.push_on_array_at_entry(x,r,l)}var p=c.CodeFormatter.post_line_separator(r);a.MapUtils.push_on_array_at_entry(x,r,p)}}}))}}},e.prototype.add_code_line_for_nodes_and_line_type=function(e,t,n){for(var r=this,o=(e=e.filter((function(e){if(r._shaders_collection_controller){var n=r._shaders_collection_controller.body_lines(t,e);return n&&n.length>0}}))).length,i=0;i<o;i++){var a=i==e.length-1;this.add_code_line_for_node_and_line_type(e[i],t,n,a)}},e.prototype.add_code_line_for_node_and_line_type=function(e,t,n,r){if(this._shaders_collection_controller){var i=this._shaders_collection_controller.body_lines(t,e);if(i&&i.length>0){var s=this._lines.get(t),u=c.CodeFormatter.node_comment(e,n);if(a.MapUtils.push_on_array_at_entry(s,n,u),o.default(i).forEach((function(e){e=c.CodeFormatter.line_wrap(e,n),a.MapUtils.push_on_array_at_entry(s,n,e)})),n!=p.LineType.BODY||!r){var _=c.CodeFormatter.post_line_separator(n);a.MapUtils.push_on_array_at_entry(s,n,_)}}}},e}();t.CodeBuilder=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(722),o=function(){function e(e,t){this._shader_names=e,this._current_shader_name=t,this._lines_controller_by_shader_name=new Map;for(var n=0,o=this._shader_names;n<o.length;n++){var i=o[n];this._lines_controller_by_shader_name.set(i,new r.LinesController(i))}}return Object.defineProperty(e.prototype,"shader_names",{get:function(){return this._shader_names},enumerable:!0,configurable:!0}),e.prototype.set_current_shader_name=function(e){this._current_shader_name=e},Object.defineProperty(e.prototype,"current_shader_name",{get:function(){return this._current_shader_name},enumerable:!0,configurable:!0}),e.prototype.add_definitions=function(e,t,n){if(0!=t.length){n=n||this._current_shader_name;var r=this._lines_controller_by_shader_name.get(n);r&&r.add_definitions(e,t)}},e.prototype.definitions=function(e,t){var n=this._lines_controller_by_shader_name.get(e);if(n)return n.definitions(t)},e.prototype.add_body_lines=function(e,t,n){if(0!=t.length){n=n||this._current_shader_name;var r=this._lines_controller_by_shader_name.get(n);r&&r.add_body_lines(e,t)}},e.prototype.body_lines=function(e,t){var n=this._lines_controller_by_shader_name.get(e);if(n)return n.body_lines(t)},e}();t.ShadersCollectionController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(140),o=function(){function e(e){this._shader_name=e,this._definitions_by_node_id=new Map,this._body_lines_by_node_id=new Map}return Object.defineProperty(e.prototype,"shader_name",{get:function(){return this._shader_name},enumerable:!0,configurable:!0}),e.prototype.add_definitions=function(e,t){for(var n=0,o=t;n<o.length;n++){var i=o[n];r.MapUtils.push_on_array_at_entry(this._definitions_by_node_id,e.graph_node_id,i)}},e.prototype.definitions=function(e){return this._definitions_by_node_id.get(e.graph_node_id)},e.prototype.add_body_lines=function(e,t){for(var n=0,o=t;n<o.length;n++){var i=o[n];r.MapUtils.push_on_array_at_entry(this._body_lines_by_node_id,e.graph_node_id,i)}},e.prototype.body_lines=function(e){return this._body_lines_by_node_id.get(e.graph_node_id)},e}();t.LinesController=o},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0});var i=n(207),a=((r={})[i.LineType.FUNCTION_DECLARATION]="",r[i.LineType.DEFINE]=";",r[i.LineType.BODY]=";",r),s=((o={})[i.LineType.FUNCTION_DECLARATION]="",o[i.LineType.DEFINE]="",o[i.LineType.BODY]="\t",o),u=function(){function e(){}return e.node_comment=function(e,t){var n="// "+e.full_path();return t==i.LineType.BODY&&(n="\t"+n),n},e.line_wrap=function(e,t){var n=!0;return 0!=e.indexOf("#if")&&0!=e.indexOf("#endif")||(n=!1),n?""+s[t]+e+a[t]:""+s[t]+e},e.post_line_separator=function(e){return e==i.LineType.BODY?"\t":""},e}();t.CodeFormatter=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.TypedAssembler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(41),i=n(48),a=n(77),s=n(1),u=n(1),_=n(139),l=n(82),c=new Map([[l.ShaderName.VERTEX,"#include <begin_vertex>"],[l.ShaderName.FRAGMENT,"vec4 diffuseColor = vec4( 1.0 );"]]),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"_template_shader",{get:function(){var e=a.ShaderLib.distanceRGBA;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}},enumerable:!0,configurable:!0}),t.prototype.insert_body_after=function(e){return c.get(e)},t.prototype._create_material=function(){var e=this._template_shader;return new i.ShaderMaterial({defines:{DEPTH_PACKING:[s.RGBADepthPacking,u.BasicDepthPacking][0]},uniforms:o.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})},t}(_.ShaderAssemblerRender);t.ShaderAssemblerCustomMeshDistance=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(41),i=n(48),a=n(77),s=n(1),u=n(1),_=n(139),l=n(82),c=new Map([[l.ShaderName.VERTEX,"#include <begin_vertex>"],[l.ShaderName.FRAGMENT,"vec4 diffuseColor = vec4( 1.0 );"]]),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"_template_shader",{get:function(){var e=a.ShaderLib.depth;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}},enumerable:!0,configurable:!0}),t.prototype.insert_body_after=function(e){return c.get(e)},t.prototype._create_material=function(){var e=this._template_shader;return new i.ShaderMaterial({defines:{DEPTH_PACKING:[s.RGBADepthPacking,u.BasicDepthPacking][0]},uniforms:o.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})},t}(_.ShaderAssemblerRender);t.ShaderAssemblerCustomMeshDepth=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(41),i=n(48),a=n(139),s=r.__importDefault(n(728)),u=r.__importDefault(n(729)),_=n(82),l=new Map([[_.ShaderName.VERTEX,"// INSERT DEFINES"]]),c=new Map([[_.ShaderName.VERTEX,"// INSERT BODY"]]),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"_template_shader",{get:function(){return{vertexShader:s.default,fragmentShader:u.default,uniforms:{mNear:{value:0},mFar:{value:10}}}},enumerable:!0,configurable:!0}),t.prototype.insert_define_after=function(e){return l.get(e)},t.prototype.insert_body_after=function(e){return c.get(e)},t.prototype._create_material=function(){var e=this._template_shader;return new i.ShaderMaterial({uniforms:o.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})},t}(a.ShaderAssemblerRender);t.ShaderAssemblerCustomMeshDepthDOF=p},function(e,t,n){"use strict";n.r(t),t.default="#include <common>\n\nvarying float vViewZDepth;\n\n// INSERT DEFINES\n\n\n\nvoid main() {\n\n\t// INSERT BODY\n\n\n\t#include <project_vertex>\n\n\tvViewZDepth = - mvPosition.z;\n}"},function(e,t,n){"use strict";n.r(t),t.default="uniform float mNear;\nuniform float mFar;\n\nvarying float vViewZDepth;\n\nvoid main() {\n\n\tfloat color = 1.0 - smoothstep( mNear, mFar, vViewZDepth );\n\tgl_FragColor = vec4( vec3( color ), 1.0 );\n\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(67),i=n(48),a=n(139),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.create_material=function(){var e,t=new i.ShaderMaterial;return t.custom_materials=((e={})[a.CustomMaterialName.DEPTH]=new i.ShaderMaterial,e[a.CustomMaterialName.DEPTH_DOF]=new i.ShaderMaterial,e[a.CustomMaterialName.DISTANCE]=new i.ShaderMaterial,e),t},Object.defineProperty(t.prototype,"assembler_controller",{get:function(){return this._assembler_controller=this._assembler_controller||this._create_assembler_controller()},enumerable:!0,configurable:!0}),t.prototype.create_node=function(t){return e.prototype.create_node.call(this,t)},t.prototype.children=function(){return e.prototype.children.call(this)},t.prototype.nodes_by_type=function(t){return e.prototype.nodes_by_type.call(this,t)},t.prototype.compile_if_required=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.assembler_controller.compile_required()&&this._compile(),[2]}))}))},t}(o.TypedMatNode);t.TypedBuilderMatNode=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(166),o=n(165),i=function(){function e(e){this._node=e}return e.prototype.data=function(){var e,t,n,r;this.is_root()||this._node.scene.nodes_controller.register_node_context_signature(this._node),this._data={type:this._node.type};var o=this.nodes_data();if(Object.keys(o).length>0){this._data.nodes=o;var i=null===(e=this._node.children_controller)||void 0===e?void 0:e.context;i&&(this._data.children_context=i)}if(this.is_root()||(this._data.params=this.params_data(),this._data.inputs=this.inputs_data()),this._node.flags&&(this._data.flags={},this._node.flags.has_bypass()&&(null===(t=this._node.flags.bypass)||void 0===t?void 0:t.active)&&(this._data.flags.bypass=this._node.flags.bypass.active),this._node.flags.has_display()&&(this._data.flags.display=null===(n=this._node.flags.display)||void 0===n?void 0:n.active)),this._node.children_allowed()){var a=null===(r=this._node.children_controller)||void 0===r?void 0:r.selection;if(a&&this._node.children().length>0){for(var s=[],u={},_=0,l=a.nodes();_<l.length;_++){u[l[_].graph_node_id]=!0}for(var c=0,p=this._node.children();c<p.length;c++){var d=p[c];d.graph_node_id in u&&s.push(d)}this._data.selection=s.map((function(e){return e.name}))}}if(this._node.io.inputs.override_clonable_state_allowed()){var f=this._node.io.inputs.override_clonable_state();f&&(this._data.override_clonable_state=f)}return this.add_custom(),this._data},e.prototype.ui_data=function(){var e={};if(!this.is_root()){var t=this._node.ui_data;e.pos=t.position.toArray();var n=t.comment;n&&(e.comment=r.SceneJsonExporter.sanitize_string(n))}var i=this._node.children();return i.length>0&&(e.nodes={},i.forEach((function(t){var n=o.JsonExportDispatcher.dispatch_node(t);e.nodes[t.name]=n.ui_data()}))),e},e.prototype.is_root=function(){return null===this._node.parent&&this._node.graph_node_id==this._node.root.graph_node_id},e.prototype.inputs_data=function(){var e=this,t=[];return this._node.io.inputs.inputs().forEach((function(n,r){if(n){var o=e._node.io.connections.input_connection(r);if(e._node.io.inputs.has_named_inputs){var i=e._node.io.inputs.named_input_connection_points[r].name,a=o.output_index,s=n.io.outputs.named_output_connection_points[a].name;t.push({name:i,node:n.name,output:s})}else t.push(n.name)}})),t},e.prototype.params_data=function(){for(var e={},t=0,n=this._node.params.names;t<n.length;t++){var r=n[t],i=this._node.params.get(r);if(i&&!i.parent_param){var a=o.JsonExportDispatcher.dispatch_param(i);if(a.required){var s=a.data();e[i.name]=s}}}return e},e.prototype.nodes_data=function(){for(var e={},t=0,n=this._node.children();t<n.length;t++){var r=n[t],i=o.JsonExportDispatcher.dispatch_node(r);e[r.name]=i.data()}return e},e.prototype.add_custom=function(){},e}();t.NodeJsonExporter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(117),i=n(165),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(){var e,t={},n=this._param.component_names;return null===(e=this._param.components)||void 0===e||e.forEach((function(e,r){var o=i.JsonExportDispatcher.dispatch_param(e);o.required&&(t[n[r]]=o.data())})),t},t}(o.ParamJsonExporter);t.ParamMultipleJsonExporter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(){if(!this._require_data_complex())return this._param.raw_input_serialized;this._complex_data.raw_input=this._param.raw_input_serialized},t}(n(117).ParamJsonExporter);t.ParamNumericJsonExporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(117),i=n(166),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(){var e=this._param.raw_input;if(e=i.SceneJsonExporter.sanitize_string(e),!this._require_data_complex())return e;this._complex_data.raw_input=e},t}(o.ParamJsonExporter);t.ParamOperatorPathJsonExporter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(117),i=n(166),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(){var e=this._param.raw_input;if(e=i.SceneJsonExporter.sanitize_string(e),!this._require_data_complex())return e;this._complex_data.raw_input=e},t}(o.ParamJsonExporter);t.ParamStringJsonExporter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(){if(!this._require_data_complex())return this._param.raw_input_serialized;this._complex_data.raw_input=this._param.raw_input_serialized},t}(n(117).ParamJsonExporter);t.ParamRampJsonExporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1),i=n(181),a=n(1),s=n(67),u=n(9),_=n(137),l=n(138),c=n(162),p=n(163),d=n(164),f=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(d.TextureAlphaMapParamConfig(p.TextureMapParamConfig(c.SkinningParamConfig(l.SideParamConfig(_.ColorParamConfig(u.NodeParamsConfig))))))),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=f,t.texture_map_controller=new p.TextureMapController(t),t.texture_alpha_map_controller=new d.TextureAlphaMapController(t),t}return r.__extends(t,e),t.type=function(){return"mesh_lambert"},t.prototype.create_material=function(){return new i.MeshLambertMaterial({vertexColors:o.NoColors,side:a.FrontSide,color:16777215,opacity:1})},t.prototype.initialize_node=function(){var e=this;this.params.set_post_create_params_hook((function(){e.texture_map_controller.initialize_node(),e.texture_alpha_map_controller.initialize_node()}))},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return _.ColorsController.update(this),l.SideController.update(this),c.SkinningController.update(this),this.texture_map_controller.update(),this.texture_alpha_map_controller.update(),this.set_material(this.material),[2]}))}))},t}(s.TypedMatNode);t.MeshLambertMatNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1),i=n(120),a=n(1),s=n(67),u=n(9),_=n(137),l=n(138),c=n(162),p=n(163),d=n(164),f=n(739),h=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.metalness=u.ParamConfig.FLOAT(1),t.roughness=u.ParamConfig.FLOAT(0),t}return r.__extends(t,e),t}(f.TextureEnvMapParamConfig(d.TextureAlphaMapParamConfig(p.TextureMapParamConfig(c.SkinningParamConfig(l.SideParamConfig(_.ColorParamConfig(u.NodeParamsConfig)))))))),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=h,t.texture_map_controller=new p.TextureMapController(t),t.texture_alpha_map_controller=new d.TextureAlphaMapController(t),t.texture_env_map_controller=new f.TextureEnvMapController(t),t}return r.__extends(t,e),t.type=function(){return"mesh_standard"},t.prototype.create_material=function(){return new i.MeshStandardMaterial({vertexColors:o.NoColors,side:a.FrontSide,color:16777215,opacity:1,metalness:1,roughness:0})},t.prototype.initialize_node=function(){var e=this;this.params.set_post_create_params_hook((function(){e.texture_map_controller.initialize_node(),e.texture_alpha_map_controller.initialize_node(),e.texture_env_map_controller.initialize_node()}))},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return _.ColorsController.update(this),l.SideController.update(this),c.SkinningController.update(this),this.texture_map_controller.update(),this.texture_alpha_map_controller.update(),this.texture_env_map_controller.update(),this._material&&(this._material.envMapIntensity=this.pv.env_map_intensity,this._material.roughness=this.pv.roughness,this._material.metalness=this.pv.metalness),this.set_material(this.material),[2]}))}))},t}(s.TypedMatNode);t.MeshStandardMatNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(16),i=n(135),a=n(67),s=n(9),u=n(206);function _(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_env_map=s.ParamConfig.BOOLEAN(0,u.BooleanParamOptions(c)),t.env_map=s.ParamConfig.OPERATOR_PATH(i.FileCopNode.DEFAULT_NODE_PATH.ENV_MAP,u.OperatorPathOptions(c,"use_env_map")),t.env_map_intensity=s.ParamConfig.FLOAT(1,{visible_if:{use_env_map:1}}),t}return r.__extends(t,e),t}(e)}t.TextureEnvMapParamConfig=_;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(o.Material),c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(_(s.NodeParamsConfig)),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e),t.prototype.create_material=function(){return new l}}(a.TypedMatNode),function(e){function t(t){var n=e.call(this,t)||this;return n.node=t,n}return r.__extends(t,e),t.prototype.initialize_node=function(){this.add_hooks(this.node.p.use_env_map,this.node.p.env_map)},t.prototype.update=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this._update_texture(this.node.material,"envMap",this.node.p.use_env_map,this.node.p.env_map),[2]}))}))},t.update=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return e.texture_env_map_controller.update(),[2]}))}))},t}(u.BaseTextureMapController));t.TextureEnvMapController=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1),i=n(90),a=n(1),s=n(67),u=n(137),_=n(138),l=n(9);function c(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.size=l.ParamConfig.FLOAT(1),t.size_attenuation=l.ParamConfig.BOOLEAN(1),t}return r.__extends(t,e),t}(e)}t.PointsParamConfig=c;var p=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(_.SideParamConfig(u.ColorParamConfig(c(l.NodeParamsConfig))))),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=p,t}return r.__extends(t,e),t.type=function(){return"points"},t.prototype.create_material=function(){return new i.PointsMaterial({vertexColors:o.NoColors,side:a.FrontSide,color:16777215,opacity:1})},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return u.ColorsController.update(this),_.SideController.update(this),this.material.size=this.pv.size,this.material.sizeAttenuation=this.pv.size_attenuation,this.set_material(this.material),[2]}))}))},t}(s.TypedMatNode);t.PointsMatNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115),o=n(742),i=n(744),a=n(745),s=n(747),u=n(749),_=n(751),l=n(753),c=n(754),p=n(755),d=n(756),f=n(757),h=n(759),m=n(760),g=n(761),v=n(772),y=function(){function e(){}return e.run=function(e){e.register_node(o.AmbientLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(i.AreaLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(a.DirectionalLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(s.HemisphereLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(u.PointLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(_.SpotLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(l.EventsObjNode,r.CATEGORY_OBJ.MANAGER),e.register_node(c.MaterialsObjNode,r.CATEGORY_OBJ.MANAGER),e.register_node(p.CopObjNode,r.CATEGORY_OBJ.MANAGER),e.register_node(d.PostProcessObjNode,r.CATEGORY_OBJ.MANAGER),e.register_node(f.GeoObjNode,r.CATEGORY_OBJ.GEOMETRY),e.register_node(h.NullObjNode,r.CATEGORY_OBJ.GEOMETRY),e.register_node(g.OrthographicCameraObjNode,r.CATEGORY_OBJ.CAMERA),e.register_node(v.PerspectiveCameraObjNode,r.CATEGORY_OBJ.CAMERA),e.register_node(m.FogObjNode,r.CATEGORY_OBJ.MISC)},e}();t.ObjRegister=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(363),i=n(208),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=a.ParamConfig.COLOR([1,1,1]),t.intensity=a.ParamConfig.FLOAT(1),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"ambient_light"},t.prototype.create_light=function(){return new o.AmbientLight},t.prototype.update_light_params=function(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity},t}(i.TypedLightObjNode);t.AmbientLightObjNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.set_content=function(t){e.prototype.set_content.call(this,t)},t.prototype.set_object=function(e){return this.set_content(e)},t.prototype.has_object=function(){return this.has_content()},t.prototype.object=function(){return this.content()},t}(n(106).TypedContainer);t.ObjectContainer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(364),i=n(959),a=n(167),s=n(72),u=n(9);function _(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=u.ParamConfig.COLOR([1,1,1]),t.intensity=u.ParamConfig.FLOAT(1,{range:[0,10]}),t.width=u.ParamConfig.FLOAT(1,{range:[0,10]}),t.height=u.ParamConfig.FLOAT(1,{range:[0,10]}),t}return r.__extends(t,e),t}(e)}t.AreaLightParamConfig=_;var l=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(_(s.TransformedParamConfig(u.NodeParamsConfig)))),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t}return r.__extends(t,e),t.type=function(){return"area_light"},t.prototype.create_light=function(){return new o.RectAreaLight(16777215,1,1,1)},t.prototype.update_light_params=function(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity,this.light.width=this.pv.width,this.light.height=this.pv.height},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return i.RectAreaLightUniformsLib.initialized||(i.RectAreaLightUniformsLib.init(),i.RectAreaLightUniformsLib.initialized=!0),this.transform_controller.update(),this.update_light_params(),this.update_shadow_params(),this.cook_controller.end_cook(),[2]}))}))},t}(a.BaseLightTransformedObjNode);t.AreaLightObjNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(258),i=n(746),a=n(9),s=n(169),u=n(167),_=n(72);function l(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=a.ParamConfig.FOLDER(),t.color=a.ParamConfig.COLOR([1,1,1]),t.intensity=a.ParamConfig.FLOAT(1),t.distance=a.ParamConfig.FLOAT(100,{range:[0,100]}),t.cast_shadows=a.ParamConfig.BOOLEAN(1),t.shadow_res=a.ParamConfig.VECTOR2([1024,1024]),t.shadow_bias=a.ParamConfig.FLOAT(.001),t.show_helper=a.ParamConfig.BOOLEAN(1),t.helper_size=a.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}}),t}return r.__extends(t,e),t}(e)}t.DirectionalLightParamConfig=l;var c=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(l(_.TransformedParamConfig(a.NodeParamsConfig)))),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t._helper_controller=new s.HelperController(t,i.DirectionalLightHelper,"DirectionalLightHelper"),t}return r.__extends(t,e),t.type=function(){return"directional_light"},t.prototype.initialize_node=function(){this._helper_controller.initialize_node()},t.prototype.create_light=function(){var e=new o.DirectionalLight;return e.castShadow=!0,e.shadow.bias=-.001,e.shadow.mapSize.x=1024,e.shadow.mapSize.y=1024,e.shadow.camera.near=.1,this._target_target=e.target,this._target_target.name="DirectionalLight Default Target",this.object.add(this._target_target),e},t.prototype.update_light_params=function(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity,this.light.shadow.camera.far=this.pv.distance,this._helper_controller.update()},t.prototype.update_shadow_params=function(){this.light.castShadow=this.pv.cast_shadows,this.light.shadow.mapSize.copy(this.pv.shadow_res),this.light.shadow.bias=this.pv.shadow_bias,this.light.shadow.camera.updateProjectionMatrix()},t}(u.BaseLightTransformedObjNode);t.DirectionalLightObjNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(10),i=n(12),a=n(61),s=n(168),u=n(129),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._square=new u.Line,t._line_material=new a.LineBasicMaterial({fog:!1}),t}return r.__extends(t,e),t.prototype.build_helper=function(){var e=new i.BufferGeometry;e.setAttribute("position",new o.Float32BufferAttribute([-1,1,0,1,1,0,1,-1,0,-1,-1,0,-1,1,0],3)),this._square.geometry=e,this._square.material=this._line_material,this._square.rotateX(.5*Math.PI),this.object.add(this._square)},t.prototype.update=function(){this._object.scale.setScalar(this.node.pv.helper_size),this._line_material.color.copy(this.node.light.color)},t}(s.BaseLightHelper);t.DirectionalLightHelper=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(365),i=n(748),a=n(208),s=n(9),u=n(169),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=s.ParamConfig.FOLDER(),t.sky_color=s.ParamConfig.COLOR([.2,.7,1]),t.ground_color=s.ParamConfig.COLOR([.1,.1,.25]),t.intensity=s.ParamConfig.FLOAT(1),t.position=s.ParamConfig.VECTOR3([0,1,0]),t.show_helper=s.ParamConfig.BOOLEAN(1),t.helper_size=s.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}}),t}return r.__extends(t,e),t}(s.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t._helper_controller=new u.HelperController(t,i.HemisphereLightHelper,"HemisphereLightHelper"),t}return r.__extends(t,e),t.type=function(){return"hemisphere_light"},t.prototype.create_light=function(){return new o.HemisphereLight},t.prototype.initialize_node=function(){this._helper_controller.initialize_node()},t.prototype.update_light_params=function(){this.light.color=this.pv.sky_color,this.light.groundColor=this.pv.ground_color,this.light.position.copy(this.pv.position),this.light.intensity=this.pv.intensity,this._helper_controller.update()},t}(a.TypedLightObjNode);t.HemisphereLightObjNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(14),i=n(294),a=n(10),s=n(1),u=n(64),_=n(4),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._geometry=new i.OctahedronBufferGeometry(1),t._quat=new u.Quaternion,t._default_position=new _.Vector3(0,1,0),t._color1=new o.Color,t._color2=new o.Color,t}return r.__extends(t,e),t.prototype.build_helper=function(){this._geometry.rotateZ(.5*Math.PI),this._material.vertexColors=s.VertexColors;var e=this._geometry.getAttribute("position"),t=new Float32Array(3*e.count);this._geometry.setAttribute("color",new a.BufferAttribute(t,3)),this._object.geometry=this._geometry,this._object.material=this._material},t.prototype.update=function(){if(this.node.pv.position){this._object.position.copy(this.node.pv.position).multiplyScalar(-1),this._quat.setFromUnitVectors(this._default_position,this.node.pv.position),this._object.setRotationFromQuaternion(this._quat),this._object.scale.setScalar(this.node.pv.helper_size);var e=this._geometry.getAttribute("color");this._color1.copy(this.node.light.color),this._color2.copy(this.node.light.groundColor);for(var t=0,n=e.count;t<n;t++){var r=t<n/2?this._color1:this._color2;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}},t}(n(168).BaseLightHelper);t.HemisphereLightHelper=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(259),i=n(750),a=n(167),s=n(72),u=n(9),_=n(169),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=u.ParamConfig.FOLDER(),t.color=u.ParamConfig.COLOR([1,1,1]),t.intensity=u.ParamConfig.FLOAT(1),t.decay=u.ParamConfig.FLOAT(.1),t.distance=u.ParamConfig.FLOAT(100),t.cast_shadows=u.ParamConfig.BOOLEAN(1),t.shadow_res=u.ParamConfig.VECTOR2([1024,1024],{visible_if:{cast_shadows:1}}),t.shadow_bias=u.ParamConfig.FLOAT(.001,{visible_if:{cast_shadows:1}}),t.shadow_near=u.ParamConfig.FLOAT(1,{visible_if:{cast_shadows:1}}),t.shadow_far=u.ParamConfig.FLOAT(100,{visible_if:{cast_shadows:1}}),t.show_helper=u.ParamConfig.BOOLEAN(1),t.helper_size=u.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}}),t}return r.__extends(t,e),t}(s.TransformedParamConfig(u.NodeParamsConfig))),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t._helper_controller=new _.HelperController(t,i.PointLightHelper,"PointLightHelper"),t}return r.__extends(t,e),t.type=function(){return"point_light"},t.prototype.initialize_node=function(){this._helper_controller.initialize_node()},t.prototype.create_light=function(){var e=new o.PointLight;return e.castShadow=!0,e.shadow.bias=-.001,e.shadow.mapSize.x=1024,e.shadow.mapSize.y=1024,e.shadow.camera.near=.1,e},t.prototype.update_light_params=function(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity,this.light.decay=this.pv.decay,this.light.distance=this.pv.distance,this._helper_controller.update()},t.prototype.update_shadow_params=function(){this.light.castShadow=this.pv.cast_shadows,this.light.shadow.mapSize.copy(this.pv.shadow_res),this.light.shadow.camera.near=this.pv.shadow_near,this.light.shadow.camera.far=this.pv.shadow_far,this.light.shadow.bias=this.pv.shadow_bias},t}(a.BaseLightTransformedObjNode);t.PointLightObjNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(209),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.build_helper=function(){this._object.geometry=new o.SphereBufferGeometry(1,4,2),this._object.material=this._material},t.prototype.update=function(){this._object.scale.setScalar(this.node.pv.helper_size),this._material.color.copy(this.node.light.color)},t}(n(168).BaseLightHelper);t.PointLightHelper=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(260),i=n(167),a=n(72),s=n(9),u=n(169),_=n(752),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=s.ParamConfig.FOLDER(),t.color=s.ParamConfig.COLOR([1,1,1]),t.intensity=s.ParamConfig.FLOAT(1),t.angle=s.ParamConfig.FLOAT(45,{range:[0,180]}),t.penumbra=s.ParamConfig.FLOAT(.1),t.decay=s.ParamConfig.FLOAT(.1,{range:[0,1]}),t.distance=s.ParamConfig.FLOAT(100,{range:[0,100]}),t.cast_shadows=s.ParamConfig.BOOLEAN(1),t.shadow_res=s.ParamConfig.VECTOR2([1024,1024]),t.shadow_bias=s.ParamConfig.FLOAT(.001),t.show_helper=s.ParamConfig.BOOLEAN(1),t.helper_size=s.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}}),t}return r.__extends(t,e),t}(a.TransformedParamConfig(s.NodeParamsConfig))),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t._helper_controller=new u.HelperController(t,_.SpotLightHelper,"SpotLightHelper"),t}return r.__extends(t,e),t.type=function(){return"spot_light"},t.prototype.initialize_node=function(){this._helper_controller.initialize_node()},t.prototype.create_light=function(){var e=new o.SpotLight;return e.castShadow=!0,e.shadow.bias=-.001,e.shadow.mapSize.x=1024,e.shadow.mapSize.y=1024,e.shadow.camera.near=.1,this._target_target=e.target,this._target_target.name="SpotLight Default Target",this.object.add(this._target_target),e},t.prototype.update_light_params=function(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity,this.light.angle=this.pv.angle*(Math.PI/180),this.light.penumbra=this.pv.penumbra,this.light.decay=this.pv.decay,this.light.distance=this.pv.distance,this._helper_controller.update()},t.prototype.update_shadow_params=function(){this.light.castShadow=this.pv.cast_shadows,this.light.shadow.mapSize.copy(this.pv.shadow_res),this.light.shadow.bias=this.pv.shadow_bias},t}(i.BaseLightTransformedObjNode);t.SpotLightObjNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(168),i=n(12),a=n(10),s=n(61),u=n(73),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cone=new u.LineSegments,t._line_material=new s.LineBasicMaterial({fog:!1}),t}return r.__extends(t,e),t.prototype.build_helper=function(){for(var e=new i.BufferGeometry,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,r=1;n<32;n++,r++){var o=n/32*Math.PI*2,s=r/32*Math.PI*2;t.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}e.setAttribute("position",new a.Float32BufferAttribute(t,3)),this._cone.geometry=e,this._cone.material=this._line_material,this._cone.rotateX(.5*Math.PI),this.object.add(this._cone)},t.prototype.update=function(){var e=(this.node.light.distance?this.node.light.distance:1e3)*this.node.pv.helper_size,t=e*Math.tan(this.node.light.angle);this._cone.scale.set(t,t,e),this._line_material.color.copy(this.node.light.color)},t}(o.BaseLightHelper);t.SpotLightHelper=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(170),i=n(30),a=n(68),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render_order=a.ObjNodeRenderOrder.EVENT,t._children_controller_context=i.NodeContext.EVENT,t}return r.__extends(t,e),t.type=function(){return"events"},t.prototype.initialize_node=function(){var e;null===(e=this.children_controller)||void 0===e||e.init()},t.prototype.create_node=function(t){return e.prototype.create_node.call(this,t)},t.prototype.children=function(){return e.prototype.children.call(this)},t.prototype.nodes_by_type=function(t){return e.prototype.nodes_by_type.call(this,t)},t}(o.BaseManagerObjNode);t.EventsObjNode=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(170),i=n(30),a=n(68),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render_order=a.ObjNodeRenderOrder.MAT,t._children_controller_context=i.NodeContext.MAT,t}return r.__extends(t,e),t.type=function(){return"materials"},t.prototype.initialize_node=function(){var e;null===(e=this.children_controller)||void 0===e||e.init()},t.prototype.create_node=function(t){return e.prototype.create_node.call(this,t)},t.prototype.children=function(){return e.prototype.children.call(this)},t.prototype.nodes_by_type=function(t){return e.prototype.nodes_by_type.call(this,t)},t}(o.BaseManagerObjNode);t.MaterialsObjNode=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(170),i=n(30),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._children_controller_context=i.NodeContext.COP,t}return r.__extends(t,e),t.type=function(){return"cop"},t.prototype.initialize_node=function(){var e;null===(e=this.children_controller)||void 0===e||e.init()},t.prototype.create_node=function(t){return e.prototype.create_node.call(this,t)},t.prototype.children=function(){return e.prototype.children.call(this)},t.prototype.nodes_by_type=function(t){return e.prototype.nodes_by_type.call(this,t)},t}(o.BaseManagerObjNode);t.CopObjNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(170),i=n(30),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._children_controller_context=i.NodeContext.POST,t}return r.__extends(t,e),t.type=function(){return"post_process"},t.prototype.initialize_node=function(){var e;null===(e=this.children_controller)||void 0===e||e.init()},t}(o.BaseManagerObjNode);t.PostProcessObjNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(68),i=n(59),a=n(758),s=n(30),u=n(72),_=n(81),l=n(9),c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.display=l.ParamConfig.BOOLEAN(1),t}return r.__extends(t,e),t}(u.TransformedParamConfig(l.NodeParamsConfig))),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t.transform_controller=new u.TransformController(t),t._display_node_controller=new a.DisplayNodeController(t),t.flags=new _.FlagsControllerD(t),t._sop_group=t._create_sop_group(),t._children_controller_context=s.NodeContext.SOP,t}return r.__extends(t,e),t.type=function(){return"geo"},Object.defineProperty(t.prototype,"display_node_controller",{get:function(){return this._display_node_controller},enumerable:!0,configurable:!0}),t.prototype._create_sop_group=function(){return new i.Group},Object.defineProperty(t.prototype,"sop_group",{get:function(){return this._sop_group},enumerable:!0,configurable:!0}),t.prototype.set_sop_group_name=function(){this._sop_group.name=this.full_path()+":sop_group"},t.prototype.initialize_node=function(){var e;null===(e=this.children_controller)||void 0===e||e.init(),this.display_node_controller.initialize_node(),this.transform_controller.initialize_node(),this.object.add(this.sop_group),this.name_controller.add_post_set_full_path_hook(this.set_sop_group_name.bind(this)),this._create_sop_group()},t.prototype.create_object=function(){return new i.Group},t.prototype.request_display_node=function(){this.scene.loading_controller.auto_updating},t.prototype.is_display_node_cooking=function(){if(this.flags.display.active){var e=this._display_node_controller.display_node;return!!e&&e.is_dirty}return!1},t.prototype.post_display_flag_node_set_dirty=function(){this.request_display_node()},t.prototype.post_add_node=function(e){var t,n;this.scene.loading_controller.loaded&&1==this.children().length&&(null===(n=null===(t=e.flags)||void 0===t?void 0:t.display)||void 0===n||n.set(!0))},t.prototype.create_node=function(t){return e.prototype.create_node.call(this,t)},t.prototype.children=function(){return e.prototype.children.call(this)},t.prototype.nodes_by_type=function(t){return e.prototype.nodes_by_type.call(this,t)},t.prototype.on_create=function(){},t.prototype.cook=function(){this.transform_controller.update(),this.cook_controller.end_cook()},t}(o.TypedObjNode);t.GeoObjNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(57),i=function(){function e(e){this.node=e,this._children_uuids_dict={},this._children_length=0,this._request_display_node_container_bound=this.request_display_node_container.bind(this),this._graph_node=new o.CoreGraphNode(e.scene,"DisplayNodeController"),this._graph_node.dirty_controller.add_post_dirty_hook("_request_display_node_container",this._request_display_node_container_bound)}return Object.defineProperty(e.prototype,"display_node",{get:function(){return this._display_node},enumerable:!0,configurable:!0}),e.prototype.set_parent_object=function(e){this._parent_object=e},Object.defineProperty(e.prototype,"parent_object",{get:function(){return this._parent_object||this.node.object},enumerable:!0,configurable:!0}),e.prototype.initialize_node=function(){var e=this;this.set_parent_object(this.node.sop_group),this.node.flags.display.add_hook((function(){e.node.sop_group.visible=e.used_in_scene,e.node.flags.display.active&&e.request_display_node_container()})),this.node.lifecycle.add_on_child_add_hook((function(t){var n,r;e._display_node||null===(r=null===(n=t.flags)||void 0===n?void 0:n.display)||void 0===r||r.set(!0)}))},e.prototype.set_display_node=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){return this._display_node!=e&&((t=this._display_node)&&(t.flags.display.set(!1),this._graph_node.remove_graph_input(t),this.remove_children()),this._display_node=e,this._display_node&&this._graph_node.add_graph_input(this._display_node),this.request_display_node_container()),[2]}))}))},e.prototype.remove_children=function(){for(var e;e=this.parent_object.children.pop();)this.parent_object.remove(e)},Object.defineProperty(e.prototype,"used_in_scene",{get:function(){return this.node.used_in_scene&&this.node.flags.display.active&&1==this.node.pv.display},enumerable:!0,configurable:!0}),e.prototype.request_display_node_container=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i,a,s,u,_;return r.__generator(this,(function(r){switch(r.label){case 0:return this.node.scene.loading_controller.loaded?this.used_in_scene&&this._display_node?[4,this._display_node.request_container()]:[3,2]:[2];case 1:if(e=r.sent(),t=e.core_content()){if(n=t.objects(),!(o=n.length!=this._children_length))for(i=0,a=n;i<a.length;i++)(_=a[i]).uuid in this._children_uuids_dict||(o=!0);if(o){for(this.remove_children(),this._children_uuids_dict={},s=0,u=n;s<u.length;s++)_=u[s],this.parent_object.add(_),this._children_uuids_dict[_.uuid]=!0;this._children_length=n.length}}else this.remove_children(),this._children_uuids_dict={},this._children_length=0;r.label=2;case 2:return[2]}}))}))},e}();t.DisplayNodeController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(68),i=n(59),a=n(72),s=n(81),u=n(960),_=n(9),l=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(a.TransformedParamConfig(_.NodeParamsConfig))),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t.transform_controller=new a.TransformController(t),t.flags=new s.FlagsControllerD(t),t._helper=new u.AxesHelper(1),t}return r.__extends(t,e),t.type=function(){return"null"},t.prototype.create_object=function(){return new i.Group},t.prototype.initialize_node=function(){var e=this;this.transform_controller.initialize_node(),this.object.add(this._helper),this.flags.display.add_hook((function(){e._helper.visible=e.flags.display.active}))},t.prototype.cook=function(){this.transform_controller.update(),this.cook_controller.end_cook()},t}(o.TypedObjNode);t.NullObjNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(68),i=n(366),a=n(367),s={color:new(n(14).Color)(1,1,1),near:0,far:100,density:25e-5},u=n(9),_=n(81),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=u.ParamConfig.COLOR(s.color.toArray()),t.exponential=u.ParamConfig.BOOLEAN(0),t.density=u.ParamConfig.FLOAT(1),t.near=u.ParamConfig.FLOAT(0,{range:[0,100]}),t.far=u.ParamConfig.FLOAT(100,{range:[0,100]}),t}return r.__extends(t,e),t}(u.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t.flags=new _.FlagsControllerD(t),t.render_order=o.ObjNodeRenderOrder.MANAGER,t._attachable_to_hierarchy=!1,t}return r.__extends(t,e),t.prototype.initialize_node=function(){this._linear_fog=new a.Fog(s.color.getHex(),s.near,s.far),this._linear_fogexp2=new i.FogExp2(s.color.getHex(),s.density)},t.type=function(){return"fog"},t.prototype.cook=function(){var e;this.pv.exponential?(this._linear_fogexp2.density=this.pv.density,e=this._linear_fogexp2):(this._linear_fog.near=this.pv.near,this._linear_fog.far=this.pv.far,e=this._linear_fog),e.color.copy(this.pv.color),this.scene.display_scene.fog=e,this.cook_controller.end_cook()},t}(o.TypedObjNode);t.FogObjNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(89),i=n(295),a=n(771),s=-.5,u=.5,_=.5,l=-.5,c=n(9),p=n(172),d=n(118),f=n(171),h=n(72);function m(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.size=c.ParamConfig.FLOAT(1),t}return r.__extends(t,e),t}(e)}t.OrthographicCameraObjParamConfigMixin=m;var g=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(p.CameraPostProcessParamConfig(d.CameraBackgroundParamConfig(h.TransformedParamConfig(f.LayerParamConfig(m(i.CameraTransformParamConfig(c.NodeParamsConfig)))))))),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=g,t}return r.__extends(t,e),Object.defineProperty(t.prototype,"background_controller_constructor",{get:function(){return a.OrthographicCameraBackgroundController},enumerable:!0,configurable:!0}),t.type=function(){return"orthographic_camera"},t.prototype.create_object=function(){return new o.OrthographicCamera(2*s,2*u,2*_,2*l,i.BASE_CAMERA_DEFAULT.near,i.BASE_CAMERA_DEFAULT.far)},t.prototype.update_camera=function(){this._update_for_aspect_ratio()},t.prototype._update_for_aspect_ratio=function(){if(this._aspect){var e=this.pv.size||1,t=e*this._aspect;this._object.left=s*t*1,this._object.right=u*t*1,this._object.top=_*e*1,this._object.bottom=l*e*1,this._object.updateProjectionMatrix()}},t}(i.TypedCameraObjNode);t.OrthographicCameraObjNode=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(763),i=n(204),a=function(){function e(e){this.node=e,this._applied_controls_by_element_id={},this._controls_node=null}return e.prototype.controls_param=function(){return this.node.params.has("controls")?this.node.params.get("controls"):null},e.prototype.controls_node=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return e=this.node.p.controls,(t=e.raw_input)&&""!=t?e.is_dirty?[4,e.compute()]:[3,2]:[3,3];case 1:r.sent(),r.label=2;case 2:if(n=e.found_node()){if(n instanceof i.CameraOrbitControlsEventNode)return[2,n];this.node.states.error.set("found node is not of a camera control type")}else this.node.states.error.set("no node has been found");r.label=3;case 3:return[2,null]}}))}))},e.prototype.update_controls=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.controls_node()];case 1:return(e=t.sent())&&this._controls_node!=e&&this.dispose_control_refs(),this._controls_node=e,[2]}}))}))},e.prototype.apply_controls=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.controls_node()];case 1:return(t=r.sent())?(n=t.controls_id(),i=!1,this._applied_controls_by_element_id[e.id]&&this._applied_controls_by_element_id[e.id][n]&&(i=!0),i?[3,3]:(this._applied_controls_by_element_id[e.id]=this._applied_controls_by_element_id[e.id]||{},this._applied_controls_by_element_id[e.id][n]=!0,[4,t.apply_controls(this.node.object,e)])):[3,3];case 2:return a=r.sent(),s=new o.CameraControlsConfig(this.node.graph_node_id,t,a),t.set_from_camera_node(a,this.node),this.set_controls_events(a),[2,s];case 3:return[2]}}))}))},e.prototype.dispose_control_refs=function(){this._applied_controls_by_element_id={}},e.prototype.dispose_controls=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return delete this._applied_controls_by_element_id[e.id],[2]}))}))},e.prototype.set_controls_events=function(e){var t=this;this.controls_start_listener=function(){t.on_controls_start(e)},this.controls_end_listener=function(){t.on_controls_end(e)},e.addEventListener("start",this.controls_start_listener),e.addEventListener("end",this.controls_end_listener)},e.prototype.on_controls_start=function(e){},e.prototype.on_controls_end=function(e){if(e.target){var t=e.target.toArray();this.node.params.set_vector3("target",t)}this.node.update_transform_params_from_object()},e}();t.ControlsController=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this._camera_node_id=e,this._controls_node=t,this._controls=n}return Object.defineProperty(e.prototype,"camera_node_id",{get:function(){return this._camera_node_id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this._controls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls_node",{get:function(){return this._controls_node},enumerable:!0,configurable:!0}),e.prototype.is_equal=function(e){return e.camera_node_id==this._camera_node_id&&e.controls_node.graph_node_id==this._controls_node.graph_node_id},e}();t.CameraControlsConfig=r},function(e,t,n){"use strict";n.r(t),n.d(t,"RenderPass",(function(){return o}));var r=n(65),o=function(e,t,n,o,i){r.a.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=o,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,render:function(e,t,n){var r,o,i=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(r=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,o),this.scene.overrideMaterial=null,e.autoClear=i}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(766),i=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o._scene=n,o.do_render=!0,o._animate_method=o.animate.bind(o),o._canvas=document.createElement("canvas"),o._canvas.id=("canvas_id_"+Math.random()).replace(".","_"),o._canvas.style.display="block",o._canvas.style.outline="none",o._container.appendChild(o._canvas),o._container.classList.add("CoreThreejsViewer"),o._container.style.height="100%",o._set_events(),o}return r.__extends(t,e),t.prototype._build=function(){this._init_display(),this.activate()},t.prototype.dispose=function(){this._cancel_animate(),this.controls_controller.dispose_controls()},t.prototype._set_events=function(){var e=this;this.events_controller.init(),this.webgl_controller.init(),window.onresize=function(){e.cameras_controller.on_resize()}},t.prototype._init_display=function(){var e;if(this._canvas){this.cameras_controller.compute_size_and_aspect();var t=this.cameras_controller.size;null===(e=this.cameras_controller.camera_node)||void 0===e||e.post_process_controller.create_renderer(this._canvas,t),this.cameras_controller.prepare_current_camera(),this.animate()}},t.prototype.animate=function(){this.do_render&&(this.render(),this._request_animation_frame_id=requestAnimationFrame(this._animate_method))},t.prototype._cancel_animate=function(){var e;this.do_render=!1,this._request_animation_frame_id&&cancelAnimationFrame(this._request_animation_frame_id),this._canvas&&(null===(e=this.cameras_controller.camera_node)||void 0===e||e.post_process_controller.delete_renderer(this._canvas))},t.prototype.render=function(){var e;if(this.cameras_controller.camera_node&&this._canvas){var t=this.cameras_controller.size,n=this.cameras_controller.aspect;this.cameras_controller.camera_node.post_process_controller.render(this._canvas,t,n),null===(e=this._controls_controller)||void 0===e||e.update()}else console.warn("no camera to render with")},t}(o.BaseViewer);t.ThreejsViewer=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(767),i=n(768),a=n(769),s=n(770),u=function(){function e(e,t,n){var r=this;this._container=e,this._scene=t,this._active=!1,this._display_scene=this._scene.display_scene,this._init_from_scene(n).then((function(){r._build()}))}return Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.activate=function(){this._active=!0},e.prototype.deactivate=function(){this._active=!1},Object.defineProperty(e.prototype,"cameras_controller",{get:function(){return this._cameras_controller=this._cameras_controller||new o.CamerasController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls_controller",{get:function(){return this._controls_controller=this._controls_controller||new i.ControlsController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events_controller",{get:function(){return this._events_controller=this._events_controller||new a.EventsController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webgl_controller",{get:function(){return this._webgl_controller=this._webgl_controller||new s.WebGLController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),e.prototype._init_from_scene=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.cameras_controller.set_camera_node(e||this._scene.cameras_controller.master_camera_node)];case 1:return t.sent(),[2]}}))}))},e.prototype.reset_container_class=function(){this.container.classList.remove("hovered")},e.prototype.set_container_class_hovered=function(){this.container.classList.add("hovered")},e}();t.BaseViewer=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(6),i=n(57),a=function(){function e(e){this.viewer=e,this._camera_node=null,this._size=new o.Vector2(100,100),this._aspect=1}return e.prototype.set_camera_node=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this._camera_node&&e.graph_node_id==this._camera_node.graph_node_id?[3,2]:(this._camera_node=e,this._update_graph_node(),[4,this.viewer.controls_controller.create_controls()]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype._update_graph_node=function(){if(this._camera_node){var e=this._camera_node.params.get_operator_path("controls");e&&(this._graph_node=this._graph_node||this._create_graph_node(),this._graph_node&&(this._graph_node.graph_disconnect_predecessors(),this._graph_node.add_graph_input(e)))}},e.prototype._create_graph_node=function(){var e=this;if(this._camera_node){var t=new i.CoreGraphNode(this._camera_node.scene,"viewer-controls");return t.add_post_dirty_hook("this.viewer.controls_controller",(function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.viewer.controls_controller.create_controls()];case 1:return e.sent(),[2]}}))}))})),t}},Object.defineProperty(e.prototype,"camera_node",{get:function(){return this._camera_node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aspect",{get:function(){return this._aspect},enumerable:!0,configurable:!0}),e.prototype.on_resize=function(){var e;this.viewer.canvas&&(this.compute_size_and_aspect(),null===(e=this._camera_node)||void 0===e||e.post_process_controller.set_renderer_size(this.viewer.canvas,this._size),this.update_camera_aspect())},e.prototype.compute_size_and_aspect=function(){var e;this._update_size(),null===(e=this._camera_node)||void 0===e||e.scene.uniforms_controller.update_resolution_dependent_uniform_owners(this._size),this._aspect=this._get_aspect()},e.prototype._update_size=function(){this._size.x=this.viewer.container.offsetWidth,this._size.y=this.viewer.container.offsetHeight},e.prototype._get_aspect=function(){return this._size.x/this._size.y},e.prototype.update_camera_aspect=function(){var e;null===(e=this._camera_node)||void 0===e||e.setup_for_aspect_ratio(this._aspect)},e.prototype.prepare_current_camera=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._camera_node?[4,this._camera_node.request_container()]:[3,3];case 1:return e.sent(),[4,this._update_from_camera_container()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype._update_from_camera_container=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.update_camera_aspect(),[4,this.viewer.controls_controller.create_controls()];case 1:return e.sent(),[2]}}))}))},e}();t.CamerasController=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e){this.viewer=e,this._active=!1,this._controls=null,this._bound_on_controls_start=this._on_controls_start.bind(this),this._bound_on_controls_end=this._on_controls_end.bind(this)}return Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"camera_node",{get:function(){return this.viewer.cameras_controller.camera_node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this._controls},enumerable:!0,configurable:!0}),e.prototype.create_controls=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return this.dispose_controls(),this.viewer.canvas?[4,null===(e=this.camera_node)||void 0===e?void 0:e.controls_controller.apply_controls(this.viewer.canvas)]:[2];case 1:return(t=n.sent())&&(this._controls=t.controls,this._controls&&(this.viewer.active?(this._controls.addEventListener("start",this._bound_on_controls_start),this._controls.addEventListener("end",this._bound_on_controls_end)):this.dispose_controls())),[2]}}))}))},e.prototype.update=function(){this._controls&&this._controls.update()},e.prototype.dispose_controls=function(){var e;this._controls&&(this.viewer.canvas&&(null===(e=this.camera_node)||void 0===e||e.controls_controller.dispose_controls(this.viewer.canvas)),this._bound_on_controls_start&&this._controls.removeEventListener("start",this._bound_on_controls_start),this._bound_on_controls_end&&this._controls.removeEventListener("end",this._bound_on_controls_end),this._controls.dispose(),this._controls=null)},e.prototype._on_controls_start=function(){this._active=!0},e.prototype._on_controls_end=function(){this._active=!1},e}();t.ControlsController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(e){this.viewer=e,this._mousedown_pos=new r.Vector2,this._mouse_distance_travelled=-1,this._bound_on_mousedown=this._on_mousedown.bind(this),this._bound_on_mousemove=this._on_mousemove.bind(this),this._bound_on_mouseup=this._on_mouseup.bind(this)}return Object.defineProperty(e.prototype,"camera_node",{get:function(){return this.viewer.cameras_controller.camera_node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this.viewer.canvas},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.canvas&&(this._bound_on_mousedown&&this.canvas.removeEventListener("mousedown",this._bound_on_mousedown),this._bound_on_mousemove&&this.canvas.removeEventListener("mousemove",this._bound_on_mousemove),this._bound_on_mouseup&&this.canvas.removeEventListener("mouseup",this._bound_on_mouseup),this._bound_on_mousedown=this._bound_on_mousedown||this._on_mousedown.bind(this),this._bound_on_mousemove=this._bound_on_mousemove||this._on_mousemove.bind(this),this._bound_on_mouseup=this._bound_on_mouseup||this._on_mouseup.bind(this),this.canvas.addEventListener("mousedown",this._bound_on_mousedown),this.canvas.addEventListener("mousemove",this._bound_on_mousemove),this.canvas.addEventListener("mouseup",this._bound_on_mouseup),this.canvas.addEventListener("touchstart",this._bound_on_mousedown,!1),this.canvas.addEventListener("touchmove",this._bound_on_mousemove,!1),this.canvas.addEventListener("touchend",this._bound_on_mouseup,!1),this.canvas.addEventListener("touchcancel",this._bound_on_mouseup,!1))},e.prototype._on_mousedown=function(e){if(this._mouse_distance_travelled=0,e instanceof MouseEvent)this._mousedown_pos.x=e.pageX,this._mousedown_pos.y=e.pageY;else{var t=e.touches[0];this._mousedown_pos.x=t.pageX,this._mousedown_pos.y=t.pageY}},e.prototype._on_mousemove=function(e){if(-1!==this._mouse_distance_travelled){var t=0;if(e instanceof MouseEvent)t=e.pageX-this._mousedown_pos.x+(e.pageY-this._mousedown_pos.y);else{var n=e.touches[0];t=n.pageX-this._mousedown_pos.x+(n.pageY-this._mousedown_pos.y)}this._mouse_distance_travelled+=Math.abs(t)}this.viewer.controls_controller.active},e.prototype._on_mouseup=function(e){this._mouse_distance_travelled,this._mouse_distance_travelled=-1},e}();t.EventsController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.viewer=e}return e.prototype.init=function(){var e=this.viewer.canvas;e&&(e.onwebglcontextlost=this._on_webglcontextlost.bind(this),e.onwebglcontextrestored=this._on_webglcontextrestored.bind(this))},e.prototype._on_webglcontextlost=function(){console.warn("context lost at frame",this.viewer.scene.frame),this.request_animation_frame_id?cancelAnimationFrame(this.request_animation_frame_id):console.warn("request_animation_frame_id not initialized"),console.warn("not canceled",this.request_animation_frame_id)},e.prototype._on_webglcontextrestored=function(){console.log("context restored")},e}();t.WebGLController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(118),i=r.__importDefault(n(149)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.update_screen_quad=function(){var e=this.screen_quad,t=this.node.params.float("size"),n=t,r=this.node.params.float("far");!r||i.default(t)||i.default(n)||(e.scale.x=t,e.scale.y=n,e.position.z=-.9999*r)},t}(o.BaseBackgroundController);t.OrthographicCameraBackgroundController=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(92),i=n(295),a=n(773),s=50,u=n(9),_=n(172),l=n(118),c=n(171),p=n(72);function d(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fov=u.ParamConfig.FLOAT(s,{range:[0,100]}),t}return r.__extends(t,e),t}(e)}t.PerspectiveCameraObjParamConfigMixin=d;var f=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(_.CameraPostProcessParamConfig(l.CameraBackgroundParamConfig(p.TransformedParamConfig(c.LayerParamConfig(d(i.CameraTransformParamConfig(u.NodeParamsConfig)))))))),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=f,t}return r.__extends(t,e),t.type=function(){return"perspective_camera"},Object.defineProperty(t.prototype,"background_controller_constructor",{get:function(){return a.PerspectiveCameraBackgroundController},enumerable:!0,configurable:!0}),t.prototype.create_object=function(){return new o.PerspectiveCamera(s,1,i.BASE_CAMERA_DEFAULT.near,i.BASE_CAMERA_DEFAULT.far)},t.prototype.update_camera=function(){this._object.fov!=this.pv.fov&&(this._object.fov=this.pv.fov,this._object.updateProjectionMatrix()),this._update_for_aspect_ratio()},t.prototype._update_for_aspect_ratio=function(){this._aspect&&(this._object.aspect=this._aspect,this._object.updateProjectionMatrix())},t}(i.TypedCameraObjNode);t.PerspectiveCameraObjNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(118),i=n(4),a=r.__importDefault(n(149)),s=r.__importDefault(n(182)),u={bl:{x:-1,y:-1},br:{x:1,y:-1},tl:{x:-1,y:1},tr:{x:1,y:1}},_=["bl","br","tl","tr"],l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bg_corner={bl:new i.Vector3,br:new i.Vector3,tl:new i.Vector3,tr:new i.Vector3},t._bg_center=new i.Vector3,t}return r.__extends(t,e),t.prototype.update_screen_quad=function(){for(var e=this,t=this.screen_quad,n=0,r=_;n<r.length;n++){var o=r[n];this._update_corner_vector(this._bg_corner[o],u[o])}var i=this._bg_corner.bl.distanceTo(this._bg_corner.br),l=this._bg_corner.bl.distanceTo(this._bg_corner.tl);this._bg_center.x=s.default(_.map((function(t){return e._bg_corner[t].x})))/4,this._bg_center.y=s.default(_.map((function(t){return e._bg_corner[t].y})))/4,this._bg_center.z=s.default(_.map((function(t){return e._bg_corner[t].z})))/4;var c=this.node.params.float("far"),p=this.node.params.float("background_ratio");if(c&&!a.default(i)&&!a.default(l)){var d=c/this._bg_center.distanceTo(this.node.object.position),f=p||1;l=i>l?i/f:i*f,t.scale.x=i*d,t.scale.y=l*d,t.position.z=-.9999*c}},t.prototype._update_corner_vector=function(e,t){this._bg_raycaster.setFromCamera(t,this.node.object),e.copy(this._bg_raycaster.ray.direction).multiplyScalar(this.node.params.float("far")).add(this._bg_raycaster.ray.origin)},t}(o.BaseBackgroundController);t.PerspectiveCameraBackgroundController=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115),o=n(775),i=n(779),a=n(780),s=n(781),u=n(782),_=n(783),l=n(784),c=n(785),p=n(786),d=n(787),f=n(788),h=n(789),m=n(793),g=n(794),v=n(795),y=n(350),b=n(796),w=n(797),x=n(799),C=n(802),P=n(804),E=n(805),O=n(806),T=n(807),N=n(808),j=n(811),A=n(812),S=n(814),M=n(815),k=n(816),R=n(817),D=n(818),I=n(819),L=n(820),B=n(822),z=n(823),F=n(824),G=n(825),V=n(828),U=n(829),q=n(830),H=n(831),Y=n(832),X=n(833),J=n(834),W=n(835),K=n(836),$=n(837),Z=n(838),Q=n(839),ee=n(841),te=n(842),ne=n(843),re=n(844),oe=n(845),ie=function(){function e(){}return e.run=function(e){e.register_node(o.AddSopNode,r.CATEGORY_SOP.INPUT),e.register_node(i.AnimationCopySopNode,r.CATEGORY_SOP.ANIMATION),e.register_node(a.AnimationMixerSopNode,r.CATEGORY_SOP.ANIMATION),e.register_node(s.AttribAddMultSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(u.AttribCopySopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(_.AttribCreateSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(l.AttribDeleteSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(c.AttribNormalizeSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(p.AttribPromoteSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(d.AttribRemapSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(f.AttribRenameSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(h.AttribTransferSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(m.BboxScatterSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(g.BlendSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(v.BoxSopNode,r.CATEGORY_SOP.INPUT),e.register_node(y.CacheSopNode,r.CATEGORY_SOP.MISC),e.register_node(b.CircleSopNode,r.CATEGORY_SOP.INPUT),e.register_node(w.ColorSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(x.CopySopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(C.DataSopNode,r.CATEGORY_SOP.INPUT),e.register_node(P.DataUrlSopNode,r.CATEGORY_SOP.INPUT),e.register_node(E.DelaySopNode,r.CATEGORY_SOP.MISC),e.register_node(O.DeleteSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(T.FaceSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(N.FileSopNode,r.CATEGORY_SOP.INPUT),e.register_node(j.FuseSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(A.HexagonsSopNode,r.CATEGORY_SOP.INPUT),e.register_node(S.HierarchySopNode,r.CATEGORY_SOP.MISC),e.register_node(M.JitterSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(k.LayerSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(R.LineSopNode,r.CATEGORY_SOP.INPUT),e.register_node(D.MaterialSopNode,r.CATEGORY_SOP.RENDER),e.register_node(I.MergeSopNode,r.CATEGORY_SOP.MISC),e.register_node(L.NoiseSopNode,r.CATEGORY_SOP.MISC),e.register_node(B.NormalsSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(z.NullSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(F.ObjectMergeSopNode,r.CATEGORY_SOP.INPUT),e.register_node(G.OcclusionSopNode,r.CATEGORY_SOP.INPUT),e.register_node(V.PeakSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(U.PlaneSopNode,r.CATEGORY_SOP.INPUT),e.register_node(q.PointSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(H.PolywireSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(Y.RaySopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(X.ResampleSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(J.ScatterSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(K.SkinSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(W.ShadowsSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node($.SphereSopNode,r.CATEGORY_SOP.INPUT),e.register_node(Z.SwitchSopNode,r.CATEGORY_SOP.MISC),e.register_node(Q.TextSopNode,r.CATEGORY_SOP.INPUT),e.register_node(ee.TorusSopNode,r.CATEGORY_SOP.INPUT),e.register_node(te.TorusKnotSopNode,r.CATEGORY_SOP.INPUT),e.register_node(ne.TransformSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(re.TubeSopNode,r.CATEGORY_SOP.INPUT),e.register_node(oe.UvProjectSopNode,r.CATEGORY_SOP.MODIFIER)},e}();t.SopRegister=ie},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(183)),i=n(12),a=n(10),s=n(13),u=n(36),_=n(9),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.create_point=_.ParamConfig.BOOLEAN(1),t.points_count=_.ParamConfig.INTEGER(1,{range:[1,100],range_locked:[!0,!1],visible_if:{create_point:!0}}),t.position=_.ParamConfig.VECTOR3([0,0,0],{visible_if:{create_point:!0}}),t.open=_.ParamConfig.BOOLEAN(0),t.connect_to_last_point=_.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(_.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t}return r.__extends(t,e),t.type=function(){return"add"},t.displayed_input_names=function(){return["geometry to create polygons from (optional)"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(0,1)},t.prototype.cook=function(e){this._objects=[],this._create_point(),this.set_objects(this._objects)},t.prototype._create_point=function(){var e=this;if(this.pv.create_point){var t=new i.BufferGeometry,n=[];o.default(this.pv.points_count,(function(t){e.pv.position.toArray(n,3*t)})),t.setAttribute("position",new a.BufferAttribute(new Float32Array(n),3));var r=this.create_object(t,u.CoreConstant.OBJECT_TYPE.POINTS);this._objects&&this._objects.push(r)}},t}(s.TypedSopNode);t.AddSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(182)),o=n(4),i=n(6),a=n(143),s=n(297),u=n(96),_=function(){function e(e,t){this._core_geometry=e,this._index=t,this._geometry=this._core_geometry.geometry()}return Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this._points=this._points||this._get_points()},enumerable:!0,configurable:!0}),e.prototype._get_points=function(){var e,t=(null===(e=this._geometry.index)||void 0===e?void 0:e.array)||[],n=3*this._index;return[new s.CorePoint(this._core_geometry,t[n+0]),new s.CorePoint(this._core_geometry,t[n+1]),new s.CorePoint(this._core_geometry,t[n+2])]},Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions=this._positions||this._get_positions()},enumerable:!0,configurable:!0}),e.prototype._get_positions=function(){var e=this.points;return[e[0].position(),e[1].position(),e[2].position()]},Object.defineProperty(e.prototype,"triangle",{get:function(){return this._triangle=this._triangle||this._get_triangle()},enumerable:!0,configurable:!0}),e.prototype._get_triangle=function(){var e=this.positions;return new a.Triangle(e[0],e[1],e[2])},Object.defineProperty(e.prototype,"deltas",{get:function(){return this._deltas=this._deltas||this._get_deltas()},enumerable:!0,configurable:!0}),e.prototype._get_deltas=function(){return[this.positions[1].clone().sub(this.positions[0]),this.positions[2].clone().sub(this.positions[0])]},Object.defineProperty(e.prototype,"area",{get:function(){return this.triangle.getArea()},enumerable:!0,configurable:!0}),e.prototype.center=function(e){var t=this.positions;return e.x=(t[0].x+t[1].x+t[2].x)/3,e.y=(t[0].y+t[1].y+t[2].y)/3,e.z=(t[0].z+t[1].z+t[2].z)/3,e},e.prototype.random_position=function(e){var t=[u.CoreMath.rand_float(e),u.CoreMath.rand_float(6541*e)];return t[0]+t[1]>1&&(t[0]=1-t[0],t[1]=1-t[1]),this.positions[0].clone().add(this.deltas[0].clone().multiplyScalar(t[0])).add(this.deltas[1].clone().multiplyScalar(t[1]))},e.prototype.attrib_value_at_position=function(e,t){var n=new o.Vector3;this.triangle.getBarycoord(t,n);var r,i,a=n.toArray(),s=this._geometry.attributes[e].itemSize,u=this.points.map((function(t){return t.attrib_value(e)})),_=0;switch(s){case 1:i=0;for(var l=0,c=u;l<c.length;l++){i+=c[l]*a[_],_++}r=i;break;default:for(var p=0,d=u;p<d.length;p++){var f=d[p].multiplyScalar(a[_]);i?i.add(f):i=f,_++}r=i}return r},e.interpolated_value=function(e,t,n,a){var s=[t.a,t.b,t.c],u=e.getAttribute("position").array,_=s.map((function(e){return new o.Vector3(u[3*e+0],u[3*e+1],u[3*e+2])})),l=a.itemSize,c=a.array,p=[];switch(l){case 1:p=s.map((function(e){return c[e]}));break;case 2:p=s.map((function(e){return new i.Vector2(c[2*e+0],c[2*e+1])}));break;case 3:p=s.map((function(e){return new o.Vector3(c[3*e+0],c[3*e+1],c[3*e+2])}))}var d,f=s.map((function(e,t){return n.distanceTo(_[t])})),h=r.default([f[0]*f[1],f[0]*f[2],f[1]*f[2]]),m=[f[1]*f[2]/h,f[0]*f[2]/h,f[0]*f[1]/h];switch(l){case 1:d=r.default(s.map((function(e,t){return m[t]*p[t]})));break;default:d=null;for(var g=0,v=s.map((function(e,t){return p[t].multiplyScalar(m[t])}));g<v.length;g++){var y=v[g];d?d.add(y):d=y}}return d},e}();t.CoreFace=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(121),o=function(){function e(){}return e.patch=function(e){Object.assign(e,{clone:function(){return new r.InterleavedBufferAttribute(e.data.clone(),e.itemSize,e.offset,e.normalized)}})},e}();t.MonkeyPatcher=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(106),i=n(54),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.set_objects=function(e){},t.prototype.core_content_cloned=function(){if(this._content)return this._content.clone()},t.prototype.set_content=function(t){e.prototype.set_content.call(this,t)},t.prototype.first_object=function(){if(this._content)return this._content.objects()[0]},t.prototype.first_geometry=function(){var e=this.first_object();return e?e.geometry:null},t.prototype.objects_count=function(){return this._content?this._content.objects().length:0},t.prototype.objects_visible_count=function(){var e=0;return this._content&&(e=this._content.objects().filter((function(e){return e.visible})).length),e},t.prototype.objects_count_by_type=function(){var e={},t=this._content;if(this._content&&t)for(var n=0,r=t.core_objects();n<r.length;n++){var o=r[n].human_type();null==e[o]&&(e[o]=0),e[o]+=1}return e},t.prototype.objects_names_by_type=function(){var e={},t=this._content;if(this._content&&t)for(var n=0,r=t.core_objects();n<r.length;n++){var o=r[n],i=o.human_type();e[i]=e[i]||[],e[i].push(o.name())}return e},t.prototype.vertex_attribute_names=function(){var e=[],t=this.first_geometry();return t&&(e=Object.keys(t.attributes)),e},t.prototype.vertex_attribute_sizes_by_name=function(){var e={},t=this.first_geometry();return t&&Object.keys(t.attributes).forEach((function(n){var r=t.attributes[n];e[n]=r.itemSize})),e},t.prototype.vertex_attribute_types_by_name=function(){var e={},t=this.first_geometry();if(t){var n=new i.CoreGeometry(t);Object.keys(t.attributes).forEach((function(t){e[t]=n.attrib_type(t)}))}return e},t.prototype.object_attribute_names=function(){var e=[],t=this.first_object();return t&&(e=Object.keys(t.userData.attributes||{})),e},t.prototype.points_count=function(){return this._content?this._content.points_count():0},t.prototype.bounding_box=function(){return this._content.bounding_box()},t.prototype.center=function(){return this._content.center()},t.prototype.size=function(){return this._content.size()},t}(o.TypedContainer);t.GeometryContainer=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(9),a=n(17),s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(i.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"animation_copy"},t.displayed_input_names=function(){return["geometry to copy animation to","geometry to copy animation from"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE,a.InputCloneMode.NEVER])},t.prototype.cook=function(e){var t=e[0],n=e[1].objects()[0],r=t.objects()[0],o=n.animations;o?(r.animations=o.map((function(e){return e.clone()})),this.set_core_group(t)):this.states.error.set("no animation found")},t}(o.TypedSopNode);t.AnimationCopySopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=r.__importDefault(n(29)),a=n(1025),s=n(17),u=n(23),_=n(52),l=n(9),c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=l.ParamConfig.FLOAT("$T",{range:[0,10]}),t.prepare=l.ParamConfig.BUTTON(null,{callback:function(e,t){p.PARAM_CALLBACK_prepare(e,t)}}),t}return r.__extends(t,e),t}(l.NodeParamsConfig)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t._previous_time=null,t._mixer=null,t._actions_by_name={},t._values_by_param_name={},t}return r.__extends(t,e),t.type=function(){return"animation_mixer"},t.displayed_input_names=function(){return["geometry to be animated"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){this._mixer?(this._update_mixer(),this.cook_controller.end_cook()):this.create_mixer(e[0])},t.prototype.create_mixer=function(e){var t=this;this._animation_target=e.objects()[0],this._mixer=new a.AnimationMixer(this._animation_target),this._remove_spare_params(),this._actions_by_name={},this._animation_target.animations&&this._animation_target.animations.forEach((function(e,n){var r=e.name,o=t._values_by_param_name[r];null==o&&(o=0==n?1:0);var i=t.add_param(u.ParamType.FLOAT,r,o,{spare:!0});if(i){var a=t._values_by_param_name[r];a&&i.set(a)}if(t._mixer){var s=t._mixer.clipAction(e);t._actions_by_name[e.name]=s}})),this.emit(_.NodeEvent.PARAMS_UPDATED),Object.keys(this._actions_by_name).forEach((function(e){t._actions_by_name[e].play()}));var n={};this._animation_target.traverse((function(e){var t=e;t.material&&(i.default(t.material)||(n[t.material.uuid]=t.material))})),Object.keys(n).forEach((function(e){var t=n[e];t.skinning=!0,t.morphTargets=!0})),this._previous_time=null,this._update_mixer(),this._update_mixer_weights(),this.set_object(this._animation_target)},t.prototype._remove_spare_params=function(){var e=this;this._values_by_param_name={},this.params.spare_names.forEach((function(t){var n=e.params.get_float(t);n&&(e._values_by_param_name[t]=n.value,e.params.delete_param(t))}))},t.prototype._update_mixer=function(){this.pv.time!=this._previous_time?this._update_mixer_time():this._update_mixer_weights()},t.prototype._update_mixer_time=function(){var e=this.pv.time-(this._previous_time||0);this._mixer&&this._mixer.update(e),this._previous_time=this.pv.time},t.prototype._update_mixer_weights=function(){for(var e=0,t=Object.keys(this._actions_by_name);e<t.length;e++){var n=t[e],r=this._actions_by_name[n],o=this.params.get_float(n).value;null!=o&&r.setEffectiveWeight(o)}},t.PARAM_CALLBACK_prepare=function(e,t){e.prepare_animation_mixer()},t.prototype.prepare_animation_mixer=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this._mixer=null,[4,this.io.inputs.eval_required_input(0)];case 1:return e=t.sent(),this.create_mixer(e.core_content_cloned()),this.set_dirty(),[2]}}))}))},t}(o.TypedSopNode);t.AnimationMixerSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(9),a=n(17),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=i.ParamConfig.STRING(""),t.pre_add=i.ParamConfig.FLOAT(0,{range:[0,1]}),t.mult=i.ParamConfig.FLOAT(1,{range:[0,1]}),t.post_add=i.ParamConfig.FLOAT(0,{range:[0,1]}),t}return r.__extends(t,e),t}(i.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"attrib_add_mult"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){for(var t=e[0],n=0,r=t.attrib_names_matching_mask(this.pv.name);n<r.length;n++)for(var o=r[n],i=0,a=t.geometries();i<a.length;i++){var s=a[i];this._update_attrib(o,s)}this.set_core_group(t)},t.prototype._update_attrib=function(e,t){var n=t.getAttribute(e);if(n){for(var r=n.array,o=this.pv.pre_add,i=this.pv.mult,a=this.pv.post_add,s=0;s<r.length;s++){var u=r[s];r[s]=(u+o)*i+a}this.io.inputs.input_cloned(0)||(n.needsUpdate=!0)}},t}(o.TypedSopNode);t.AttribAddMultSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(9),a=n(17),s=n(10),u=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=i.ParamConfig.STRING(""),t.tnew_name=i.ParamConfig.BOOLEAN(0),t.new_name=i.ParamConfig.STRING("",{visible_if:{tnew_name:1}}),t}return r.__extends(t,e),t}(i.NodeParamsConfig)),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=u,t}return r.__extends(t,e),t.type=function(){return"attrib_copy"},t.displayed_input_names=function(){return["geometry to copy attributes to","geometry to copy attributes from"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE,a.InputCloneMode.NEVER])},t.prototype.create_params=function(){},t.prototype.cook=function(e){for(var t=e[0],n=e[1],r=0,o=n.attrib_names_matching_mask(this.pv.name);r<o.length;r++){var i=o[r];this.copy_vertex_attribute_between_core_groups(t,n,i)}return this.set_core_group(t)},t.prototype.copy_vertex_attribute_between_core_groups=function(e,t,n){var r=t.objects(),o=e.objects();if(o.length>r.length)this.states.error.set("second input does not have enough objects to copy attributes from");else for(var i=0;i<o.length;i++){var a=o[i].geometry,s=o[i].geometry;this.copy_vertex_attribute_between_geometries(a,s,n)}},t.prototype.copy_vertex_attribute_between_geometries=function(e,t,n){var r=t.getAttribute(n);if(r){var o=r.itemSize,i=t.getAttribute("position").array.length/3,a=e.getAttribute("position").array.length/3;a>i&&this.states.error.set("not enough points in second input");var u=r.array.slice(0,a*o),_=this.pv.tnew_name?this.pv.new_name:n;e.setAttribute(_,new s.Float32BufferAttribute(u,o))}else this.states.error.set("attribute '"+n+"' does not exist on second input")},t}(o.TypedSopNode);t.AttribCopySopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(178)),i=n(13),a=n(36),s=n(104),u=n(17),_=n(9),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.group=_.ParamConfig.STRING(""),t.class=_.ParamConfig.INTEGER(a.AttribClass.VERTEX,{menu:{entries:a.AttribClassMenuEntries}}),t.type=_.ParamConfig.INTEGER(a.AttribType.NUMERIC,{menu:{entries:a.AttribTypeMenuEntries}}),t.name=_.ParamConfig.STRING("new_attrib"),t.size=_.ParamConfig.INTEGER(1,{range:[1,4],range_locked:[!0,!0],visible_if:{type:a.CoreConstant.ATTRIB_TYPE.NUMERIC}}),t.value1=_.ParamConfig.FLOAT(0,{visible_if:{type:a.CoreConstant.ATTRIB_TYPE.NUMERIC,size:1},expression:{for_entities:!0}}),t.value2=_.ParamConfig.VECTOR2([0,0],{visible_if:{type:a.CoreConstant.ATTRIB_TYPE.NUMERIC,size:2},expression:{for_entities:!0}}),t.value3=_.ParamConfig.VECTOR3([0,0,0],{visible_if:{type:a.CoreConstant.ATTRIB_TYPE.NUMERIC,size:3},expression:{for_entities:!0}}),t.value4=_.ParamConfig.VECTOR4([0,0,0,0],{visible_if:{type:a.CoreConstant.ATTRIB_TYPE.NUMERIC,size:4},expression:{for_entities:!0}}),t.string=_.ParamConfig.STRING("",{visible_if:{type:a.CoreConstant.ATTRIB_TYPE.STRING},expression:{for_entities:!0}}),t}return r.__extends(t,e),t}(_.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t._x_arrays_by_geometry_uuid={},t._y_arrays_by_geometry_uuid={},t._z_arrays_by_geometry_uuid={},t._w_arrays_by_geometry_uuid={},t}return r.__extends(t,e),t.type=function(){return"attrib_create"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([u.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){var t=e[0];if(this.pv.name&&""!=o.default(this.pv.name))switch(this.pv.class){case a.AttribClass.VERTEX:this.add_point_attribute(t);break;case a.AttribClass.OBJECT:this.add_object_attribute(t)}else this.states.error.set("attribute name is not valid")},t.prototype.add_point_attribute=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o;return r.__generator(this,(function(r){switch(r.label){case 0:t=e.core_objects(),n=0,r.label=1;case 1:if(!(n<t.length))return[3,7];switch(o=t[n],this.pv.type){case a.CoreConstant.ATTRIB_TYPE.NUMERIC:return[3,2];case a.CoreConstant.ATTRIB_TYPE.STRING:return[3,4]}return[3,6];case 2:return[4,this.add_numeric_attribute_to_points(o)];case 3:return r.sent(),[3,6];case 4:return[4,this.add_string_attribute_to_points(o)];case 5:return r.sent(),[3,6];case 6:return n++,[3,1];case 7:return this.set_core_group(e),[2]}}))}))},t.prototype.add_object_attribute=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:switch(t=e.core_objects_from_group(this.pv.group),this.pv.type){case a.CoreConstant.ATTRIB_TYPE.NUMERIC:return[3,1];case a.CoreConstant.ATTRIB_TYPE.STRING:return[3,3]}return[3,5];case 1:return[4,this.add_numeric_attribute_to_object(t)];case 2:return n.sent(),[3,5];case 3:return[4,this.add_string_attribute_to_object(t)];case 4:return n.sent(),[3,5];case 5:return this.set_core_group(e),[2]}}))}))},t.prototype.add_numeric_attribute_to_points=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a,s,u,_,l,c,p,d,f,h,m,g=this;return r.__generator(this,(function(v){switch(v.label){case 0:return t=e.core_geometry(),n=e.points_from_group(this.pv.group),(o=[this.p.value1,this.p.value2,this.p.value3,this.p.value4][this.pv.size-1]).has_expression()?(t.has_attrib(this.pv.name)||t.add_numeric_attrib(this.pv.name,this.pv.size,o.value),i=t.geometry(),a=i.getAttribute(this.pv.name).array,1!=this.pv.size?[3,3]:this.p.value1.expression_controller?[4,this.p.value1.expression_controller.compute_expression_for_points(n,(function(e,t){a[e.index*g.pv.size+0]=t}))]:[3,2]):[3,9];case 1:v.sent(),v.label=2;case 2:return[3,8];case 3:s=[this.p.value2,this.p.value3,this.p.value4][this.pv.size-2],u=s.components,_=new Array(u.length),l=void 0,c=[this._x_arrays_by_geometry_uuid,this._y_arrays_by_geometry_uuid,this._z_arrays_by_geometry_uuid,this._w_arrays_by_geometry_uuid],p=function(e){var t,o,s,p;return r.__generator(this,(function(r){switch(r.label){case 0:return(l=u[e]).has_expression()&&l.expression_controller?(_[e]=d._init_array_if_required(i,c[e],n.length),[4,l.expression_controller.compute_expression_for_points(n,(function(t,n){_[e][t.index]=n}))]):[3,2];case 1:return r.sent(),[3,3];case 2:for(t=l.value,o=0,s=n;o<s.length;o++)p=s[o],a[p.index*d.pv.size+e]=t;r.label=3;case 3:return[2]}}))},d=this,m=0,v.label=4;case 4:return m<u.length?[5,p(m)]:[3,7];case 5:v.sent(),v.label=6;case 6:return m++,[3,4];case 7:for(f=0;f<_.length;f++)if(h=_[f])for(m=0;m<h.length;m++)a[m*this.pv.size+f]=h[m];v.label=8;case 8:return[3,10];case 9:e.add_numeric_vertex_attrib(this.pv.name,this.pv.size,o.value),v.label=10;case 10:return[2]}}))}))},t.prototype.add_numeric_attribute_to_object=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a,s,u,_,l,c,p,d,f,h=this;return r.__generator(this,(function(m){switch(m.label){case 0:return(t=[this.p.value1,this.p.value2,this.p.value3,this.p.value4][this.pv.size-1]).has_expression()?1!=this.pv.size?[3,3]:this.p.value1.expression_controller?[4,this.p.value1.expression_controller.compute_expression_for_objects(e,(function(e,t){e.set_attrib_value(h.pv.name,t)}))]:[3,2]:[3,9];case 1:m.sent(),m.label=2;case 2:return[3,8];case 3:for(n=[this.p.value2,this.p.value3,this.p.value4][this.pv.size-2],o=n.components,i={},a=0,s=e;a<s.length;a++)f=s[a],i[f.index]=[];u=function(t){var n,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=o[t]).has_expression()&&n.expression_controller?[4,n.expression_controller.compute_expression_for_objects(e,(function(e,n){i[e.index][t]=n}))]:[3,2];case 1:return r.sent(),[3,3];case 2:for(a=0,s=e;a<s.length;a++)u=s[a],i[u.index][t]=n.value;r.label=3;case 3:return[2]}}))},_=0,m.label=4;case 4:return _<o.length?[5,u(_)]:[3,7];case 5:m.sent(),m.label=6;case 6:return _++,[3,4];case 7:for(l=0;l<e.length;l++)f=e[l],c=i[f.index],f.set_attrib_value(this.pv.name,c);m.label=8;case 8:return[3,10];case 9:for(p=0,d=e;p<d.length;p++)(f=d[p]).set_attrib_value(this.pv.name,t.value);m.label=10;case 10:return[2]}}))}))},t.prototype.add_string_attribute_to_points=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.points_from_group(this.pv.group),n=this.p.string,o=[],n.has_expression()&&n.expression_controller?[4,n.expression_controller.compute_expression_for_points(t,(function(e,t){o[e.index]=t}))]:[3,2];case 1:return r.sent(),[3,3];case 2:o.push(n.value),r.label=3;case 3:return i=s.CoreAttribute.array_to_indexed_arrays(o),e.core_geometry().set_indexed_attribute(this.pv.name,i.values,i.indices),[2]}}))}))},t.prototype.add_string_attribute_to_object=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=this.p.string).has_expression()&&t.expression_controller?[4,t.expression_controller.compute_expression_for_objects(e,(function(e,t){e.set_attrib_value(i.pv.name,t)}))]:[3,2];case 1:return r.sent(),[3,3];case 2:for(n=0,o=e;n<o.length;n++)o[n].set_attrib_value(this.pv.name,t.value);r.label=3;case 3:return[2]}}))}))},t.prototype._init_array_if_required=function(e,t,n){var r=e.uuid,o=t[r];return o?o.length<n&&(t[r]=new Array(n)):t[r]=new Array(n),t[r]},t}(i.TypedSopNode);t.AttribCreateSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(210),a=n(54),s=n(36),u=n(17),_=n(9),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.class=_.ParamConfig.INTEGER(s.AttribClass.VERTEX,{menu:{entries:s.AttribClassMenuEntries}}),t.name=_.ParamConfig.STRING(""),t}return r.__extends(t,e),t}(_.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t}return r.__extends(t,e),t.type=function(){return"attrib_delete"},t.displayed_input_names=function(){return["geometry to delete attributes from"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([u.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){for(var t=e[0],n=0,r=t.attrib_names_matching_mask(this.pv.name);n<r.length;n++){var o=r[n];switch(this.pv.class){case s.AttribClass.VERTEX:this.delete_vertex_attribute(t,o);case s.AttribClass.OBJECT:this.delete_object_attribute(t,o)}}this.set_core_group(t)},t.prototype.delete_vertex_attribute=function(e,t){for(var n=0,r=e.objects();n<r.length;n++){r[n].traverse((function(e){var n=e;n.geometry&&new a.CoreGeometry(n.geometry).delete_attribute(t)}))}},t.prototype.delete_object_attribute=function(e,t){for(var n=function(e){var n=0;e.traverse((function(e){var r=e;new i.CoreObject(r,n).delete_attribute(t),n++}))},r=0,o=e.objects();r<o.length;r++){n(o[r])}},t}(o.TypedSopNode);t.AttribDeleteSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(4),a=r.__importDefault(n(173)),s=r.__importDefault(n(212)),u=r.__importDefault(n(47)),_=n(17),l=n(9),c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=l.ParamConfig.STRING(""),t.change_name=l.ParamConfig.BOOLEAN(!1),t.new_name=l.ParamConfig.STRING("",{visible_if:{change_name:1}}),t}return r.__extends(t,e),t}(l.NodeParamsConfig)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t}return r.__extends(t,e),t.type=function(){return"attrib_normalize"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([_.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){var t=e[0];this._normalize_attribute(t),this.set_core_group(t)},t.prototype._normalize_attribute=function(e){var t=this,n=e.points();if(0!==n.length&&""!==this.pv.name){var r,o,_=n[0].attrib_size(this.pv.name),l=n.map((function(e){return e.attrib_value(t.pv.name)})),c=[];switch(_){case 1:if(r=s.default(l),o=a.default(l),u.default(r)&&u.default(o))for(var p=0,d=l;p<d.length;p++){var f=d[p],h=o>r?(f-r)/(o-r):1;c.push(h)}break;case 3:if(r=new i.Vector3(s.default(l.map((function(e){return e.x}))),s.default(l.map((function(e){return e.y}))),s.default(l.map((function(e){return e.z})))),o=new i.Vector3(a.default(l.map((function(e){return e.x}))),a.default(l.map((function(e){return e.y}))),a.default(l.map((function(e){return e.z})))),r instanceof i.Vector3&&o instanceof i.Vector3)for(var m=0,g=l;m<g.length;m++){f=g[m],h=new i.Vector3((f.x-r.x)/(o.x-r.x),(f.y-r.y)/(o.y-r.y),(f.z-r.z)/(o.z-r.z));c.push(h)}}var v=this.pv.name;this.pv.change_name&&(v=this.pv.new_name,e.has_attrib(v)||e.add_numeric_vertex_attrib(v,_,0)),c.forEach((function(e,t){n[t].set_attrib_value(v,e)}))}},t}(o.TypedSopNode);t.AttribNormalizeSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=o.__importDefault(n(173)),a=o.__importDefault(n(212)),s=n(17),u=n(13),_=n(36),l=n(50);!function(e){e[e.MIN=0]="MIN",e[e.MAX=1]="MAX",e[e.FIRST_FOUND=3]="FIRST_FOUND"}(r=t.AttribPromoteMode||(t.AttribPromoteMode={}));var c=[{name:"min",value:r.MIN},{name:"max",value:r.MAX},{name:"first_found",value:r.FIRST_FOUND}],p=n(9),d=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.class_from=p.ParamConfig.INTEGER(_.AttribClass.VERTEX,{menu:{entries:_.AttribClassMenuEntries}}),t.class_to=p.ParamConfig.INTEGER(_.AttribClass.OBJECT,{menu:{entries:_.AttribClassMenuEntries}}),t.mode=p.ParamConfig.INTEGER(r.MIN,{menu:{entries:c}}),t.name=p.ParamConfig.STRING(""),t}return o.__extends(t,e),t}(p.NodeParamsConfig)),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=d,t._values_per_attrib_name={},t._filtered_values_per_attrib_name={},t}return o.__extends(t,e),t.type=function(){return"attrib_promote"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])},t.prototype.create_params=function(){},t.prototype.cook=function(e){this._core_group=e[0],this._values_per_attrib_name={},this._filtered_values_per_attrib_name={};for(var t=0,n=this._core_group.core_objects();t<n.length;t++){var r=n[t];this._core_object=r,this.find_values(),this.filter_values(),this.set_values()}this.set_core_group(this._core_group)},t.prototype.find_values=function(){for(var e=0,t=l.CoreString.attrib_names(this.pv.name);e<t.length;e++){var n=t[e];switch(this.pv.class_from){case _.AttribClass.VERTEX:return this.find_values_from_points(n);case _.AttribClass.OBJECT:return this.find_values_from_object(n)}}},t.prototype.find_values_from_points=function(e){if(this._core_object){var t=this._core_object.points();this._values_per_attrib_name[e]=t.map((function(t){return t.attrib_value(e)}))}},t.prototype.find_values_from_object=function(e){this._values_per_attrib_name[e]=[],this._core_object&&this._values_per_attrib_name[e].push(this._core_object.attrib_value(e))},t.prototype.filter_values=function(){for(var e=0,t=Object.keys(this._values_per_attrib_name);e<t.length;e++){var n=t[e],o=this._values_per_attrib_name[n];switch(this.pv.mode){case r.MIN:this._filtered_values_per_attrib_name[n]=a.default(o);break;case r.MAX:this._filtered_values_per_attrib_name[n]=i.default(o);break;case r.FIRST_FOUND:this._filtered_values_per_attrib_name[n]=o[0]}}},t.prototype.set_values=function(){for(var e=0,t=Object.keys(this._filtered_values_per_attrib_name);e<t.length;e++){var n=t[e],r=this._filtered_values_per_attrib_name[n];if(null!=r)switch(this.pv.class_to){case _.AttribClass.VERTEX:this.set_values_to_points(n,r);break;case _.AttribClass.OBJECT:this.set_values_to_object(n,r)}}},t.prototype.set_values_to_points=function(e,t){if(this._core_group&&this._core_object){if(!this._core_group.has_attrib(e)){this._core_group.add_numeric_vertex_attrib(e,1,t)}this._core_object.points().forEach((function(n){return n.set_attrib_value(e,t)}))}},t.prototype.set_values_to_object=function(e,t){var n;null===(n=this._core_object)||void 0===n||n.set_attrib_value(e,t)},t}(u.TypedSopNode);t.AttribPromoteSopNode=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(173)),i=r.__importDefault(n(212)),a=r.__importDefault(n(80)),s=r.__importDefault(n(95)),u=r.__importDefault(n(47)),_=n(4),l=n(13),c=n(9),p=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=c.ParamConfig.STRING(),t.ramp=c.ParamConfig.RAMP(),t.change_name=c.ParamConfig.BOOLEAN(0),t.new_name=c.ParamConfig.STRING("",{visible_if:{change_name:1}}),t}return r.__extends(t,e),t}(c.NodeParamsConfig)),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=p,t}return r.__extends(t,e),t.type=function(){return"attrib_remap"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1)},t.prototype.cook=function(e){var t=e[0];this._remap_attribute(t),this.set_core_group(t)},t.prototype._remap_attribute=function(e){var t=this,n=e.points();if(0!==n.length&&""!==this.pv.name){var r,l,c=n[0].attrib_size(this.pv.name),p=n.map((function(e){return e.attrib_value(t.pv.name)})),d=new Array(n.length);switch(c){case 1:if(this.pv.only_integer_values){var f=s.default(a.default(p)),h={};f.forEach((function(e,t){return h[e]=t})),d=p.map((function(e){return h[e]}))}else if(r=i.default(p),l=o.default(p),u.default(r)&&u.default(l))for(var m=0;m<p.length;m++){var g=p[m],v=l>r?(g-r)/(l-r):1;d[m]=v}break;case 3:if(r=new _.Vector3(i.default(p.map((function(e){return e.x}))),i.default(p.map((function(e){return e.y}))),i.default(p.map((function(e){return e.z})))),l=new _.Vector3(o.default(p.map((function(e){return e.x}))),o.default(p.map((function(e){return e.y}))),o.default(p.map((function(e){return e.z})))),r instanceof _.Vector3&&l instanceof _.Vector3)for(m=0;m<p.length;m++){g=p[m],v=new _.Vector3((g.x-r.x)/(l.x-r.x),(g.y-r.y)/(l.y-r.y),(g.z-r.z)/(l.z-r.z));d[m]=v}}var y=this.pv.name;this.pv.change_name&&(y=this.pv.new_name,e.has_attrib(y)||e.add_numeric_vertex_attrib(y,c,0)),d.forEach((function(e,t){n[t].set_attrib_value(y,e)}))}},t}(l.TypedSopNode);t.AttribRemapSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(9),a=n(36),s=n(17),u=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.class=i.ParamConfig.INTEGER(a.AttribClass.VERTEX,{menu:{entries:a.AttribClassMenuEntries}}),t.old_name=i.ParamConfig.STRING(),t.new_name=i.ParamConfig.STRING(),t}return r.__extends(t,e),t}(i.NodeParamsConfig)),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=u,t}return r.__extends(t,e),t.type=function(){return"attrib_rename"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){var t=e[0];t.rename_attrib(this.pv.old_name,this.pv.new_name,this.pv.class),this.set_core_group(t)},t}(o.TypedSopNode);t.AttribRenameSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(790),a=n(791),s=n(299),u=n(9),_=n(17),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.src_group=u.ParamConfig.STRING(),t.dest_group=u.ParamConfig.STRING(),t.name=u.ParamConfig.STRING(),t.max_samples_count=u.ParamConfig.INTEGER(1,{range:[1,10],range_locked:[!0,!1]}),t.distance_threshold=u.ParamConfig.FLOAT(1),t.blend_width=u.ParamConfig.FLOAT(0),t}return r.__extends(t,e),t}(u.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t}return r.__extends(t,e),t.type=function(){return"attrib_transfer"},t.displayed_input_names=function(){return["geometry to transfer attributes to","geometry to transfer attributes from"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([_.InputCloneMode.FROM_NODE,_.InputCloneMode.NEVER])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return this._core_group_dest=e[0],t=this._core_group_dest.points_from_group(this.pv.dest_group),this._core_group_src=e[1],this._attrib_names=this._core_group_src.attrib_names_matching_mask(this.pv.name),this._error_if_attribute_not_found_on_second_input(),this._build_octree_if_required(this._core_group_src),this._add_attribute_if_required(),[4,this._transfer_attributes(t)];case 1:return n.sent(),this.set_core_group(this._core_group_dest),[2]}}))}))},t.prototype._error_if_attribute_not_found_on_second_input=function(){for(var e=0,t=this._attrib_names;e<t.length;e++){var n=t[e];this._core_group_src.has_attrib(n)||this.states.error.set("attribute '"+n+"' not found on second input")}},t.prototype._build_octree_if_required=function(e){var t=null==this._octree_timestamp||this._octree_timestamp!==e.timestamp();if(this._prev_param_src_group!==this.pv.src_group||t){this._octree_timestamp=e.timestamp(),this._prev_param_src_group=this.pv.src_group;var n=this._core_group_src.points_from_group(this.pv.src_group);this._octree=new a.CoreOctree(this._core_group_src.bounding_box()),this._octree.set_points(n)}},t.prototype._add_attribute_if_required=function(){var e=this;this._attrib_names.forEach((function(t){if(!e._core_group_dest.has_attrib(t)){var n=e._core_group_src.attrib_size(t);e._core_group_dest.add_numeric_vertex_attrib(t,n,0)}}))},t.prototype._transfer_attributes=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,(new s.CoreIterator).start_with_array(e,this._transfer_attributes_for_point.bind(this))];case 1:return t.sent(),[2]}}))}))},t.prototype._transfer_attributes_for_point=function(e){for(var t,n=this.pv.distance_threshold+this.pv.blend_width,r=(null===(t=this._octree)||void 0===t?void 0:t.find_points(e.position(),n,this.pv.max_samples_count))||[],o=0,i=this._attrib_names;o<i.length;o++){var a=i[o];this._interpolate_points(e,r,a)}},t.prototype._interpolate_points=function(e,t,n){var r;null!=(r=i.CoreInterpolate.perform(e,t,n,this.pv.distance_threshold,this.pv.blend_width))&&e.set_attrib_value(n,r)},t}(o.TypedSopNode);t.AttribTransferSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(173)),i=r.__importDefault(n(182)),a=function(){function e(){}return e.perform=function(e,t,n,r,o){switch(t.length){case 0:return 0;case 1:return this._interpolate_with_1_point(e,t[0],n,r,o);default:return this._interpolate_with_multiple_points(e,t,n,r,o)}},e._interpolate_with_1_point=function(e,t,n,r,o){var i=e.position(),a=t.position(),s=i.distanceTo(a),u=t.attrib_value(n);return this._weighted_value_from_distance(e,u,n,s,r,o)},e._weight_from_distance=function(e,t,n){return(e-t)/n},e._weighted_value_from_distance=function(e,t,n,r,o,i){if(r<=o)return t;var a=e.attrib_value(n),s=this._weight_from_distance(r,o,i);return s*a+(1-s)*t},e._interpolate_with_multiple_points=function(e,t,n,r,i){var a=this,s=t.map((function(t){return a._interpolate_with_1_point(e,t,n,r,i)}));return o.default(s)||0},e.weights=function(e,t){switch(t.length){case 1:return 1;case 2:return this._weights_from_2(e,t);default:return t=t.slice(0,3),this._weights_from_3(e,t)}},e._weights_from_2=function(e,t){var n=t.map((function(t){return e.distanceTo(t)})),r=i.default(n);return[n[1]/r,n[0]/r]},e._weights_from_3=function(e,t){var n=t.map((function(t){return e.distanceTo(t)})),r=i.default([n[0]*n[1],n[0]*n[2],n[1]*n[2]]);return[n[1]*n[2]/r,n[0]*n[2]/r,n[0]*n[1]/r]},e}();t.CoreInterpolate=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(88),i=r.__importDefault(n(80)),a=n(792),s=function(){function e(e){this._root=new a.OctreeNode(e)}return e.prototype.set_points=function(e){this._root.set_points(e)},e.prototype.traverse=function(e){this._root.traverse(e)},e.prototype.find_points=function(e,t,n){var r=new o.Sphere(e,t),a=[];return this._root.intersects_sphere(r)&&this._root.points_in_sphere(r,a),null==n?a:(a.length>n&&(a=(a=i.default(a,(function(t){return t.position().distanceTo(e)}))).slice(0,n)),a)},e}();t.CoreOctree=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(97),i=r.__importDefault(n(74)),a=function(){function e(e,t){void 0===t&&(t=0),this._bbox=e,this._level=t,this._leaves_by_octant={},this._points_by_octant_id={},this._leaves=[],this._bounding_boxes_by_octant={},this._bounding_boxes_by_octant_prepared=!1,this._center=this._bbox.max.clone().add(this._bbox.min).multiplyScalar(.5)}return e.prototype.level=function(){return this._level},e.prototype.traverse=function(e){e(this),Object.values(this._leaves_by_octant).forEach((function(t){t.traverse(e)}))},e.prototype.intersects_sphere=function(e){return!!this._bbox&&this._bbox.intersectsSphere(e)},e.prototype.points_in_sphere=function(e,t){0==this._leaves.length?i.default(Object.values(this._points_by_octant_id)).filter((function(t){return e.containsPoint(t.position())})).forEach((function(e){t.push(e)})):this._leaves.filter((function(t){return t.intersects_sphere(e)})).forEach((function(n){return n.points_in_sphere(e,t)}))},e.prototype.bounding_box=function(){return this._bbox},e.prototype.set_points=function(e){var t=this;this._points_by_octant_id={};for(var n=0,r=e;n<r.length;n++){var o=r[n];this.add_point(o)}var i=Object.keys(this._points_by_octant_id);i.length>1&&i.forEach((function(e){t.create_leaf(e)}))},e.prototype.create_leaf=function(t){var n=new e(this._leaf_bbox(t),this._level+1);this._leaves_by_octant[t]=n,this._leaves.push(n),n.set_points(this._points_by_octant_id[t])},e.prototype.add_point=function(e){var t=this._octant_id(e.position());null==this._points_by_octant_id[t]&&(this._points_by_octant_id[t]=[]),this._points_by_octant_id[t].push(e)},e.prototype._octant_id=function(e){return""+(e.x>this._center.x?1:0)+(e.y>this._center.y?1:0)+(e.z>this._center.z?1:0)},e.prototype._leaf_bbox=function(e){return this._bounding_boxes_by_octant_prepared||(this._prepare_leaves_bboxes(),this._bounding_boxes_by_octant_prepared=!0),this._bounding_boxes_by_octant[e]},e.prototype._bbox_center=function(e,t,n){var r=this._bbox.min.clone();return e&&(r.x=this._bbox.max.x),t&&(r.y=this._bbox.max.y),n&&(r.z=this._bbox.max.z),r.clone().add(this._center).multiplyScalar(.5)},e.prototype._prepare_leaves_bboxes=function(){var e=[];e.push(this._bbox_center(0,0,0)),e.push(this._bbox_center(0,0,1)),e.push(this._bbox_center(0,1,0)),e.push(this._bbox_center(0,1,1)),e.push(this._bbox_center(1,0,0)),e.push(this._bbox_center(1,0,1)),e.push(this._bbox_center(1,1,0)),e.push(this._bbox_center(1,1,1));for(var t=this._bbox.max.clone().sub(this._bbox.min).multiplyScalar(.25),n=0,r=e;n<r.length;n++){var i=r[n],a=this._octant_id(i),s=new o.Box3(i.clone().sub(t),i.clone().add(t));this._bounding_boxes_by_octant[a]=s}},e}();t.OctreeNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(12),i=n(10),a=r.__importDefault(n(86)),s=n(13),u=n(36),_=n(9),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.step_size=_.ParamConfig.FLOAT(.1),t}return r.__extends(t,e),t}(_.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t}return r.__extends(t,e),t.type=function(){return"bbox_scatter"},t.displayed_input_names=function(){return["geometry to create points from"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1)},t.prototype.cook=function(e){var t=e[0],n=this.pv.step_size,r=t.bounding_box(),s={x:a.default(r.min.x,r.max.x,n),y:a.default(r.min.y,r.max.y,n),z:a.default(r.min.z,r.max.z,n)},_=[];s.x.forEach((function(e){s.y.forEach((function(t){s.z.forEach((function(n){_.push(e),_.push(t),_.push(n)}))}))}));var l=new o.BufferGeometry;l.setAttribute("position",new i.BufferAttribute(new Float32Array(_),3)),this.set_geometry(l,u.CoreConstant.OBJECT_TYPE.POINTS)},t}(s.TypedSopNode);t.BboxScatterSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(9),a=n(17),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attrib_name=i.ParamConfig.STRING(),t.blend=i.ParamConfig.FLOAT(.5,{range:[0,1],range_locked:[!0,!0]}),t}return r.__extends(t,e),t}(i.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"blend"},t.displayed_input_names=function(){return["geometry to blend from","geometry to blend to"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE,a.InputCloneMode.NEVER])},t.prototype.cook=function(e){for(var t,n,r=e[0],o=e[1],i=r.objects(),a=o.objects(),s=0;s<i.length;s++)t=i[s],n=a[s],this.blend(t,n,this.pv.blend);this.set_core_group(r)},t.prototype.blend=function(e,t,n){var r=e.geometry,o=t.geometry;if(null!=r&&null!=o){var i=r.getAttribute(this.pv.attrib_name),a=o.getAttribute(this.pv.attrib_name);if(null!=i&&null!=a){for(var s,u,_=i.array,l=a.array,c=0;c<_.length;c++)s=_[c],null!=(u=l[c])&&(_[c]=(1-n)*s+n*u);r.computeVertexNormals()}}},t}(o.TypedSopNode);t.BlendSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(83),a=n(216),s=n(17),u=n(9),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.size=u.ParamConfig.FLOAT(1),t.divisions=u.ParamConfig.FLOAT(1,{range:[1,10],range_locked:[!0,!1]}),t.center=u.ParamConfig.VECTOR3([0,0,0]),t}return r.__extends(t,e),t}(u.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t._core_transform=new i.CoreTransform,t}return r.__extends(t,e),t.type=function(){return"box"},t.displayed_input_names=function(){return["geometry to create bounding box from (optional)"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(0,1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.NEVER])},t.prototype.cook=function(e){var t=e[0];t?this._cook_with_input(t):this._cook_without_input()},t.prototype._cook_without_input=function(){var e=this.pv.divisions,t=this.pv.size,n=new a.BoxBufferGeometry(t,t,t,e,e,e);n.translate(this.pv.center.x,this.pv.center.y,this.pv.center.z),n.computeVertexNormals(),this.set_geometry(n)},t.prototype._cook_with_input=function(e){var t=this.pv.divisions,n=e.bounding_box(),r=n.max.clone().sub(n.min),o=n.max.clone().add(n.min).multiplyScalar(.5),i=new a.BoxBufferGeometry(r.x,r.y,r.z,t,t,t),s=this._core_transform.translation_matrix(o);i.applyMatrix(s),this.set_geometry(i)},t}(o.TypedSopNode);t.BoxSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i=n(305),a=n(13),s=n(306),u=n(36),_=n(83),l=new o.Vector3(0,0,1),c=n(9),p=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.radius=c.ParamConfig.FLOAT(1),t.segments=c.ParamConfig.INTEGER(12,{range:[1,50],range_locked:[!0,!1]}),t.open=c.ParamConfig.BOOLEAN(1),t.arc_angle=c.ParamConfig.FLOAT(360,{range:[0,360],range_locked:[!1,!1],visible_if:{open:1}}),t.direction=c.ParamConfig.VECTOR3([0,1,0]),t}return r.__extends(t,e),t}(c.NodeParamsConfig)),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=p,t._core_transform=new _.CoreTransform,t}return r.__extends(t,e),t.type=function(){return"circle"},t.prototype.initialize_node=function(){},t.prototype.cook=function(){this.pv.open?this._create_circle():this._create_disk()},t.prototype._create_circle=function(){var e=s.CoreGeometryUtilCircle.create(this.pv.radius,this.pv.segments,this.pv.arc_angle);this._core_transform.rotate_geometry(e,l,this.pv.direction),this.set_geometry(e,u.ObjectType.LINE_SEGMENTS)},t.prototype._create_disk=function(){var e=new i.CircleBufferGeometry(this.pv.radius,this.pv.segments);this._core_transform.rotate_geometry(e,l,this.pv.direction),this.set_geometry(e)},t}(a.TypedSopNode);t.CircleSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(14),i=n(798),a=n(13),s=n(17),u=new o.Color(1,1,1),_=n(9),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from_attribute=_.ParamConfig.BOOLEAN(0),t.attrib_name=_.ParamConfig.STRING("",{visible_if:{from_attribute:1}}),t.color=_.ParamConfig.COLOR([1,1,1],{visible_if:{from_attribute:0},expression:{for_entities:!0}}),t.as_hsv=_.ParamConfig.BOOLEAN(0,{visible_if:{from_attribute:0}}),t}return r.__extends(t,e),t}(_.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t._r_arrays_by_geometry_uuid={},t._g_arrays_by_geometry_uuid={},t._b_arrays_by_geometry_uuid={},t}return r.__extends(t,e),t.type=function(){return"color"},t.displayed_input_names=function(){return["geometry to update color of"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a,s,u,_;return r.__generator(this,(function(r){switch(r.label){case 0:t=e[0],n=t.core_objects(),o=0,i=n,r.label=1;case 1:return o<i.length?(a=i[o],this.pv.from_attribute?(this._set_from_attribute(a),[3,5]):[3,2]):[3,6];case 2:return this.p.color.has_expression()?[4,this._eval_expressions(a)]:[3,4];case 3:return r.sent(),[3,5];case 4:this._eval_simple_values(a),r.label=5;case 5:return o++,[3,1];case 6:if(!this.io.inputs.input_cloned(0))for(s=t.geometries(),u=0,_=s;u<_.length;u++)_[u].getAttribute("color").needsUpdate=!0;return this.set_core_group(t),[2]}}))}))},t.prototype._set_from_attribute=function(e){var t=e.core_geometry();this._create_init_color(t,u);var n=t.points(),r=t.attrib_size(this.pv.attrib_name),o=t.geometry(),i=o.getAttribute(this.pv.attrib_name).array,a=o.getAttribute("color").array;switch(r){case 1:for(var s=0;s<n.length;s++){a[(l=3*s)+0]=i[s],a[l+1]=1-i[s],a[l+2]=0}break;case 2:for(s=0;s<n.length;s++){var _=2*s;a[(l=3*s)+0]=i[_+0],a[l+1]=i[_+1],a[l+2]=0}break;case 3:for(s=0;s<i.length;s++)a[s]=i[s];break;case 4:for(s=0;s<n.length;s++){var l;_=4*s;a[(l=3*s)+0]=i[_+0],a[l+1]=i[_+1],a[l+2]=i[_+2]}}},t.prototype._create_init_color=function(e,t){e.has_attrib("color")||e.add_numeric_attrib("color",3,u)},t.prototype._eval_simple_values=function(e){var t,n=e.core_geometry();this._create_init_color(n,u),this.pv.as_hsv?(t=new o.Color,i.CoreColor.set_hsv(this.pv.color.r,this.pv.color.g,this.pv.color.b,t)):t=this.pv.color,n.add_numeric_attrib("color",3,t)},t.prototype._eval_expressions=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,a,s,_,l,c,p,d,f,h,m,g,v;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.points(),n=e.object(),a=e.core_geometry(),this._create_init_color(a,u),(s=n.geometry)?(_=s.getAttribute("color").array,[4,this._update_from_param(s,_,t,0)]):[3,4];case 1:return l=r.sent(),[4,this._update_from_param(s,_,t,1)];case 2:return c=r.sent(),[4,this._update_from_param(s,_,t,2)];case 3:if(p=r.sent(),l&&this._commit_tmp_values(l,_,0),c&&this._commit_tmp_values(c,_,1),p&&this._commit_tmp_values(p,_,2),this.pv.as_hsv)for(d=new o.Color,f=new o.Color,h=void 0,m=0,g=t;m<g.length;m++)v=g[m],h=3*v.index,d.fromArray(_,h),i.CoreColor.set_hsv(d.r,d.g,d.b,f),f.toArray(_,h);r.label=4;case 4:return[2]}}))}))},t.prototype._update_from_param=function(e,t,n,o){return r.__awaiter(this,void 0,void 0,(function(){var i,a,s,u,_,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:return i=this.p.color.components[o],a=[this.pv.color.r,this.pv.color.g,this.pv.color.b][o],s=[this._r_arrays_by_geometry_uuid,this._g_arrays_by_geometry_uuid,this._b_arrays_by_geometry_uuid][o],i.has_expression()&&i.expression_controller?(u=this._init_array_if_required(e,s,n.length),[4,i.expression_controller.compute_expression_for_points(n,(function(e,t){u[e.index]=t}))]):[3,2];case 1:return r.sent(),[3,3];case 2:for(_=0,l=n;_<l.length;_++)c=l[_],t[3*c.index+o]=a;r.label=3;case 3:return[2,u]}}))}))},t.prototype._init_array_if_required=function(e,t,n){var r=e.uuid,o=t[r];return o?o.length<n&&(t[r]=new Array(n)):t[r]=new Array(n),t[r]},t.prototype._commit_tmp_values=function(e,t,n){for(var r=0;r<e.length;r++)t[3*r+n]=e[r]},t}(a.TypedSopNode);t.ColorSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),o=function(){function e(){}return e.set_hsv=function(e,t,n,o){e=r._Math.euclideanModulo(e,1),t=r._Math.clamp(t,0,1),n=r._Math.clamp(n,0,1),o.setHSL(e,t*n/((e=(2-t)*n)<1?e:2-e),.5*e)},e}();t.CoreColor=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(85)),i=n(13),a=n(210),s=n(800),u=n(50),_=n(801),l=n(9),c=n(17),p=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.count=l.ParamConfig.INTEGER(1,{range:[1,20],range_locked:[!0,!1]}),t.transform_only=l.ParamConfig.BOOLEAN(0),t.copy_attributes=l.ParamConfig.BOOLEAN(0),t.attributes_to_copy=l.ParamConfig.STRING("",{visible_if:{copy_attributes:!0}}),t.use_copy_expr=l.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(l.NodeParamsConfig)),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=p,t._attribute_names_to_copy=[],t._objects=[],t}return r.__extends(t,e),t.type=function(){return"copy"},t.displayed_input_names=function(){return["geometry to be copied","points to copy to"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1,2),this.io.inputs.init_inputs_clonable_state([c.InputCloneMode.ALWAYS,c.InputCloneMode.NEVER])},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.container_controller.request_input_container(0)];case 1:return null==(t=r.sent())||null==(e=t.core_content())?[3,8]:this.io.inputs.has_input(1)?(n=void 0,[4,this.container_controller.request_input_container(1)]):[3,6];case 2:return null==(o=r.sent())||null==(n=o.core_content())?[3,4]:[4,this.cook_with_template(e,n)];case 3:return r.sent(),[3,5];case 4:this.states.error.set("second input required"),r.label=5;case 5:return[3,7];case 6:this.cook_without_template(e),r.label=7;case 7:return[3,9];case 8:this.states.error.set("first input required"),r.label=9;case 9:return[2]}}))}))},t.prototype.cook_with_template=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:return this._objects=[],n=t.points(),o=new s.CoreInstancer(t),i=o.matrices(),this._attribute_names_to_copy=u.CoreString.attrib_names(this.pv.attributes_to_copy).filter((function(e){return t.has_attrib(e)})),[4,this._copy_moved_objects_on_template_points(e,i,n)];case 1:return r.sent(),this.set_objects(this._objects),[2]}}))}))},t.prototype._copy_moved_objects_on_template_points=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var o;return r.__generator(this,(function(r){switch(r.label){case 0:o=0,r.label=1;case 1:return o<n.length?[4,this._copy_moved_object_on_template_point(e,t,n,o)]:[3,4];case 2:r.sent(),r.label=3;case 3:return o++,[3,1];case 4:return[2]}}))}))},t.prototype._copy_moved_object_on_template_point=function(e,t,n,o){var i=this;return new Promise((function(a,s){return r.__awaiter(i,void 0,void 0,(function(){var i,s,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:return i=t[o],s=n[o],this.stamp_node.set_point(s),[4,this._get_moved_objects_for_template_point(e,o)];case 1:return r.sent().forEach((function(e){return u.pv.copy_attributes&&u._copy_attributes_from_template(e,s),u.pv.transform_only?e.applyMatrix(i):e.geometry.applyMatrix(i),u._objects.push(e)})),[2,a()]}}))}))}))},t.prototype._get_moved_objects_for_template_point=function(e,t){var n=this;return new Promise((function(i,a){return r.__awaiter(n,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._stamp_instance_group_if_required(e)];case 1:return r.sent()?(n=this.pv.transform_only?o.default([e.objects()[t]]):e.clone().objects(),i(n)):i([]),[2]}}))}))}))},t.prototype._stamp_instance_group_if_required=function(e){var t=this;return new Promise((function(n,o){return r.__awaiter(t,void 0,void 0,(function(){var t,o;return r.__generator(this,(function(r){switch(r.label){case 0:return this.pv.use_copy_expr?[4,this.container_controller.request_input_container(0)]:[3,2];case 1:return t=r.sent(),o=void 0,t&&null!=(o=t.core_content())?n(o):(this.states.error.set("input failed for index "+this.stamp_value()),n()),[3,3];case 2:n(e),r.label=3;case 3:return[2]}}))}))}))},t.prototype._copy_moved_objects_for_each_instance=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:t=0,n.label=1;case 1:return t<this.pv.count?[4,this._copy_moved_objects_for_instance(e,t)]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},t.prototype._copy_moved_objects_for_instance=function(e,t){var n=this;return new Promise((function(o,i){return r.__awaiter(n,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.stamp_node.set_global_index(t),[4,this._stamp_instance_group_if_required(e)];case 1:return(n=r.sent())&&n.objects().forEach((function(e){var t=a.CoreObject.clone(e);i._objects.push(t)})),o(),[2]}}))}))}))},t.prototype.cook_without_template=function(e){var t=this;this._objects=[],this._copy_moved_objects_for_each_instance(e).then((function(){t.set_objects(t._objects)}))},t.prototype._copy_attributes_from_template=function(e,t){this._attribute_names_to_copy.forEach((function(n,r){var o=t.attrib_value(n);new a.CoreObject(e,r).add_attribute(n,o)}))},t.prototype.stamp_value=function(e){return this.stamp_node.value(e)},Object.defineProperty(t.prototype,"stamp_node",{get:function(){return this._stamp_node=this._stamp_node||this.create_stamp_node()},enumerable:!0,configurable:!0}),t.prototype.create_stamp_node=function(){var e=new _.CopyStamp(this.scene);return this.dirty_controller.set_forbidden_trigger_nodes([e]),e},t}(i.TypedSopNode);t.CopySopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(47)),o=n(4),i=n(6),a=n(64),s=n(27),u=n(375),_=n(312),l=n(54),c={SCALE:new o.Vector3(1,1,1),PSCALE:1,EYE:new o.Vector3(0,0,0),UP:new o.Vector3(0,1,0)},p=new o.Vector3(1,1,1),d=new i.Vector2(0,0),f=function(){function e(e){this._group_wrapper=e,this._matrices={},this._is_pscale_present=this._group_wrapper.has_attrib("pscale"),this._is_scale_present=this._group_wrapper.has_attrib("scale"),this._is_normal_present=this._group_wrapper.has_attrib("normal"),this._is_up_present=this._group_wrapper.has_attrib("up"),this._do_rotate_matrices=this._is_normal_present}return e.prototype.matrices=function(){var e=this;return this._matrices={},this._matrices.translate=new s.Matrix4,this._matrices.rotate=new s.Matrix4,this._matrices.scale=new s.Matrix4,this._group_wrapper.points().map((function(t){return e._matrix_from_point(t)}))},e.prototype._matrix_from_point=function(e){var t=e.position(),n=this._is_scale_present?e.attrib_value("scale"):c.SCALE,r=this._is_pscale_present?e.attrib_value("pscale"):c.PSCALE;n=n.clone().multiplyScalar(r);var o=new s.Matrix4;o.identity();var i=this._matrices.scale;i.makeScale(n.x,n.y,n.z);var a=this._matrices.translate;if(a.makeTranslation(t.x,t.y,t.z),o.multiply(a),this._do_rotate_matrices){var u=this._matrices.rotate,_=c.EYE,l=e.attrib_value("normal").multiplyScalar(-1),p=this._is_up_present?e.attrib_value("up"):c.UP;p.normalize(),u.lookAt(_,l,p),o.multiply(u)}return o.multiply(i),o},e.create_instance_buffer_geo=function(t,n,i){var s=n.points(),c=new u.InstancedBufferGeometry;c.copy(t);var f=s.length,h=new Float32Array(3*f),m=new Float32Array(3*f),g=new Float32Array(3*f),v=new Float32Array(4*f),y=n.has_attrib("color"),b=new o.Vector3(0,0,0),w=new a.Quaternion,x=new o.Vector3(1,1,1),C=new e(n).matrices();s.forEach((function(e,t){var n=3*t,r=4*t;C[t].decompose(b,w,x),b.toArray(h,n),w.toArray(v,r),x.toArray(g,n),(y?e.attrib_value("color"):p).toArray(m,n)}));var P=n.has_attrib("uv");if(P){var E=new Float32Array(2*f);s.forEach((function(e,t){var n=2*t;(P?e.attrib_value("uv"):d).toArray(E,n)})),c.setAttribute("instanceUv",new _.InstancedBufferAttribute(E,2))}return c.setAttribute("instancePosition",new _.InstancedBufferAttribute(h,3)),c.setAttribute("instanceScale",new _.InstancedBufferAttribute(g,3)),c.setAttribute("instanceOrientation",new _.InstancedBufferAttribute(v,4)),c.setAttribute("instanceColor",new _.InstancedBufferAttribute(m,3)),n.attrib_names_matching_mask(i).forEach((function(e){var t=n.attrib_size(e),o=new Float32Array(f*t);s.forEach((function(n,i){var a=n.attrib_value(e);r.default(a)?o[i]=a:a.toArray(o,i*t)})),c.setAttribute(e,new _.InstancedBufferAttribute(o,t))})),new l.CoreGeometry(c).mark_as_instance(),c},e}();t.CoreInstancer=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t){var n=e.call(this,t,"CopyStamp")||this;return n._global_index=0,n}return r.__extends(t,e),t.prototype.set_point=function(e){this._point=e,this.set_dirty(),this.remove_dirty_state()},t.prototype.set_global_index=function(e){this._global_index=e,this.set_dirty(),this.remove_dirty_state()},t.prototype.value=function(e){return this._point?e?this._point.attrib_value(e):this._point.index:this._global_index},t}(n(57).CoreGraphNode);t.CopyStamp=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(307),a=JSON.stringify([{value:-40},{value:-30},{value:-20},{value:-10},{value:0},{value:10},{value:20},{value:30},{value:40},{value:50},{value:60},{value:70},{value:80}]),s=n(9),u=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=s.ParamConfig.STRING(a),t}return r.__extends(t,e),t}(s.NodeParamsConfig)),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=u,t}return r.__extends(t,e),t.type=function(){return"data"},t.prototype.cook=function(){var e=null;try{e=JSON.parse(this.pv.data)}catch(e){this.states.error.set("could not parse json")}if(e){var t=new i.JsonDataLoader;t.set_json(e);var n=t.create_object();this.set_object(n)}else this.cook_controller.end_cook()},t}(o.TypedSopNode);t.DataSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(29)),i=r.__importDefault(n(51)),a=n(36),s=function(){function e(e,t){this._size=e,this._type=t}return e.prototype.size=function(){return this._size},e.prototype.type=function(){return this._type},e.from_value=function(e){var t=i.default(e)?a.CoreConstant.ATTRIB_TYPE.STRING:a.CoreConstant.ATTRIB_TYPE.NUMERIC;return new this(o.default(e)?e.length:1,t)},e}();t.CoreAttributeData=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(307),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url=a.ParamConfig.STRING("/examples/sop/data_url/basic.json"),t.json_data_keys_prefix=a.ParamConfig.STRING(""),t.skip_entries=a.ParamConfig.STRING(""),t.convert=a.ParamConfig.BOOLEAN(0),t.convert_to_numeric=a.ParamConfig.STRING("",{visible_if:{convert:1}}),t.reload=a.ParamConfig.BUTTON(null,{callback:function(e,t){u.PARAM_CALLBACK_reload(e,t)}}),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"data_url"},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return new i.JsonDataLoader({data_keys_prefix:this.pv.json_data_keys_prefix,skip_entries:this.pv.skip_entries,do_convert:this.pv.convert,convert_to_numeric:this.pv.convert_to_numeric}).load(this.pv.url,this._on_load.bind(this),void 0,this._on_error.bind(this)),[2]}))}))},t.prototype._on_load=function(e){this.set_objects([e])},t.prototype._on_error=function(e){this.states.error.set("could not load geometry from "+this.pv.url+" ("+e+")"),this.cook_controller.end_cook()},t.PARAM_CALLBACK_reload=function(e,t){e.param_callback_reload()},t.prototype.param_callback_reload=function(){this.p.url.set_dirty()},t}(o.TypedSopNode);t.DataUrlSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(9),a=n(17),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=i.ParamConfig.INTEGER(1e3),t}return r.__extends(t,e),t}(i.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"delay"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.ALWAYS])},t.prototype.cook=function(e){var t=this,n=e[0];setTimeout((function(){t.set_core_group(n)}),this.pv.duration)},t}(o.TypedSopNode);t.DelaySopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(97),a=o.__importDefault(n(51)),s=o.__importDefault(n(196)),u=n(13),_=n(50),l=n(36),c=n(54),p=n(17);!function(e){e[e["=="]=0]="==",e[e["<"]=1]="<",e[e["<="]=2]="<=",e[e[">="]=3]=">=",e[e[">"]=4]=">",e[e["!="]=5]="!="}(r||(r={}));var d=[{name:"==",value:r["=="]},{name:"<",value:r["<"]},{name:"<=",value:r["<="]},{name:">=",value:r[">="]},{name:">",value:r[">"]},{name:"!=",value:r["!="]}],f=n(9),h=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.class=f.ParamConfig.INTEGER(l.AttribClass.VERTEX,{menu:{entries:l.AttribClassMenuEntries}}),t.invert=f.ParamConfig.BOOLEAN(0),t.hide_objects=f.ParamConfig.BOOLEAN(0),t.by_object_type=f.ParamConfig.BOOLEAN(0),t.object_type=f.ParamConfig.INTEGER(l.ObjectTypes.indexOf(l.ObjectType.MESH),{menu:{entries:l.ObjectTypeMenuEntries},visible_if:{by_object_type:!0}}),t.by_expression=f.ParamConfig.BOOLEAN(0),t.expression=f.ParamConfig.BOOLEAN("@ptnum==0",{visible_if:{by_expression:!0},expression:{for_entities:!0}}),t.by_attrib=f.ParamConfig.BOOLEAN(0),t.attrib_name=f.ParamConfig.STRING("",{visible_if:{by_attrib:!0}}),t.attrib_string=f.ParamConfig.STRING("",{visible_if:{by_attrib:!0}}),t.attrib_numeric=f.ParamConfig.VECTOR4([0,0,0,0],{visible_if:{by_attrib:!0}}),t.attrib_comparison_operator=f.ParamConfig.INTEGER(r["=="],{menu:{entries:d},visible_if:{by_attrib:!0}}),t.by_bbox=f.ParamConfig.BOOLEAN(0),t.bbox_size=f.ParamConfig.VECTOR3([1,1,1],{visible_if:{by_bbox:!0}}),t.bbox_center=f.ParamConfig.VECTOR3([0,0,0],{visible_if:{by_bbox:!0}}),t.by_visible=f.ParamConfig.BOOLEAN(0),t.keep_points=f.ParamConfig.BOOLEAN(1,{visible_if:{class:l.AttribClass.OBJECT}}),t}return o.__extends(t,e),t}(f.NodeParamsConfig)),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=h,t._marked_for_deletion_per_object_index=new Map,t}return o.__extends(t,e),t.type=function(){return"delete"},t.displayed_input_names=function(){return["geometry to delete from"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([p.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:switch(t=e[0],this._bbox_cache=void 0,this.pv.class){case l.AttribClass.VERTEX:return[3,1];case l.AttribClass.OBJECT:return[3,3]}return[3,5];case 1:return[4,this._eval_for_points(t)];case 2:return n.sent(),[3,5];case 3:return[4,this._eval_for_objects(t)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},t.prototype._eval_for_objects=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a,s,u,_,l,c,p,d=this;return o.__generator(this,(function(o){switch(o.label){case 0:for(t=[],n=e.core_objects(),this._marked_for_deletion_per_object_index=new Map,r=0,i=n;r<i.length;r++)a=i[r],this._marked_for_deletion_per_object_index.set(a.index,!1);return this.pv.by_expression?[4,this._eval_expressions_for_objects(n)]:[3,2];case 1:o.sent(),o.label=2;case 2:for(this.pv.by_object_type&&this._eval_type_for_objects(n),this.pv.by_attrib&&""!==this.pv.attrib_name&&this._eval_attrib_for_objects(n),this.pv.invert&&this._marked_for_deletion_per_object_index.forEach((function(e,t){d._marked_for_deletion_per_object_index.set(t,!e)})),_=[],this._marked_for_deletion_per_object_index.forEach((function(e,r){s=n[r],u=s.object(),d.pv.hide_objects?(t.push(u),e&&(u.visible=!1)):(e||t.push(u),e&&_.push(d._point_object(s)))})),l=0,c=_;l<c.length;l++)p=c[l],t.push(p);return this.set_objects(t),[2]}}))}))},t.prototype._eval_for_points=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a,s,u;return o.__generator(this,(function(o){switch(o.label){case 0:t=e.core_objects(),r=0,o.label=1;case 1:return r<t.length?(n=t[r],(i=n.core_geometry())?(a=i.points_from_geometry(),s=a.length,this.pv.by_expression?[4,this._eval_expressions_for_points(a)]:[3,3]):[3,4]):[3,5];case 2:a=o.sent(),o.label=3;case 3:this.pv.by_attrib&&""!==this.pv.attrib_name&&(a=this._eval_attrib_for_points(a)),this.pv.by_bbox&&(a=this._eval_bbox_for_points(a)),a.length!=s&&(u=n.object(),i.geometry().dispose(),a.length>0?u.geometry=c.CoreGeometry.geometry_from_points(a,u.constructor):null!=u.parent&&u.parent.remove(u)),o.label=4;case 4:return r++,[3,1];case 5:return this.set_core_group(e),[2]}}))}))},t.prototype._eval_expressions_for_points=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a,s=this;return o.__generator(this,(function(o){switch(o.label){case 0:return t=[],n=this.p.expression,this.p.expression.has_expression()&&n.expression_controller?[4,n.expression_controller.compute_expression_for_points(e,(function(e,n){var r=!n;s.pv.invert&&(r=!r),r&&t.push(e)}))]:[3,2];case 1:return o.sent(),[3,3];case 2:for(r=this.pv.expression,i=!r,this.pv.invert&&(i=!i),a=0;a<e.length;a++)i&&t.push(e[a]);o.label=3;case 3:return console.log(t),[2,t]}}))}))},t.prototype._eval_expressions_for_objects=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a=this;return o.__generator(this,(function(o){switch(o.label){case 0:return(t=this.p.expression).has_expression()&&t.expression_controller?[4,t.expression_controller.compute_expression_for_objects(e,(function(e,t){a._marked_for_deletion_per_object_index.get(e.index)||a._marked_for_deletion_per_object_index.set(e.index,t)}))]:[3,2];case 1:return o.sent(),[3,3];case 2:for(n=0,r=e;n<r.length;n++)i=r[n],this._marked_for_deletion_per_object_index.set(i.index,t.value);o.label=3;case 3:return[2]}}))}))},t.prototype._eval_attrib_for_points=function(e){var t=this,n=[];if(e.length>0){var r=e[0].attrib_value(this.pv.attrib_name);(a.default(r)?_.CoreString.attrib_names(this.pv.attrib_string):[this.pv.attrib_numeric.x]).forEach((function(r){return e.forEach((function(e){var o=e.attrib_value(t.pv.attrib_name),i=!t._comparison(o,r);if(t.pv.invert&&(i=!i),i)return n.push(e)}))}))}return n},t.prototype._comparison=function(e,t){switch(this.pv.attrib_ComparisonOperator){case r["=="]:return e===t;case r["<="]:return e<=t;case r["<"]:return e<t;case r[">"]:return e>t;case r[">="]:return e>=t;case r["!="]:return e!==t}},t.prototype._eval_type_for_objects=function(e){for(var t=l.ObjectTypes[this.pv.object_type],n=0,r=e;n<r.length;n++){var o=r[n];if(!this._marked_for_deletion_per_object_index.get(o.index))o.object().constructor.name===t&&this._marked_for_deletion_per_object_index.set(o.index,!0)}},t.prototype._eval_attrib_for_objects=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(!this._marked_for_deletion_per_object_index.get(r.index)){var o=r.attrib_value(this.pv.attrib_name);o===(a.default(o)?this.pv.attrib_string:this.pv.attrib_float)&&this._marked_for_deletion_per_object_index.set(r.index,!0)}}},t.prototype._eval_bbox_for_points=function(e){var t=this,n=[];return s.default(e,(function(e,r){var o=t._bbox.containsPoint(e.position());if(t.pv.invert?o:!o)return n.push(e)})),n},Object.defineProperty(t.prototype,"_bbox",{get:function(){return null!=this._bbox_cache?this._bbox_cache:this._bbox_cache=new i.Box3(this.pv.bbox_center.clone().sub(this.pv.bbox_size.clone().multiplyScalar(.5)),this.pv.bbox_center.clone().add(this.pv.bbox_size.clone().multiplyScalar(.5)))},enumerable:!0,configurable:!0}),t.prototype._point_object=function(e){var t=e.points(),n=c.CoreGeometry.geometry_from_points(t,e.object().constructor);return this.create_object(n,l.ObjectType.POINTS)},t}(u.TypedSopNode);t.DeleteSopNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i=n(10),a=r.__importDefault(n(86)),s=r.__importDefault(n(183)),u=r.__importDefault(n(349)),_=n(13),l=n(17),c=n(9),p=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.make_faces_unique=c.ParamConfig.BOOLEAN(0),t.add_face_center_attribute=c.ParamConfig.BOOLEAN(0,{visible_if:{make_faces_unique:1}}),t.add_face_id=c.ParamConfig.BOOLEAN(0,{visible_if:{make_faces_unique:1}}),t.transform=c.ParamConfig.BOOLEAN(0,{visible_if:{make_faces_unique:1}}),t.scale=c.ParamConfig.FLOAT(1,{visible_if:{make_faces_unique:1,transform:1}}),t}return r.__extends(t,e),t}(c.NodeParamsConfig)),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=p,t}return r.__extends(t,e),t.type=function(){return"face"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([l.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){var t=e[0];this.pv.make_faces_unique&&(this._make_faces_unique(t),this.pv.add_face_center_attribute&&this._add_face_center_attribute(t),this.pv.add_face_id&&this._add_face_id(t),this.pv.transform&&this._transform_faces(t)),this.set_core_group(t)},t.prototype._make_faces_unique=function(e){for(var t,n=0,r=e.objects();n<r.length;n++){var o=r[n];if(o.isMesh){for(var _=o.geometry,l=u.default((null===(t=_.index)||void 0===t?void 0:t.array)||[],3),c=3*l.length,p=function(e){var t=_.attributes[e],n=t.itemSize,r=new Float32Array(c*n),o=0;l.forEach((function(e){e.forEach((function(e){s.default(n,(function(i){var a=t.array[e*n+i];r[o]=a,o+=1}))}))})),_.setAttribute(e,new i.BufferAttribute(r,n))},d=0,f=Object.keys(_.attributes);d<f.length;d++){p(f[d])}var h=a.default(c);_.setIndex(h)}}},t.prototype._add_face_center_attribute=function(e){var t,n,r,i=new o.Vector3;e.core_objects().forEach((function(e){var o=e.object(),a=e.core_geometry();if(o.isMesh){t=a.faces(),a.has_attrib("face_center")||a.add_numeric_attrib("face_center",3,-1);for(var s=0;s<t.length;s++){(n=t[s]).center(i),r=n.points;for(var u=0;u<r.length;u++)r[u].set_attrib_value("face_center",i)}}}))},t.prototype._add_face_id=function(e){e.core_objects().forEach((function(e){var t=e.object(),n=e.core_geometry();if(t.isMesh){var r=n.faces();n.has_attrib("face_id")||n.add_numeric_attrib("face_id",1,-1);for(var o=0;o<r.length;o++)for(var i=r[o].points,a=0;a<i.length;a++){i[a].set_attrib_value("face_id",o)}}}))},t.prototype._transform_faces=function(e){var t,n,r,i,a=new o.Vector3,s=new o.Vector3,u=this.pv.scale;e.core_objects().forEach((function(e){var o=e.object(),_=e.core_geometry();if(o.isMesh){t=_.faces(),_.has_attrib("position")||_.add_numeric_attrib("position",3,-1);for(var l=0;l<t.length;l++){(n=t[l]).center(a),r=n.points;for(var c=0;c<r.length;c++){var p=(i=r[c]).position();s.x=p.x*u+a.x*(1-u),s.y=p.y*u+a.y*(1-u),s.z=p.z*u+a.z*(1-u),i.set_attrib_value("position",s)}}}}))},t}(_.TypedSopNode);t.FaceSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(74)),i=n(13),a=n(809),s=n(9),u=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url=s.ParamConfig.STRING("",{desktop_browse:{file_type:"geometry"},always_reference_asset:!0}),t.reload=s.ParamConfig.BUTTON(null,{callback:function(e,t){_.PARAM_CALLBACK_reload(e)}}),t}return r.__extends(t,e),t}(s.NodeParamsConfig)),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=u,t}return r.__extends(t,e),t.type=function(){return"file"},t.prototype.initialize_node=function(){},t.prototype.cook=function(){new a.CoreLoaderGeometry(this.pv.url).load(this._on_load.bind(this),this._on_error.bind(this))},t.prototype._on_load=function(e){console.log("objects",e),e=o.default(e),this.set_objects(e)},t.prototype._on_error=function(e){this.states.error.set("could not load geometry from "+this.pv.url+" ("+e+")")},t.PARAM_CALLBACK_reload=function(e){e.param_callback_reload()},t.prototype.param_callback_reload=function(){this.p.url.set_dirty()},t}(i.TypedSopNode);t.FileSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(360),i=n(22),a=r.__importDefault(n(352)),s=n(12),u=n(34),_=n(181),l=function(){function e(e){this.url=e;var t=this.url.split(".");this.ext=t[t.length-1].toLowerCase(),"zip"===this.ext&&(this.ext=t[t.length-2])}return e.prototype.load=function(e,t){this.load_auto().then((function(t){e(t)})).catch((function(e){t(e)}))},e.prototype.load_auto=function(){var e=this;return new Promise((function(t,n){return r.__awaiter(e,void 0,void 0,(function(){var e,i,s,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:return e=this.url,"json"!=this.ext?[3,1]:(a.default.get(e).then((function(e){(new o.ObjectLoader).parse(e.data,(function(e){t(u.on_load_success(e.children[0]))}))})).catch((function(e){n(e)})),[3,3]);case 1:return[4,this.loader_for_ext()];case 2:(i=r.sent())?i.load(e,(function(e){console.log(e),u.on_load_success(e).then((function(e){t(e)}))}),void 0,(function(e){n(e)})):(s="format not supported ("+this.ext+")",n(s)),r.label=3;case 3:return[2]}}))}))}))},e.prototype.on_load_success=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(e instanceof i.Object3D)switch(this.ext){case"gltf":case"glb":return[2,this.on_load_succes_gltf(e)];case"obj":case"json":default:return[2,[e]]}if(e instanceof s.BufferGeometry)switch(this.ext){case"drc":return[2,this.on_load_succes_drc(e)];default:return[2,[new u.Mesh(e)]]}switch(this.ext){case"gltf":case"glb":return[2,this.on_load_succes_gltf(e)];default:return[2,[]]}return[2,[]]}))}))},e.prototype.on_load_succes_gltf=function(e){var t=e.scene;return t.animations=e.animations,console.log("[scene]",[t]),[t]},e.prototype.on_load_succes_drc=function(e){var t=new _.MeshLambertMaterial;return[new u.Mesh(e,t)]},e.prototype.loader_for_ext=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(this.ext.toLowerCase()){case"gltf":return[2,this.loader_for_gltf()];case"glb":return[2,this.loader_for_glb()];case"drc":return[2,this.loader_for_drc()];case"obj":return[2,this.loader_for_obj()]}return[2]}))}))},e.prototype.loader_for_gltf=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then((function(){return r.__importStar(n(353))}))];case 1:return[2,new(0,e.sent().GLTFLoader)]}}))}))},e.prototype.loader_for_glb=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,o,i;return r.__generator(this,(function(a){switch(a.label){case 0:return[4,Promise.resolve().then((function(){return r.__importStar(n(353))}))];case 1:return e=a.sent().GLTFLoader,[4,Promise.resolve().then((function(){return r.__importStar(n(308))}))];case 2:return t=a.sent().DRACOLoader,o=new e,i=new t,"/three/js/libs/draco/gltf/",i.setDecoderPath("/three/js/libs/draco/gltf/"),i.setDecoderConfig({type:"js"}),o.setDRACOLoader(i),[2,o]}}))}))},e.prototype.loader_for_drc=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(o){switch(o.label){case 0:return[4,Promise.resolve().then((function(){return r.__importStar(n(308))}))];case 1:return e=o.sent().DRACOLoader,t=new e,"/three/js/libs/draco/",t.setDecoderPath("/three/js/libs/draco/"),t.setDecoderConfig({type:"js"}),[2,t]}}))}))},e.prototype.loader_for_obj=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then((function(){return r.__importStar(n(810))}))];case 1:return[2,new(0,e.sent().OBJLoader)]}}))}))},e}();t.CoreLoaderGeometry=l},function(e,t,n){"use strict";n.r(t),n.d(t,"OBJLoader",(function(){return m}));var r=n(12),o=n(44),i=n(10),a=n(59),s=n(61),u=n(73),_=n(28),l=n(16),c=n(34),p=n(242),d=n(1),f=n(114),h=n(90),m=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,n=/^usemtl /,m=/^usemap /;function g(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2])},addColor:function(e,t,n){var r=this.colors,o=this.object.geometry.colors;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[n+0],r[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,o,i,a,s,u){var _=this.vertices.length,l=this.parseVertexIndex(e,_),c=this.parseVertexIndex(t,_),p=this.parseVertexIndex(n,_);if(this.addVertex(l,c,p),this.colors.length>0&&this.addColor(l,c,p),void 0!==r&&""!==r){var d=this.uvs.length;l=this.parseUVIndex(r,d),c=this.parseUVIndex(o,d),p=this.parseUVIndex(i,d),this.addUV(l,c,p)}if(void 0!==a&&""!==a){var f=this.normals.length;l=this.parseNormalIndex(a,f),c=a===s?l:this.parseNormalIndex(s,f),p=a===u?l:this.parseNormalIndex(u,f),this.addNormal(l,c,p)}},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,o=0,i=e.length;o<i;o++)this.addVertexLine(this.parseVertexIndex(e[o],n));var a=0;for(i=t.length;a<i;a++)this.addUVLine(this.parseUVIndex(t[a],r))}};return e.startObject("",!1),e}function v(e){_.a.call(this,e),this.materials=null}return v.prototype=Object.assign(Object.create(_.a.prototype),{constructor:v,load:function(e,t,n,r){var i=this,a=new o.a(i.manager);a.setPath(this.path),a.load(e,(function(e){t(i.parse(e))}),n,r)},setMaterials:function(e){return this.materials=e,this},parse:function(o){console.time("OBJLoader");var _=new g;-1!==o.indexOf("\r\n")&&(o=o.replace(/\r\n/g,"\n")),-1!==o.indexOf("\\\n")&&(o=o.replace(/\\\n/g,""));for(var v=o.split("\n"),y="",b="",w=[],x="function"==typeof"".trimLeft,C=0,P=v.length;C<P;C++)if(y=v[C],0!==(y=x?y.trimLeft():y.trim()).length&&"#"!==(b=y.charAt(0)))if("v"===b){var E=y.split(/\s+/);switch(E[0]){case"v":_.vertices.push(parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3])),E.length>=7&&_.colors.push(parseFloat(E[4]),parseFloat(E[5]),parseFloat(E[6]));break;case"vn":_.normals.push(parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3]));break;case"vt":_.uvs.push(parseFloat(E[1]),parseFloat(E[2]))}}else if("f"===b){for(var O=y.substr(1).trim().split(/\s+/),T=[],N=0,j=O.length;N<j;N++){var A=O[N];if(A.length>0){var S=A.split("/");T.push(S)}}var M=T[0];for(N=1,j=T.length-1;N<j;N++){var k=T[N],R=T[N+1];_.addFace(M[0],k[0],R[0],M[1],k[1],R[1],M[2],k[2],R[2])}}else if("l"===b){var D=y.substring(1).trim().split(" "),I=[],L=[];if(-1===y.indexOf("/"))I=D;else for(var B=0,z=D.length;B<z;B++){var F=D[B].split("/");""!==F[0]&&I.push(F[0]),""!==F[1]&&L.push(F[1])}_.addLineGeometry(I,L)}else if("p"===b){var G=y.substr(1).trim().split(" ");_.addPointGeometry(G)}else if(null!==(w=e.exec(y))){var V=(" "+w[0].substr(1).trim()).substr(1);_.startObject(V)}else if(n.test(y))_.object.startMaterial(y.substring(7).trim(),_.materialLibraries);else if(t.test(y))_.materialLibraries.push(y.substring(7).trim());else if(m.test(y))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===b){if((w=y.split(" ")).length>1){var U=w[1].trim().toLowerCase();_.object.smooth="0"!==U&&"off"!==U}else _.object.smooth=!0;(re=_.object.currentMaterial())&&(re.smooth=_.object.smooth)}else{if("\0"===y)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+y+'"')}_.finalize();var q=new a.Group;q.materialLibraries=[].concat(_.materialLibraries);for(C=0,P=_.objects.length;C<P;C++){var H=_.objects[C],Y=H.geometry,X=H.materials,J="Line"===Y.type,W="Points"===Y.type,K=!1;if(0!==Y.vertices.length){var $=new r.BufferGeometry;$.setAttribute("position",new i.Float32BufferAttribute(Y.vertices,3)),Y.normals.length>0?$.setAttribute("normal",new i.Float32BufferAttribute(Y.normals,3)):$.computeVertexNormals(),Y.colors.length>0&&(K=!0,$.setAttribute("color",new i.Float32BufferAttribute(Y.colors,3))),Y.uvs.length>0&&$.setAttribute("uv",new i.Float32BufferAttribute(Y.uvs,2));for(var Z,Q=[],ee=0,te=X.length;ee<te;ee++){var ne=X[ee],re=void 0;if(null!==this.materials)if(re=this.materials.create(ne.name),!J||!re||re instanceof s.LineBasicMaterial){if(W&&re&&!(re instanceof h.PointsMaterial)){var oe=new h.PointsMaterial({size:10,sizeAttenuation:!1});l.Material.prototype.copy.call(oe,re),oe.color.copy(re.color),oe.map=re.map,re=oe}}else{var ie=new s.LineBasicMaterial;l.Material.prototype.copy.call(ie,re),ie.color.copy(re.color),re=ie}re||((re=J?new s.LineBasicMaterial:W?new h.PointsMaterial({size:1,sizeAttenuation:!1}):new p.a).name=ne.name),re.flatShading=!ne.smooth,re.vertexColors=K?d.VertexColors:d.NoColors,Q.push(re)}if(Q.length>1){for(ee=0,te=X.length;ee<te;ee++){ne=X[ee];$.addGroup(ne.groupStart,ne.groupCount,ee)}Z=J?new u.LineSegments($,Q):W?new f.Points($,Q):new c.Mesh($,Q)}else Z=J?new u.LineSegments($,Q[0]):W?new f.Points($,Q[0]):new c.Mesh($,Q[0]);Z.name=H.name,q.add(Z)}}return console.timeEnd("OBJLoader"),q}}),v}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(54),a=n(4),s=n(9),u=n(17),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dist=s.ParamConfig.FLOAT(.1,{range:[0,1],range_locked:[!0,!1]}),t}return r.__extends(t,e),t}(s.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t}return r.__extends(t,e),t.type=function(){return"fuse"},t.displayed_input_names=function(){return["points to fuse together"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([u.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){for(var t,n=[],r=0,o=e[0].core_objects();r<o.length;r++){var i=o[r];(t=this._fuse_core_object(i))&&n.push(t)}this.set_objects(n)},t.prototype._fuse_core_object=function(e){var t=e.object();if(t){for(var n=e.points(),r=this.pv.dist,o={},s=0,u=n;s<u.length;s++){var _=u[s],l=_.position(),c=new a.Vector3(Math.round(l.x/r),Math.round(l.y/r),Math.round(l.z/r)).toArray().join("-");o[c]=o[c]||[],o[c].push(_)}var p=[];return Object.keys(o).forEach((function(e){p.push(o[e][0])})),t.geometry.dispose(),p.length>0?(t.geometry=i.CoreGeometry.geometry_from_points(p,t.constructor),t):void 0}},t}(o.TypedSopNode);t.FuseSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i=n(13),a=n(83),s=n(36),u=n(813),_=new o.Vector3(0,1,0),l=n(9),c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.size=l.ParamConfig.VECTOR2([1,1]),t.hexagon_radius=l.ParamConfig.FLOAT(.1),t.direction=l.ParamConfig.VECTOR3([0,1,0]),t.points_only=l.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(l.NodeParamsConfig)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t._core_transform=new a.CoreTransform,t}return r.__extends(t,e),t.type=function(){return"hexagons"},t.prototype.initialize_node=function(){},t.prototype.cook=function(){var e=new u.CoreGeometryOperationHexagon(this.pv.size,this.pv.hexagon_radius,this.pv.points_only).process();console.log(e,e.attributes.position),this._core_transform.rotate_geometry(e,_,this.pv.direction),this.pv.points_only?this.set_geometry(e,s.CoreConstant.OBJECT_TYPE.POINTS):this.set_geometry(e)},t}(i.TypedSopNode);t.HexagonsSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(6),i=n(12),a={BufferAttribute:n(10).BufferAttribute,BufferGeometry:i.BufferGeometry,Vector2:o.Vector2},s=r.__importDefault(n(74)),u=function(){function e(e,t,n){this._param_size=e,this._param_hexagon_radius=t,this._param_points_only=n}return e.prototype.process=function(){for(var e=this._param_hexagon_radius,t=.5*e,n=e,r=Math.cos(Math.PI/6)*this._param_hexagon_radius,o=Math.floor(this._param_size.x/n),i=Math.floor(this._param_size.y/r),u=[],_=[],l=0;l<i;l++)for(var c=0;c<o;c++)u.push([-.5*this._param_size.x+c*n+(l%2==0?t:0),0,-.5*this._param_size.y+l*r]),this._param_points_only||l>=1&&(0==c||c==o-1?0==c?_.push([c+1+(l-1)*o,c+(l-1)*o,c+l*o]):_.push([c+l*o,c+(l-1)*o,c-1+l*o]):(_.push([c+l*o,c+(l-1)*o,c-1+l*o]),_.push([c+l*o,c+1+(l-1)*o,c+(l-1)*o])));u=s.default(u);var p=new a.BufferGeometry;return p.setAttribute("position",new a.BufferAttribute(new Float32Array(u),3)),this._param_points_only||(_=s.default(_),p.setIndex(_),p.computeVertexNormals()),p},e}();t.CoreGeometryOperationHexagon=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(22),a={Group:n(59).Group,Object3D:i.Object3D},s=n(13);!function(e){e.ADD_PARENT="add_parent",e.REMOVE_PARENT="remove_parent"}(r=t.HierarchyMode||(t.HierarchyMode={})),t.HIERARCHY_MODES=[r.ADD_PARENT,r.REMOVE_PARENT];var u=n(9),_=new(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.mode=u.ParamConfig.INTEGER(0,{menu:{entries:t.HIERARCHY_MODES.map((function(e,t){return{name:e,value:t}}))}}),n.levels=u.ParamConfig.INTEGER(1,{range:[0,5]}),n}return o.__extends(n,e),n}(u.NodeParamsConfig)),l=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t}return o.__extends(n,e),n.type=function(){return"hierarchy"},n.displayed_input_names=function(){return["geometry to add or remove parents to/from"]},n.prototype.initialize_node=function(){this.io.inputs.set_count(1)},n.prototype.cook=function(e){var n=e[0];if(t.HIERARCHY_MODES[this.pv.mode]==r.ADD_PARENT){var o=this._add_parent_to_core_group(n);this.set_objects(o)}else{o=this._remove_parent_from_core_group(n);this.set_objects(o)}},n.prototype._add_parent_to_core_group=function(e){if(0==this.pv.levels)return e.objects();for(var t=[],n=void 0,r=0,o=e.objects();r<o.length;r++){var i=o[r];(n=this._add_parent_to_object(i))&&t.push(n)}return t},n.prototype._add_parent_to_object=function(e){var t=new a.Group;if(t.add(e),this.pv.levels>0)for(var n=0;n<this.pv.levels-1;n++)t=this._add_new_parent(t);return t},n.prototype._add_new_parent=function(e){var t=new a.Group;return t.add(e),t},n.prototype._remove_parent_from_core_group=function(e){if(0==this.pv.levels)return e.objects();for(var t=[],n=0,r=e.objects();n<r.length;n++)for(var o=r[n],i=0,a=this._remove_parent_from_object(o);i<a.length;i++){var s=a[i];t.push(s)}return t},n.prototype._remove_parent_from_object=function(e){for(var t=e.children,n=0;n<this.pv.levels-1;n++)t=this._get_children_from_objects(t);return t},n.prototype._get_children_from_objects=function(e){for(var t,n=[];t=e.pop();)if(t.children)for(var r=0,o=t.children;r<o.length;r++){var i=o[r];n.push(i)}return n},n}(s.TypedSopNode);t.HierarchySopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o={Vector3:n(4).Vector3},i=n(96),a=n(13),s=n(9),u=n(17),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.amount=s.ParamConfig.FLOAT(1),t.seed=s.ParamConfig.INTEGER(1,{range:[0,100]}),t}return r.__extends(t,e),t}(s.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t}return r.__extends(t,e),t.type=function(){return"jitter"},t.displayed_input_names=function(){return["geometry to jitter points of"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([u.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){var t=this,n=e[0];n.points().forEach((function(e,n){var r=new o.Vector3(2*(i.CoreMath.rand(75*n+764+t.pv.seed)-.5),2*(i.CoreMath.rand(5678*n+3653+t.pv.seed)-.5),2*(i.CoreMath.rand(657*n+48464+t.pv.seed)-.5));r.normalize(),r.multiplyScalar(t.pv.amount);var a=e.position().clone().add(r);e.set_position(a)})),this.set_core_group(n)},t}(a.TypedSopNode);t.JitterSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(9),a=n(17),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layer=i.ParamConfig.INTEGER(0,{range:[0,31],range_locked:[!0,!0]}),t}return r.__extends(t,e),t}(i.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"layer"},t.displayed_input_names=function(){return["objects to change layers of"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){for(var t=e[0],n=0,r=t.objects();n<r.length;n++){r[n].layers.set(this.pv.layer)}this.set_core_group(t)},t}(o.TypedSopNode);t.LayerSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(10),i=n(12),a=r.__importDefault(n(183)),s=n(13),u=n(36),_=n(9),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.length=_.ParamConfig.FLOAT(1,{range:[0,10]}),t.points_count=_.ParamConfig.INTEGER(1,{range:[2,100],range_locked:[!0,!1]}),t.origin=_.ParamConfig.VECTOR3([0,0,0]),t.direction=_.ParamConfig.VECTOR3([0,1,0]),t}return r.__extends(t,e),t}(_.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t}return r.__extends(t,e),t.type=function(){return"line"},t.prototype.initialize_node=function(){},t.prototype.cook=function(){var e=this,t=Math.max(2,this.pv.points_count),n=new Array(3*t),r=new Array(t),s=this.pv.direction.clone().normalize().multiplyScalar(this.pv.length);a.default(t,(function(o){var i=o/(t-1),a=s.clone().multiplyScalar(i);a.add(e.pv.origin),a.toArray(n,3*o),o>0&&(r[2*(o-1)]=o-1,r[2*(o-1)+1]=o)}));var _=new i.BufferGeometry;_.setAttribute("position",new o.Float32BufferAttribute(n,3)),_.setIndex(r),this.set_geometry(_,u.CoreConstant.OBJECT_TYPE.LINE_SEGMENTS)},t}(s.TypedSopNode);t.LineSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(184),a=n(236),s=n(17),u=n(30),_=n(48),l=n(9),c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.group=l.ParamConfig.STRING(""),t.material=l.ParamConfig.OPERATOR_PATH("/MAT/mesh_standard1",{node_selection:{context:u.NodeContext.MAT},dependent_on_found_node:!1}),t.apply_to_children=l.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(l.NodeParamsConfig)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t._globals_handler=new a.GlobalsGeometryHandler,t}return r.__extends(t,e),t.type=function(){return"material"},t.displayed_input_names=function(){return["objects to assign material to"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a,s,l,c=this;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e[0],(n=this.p.material.found_node())?n.node_context()==u.NodeContext.MAT?[3,1]:(this.states.error.set("node is not a material"),[3,3]):[3,4];case 1:return(i=(o=n).material)instanceof _.ShaderMaterial&&n.assembler_controller.set_assembler_globals_handler(this._globals_handler),[4,o.request_container()];case 2:if(r.sent(),i){for(a=0,s=t.objects_from_group(this.pv.group);a<s.length;a++)l=s[a],this.pv.apply_to_children?l.traverse((function(e){c.apply_material(e,i)})):this.apply_material(l,i);this.set_core_group(t)}else this.states.error.set("material invalid. (error: '"+o.states.error.message+"')");r.label=3;case 3:return[3,5];case 4:this.states.error.set("node '"+this.pv.material+"' not found"),r.label=5;case 5:return[2]}}))}))},t.prototype.apply_material=function(e,t){e.material=t,i.CoreMaterial.apply_custom_materials(e,t)},t}(o.TypedSopNode);t.MaterialSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(54),a=n(36),s="geometry to merge",u=n(9),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.compact=u.ParamConfig.BOOLEAN(1),t}return r.__extends(t,e),t}(u.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t}return r.__extends(t,e),t.type=function(){return"merge"},t.displayed_input_names=function(){return[s,s,s,s]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1,4),this.ui_data.set_width(100)},t.prototype.cook=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];if(o)for(var i=0,a=o.objects();i<a.length;i++){a[i].traverse((function(e){t.push(e)}))}}this.pv.compact&&(t=this._make_compact(t)),this.set_objects(t)},t.prototype._make_compact=function(e){for(var t,n=((t={})[a.ObjectType.MESH]=[],t[a.ObjectType.POINTS]=[],t[a.ObjectType.LINE_SEGMENTS]=[],t),r=[],o=0,s=e;o<s.length;o++){(m=s[o]).traverse((function(e){var t=e;t.geometry&&(t.isMesh?n[a.ObjectType.MESH].push(t):t.isLineSegments?n[a.ObjectType.LINE_SEGMENTS].push(t):t.isPoints&&n[a.ObjectType.POINTS].push(t))}))}for(var u=0,_=Object.keys(n);u<_.length;u++){for(var l=_[u],c=[],p=0,d=n[l];p<d.length;p++){var f=(m=d[p]).geometry;f.applyMatrix(m.matrix),c.push(f)}var h=i.CoreGeometry.merge_geometries(c);if(h){var m=this.create_object(h,l);r.push(m)}}return r},t}(o.TypedSopNode);t.MergeSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(4),a=n(6),s=n(13),u=n(96),_=n(17),l=n(151),c=n(821);!function(e){e.ADD="add",e.SET="set",e.MULT="mult",e.SUBSTRACT="substract",e.DIVIDE="divide"}(r||(r={}));var p=[r.ADD,r.SET,r.MULT,r.SUBSTRACT,r.DIVIDE],d=n(9),f=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.amount=d.ParamConfig.FLOAT(1),t.freq=d.ParamConfig.VECTOR3([1,1,1]),t.offset=d.ParamConfig.VECTOR3([0,0,0]),t.octaves=d.ParamConfig.INTEGER(3,{range:[1,8],range_locked:[!0,!1]}),t.amp_attenuation=d.ParamConfig.FLOAT(.5,{range:[0,1]}),t.freq_increase=d.ParamConfig.FLOAT(2,{range:[0,10]}),t.seed=d.ParamConfig.INTEGER(0,{range:[0,100]}),t.separator=d.ParamConfig.SEPARATOR(),t.use_normals=d.ParamConfig.BOOLEAN(0),t.attrib_name=d.ParamConfig.STRING("position"),t.operation=d.ParamConfig.INTEGER(p.indexOf(r.ADD),{menu:{entries:p.map((function(e){return{name:e,value:p.indexOf(e)}}))}}),t.compute_normals=d.ParamConfig.BOOLEAN(1),t}return o.__extends(t,e),t}(d.NodeParamsConfig)),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=f,t._simplex_by_seed=new Map,t._rest_points=[],t}return o.__extends(t,e),t.type=function(){return"noise"},t.displayed_input_names=function(){return["geometry to add noise to","rest geometry"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1,2),this.io.inputs.init_inputs_clonable_state([_.InputCloneMode.FROM_NODE,_.InputCloneMode.NEVER])},t.prototype.cook=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,s,u,_,c,d,f,h,m,g,v=this;return o.__generator(this,(function(o){for(t=e[0],n=e[1],s=t.points(),n&&(null!=this._rest_core_group_timestamp&&this._rest_core_group_timestamp==n.timestamp()||(this._rest_points=n.points(),this._rest_core_group_timestamp=n.timestamp())),u=this._get_simplex(),_=this.pv.use_normals&&t.has_attrib("normal"),c=t.attrib_size(this.pv.attrib_name),d=function(e){var t=s[e],o=n?f._rest_points[e]:t,d=o.attrib_value(f.pv.attrib_name),h=o.position().add(f.pv.offset).multiply(f.pv.freq),m=function(){if(_){var e=o.attrib_value("normal"),t=v.pv.amount*v._fbm(u,h.x,h.y,h.z);return e.clone().multiplyScalar(t)}return new i.Vector3(v.pv.amount*v._fbm(u,h.x+545,h.y+125454,h.z+2142),v.pv.amount*v._fbm(u,h.x-425,h.y-25746,h.z+95242),v.pv.amount*v._fbm(u,h.x+765132,h.y+21,h.z-9245))}();m=function(){switch(c){case 1:return m.x;case 2:return new a.Vector2(m.x,m.y);case 3:return m}}();var g=function(){var e=p[v.pv.operation];switch(c){case 1:switch(e){case r.ADD:return d+m;case r.SET:return m;case r.MULT:return d*m;case r.DIVIDE:return d/m;case r.SUBSTRACT:return d-m}l.TypeAssert.unreachable(e);break;default:switch(e){case r.ADD:return d.add(m);case r.SET:return m;case r.MULT:return d.multiply(m);case r.DIVIDE:return d.divide(m);case r.SUBSTRACT:return d.sub(m)}l.TypeAssert.unreachable(e)}}();t.set_attrib_value(f.pv.attrib_name,g)},f=this,h=0;h<s.length;h++)d(h);if(!this.io.inputs.input_cloned(0))for(m=0,g=t.geometries();m<g.length;m++)g[m].getAttribute(this.pv.attrib_name).needsUpdate=!0;return this.pv.compute_normals&&t.compute_vertex_normals(),this.set_core_group(t),[2]}))}))},t.prototype._fbm=function(e,t,n,r){for(var o=0,i=1,a=0;a<this.pv.octaves;a++)o+=i*e.noise3d(t,n,r),t*=this.pv.freq_increase,n*=this.pv.freq_increase,r*=this.pv.freq_increase,i*=this.pv.amp_attenuation;return o},t.prototype._get_simplex=function(){var e=this._simplex_by_seed.get(this.pv.seed);if(e)return e;var t=this._create_simplex();return this._simplex_by_seed.set(this.pv.seed,t),t},t.prototype._create_simplex=function(){var e=this.pv.seed,t={random:function(){return u.CoreMath.rand_float(e)}},n=new c.SimplexNoise(t);return this._simplex_by_seed.delete(e),n},t}(s.TypedSopNode);t.NoiseSopNode=h},function(e,t,n){"use strict";n.r(t),n.d(t,"SimplexNoise",(function(){return r}));var r=function(e){null==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};r.prototype.dot=function(e,t,n){return e[0]*t+e[1]*n},r.prototype.dot3=function(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r},r.prototype.dot4=function(e,t,n,r,o){return e[0]*t+e[1]*n+e[2]*r+e[3]*o},r.prototype.noise=function(e,t){var n,r,o=(e+t)*(.5*(Math.sqrt(3)-1)),i=Math.floor(e+o),a=Math.floor(t+o),s=(3-Math.sqrt(3))/6,u=(i+a)*s,_=e-(i-u),l=t-(a-u);_>l?(n=1,r=0):(n=0,r=1);var c=_-n+s,p=l-r+s,d=_-1+2*s,f=l-1+2*s,h=255&i,m=255&a,g=this.perm[h+this.perm[m]]%12,v=this.perm[h+n+this.perm[m+r]]%12,y=this.perm[h+1+this.perm[m+1]]%12,b=.5-_*_-l*l,w=.5-c*c-p*p,x=.5-d*d-f*f;return 70*((b<0?0:(b*=b)*b*this.dot(this.grad3[g],_,l))+(w<0?0:(w*=w)*w*this.dot(this.grad3[v],c,p))+(x<0?0:(x*=x)*x*this.dot(this.grad3[y],d,f)))},r.prototype.noise3d=function(e,t,n){var r,o,i,a,s,u,_=(e+t+n)*(1/3),l=Math.floor(e+_),c=Math.floor(t+_),p=Math.floor(n+_),d=1/6,f=(l+c+p)*d,h=e-(l-f),m=t-(c-f),g=n-(p-f);h>=m?m>=g?(r=1,o=0,i=0,a=1,s=1,u=0):h>=g?(r=1,o=0,i=0,a=1,s=0,u=1):(r=0,o=0,i=1,a=1,s=0,u=1):m<g?(r=0,o=0,i=1,a=0,s=1,u=1):h<g?(r=0,o=1,i=0,a=0,s=1,u=1):(r=0,o=1,i=0,a=1,s=1,u=0);var v=h-r+d,y=m-o+d,b=g-i+d,w=h-a+2*d,x=m-s+2*d,C=g-u+2*d,P=h-1+.5,E=m-1+.5,O=g-1+.5,T=255&l,N=255&c,j=255&p,A=this.perm[T+this.perm[N+this.perm[j]]]%12,S=this.perm[T+r+this.perm[N+o+this.perm[j+i]]]%12,M=this.perm[T+a+this.perm[N+s+this.perm[j+u]]]%12,k=this.perm[T+1+this.perm[N+1+this.perm[j+1]]]%12,R=.6-h*h-m*m-g*g,D=.6-v*v-y*y-b*b,I=.6-w*w-x*x-C*C,L=.6-P*P-E*E-O*O;return 32*((R<0?0:(R*=R)*R*this.dot3(this.grad3[A],h,m,g))+(D<0?0:(D*=D)*D*this.dot3(this.grad3[S],v,y,b))+(I<0?0:(I*=I)*I*this.dot3(this.grad3[M],w,x,C))+(L<0?0:(L*=L)*L*this.dot3(this.grad3[k],P,E,O)))},r.prototype.noise4d=function(e,t,n,r){var o,i,a,s,u,_,l,c,p,d,f,h,m=this.grad4,g=this.simplex,v=this.perm,y=(Math.sqrt(5)-1)/4,b=(5-Math.sqrt(5))/20,w=(e+t+n+r)*y,x=Math.floor(e+w),C=Math.floor(t+w),P=Math.floor(n+w),E=Math.floor(r+w),O=(x+C+P+E)*b,T=e-(x-O),N=t-(C-O),j=n-(P-O),A=r-(E-O),S=(T>N?32:0)+(T>j?16:0)+(N>j?8:0)+(T>A?4:0)+(N>A?2:0)+(j>A?1:0),M=T-(o=g[S][0]>=3?1:0)+b,k=N-(i=g[S][1]>=3?1:0)+b,R=j-(a=g[S][2]>=3?1:0)+b,D=A-(s=g[S][3]>=3?1:0)+b,I=T-(u=g[S][0]>=2?1:0)+2*b,L=N-(_=g[S][1]>=2?1:0)+2*b,B=j-(l=g[S][2]>=2?1:0)+2*b,z=A-(c=g[S][3]>=2?1:0)+2*b,F=T-(p=g[S][0]>=1?1:0)+3*b,G=N-(d=g[S][1]>=1?1:0)+3*b,V=j-(f=g[S][2]>=1?1:0)+3*b,U=A-(h=g[S][3]>=1?1:0)+3*b,q=T-1+4*b,H=N-1+4*b,Y=j-1+4*b,X=A-1+4*b,J=255&x,W=255&C,K=255&P,$=255&E,Z=v[J+v[W+v[K+v[$]]]]%32,Q=v[J+o+v[W+i+v[K+a+v[$+s]]]]%32,ee=v[J+u+v[W+_+v[K+l+v[$+c]]]]%32,te=v[J+p+v[W+d+v[K+f+v[$+h]]]]%32,ne=v[J+1+v[W+1+v[K+1+v[$+1]]]]%32,re=.6-T*T-N*N-j*j-A*A,oe=.6-M*M-k*k-R*R-D*D,ie=.6-I*I-L*L-B*B-z*z,ae=.6-F*F-G*G-V*V-U*U,se=.6-q*q-H*H-Y*Y-X*X;return 27*((re<0?0:(re*=re)*re*this.dot4(m[Z],T,N,j,A))+(oe<0?0:(oe*=oe)*oe*this.dot4(m[Q],M,k,R,D))+(ie<0?0:(ie*=ie)*ie*this.dot4(m[ee],I,L,B,z))+(ae<0?0:(ae*=ae)*ae*this.dot4(m[te],F,G,V,U))+(se<0?0:(se*=se)*se*this.dot4(m[ne],q,H,Y,X)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(17),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.edit=a.ParamConfig.BOOLEAN(0),t.update_x=a.ParamConfig.BOOLEAN(0,{visible_if:{edit:1}}),t.x=a.ParamConfig.FLOAT("@N.x",{visible_if:{update_x:1,edit:1},expression:{for_entities:!0}}),t.update_y=a.ParamConfig.BOOLEAN(0,{visible_if:{edit:1}}),t.y=a.ParamConfig.FLOAT("@N.y",{visible_if:{update_y:1,edit:1},expression:{for_entities:!0}}),t.update_z=a.ParamConfig.BOOLEAN(0,{visible_if:{edit:1}}),t.z=a.ParamConfig.FLOAT("@N.z",{visible_if:{update_z:1,edit:1},expression:{for_entities:!0}}),t.recompute=a.ParamConfig.BOOLEAN(0,{visible_if:{edit:0}}),t.invert=a.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"normals"},t.displayed_input_names=function(){return["geometry to update normals of"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return t=e[0],this.pv.edit?[4,this._eval_expressions_for_core_group(t)]:[3,2];case 1:return n.sent(),[3,3];case 2:t.compute_vertex_normals(),n.label=3;case 3:return this.pv.invert&&this._invert_normals(t),this.set_core_group(t),[2]}}))}))},t.prototype._eval_expressions_for_core_group=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:t=e.core_objects(),n=0,r.label=1;case 1:return n<t.length?[4,this._eval_expressions_for_core_object(t[n])]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype._eval_expressions_for_core_object=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.object(),n=t.geometry,o=e.points(),i=n.getAttribute("normal").array,this.pv.update_x?this.p.x.has_expression()&&this.p.x.expression_controller?[4,this.p.x.expression_controller.compute_expression_for_points(o,(function(e,t){i[3*e.index+0]=t}))]:[3,2]:[3,3];case 1:return r.sent(),[3,3];case 2:for(a=void 0,s=0;s<o.length;s++)a=o[s],i[3*a.index+0]=this.pv.x;r.label=3;case 3:return this.pv.update_y?this.p.y.has_expression()&&this.p.y.expression_controller?[4,this.p.y.expression_controller.compute_expression_for_points(o,(function(e,t){i[3*e.index+1]=t}))]:[3,5]:[3,6];case 4:return r.sent(),[3,6];case 5:for(a=void 0,s=0;s<o.length;s++)a=o[s],i[3*a.index+1]=this.pv.y;r.label=6;case 6:return this.pv.update_z?this.p.z.has_expression()&&this.p.z.expression_controller?[4,this.p.z.expression_controller.compute_expression_for_points(o,(function(e,t){i[3*e.index+2]=t}))]:[3,8]:[3,9];case 7:return r.sent(),[3,9];case 8:for(a=void 0,s=0;s<o.length;s++)a=o[s],i[3*a.index+2]=this.pv.z;r.label=9;case 9:return[2]}}))}))},t.prototype._invert_normals=function(e){for(var t=0,n=e.core_objects();t<n.length;t++){var r=n[t].core_geometry().geometry().attributes.normal;if(r)for(var o=r.array,i=0;i<o.length;i++)o[i]*=-1}},t}(o.TypedSopNode);t.NormalsSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(9),a=n(17),s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(i.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"null"},t.prototype.initialize_node=function(){this.io.inputs.set_count(0,1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE]),this.ui_data.set_border_radius(1e3)},t.prototype.cook=function(e){var t=e[0];t?this.set_core_group(t):this.set_objects([])},t}(o.TypedSopNode);t.NullSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(30),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.geometry=a.ParamConfig.OPERATOR_PATH("",{node_selection:{context:i.NodeContext.SOP}}),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"object_merge"},t.prototype.initialize_node=function(){},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=this.p.geometry.found_node())?e.node_context()!=i.NodeContext.SOP?[3,2]:[4,e.request_container()]:[3,4];case 1:return t=n.sent(),this.import_input(e,t),[3,3];case 2:this.states.error.set("found node is not a geometry"),n.label=3;case 3:return[3,5];case 4:this.states.error.set("node not found at path '"+this.pv.geometry+"'"),n.label=5;case 5:return[2]}}))}))},t.prototype.import_input=function(e,t){var n;null!=(n=t.core_content_cloned())?this.set_core_group(n):this.states.error.set("invalid target")},t}(o.TypedSopNode);t.ObjectMergeSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o={Float32BufferAttribute:n(10).Float32BufferAttribute},i=n(13),a=r.__importDefault(n(971)),s=n(17),u=n(9),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attrib_name=u.ParamConfig.STRING("occlusion"),t.samples=u.ParamConfig.INTEGER(256,{range:[1,256],range_locked:[!0,!1]}),t.sep=u.ParamConfig.SEPARATOR(),t.buffer_resolution=u.ParamConfig.INTEGER(512),t.bias=u.ParamConfig.FLOAT(.01),t}return r.__extends(t,e),t}(u.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t}return r.__extends(t,e),t.type=function(){return"occlusion"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:t=e[0],n=t.core_objects(),o=0,i=n,r.label=1;case 1:return o<i.length?(a=i[o],[4,this._process_occlusion_on_object(a)]):[3,4];case 2:r.sent(),r.label=3;case 3:return o++,[3,1];case 4:return this.set_core_group(t),[2]}}))}))},t.prototype._process_occlusion_on_object=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,u,_,l,c;return r.__generator(this,(function(r){for(n=e.core_geometry().geometry(),i=n.attributes.position.array,s=n.attributes.normal.array,u=null===(t=n.getIndex())||void 0===t?void 0:t.array,_=a.default(i,{cells:u,normals:s,resolution:this.pv.buffer_resolution,bias:this.pv.bias}),l=0;l<this.pv.samples;l++)_.sample();return c=_.report(),n.setAttribute(this.pv.attrib_name,new o.Float32BufferAttribute(c,1)),_.dispose(),[2]}))}))},t}(i.TypedSopNode);t.OcclusionSopNode=l},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(54),i=n(13),a=n(17),s=n(9),u=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.amount=s.ParamConfig.FLOAT(1,{range:[-1,1]}),t}return r.__extends(t,e),t}(s.NodeParamsConfig)),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=u,t}return r.__extends(t,e),t.type=function(){return"peak"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){for(var t,n,r=this,i=e[0],a=0,s=i.objects();a<s.length;a++){s[a].traverse((function(e){var i;if(null!=(i=e.geometry)){for(var a=0,s=(t=new o.CoreGeometry(i)).points();a<s.length;a++){var u=(n=s[a]).normal(),_=n.position().clone().add(u.multiplyScalar(r.pv.amount));n.set_position(_)}if(!r.io.inputs.input_cloned(0))t.geometry().getAttribute("position").needsUpdate=!0}}))}this.set_core_group(i)},t}(i.TypedSopNode);t.PeakSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i=n(6),a=n(84),s=n(13),u=n(83),_=n(17),l=new o.Vector3(0,0,1),c=new o.Vector3(0,0,1),p=new o.Vector3(0,1,0),d=n(9),f=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.size=d.ParamConfig.VECTOR2([1,1]),t.use_segments_count=d.ParamConfig.BOOLEAN(0),t.step_size=d.ParamConfig.FLOAT(1,{visible_if:{use_segments_count:0}}),t.segments=d.ParamConfig.VECTOR2([1,1],{visible_if:{use_segments_count:1}}),t.direction=d.ParamConfig.VECTOR3([0,1,0]),t.center=d.ParamConfig.VECTOR3([0,0,0]),t}return r.__extends(t,e),t}(d.NodeParamsConfig)),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=f,t._core_transform=new u.CoreTransform,t}return r.__extends(t,e),t.type=function(){return"plane"},t.displayed_input_names=function(){return["geometry to create plane from (optional)"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(0,1),this.io.inputs.init_inputs_clonable_state([_.InputCloneMode.NEVER])},t.prototype.cook=function(e){var t=e[0];t?this._cook_with_input(t):this._cook_without_input()},t.prototype._cook_without_input=function(){var e=this._create_plane(this.pv.size);this._core_transform.rotate_geometry(e,l,this.pv.direction);var t=this._core_transform.translation_matrix(this.pv.center);e.applyMatrix(t),this.set_geometry(e)},t.prototype._cook_with_input=function(e){var t=e.bounding_box(),n=new o.Vector3;t.getSize(n);var r=new o.Vector3;t.getCenter(r);var a=new i.Vector2(n.x,n.z),s=this._create_plane(a);this._core_transform.rotate_geometry(s,c,p);var u=this._core_transform.translation_matrix(r);s.applyMatrix(u),this.set_geometry(s)},t.prototype._create_plane=function(e){var t;return e=e.clone(),this.pv.use_segments_count?t={x:Math.floor(this.pv.segments.x),y:Math.floor(this.pv.segments.y)}:(t={x:Math.floor(e.x/this.pv.step_size),y:Math.floor(e.y/this.pv.step_size)},e.x=t.x*this.pv.step_size,e.y=t.y*this.pv.step_size),new a.PlaneBufferGeometry(e.x,e.y,t.x,t.y)},t}(s.TypedSopNode);t.PlaneSopNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(17),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.update_x=a.ParamConfig.BOOLEAN(0),t.x=a.ParamConfig.FLOAT("@P.x",{visible_if:{update_x:1},expression:{for_entities:!0}}),t.update_y=a.ParamConfig.BOOLEAN(0),t.y=a.ParamConfig.FLOAT("@P.y",{visible_if:{update_y:1},expression:{for_entities:!0}}),t.update_z=a.ParamConfig.BOOLEAN(0),t.z=a.ParamConfig.FLOAT("@P.z",{visible_if:{update_z:1},expression:{for_entities:!0}}),t.update_normals=a.ParamConfig.BOOLEAN(1),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t._x_arrays_by_geometry_uuid=new Map,t._y_arrays_by_geometry_uuid=new Map,t._z_arrays_by_geometry_uuid=new Map,t}return r.__extends(t,e),t.type=function(){return"point"},t.displayed_input_names=function(){return["points to move"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return t=e[0],[4,this._eval_expressions_for_core_group(t)];case 1:return n.sent(),[2]}}))}))},t.prototype._eval_expressions_for_core_group=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a,s,u,_,l;return r.__generator(this,(function(r){switch(r.label){case 0:t=e.core_objects(),n=0,r.label=1;case 1:return n<t.length?[4,this._eval_expressions_for_core_object(t[n])]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:for(this.pv.update_normals&&e.compute_vertex_normals(),o=e.geometries(),i=0,a=o;i<a.length;i++)(l=a[i]).computeBoundingBox();if(!this.io.inputs.input_cloned(0))for(s=e.geometries(),u=0,_=s;u<_.length;u++)l=_[u],l.getAttribute("position").needsUpdate=!0;return this.set_core_group(e),[2]}}))}))},t.prototype._eval_expressions_for_core_object=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.object(),n=t.geometry,o=e.points(),i=n.getAttribute("position").array,[4,this._update_from_param(n,i,o,this.p.update_x,this.p.x,this.pv.x,this._x_arrays_by_geometry_uuid,0)];case 1:return a=r.sent(),[4,this._update_from_param(n,i,o,this.p.update_y,this.p.y,this.pv.y,this._y_arrays_by_geometry_uuid,1)];case 2:return s=r.sent(),[4,this._update_from_param(n,i,o,this.p.update_z,this.p.z,this.pv.z,this._z_arrays_by_geometry_uuid,2)];case 3:return u=r.sent(),a&&this._commit_tmp_values(a,i,0),s&&this._commit_tmp_values(s,i,1),u&&this._commit_tmp_values(u,i,2),[2]}}))}))},t.prototype._update_from_param=function(e,t,n,o,i,a,s,u){return r.__awaiter(this,void 0,void 0,(function(){var t,_,l,c,p;return r.__generator(this,(function(r){switch(r.label){case 0:return t=o,_=i,l=this._init_array_if_required(e,s,n.length,u),t.value?_.has_expression()&&_.expression_controller?[4,_.expression_controller.compute_expression_for_points(n,(function(e,t){l[e.index]=t}))]:[3,2]:[3,3];case 1:return r.sent(),[3,3];case 2:for(c=void 0,p=0;p<n.length;p++)c=n[p],l[c.index]=a;r.label=3;case 3:return[2,l]}}))}))},t.prototype._init_array_if_required=function(e,t,n,r){var o=e.uuid,i=t.get(o);if(i){if(i.length<n){var a=this._array_for_component(e,n,r);return t.set(o,a),a}return i}a=this._array_for_component(e,n,r);return t.set(o,a),a},t.prototype._array_for_component=function(e,t,n){for(var r=new Array(t),o=e.getAttribute("position").array,i=0;i<r.length;i++)r[i]=o[3*i+n];return r},t.prototype._commit_tmp_values=function(e,t,n){for(var r=0;r<e.length;r++)t[3*r+n]=e[r]},t}(o.TypedSopNode);t.PointSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(54),a=n(83),s=n(306),u=n(213),_=n(309),l=n(4),c=n(73),p=n(12),d=n(17),f=new l.Vector3(0,0,0),h=new l.Vector3(1,1,1),m=n(9),g=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.radius=m.ParamConfig.FLOAT(1),t.segments_radial=m.ParamConfig.INTEGER(8,{range:[3,20],range_locked:[!0,!1]}),t.closed=m.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(m.NodeParamsConfig)),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=g,t._core_transform=new a.CoreTransform,t._geometries=[],t}return r.__extends(t,e),t.type=function(){return"polywire"},t.displayed_input_names=function(){return["lines to create tubes from"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([d.InputCloneMode.NEVER])},t.prototype.cook=function(e){var t=e[0];this._geometries=[];for(var n=0,r=t.objects();n<r.length;n++){(u=r[n])instanceof c.LineSegments&&this._create_tube(u)}for(var o=i.CoreGeometry.merge_geometries(this._geometries),a=0,s=this._geometries;a<s.length;a++){s[a].dispose()}if(o){var u=this.create_object(o);this.set_object(u)}else this.set_objects([])},t.prototype._create_tube=function(e){for(var t,n=e.geometry,r=new i.CoreGeometry(n).points(),o=null===(t=n.getIndex())||void 0===t?void 0:t.array,a=0,s=u.CoreGeometryUtilCurve.accumulated_curve_point_indices(o);a<s.length;a++){var _=s[a].map((function(e){return r[e]}));this._create_tube_from_points(_)}},t.prototype._create_tube_from_points=function(e){if(!(e.length<=1)){for(var t=e.map((function(e){return e.attrib_value("position")})),n=s.CoreGeometryUtilCircle.create(this.pv.radius,this.pv.segments_radial),r=[],o=0,i=t;o<i.length;o++){var a=i[o],u=this._core_transform.matrix(a,f,h,1),_=n.clone();_.applyMatrix(u),r.push(_)}for(var l=0;l<r.length;l++)if(l>0){var c=r[l],p=r[l-1],d=this._skin(p,c);this._geometries.push(d)}}},t.prototype._skin=function(e,t){var n=new p.BufferGeometry;return new _.CoreGeometryOperationSkin(n,e,t).process(),n},t}(o.TypedSopNode);t.PolywireSopNode=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(348),i=n(87),a=n(1),s=n(13),u=n(17),_=new i.MeshBasicMaterial({side:a.DoubleSide}),l=n(9),c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_normals=l.ParamConfig.BOOLEAN(1),t.direction=l.ParamConfig.VECTOR3([0,-1,0],{visible_if:{use_normals:0}}),t.transfer_face_normals=l.ParamConfig.BOOLEAN(1),t}return r.__extends(t,e),t}(l.NodeParamsConfig)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t._bound_assign_mat=t._assign_double_sided_material_to_object.bind(t),t._raycaster=new o.Raycaster,t}return r.__extends(t,e),t.type=function(){return"ray"},t.double_sided_material=function(){return _},t.displayed_input_names=function(){return["geometry to move","geometry to ray onto"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([u.InputCloneMode.FROM_NODE,u.InputCloneMode.ALWAYS])},t.prototype.create_params=function(){},t.prototype.cook=function(e){var t=e[0],n=e[1];this.ray(t,n)},t.prototype.ray=function(e,t){var n,r;this._assign_double_sided_material_to_core_group(t);for(var o=0,i=e.points();o<i.length;o++){var a=i[o];n=this.pv.use_normals?a.normal():this.pv.direction,this._raycaster.set(a.position(),n),(r=this._raycaster.intersectObjects(t.objects(),!0)[0])&&(a.set_position(r.point),this.pv.transfer_face_normals&&r.face&&a.set_normal(r.face.normal))}this.set_core_group(e)},t.prototype._assign_double_sided_material_to_core_group=function(e){for(var t=0,n=e.objects();t<n.length;t++){n[t].traverse(this._bound_assign_mat)}},t.prototype._assign_double_sided_material_to_object=function(e){e.material=t.double_sided_material()},t}(s.TypedSopNode);t.RaySopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(3),a=n(73),s=n(10),u=n(12),_=n(351),l=n(211),c=i.__importDefault(n(74)),p=i.__importDefault(n(329)),d=n(13),f=n(36),h=n(213),m=n(54);!function(e){e.POINTS_COUNT="points_count",e.SEGMENT_LENGTH="segment_length"}(r=t.METHOD||(t.METHOD={})),t.METHODS=[r.POINTS_COUNT,r.SEGMENT_LENGTH],function(e){e.CENTRIPETAL="centripetal",e.CHORDAL="chordal",e.CATMULLROM="catmullrom"}(o=t.CURVE_TYPE||(t.CURVE_TYPE={})),t.CURVE_TYPES=[o.CENTRIPETAL,o.CHORDAL,o.CATMULLROM];var g=n(9),v=n(151),y=new(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.method=g.ParamConfig.INTEGER(t.METHODS.indexOf(r.POINTS_COUNT),{menu:{entries:t.METHODS.map((function(e,t){return{name:e,value:t}}))}}),n.curve_type=g.ParamConfig.INTEGER(t.CURVE_TYPES.indexOf(o.CATMULLROM),{range:[0,2],range_locked:[!0,!0],menu:{entries:t.CURVE_TYPES.map((function(e,t){return{name:e,value:t}}))}}),n.tension=g.ParamConfig.FLOAT(.01,{range:[0,1],range_locked:[!0,!0]}),n.points_count=g.ParamConfig.INTEGER(100,{visible_if:{method:t.METHODS.indexOf(r.POINTS_COUNT)}}),n.segment_length=g.ParamConfig.FLOAT(1,{visible_if:{method:t.METHODS.indexOf(r.SEGMENT_LENGTH)}}),n}return i.__extends(n,e),n}(g.NodeParamsConfig)),b=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=y,t}return i.__extends(n,e),n.type=function(){return"resample"},n.prototype.initialize_node=function(){this.io.inputs.set_count(1)},n.prototype.cook=function(e){var t=e[0],n=[];if(this.pv.points_count>=2)for(var r=t.core_objects(),o=0;o<r.length;o++){var i=r[o].object();if(i instanceof a.LineSegments){var s=this._resample(i);n.push(s)}}this.set_objects(n)},n.prototype._resample=function(e){for(var t,n=e.geometry,r=new m.CoreGeometry(n).points(),o=null===(t=n.getIndex())||void 0===t?void 0:t.array,i=h.CoreGeometryUtilCurve.accumulated_curve_point_indices(o),a=[],s=0;s<i.length;s++){var u=i[s].map((function(e){return r[e]})),_=this._create_curve_from_points(u);_&&a.push(_)}var c=l.BufferGeometryUtils.mergeBufferGeometries(a);return this.create_object(c,f.CoreConstant.OBJECT_TYPE.LINE_SEGMENTS)},n.prototype._create_curve_from_points=function(e){if(!(e.length<=1)){for(var n=p.default(e,(function(e){return e.attrib_value("position")})),r=t.CURVE_TYPES[this.pv.curve_type],o=this.pv.tension,i=new _.CatmullRomCurve3(n,!1,r,o),a=this._get_points_from_curve(i),l=[],d=[],f=0;f<a.length;f++){var h=a[f].toArray();l.push(h),f>0&&(d.push(f-1),d.push(f))}l=c.default(l);var m=new u.BufferGeometry;return m.setAttribute("position",new s.Float32BufferAttribute(l,3)),m.setIndex(d),m}},n.prototype._get_points_from_curve=function(e){var n=t.METHODS[this.pv.method];switch(n){case r.POINTS_COUNT:return e.getSpacedPoints(Math.max(2,this.pv.points_count));case r.SEGMENT_LENGTH:var o=e.getLength(),i=0!==this.pv.segment_length?1+o/this.pv.segment_length:2;return i=Math.max(2,i),e.getSpacedPoints(i)}v.TypeAssert.unreachable(n)},n}(d.TypedSopNode);t.ResampleSopNode=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(12),i={BufferAttribute:n(10).BufferAttribute,BufferGeometry:o.BufferGeometry},a=r.__importDefault(n(86)),s=r.__importDefault(n(47)),u=r.__importDefault(n(80)),_=n(13),l=n(36),c=n(96),p=n(299),d=n(9),f=n(17),h=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.points_count=d.ParamConfig.INTEGER(100,{range:[0,100],range_locked:[!0,!1]}),t.seed=d.ParamConfig.INTEGER(0,{range:[0,100],range_locked:[!1,!1]}),t.transfer_attributes=d.ParamConfig.BOOLEAN(0),t.attributes_to_transfer=d.ParamConfig.STRING("normal",{visible_if:{transfer_attributes:1}}),t.add_id_attribute=d.ParamConfig.BOOLEAN(1),t}return r.__extends(t,e),t}(d.NodeParamsConfig)),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=h,t}return r.__extends(t,e),t.type=function(){return"scatter"},t.displayed_input_names=function(){return["geometry to scatter points onto"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([f.InputCloneMode.NEVER])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,_,d,f,h,m,g,v,y,b,w,x,C,P,E,O,T,N,j,A,S,M,k=this;return r.__generator(this,(function(r){switch(r.label){case 0:for(t=e[0],n=t.faces(),o=[],_=0,d=new Map,f=0,h=n;f<h.length;f++)w=h[f],m=w.area,d.set(w.index,m);for(g=u.default(n,(function(e){return d.get(e.index)})),v=0,y=0,b=g;y<b.length;y++)w=b[y],_+=d.get(w.index),o[v]=_,v++;for(x=[],C=[],this.pv.transfer_attributes&&(C=t.attrib_names_matching_mask(this.pv.attributes_to_transfer)),P=new Map,E=new Map,O=0,T=C;O<T.length;O++)S=T[O],P.set(S,[]),E.set(S,t.attrib_size(S));return[4,(new p.CoreIterator).start_with_count(this.pv.points_count,(function(e){for(var t=c.CoreMath.rand_float(k.pv.seed+e)*_,n=0;n<o.length;n++){if(t<=o[n]){var r=g[n],i=r.random_position(t);i.toArray(x,x.length);for(var a=0,u=C;a<u.length;a++){var l=u[a],p=r.attrib_value_at_position(l,i);s.default(p)?P.get(l).push(p):p.toArray(P.get(l),P.get(l).length)}break}}}))];case 1:for(r.sent(),(N=new i.BufferGeometry).setAttribute("position",new i.BufferAttribute(new Float32Array(x),3)),j=0,A=C;j<A.length;j++)S=A[j],N.setAttribute(S,new i.BufferAttribute(new Float32Array(P.get(S)),E.get(S)));return this.pv.add_id_attribute&&(M=a.default(this.pv.points_count),N.setAttribute("id",new i.BufferAttribute(new Float32Array(M),1))),this.set_geometry(N,l.CoreConstant.OBJECT_TYPE.POINTS),[2]}}))}))},t}(_.TypedSopNode);t.ScatterSopNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(17),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cast_shadow=a.ParamConfig.BOOLEAN(1),t.receive_shadow=a.ParamConfig.BOOLEAN(1),t.apply_to_children=a.ParamConfig.BOOLEAN(0),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"shadows"},t.displayed_input_names=function(){return["objects to change shadows properties of"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a=this;return r.__generator(this,(function(r){for(t=e[0],n=0,o=t.objects();n<o.length;n++)i=o[n],this.pv.apply_to_children?i.traverse((function(e){e.castShadow=a.pv.cast_shadow,e.receiveShadow=a.pv.receive_shadow})):(i.castShadow=this.pv.cast_shadow,i.receiveShadow=this.pv.receive_shadow);return console.log(t.objects()),this.set_core_group(t),[2]}))}))},t}(o.TypedSopNode);t.ShadowsSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(12),i=r.__importDefault(n(80)),a=r.__importDefault(n(991)),s=r.__importDefault(n(85)),u=n(13),_=n(213),l=n(309),c=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(n(9).NodeParamsConfig)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t}return r.__extends(t,e),t.type=function(){return"skin"},t.displayed_input_names=function(){return["lines to create polygons from","if used, lines from both inputs will be used"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1,2)},t.prototype.cook=function(e){switch(s.default(this.io.inputs.inputs()).length){case 1:return this.process_one_input(e);case 2:return this.process_two_inputs(e);default:return this.states.error.set("inputs count not valid")}},t.prototype.process_one_input=function(e){var t=this,n=e[0],r=this._get_line_segments(n),o=[];if(r){var i=r[0];if(i){var a=_.CoreGeometryUtilCurve.line_segment_to_geometries(i.geometry);a.forEach((function(e,n){if(n>0){var r=a[n-1],i=t._skin(r,e);o.push(i)}}))}}this.set_geometries(o)},t.prototype.process_two_inputs=function(e){var t=this,n=e[0],r=e[1],o=this._get_line_segments(n),s=this._get_line_segments(r),u=a.default(i.default([o,s],(function(e){return e.length}))),_=u[0],l=u[1],c=[];_.forEach((function(e,n){var r=l[n];if(null!=e&&null!=r){var o=e.geometry,i=r.geometry,a=t._skin(o,i);c.push(a)}})),this.set_geometries(c)},t.prototype._get_line_segments=function(e){return e.objects().filter((function(e){return e.isLineSegments}))},t.prototype._skin=function(e,t){var n=new o.BufferGeometry;return new l.CoreGeometryOperationSkin(n,e,t).process(),n},t}(u.TypedSopNode);t.SkinSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(209),a=n(300),s=n(13);!function(e){e.DEFAULT="default",e.ISOCAHEDRON="isocahedron"}(r||(r={}));var u={default:0,isocahedron:1},_=[r.DEFAULT,r.ISOCAHEDRON],l=n(9),c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=l.ParamConfig.INTEGER(u.default,{menu:{entries:_.map((function(e){return{name:e,value:u[e]}}))}}),t.radius=l.ParamConfig.FLOAT(1,{visible_if:{type:u.default}}),t.resolution=l.ParamConfig.VECTOR2([8,6],{visible_if:{type:u.default}}),t.open=l.ParamConfig.BOOLEAN(0,{visible_if:{type:u.default}}),t.angle_range_x=l.ParamConfig.VECTOR2([0,"$PI*2"],{visible_if:{type:u.default,open:!0}}),t.angle_range_y=l.ParamConfig.VECTOR2([0,"$PI*2"],{visible_if:{type:u.default,open:!0}}),t.detail=l.ParamConfig.INTEGER(1,{range:[0,5],range_locked:[!0,!1],visible_if:{type:u.isocahedron}}),t.center=l.ParamConfig.VECTOR3([0,0,0]),t}return o.__extends(t,e),t}(l.NodeParamsConfig)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=c,t}return o.__extends(t,e),t.type=function(){return"sphere"},t.prototype.cook=function(){var e;(e=this.pv.type==u.default?this._create_default_sphere():this._create_default_isocahedron()).translate(this.pv.center.x,this.pv.center.y,this.pv.center.z),this.set_geometry(e)},t.prototype._create_default_sphere=function(){return this.pv.open?new i.SphereBufferGeometry(this.pv.radius,this.pv.resolution.x,this.pv.resolution.y,this.pv.angle_range_x.x,this.pv.angle_range_x.y,this.pv.angle_range_y.x,this.pv.angle_range_y.y):new i.SphereBufferGeometry(this.pv.radius,this.pv.resolution.x,this.pv.resolution.y)},t.prototype._create_default_isocahedron=function(){return new a.IcosahedronBufferGeometry(this.pv.radius,this.pv.detail)},t}(s.TypedSopNode);t.SphereSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i="geometry to switch to",a=n(9),s=n(17),u=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.input=a.ParamConfig.INTEGER(0,{range:[0,3],range_locked:[!0,!0]}),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=u,t}return r.__extends(t,e),t.type=function(){return"switch"},t.displayed_input_names=function(){return[i,i,i,i]},t.prototype.initialize_node=function(){this.io.inputs.set_count(0,4),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.NEVER,s.InputCloneMode.NEVER,s.InputCloneMode.NEVER,s.InputCloneMode.NEVER]),this.ui_data.set_width(100),this.cook_controller.disallow_inputs_evaluation()},t.prototype.cook=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return e=this.pv.input,this.io.inputs.has_input(e)?[4,this.container_controller.request_input_container(e)]:[3,2];case 1:return t=n.sent(),this.set_core_group(t.core_content()),[3,3];case 2:this.states.error.set("no input "+e),n.label=3;case 3:return[2]}}))}))},t}(o.TypedSopNode);t.SwitchSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=o.__importDefault(n(86)),a=n(13),s=n(36),u=n(303),_=n(12),l=n(304),c=n(1026),p=n(10),d=n(211),f=n(1023);!function(e){e.MESH="mesh",e.FLAT="flat",e.LINE="line",e.STROKE="stroke"}(r=t.TEXT_TYPE||(t.TEXT_TYPE={})),t.TEXT_TYPES=[r.MESH,r.FLAT,r.LINE,r.STROKE];var h=n(9),m=new(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.font=h.ParamConfig.STRING(""),n.text=h.ParamConfig.STRING("polygonjs",{multiline:!0}),n.type=h.ParamConfig.INTEGER(0,{menu:{entries:t.TEXT_TYPES.map((function(e,t){return{name:e,value:t}}))}}),n.size=h.ParamConfig.FLOAT(1,{range:[0,1],range_locked:[!0,!1]}),n.extrude=h.ParamConfig.FLOAT(.1,{visible_if:{type:t.TEXT_TYPES.indexOf(r.MESH)}}),n.segments=h.ParamConfig.INTEGER(1,{range:[1,20],range_locked:[!0,!1],visible_if:{type:t.TEXT_TYPES.indexOf(r.MESH)}}),n.stroke_width=h.ParamConfig.FLOAT(.02,{visible_if:{type:t.TEXT_TYPES.indexOf(r.STROKE)}}),n}return o.__extends(n,e),n}(h.NodeParamsConfig)),g=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=m,t._font_loader=new c.FontLoader,t._loaded_fonts={},t}return o.__extends(a,e),a.type=function(){return"text"},a.prototype.initialize_node=function(){},a.prototype.cook=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e=this._loaded_fonts,n=this.pv.font,(i=this._loaded_fonts[this.pv.font])?[3,2]:[4,this._load_url(this.pv.font)];case 1:i=o.sent(),o.label=2;case 2:return e[n]=i,[3,4];case 3:return o.sent(),this.states.error.set("count not load font ("+this.pv.font+")"),[2];case 4:if(a=this._loaded_fonts[this.pv.font])switch(t.TEXT_TYPES[this.pv.type]){case r.MESH:return[2,this._create_geometry_from_type_mesh(a)];case r.FLAT:return[2,this._create_geometry_from_type_flat(a)];case r.LINE:return[2,this._create_geometry_from_type_line(a)];case r.STROKE:return[2,this._create_geometry_from_type_stroke(a)];default:console.warn("type is not valid")}return[2]}}))}))},a.prototype._create_geometry_from_type_mesh=function(e){var t=this.displayed_text(),n={font:e,size:this.pv.size,height:this.pv.extrude,curveSegments:this.pv.segments};try{var r=new u.TextBufferGeometry(t,n);if(!r.index){var o=r.getAttribute("position").array;r.setIndex(i.default(o.length/3))}this.set_geometry(r)}catch(e){this.states.error.set("failed to generate geometry. Try to remove some characters")}},a.prototype._create_geometry_from_type_flat=function(e){var t=this._get_shapes(e);if(t){var n=new l.ShapeBufferGeometry(t);this.set_geometry(n)}},a.prototype._create_geometry_from_type_line=function(e){var t=this.shapes_from_font(e);if(t){for(var n=[],r=[],o=0,i=0;i<t.length;i++)for(var a=t[i].getPoints(),u=0;u<a.length;u++){var l=a[u];n.push(l.x),n.push(l.y),n.push(0),r.push(o),u>0&&u<a.length-1&&r.push(o),o+=1}var c=new _.BufferGeometry;c.setAttribute("position",new p.Float32BufferAttribute(n,3)),c.setIndex(r),this.set_geometry(c,s.CoreConstant.OBJECT_TYPE.LINE_SEGMENTS)}},a.prototype._create_geometry_from_type_stroke=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a,s,u,_,l,c;return o.__generator(this,(function(o){switch(o.label){case 0:return(t=this.shapes_from_font(e))?(n=this,(r=this._svg_loader)?[3,2]:[4,this._load_svg_loader()]):[3,3];case 1:r=o.sent(),o.label=2;case 2:for(n._svg_loader=r,i=this._svg_loader.getStrokeStyle(this.pv.stroke_width,"white","miter","butt",4),a=[],s=0;s<t.length;s++)u=t[s],_=u.getPoints(),12,.001,l=this._svg_loader.pointsToStroke(_,i,12,.001),a.push(l);c=d.BufferGeometryUtils.mergeBufferGeometries(a),this.set_geometry(c),o.label=3;case 3:return[2]}}))}))},a.prototype.shapes_from_font=function(e){var t=this._get_shapes(e);if(t){for(var n=[],r=0;r<t.length;r++){var o=t[r];if(o.holes&&o.holes.length>0)for(var i=0;i<o.holes.length;i++){var a=o.holes[i];n.push(a)}}return t.push.apply(t,n),t}},a.prototype._get_shapes=function(e){var t=this.displayed_text();try{return e.generateShapes(t,this.pv.size)}catch(e){this.states.error.set("failed to generate geometry. Try to remove some characters")}},a.prototype.displayed_text=function(){return this.pv.text||""},a.prototype._load_url=function(e){""===e&&(e="/fonts/droid_sans_regular.typeface.json");var t=e.split("?")[0].split("."),n=t[t.length-1];switch(e=e+"?"+Date.now(),n){case"ttf":return this._load_ttf(e);case"json":return this._load_json(e);default:return null}},a.prototype._load_ttf=function(e){var t=this;return new Promise((function(n,r){return o.__awaiter(t,void 0,void 0,(function(){var t,i,a=this;return o.__generator(this,(function(o){switch(o.label){case 0:return t=this,(i=this._ttf_loader)?[3,2]:[4,this._load_ttf_loader()];case 1:i=o.sent(),o.label=2;case 2:return t._ttf_loader=i,window.opentype=f,this._ttf_loader.load(e,(function(e){var t=a._font_loader.parse(e);n(t)}),void 0,(function(){r()})),[2]}}))}))}))},a.prototype._load_json=function(e){var t=this;return new Promise((function(n,r){t._font_loader.load(e,(function(e){n(e)}),void 0,(function(){r()}))}))},a.prototype._load_ttf_loader=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve().then((function(){return o.__importStar(n(840))}))];case 1:return e=t.sent().TTFLoader,[2,new e]}}))}))},a.prototype._load_svg_loader=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then((function(){return o.__importStar(n(992))}))];case 1:return[2,e.sent().SVGLoader]}}))}))},a}(a.TypedSopNode);t.TextSopNode=g},function(e,t,n){"use strict";n.r(t),n.d(t,"TTFLoader",(function(){return i}));var r=n(44),o=n(28),i=function(e){o.a.call(this,e),this.reversed=!1};i.prototype=Object.assign(Object.create(o.a.prototype),{constructor:i,load:function(e,t,n,o){var i=this,a=new r.a(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.load(e,(function(e){t(i.parse(e))}),n,o)},parse:function(e){function t(e){var t,n=[];e.forEach((function(e){"m"===e.type.toLowerCase()?(t=[e],n.push(t)):"z"!==e.type.toLowerCase()&&t.push(e)}));var r=[];return n.forEach((function(e){var t={type:"m",x:e[e.length-1].x,y:e[e.length-1].y};r.push(t);for(var n=e.length-1;n>0;n--){var o=e[n];t={type:o.type};void 0!==o.x2&&void 0!==o.y2?(t.x1=o.x2,t.y1=o.y2,t.x2=o.x1,t.y2=o.y1):void 0!==o.x1&&void 0!==o.y1&&(t.x1=o.x1,t.y1=o.y1),t.x=e[n-1].x,t.y=e[n-1].y,r.push(t)}})),r}return"undefined"==typeof opentype?(console.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function(e,n){for(var r=Math.round,o={},i=1e5/(72*(e.unitsPerEm||2048)),a=e.encoding.cmap.glyphIndexMap,s=Object.keys(a),u=0;u<s.length;u++){var _=s[u],l=e.glyphs.glyphs[a[_]];if(void 0!==_){var c={ha:r(l.advanceWidth*i),x_min:r(l.xMin*i),x_max:r(l.xMax*i),o:""};n&&(l.path.commands=t(l.path.commands)),l.path.commands.forEach((function(e){"c"===e.type.toLowerCase()&&(e.type="b"),c.o+=e.type.toLowerCase()+" ",void 0!==e.x&&void 0!==e.y&&(c.o+=r(e.x*i)+" "+r(e.y*i)+" "),void 0!==e.x1&&void 0!==e.y1&&(c.o+=r(e.x1*i)+" "+r(e.y1*i)+" "),void 0!==e.x2&&void 0!==e.y2&&(c.o+=r(e.x2*i)+" "+r(e.y2*i)+" ")})),o[String.fromCodePoint(l.unicode)]=c}}return{glyphs:o,familyName:e.getEnglishName("fullName"),ascender:r(e.ascender*i),descender:r(e.descender*i),underlinePosition:e.tables.post.underlinePosition,underlineThickness:e.tables.post.underlineThickness,boundingBox:{xMin:e.tables.head.xMin,xMax:e.tables.head.xMax,yMin:e.tables.head.yMin,yMax:e.tables.head.yMax},resolution:1e3,original_font_information:e.tables.name}}(opentype.parse(e),this.reversed)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(302),i=n(13),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.radius=a.ParamConfig.FLOAT(1,{range:[0,1]}),t.radius_tube=a.ParamConfig.FLOAT(1,{range:[0,1]}),t.segments_radial=a.ParamConfig.INTEGER(20,{range:[1,50],range_locked:[!0,!1]}),t.segments_tube=a.ParamConfig.INTEGER(12,{range:[1,50],range_locked:[!0,!1]}),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"torus"},t.prototype.initialize_node=function(){},t.prototype.cook=function(){var e=this.pv.radius,t=this.pv.radius_tube,n=this.pv.segments_radial,r=this.pv.segments_tube,i=new o.TorusBufferGeometry(e,t,n,r);this.set_geometry(i)},t}(i.TypedSopNode);t.TorusSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o={TorusKnotBufferGeometry:n(301).TorusKnotBufferGeometry},i=n(13),a=n(9),s=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.radius=a.ParamConfig.FLOAT(1),t.radius_tube=a.ParamConfig.FLOAT(1),t.segments_radial=a.ParamConfig.INTEGER(64,{range:[1,128]}),t.segments_tube=a.ParamConfig.INTEGER(8,{range:[1,32]}),t.p=a.ParamConfig.INTEGER(2,{range:[1,10]}),t.q=a.ParamConfig.INTEGER(3,{range:[1,10]}),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=s,t}return r.__extends(t,e),t.type=function(){return"torus_knot"},t.prototype.initialize_node=function(){},t.prototype.cook=function(){var e=this.pv.radius,t=this.pv.radius_tube,n=this.pv.segments_radial,r=this.pv.segments_tube,i=this.pv.p,a=this.pv.q,s=new o.TorusKnotBufferGeometry(e,t,n,r,i,a);this.set_geometry(s)},t}(i.TypedSopNode);t.TorusKnotSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(296),a=n(83),s=n(17),u=n(9),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.group=u.ParamConfig.STRING(""),t.t=u.ParamConfig.VECTOR3([0,0,0]),t.r=u.ParamConfig.VECTOR3([0,0,0]),t.s=u.ParamConfig.VECTOR3([1,1,1]),t.scale=u.ParamConfig.FLOAT(1),t.look_at=u.ParamConfig.OPERATOR_PATH(""),t.up=u.ParamConfig.VECTOR3([0,1,0]),t.pivot=u.ParamConfig.VECTOR3([0,0,0]),t}return r.__extends(t,e),t}(u.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t._core_transform=new a.CoreTransform,t}return r.__extends(t,e),t.type=function(){return"transform"},t.displayed_input_names=function(){return["geometry to transform"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){var t=e[0].objects(),n=this._core_transform.matrix(this.pv.t,this.pv.r,this.pv.s,this.pv.scale);if(""===this.pv.group)for(var r=0,o=t;r<o.length;r++){var a=o[r],s=void 0;null!=(s=a.geometry)?(s.translate(-this.pv.pivot.x,-this.pv.pivot.y,-this.pv.pivot.z),s.applyMatrix(n),s.translate(this.pv.pivot.x,this.pv.pivot.y,this.pv.pivot.z)):a.applyMatrix(n)}else for(var u=0,_=i.CoreGroup.from_objects(t).points_from_group(this.pv.group);u<_.length;u++){var l=_[u],c=l.position().sub(this.pv.pivot);c.applyMatrix4(n),l.set_position(c.add(this.pv.pivot))}this.set_objects(t)},t}(o.TypedSopNode);t.TransformSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(4),a=n(142),s=n(83),u=new i.Vector3(0,1,0),_=n(9),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.radius=_.ParamConfig.FLOAT(1,{range:[0,1]}),t.height=_.ParamConfig.FLOAT(1,{range:[0,1]}),t.segments_radial=_.ParamConfig.INTEGER(12,{range:[3,20],range_locked:[!0,!1]}),t.segments_height=_.ParamConfig.INTEGER(1,{range:[1,20],range_locked:[!0,!1]}),t.cap=_.ParamConfig.BOOLEAN(1),t.center=_.ParamConfig.VECTOR3([0,0,0]),t.direction=_.ParamConfig.VECTOR3([0,0,1]),t}return r.__extends(t,e),t}(_.NodeParamsConfig)),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=l,t._core_transform=new s.CoreTransform,t}return r.__extends(t,e),t.type=function(){return"tube"},t.prototype.cook=function(){var e=new a.CylinderBufferGeometry(this.pv.radius,this.pv.radius,this.pv.height,this.pv.segments_radial,this.pv.segments_height,!this.pv.cap);this._core_transform.rotate_geometry(e,u,this.pv.direction),e.translate(this.pv.center.x,this.pv.center.y,this.pv.center.z),this.set_geometry(e)},t}(o.TypedSopNode);t.TubeSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(846),a=n(9),s=n(17),u=n(30),_=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=a.ParamConfig.OPERATOR_PATH("/perspective_camera1",{node_selection:{context:u.NodeContext.OBJ}}),t}return r.__extends(t,e),t}(a.NodeParamsConfig)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=_,t._camera_controller=new i.CameraController(t._update_uvs_from_camera.bind(t)),t}return r.__extends(t,e),t.type=function(){return"uv_project"},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])},t.prototype.cook=function(e){this._processed_core_group=e[0];var t=this.p.camera.found_node();null!=t?(this._camera_object=t.object,this._camera_controller.set_target(this._camera_object)):(this._camera_object=void 0,this._camera_controller.remove_target()),this.set_core_group(this._processed_core_group)},t.prototype._update_uvs_from_camera=function(e){var t=this;if(this._processed_core_group&&this.parent){var n=this._processed_core_group.points(),r=this.parent.object.matrixWorld;n.forEach((function(e){var n=e.position(),o=t._vector_in_camera_space(n,r);if(o){var i={x:1-(.5*o[0]+.5),y:.5*o[1]+.5};e.set_attrib_value("uv",i)}}))}},t.prototype._vector_in_camera_space=function(e,t){if(this._camera_object)return e.applyMatrix4(t),e.project(this._camera_object).toArray()},t}(o.TypedSopNode);t.UvProjectSopNode=l},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CHANGE="change",e.MOVEEND="moveend"}(r||(r={}));var o=function(){function e(e){this._callback=e,this._update_always=!0,this._listener_added=!1,this._listener=this._execute_callback.bind(this)}return e.prototype.remove_target=function(){this.set_target(void 0)},e.prototype.set_target=function(e){e||this._remove_camera_event();var t=this._target;this._target=e,null!=this._target&&this._execute_callback(),(null!=this._target?this._target.uuid:void 0)!==(null!=t?t.uuid:void 0)&&this._add_camera_event()},e.prototype.set_update_always=function(e){this._remove_camera_event(),this._update_always=e,this._add_camera_event()},e.prototype._current_event_name=function(){return this._update_always?r.CHANGE:r.MOVEEND},e.prototype._add_camera_event=function(){this._listener_added||null!=this._target&&(this._target.addEventListener(this._current_event_name(),this._listener),this._listener_added=!0)},e.prototype._remove_camera_event=function(){!0===this._listener_added&&null!=this._target&&(this._target.removeEventListener(this._current_event_name(),this._listener),this._listener_added=!1)},e.prototype._execute_callback=function(){null!=this._target&&this._callback(this._target)},e}();t.CameraController=o},function(e){e.exports=JSON.parse('{"properties":{"frame":600,"frame_range":[1,600],"frame_range_locked":[true,true],"fps":60,"master_camera_node_path":"/perspective_camera1"},"root":{"type":"obj","nodes":{"MAT":{"type":"materials","nodes":{"mesh_standard1":{"type":"mesh_standard","params":{"map":"/COP/OUT_diffuse","env_map":"/COP/OUT_env","metalness":0.01},"inputs":[]},"mesh_basic_builder1":{"type":"mesh_basic_builder","nodes":{"output1":{"type":"output","params":{},"inputs":[{"name":"color","node":"float_to_vec3_1","output":"vec3"}]},"globals1":{"type":"globals","params":{},"inputs":[]},"constant1":{"type":"constant","params":{"type":"4","value_vec3":[0,0.3,0]},"inputs":[]},"attribute1":{"type":"attribute","params":{"name":"above"},"inputs":[]},"param1":{"type":"param","params":{"name":"z","type":"2"},"inputs":[]},"float_to_vec3_1":{"type":"float_to_vec3","params":{},"inputs":[{"name":"x","node":"constant2","output":"float"},{"name":"y","node":"attribute1","output":"val"},{"name":"z","node":"param1","output":"val"}]},"constant2":{"type":"constant","params":{"type":"2","value_float":"0.22","value_vec3":[0,0.3,0]},"inputs":[]}},"children_context":"gl","params":{},"inputs":[],"selection":[]}},"children_context":"mat","params":{},"inputs":[],"selection":[]},"events1":{"type":"events","nodes":{"camera_orbit_controls1":{"type":"camera_orbit_controls","params":{},"inputs":[]},"camera_orbit_controls2":{"type":"camera_orbit_controls","params":{"allow_pan":false,"allow_zoom":false},"inputs":[]}},"children_context":"event","params":{},"inputs":[],"selection":[]},"perspective_camera1":{"type":"perspective_camera","params":{"controls":"/events1/camera_orbit_controls1","target":[-0.18931128979003603,0.42336979919346196,0.07064319279199466],"fov":55.29,"t":[0.3518023580563496,1.406963405614519,4.863326477077998],"r":[-11.597671442852416,6.311205900282012,1.29240031842344]},"inputs":[],"flags":{"display":true}},"COP":{"type":"cop","nodes":{"file2":{"type":"file","params":{"url":"/examples/textures/piz_compressed.exr"},"inputs":[],"flags":{}},"file_uv":{"type":"file","params":{},"inputs":[],"flags":{}},"env_map":{"type":"env_map","params":{},"inputs":["switch2"],"flags":{}},"file_uv1":{"type":"file","params":{"url":"/examples/textures/hardwood2_diffuse.jpg"},"inputs":[],"flags":{}},"file3":{"type":"file","params":{"url":"/examples/textures/equirectangular.png"},"inputs":[],"flags":{}},"OUT_diffuse":{"type":"null","params":{},"inputs":["switch1"],"flags":{}},"OUT_env":{"type":"null","params":{},"inputs":["env_map"],"flags":{}},"file4":{"type":"file","params":{"url":"/examples/textures/equirectangular/quarry_01_1k.hdr"},"inputs":[],"flags":{}},"switch1":{"type":"switch","params":{"input":"$F%2"},"inputs":["file_uv","file_uv1"],"flags":{}},"switch2":{"type":"switch","params":{"input":"($F-1)%2"},"inputs":["file2","file4"],"flags":{}}},"children_context":"cop","params":{},"inputs":[],"selection":[]},"null1":{"type":"null","params":{"t":[0,1.1,0],"r":[0,"-$F*5",0]},"inputs":[],"flags":{"display":true}},"geo1":{"type":"geo","nodes":{"box1":{"type":"box","params":{},"inputs":[],"flags":{"display":false}},"plane1":{"type":"plane","params":{"step_size":"0.02"},"inputs":[],"flags":{"display":false}},"sphere1":{"type":"sphere","params":{"resolution":["30","30"]},"inputs":[],"flags":{"display":false}},"merge1":{"type":"merge","params":{},"inputs":["transform1","transform2","transform3"],"flags":{"display":false}},"transform1":{"type":"transform","params":{"scale":7.8},"inputs":["plane1"],"flags":{"display":false}},"transform2":{"type":"transform","params":{},"inputs":["sphere1"],"flags":{"display":false}},"transform3":{"type":"transform","params":{"t":[2.1,0,0]},"inputs":["box1"],"flags":{"display":false}},"material1":{"type":"material","params":{"material":"/MAT/mesh_lambert1"},"inputs":["merge1"],"flags":{"display":false}},"material2":{"type":"material","params":{},"inputs":["sphere1"],"flags":{"display":false}},"transform4":{"type":"transform","params":{"t":[0,0.5,0]},"inputs":["material2"],"flags":{"display":false}},"switch1":{"type":"switch","params":{"input":"round($F*0.5)%2"},"inputs":["material2","transform4"],"flags":{"display":false}},"material3":{"type":"material","params":{"material":"/MAT/mesh_basic_builder1"},"inputs":["noise1"],"flags":{"display":true}},"noise1":{"type":"noise","params":{"amount":0.13,"use_normals":true},"inputs":["attrib_create1"],"flags":{"display":false}},"attrib_create1":{"type":"attrib_create","params":{"name":"above","value1":"@P.y > 0"},"inputs":["sphere1"],"flags":{"display":false}}},"children_context":"sop","params":{},"inputs":[],"flags":{"display":true},"selection":["material3"]},"point_light1":{"type":"point_light","params":{"t":[2.2,0,0],"color":[1,0,0]},"inputs":["null1"],"flags":{"display":false}},"hemisphere_light1":{"type":"hemisphere_light","params":{"sky_color":[0.2,0.6980392156862745,1],"ground_color":[0.09803921568627451,0.09803921568627451,0.24705882352941178],"position":[0.1,1,-0.2]},"inputs":[],"flags":{"display":false}},"null2":{"type":"null","params":{},"inputs":["point_light1"],"flags":{"display":true}},"null3":{"type":"null","params":{"t":[0,1.2000000000000002,1.3]},"inputs":[],"flags":{"display":true}},"spot_light1":{"type":"spot_light","params":{"t":[1.2000000000000002,2,0],"r":[-15,0,0],"angle":46.87},"inputs":["null4"],"flags":{"display":false}},"null4":{"type":"null","params":{"t":[0,0,2.6]},"inputs":["null1"],"flags":{"display":true}},"directional_light1":{"type":"directional_light","params":{"t":[0.40000000000000013,2.3,1.5999999999999999],"r":[-31,0,0],"color":["1+0.5*sin($F*0.1)","1+0.5*cos($F*0.2)",1]},"inputs":["null4"],"flags":{"display":true}},"ambient_light1":{"type":"ambient_light","params":{},"inputs":[],"flags":{"display":true}},"orthographic_camera1":{"type":"orthographic_camera","params":{},"inputs":[],"flags":{"display":true}},"perspective_camera2":{"type":"perspective_camera","params":{"background_color":[1,1,1]},"inputs":["null4"],"flags":{"display":true}}},"children_context":"objects","selection":["geo1"]},"ui":{"nodes":{"MAT":{"pos":[-250,100],"nodes":{"mesh_standard1":{"pos":[0,150]},"mesh_basic_builder1":{"pos":[0,50],"nodes":{"output1":{"pos":[250,100]},"globals1":{"pos":[-100,150]},"constant1":{"pos":[-250,0]},"attribute1":{"pos":[-100,-50]},"param1":{"pos":[-100,350]},"float_to_vec3_1":{"pos":[150,-100]},"constant2":{"pos":[-100,-150]}}}}},"events1":{"pos":[-250,0],"nodes":{"camera_orbit_controls1":{"pos":[-50,150]},"camera_orbit_controls2":{"pos":[-50,300]}}},"perspective_camera1":{"pos":[-250,-150]},"COP":{"pos":[-250,200],"nodes":{"file2":{"pos":[50,50]},"file_uv":{"pos":[-300,50]},"env_map":{"pos":[150,300]},"file_uv1":{"pos":[-150,50]},"file3":{"pos":[200,50]},"OUT_diffuse":{"pos":[-250,350]},"OUT_env":{"pos":[150,400]},"file4":{"pos":[350,50]},"switch1":{"pos":[-250,200]},"switch2":{"pos":[150,200]}}},"null1":{"pos":[250,-450]},"geo1":{"pos":[0,-500],"nodes":{"box1":{"pos":[-500,50]},"plane1":{"pos":[-900,-50]},"sphere1":{"pos":[50,-200]},"merge1":{"pos":[-800,250]},"transform1":{"pos":[-900,100]},"transform2":{"pos":[-700,50]},"transform3":{"pos":[-500,150]},"material1":{"pos":[-850,450]},"material2":{"pos":[0,300]},"transform4":{"pos":[200,350]},"switch1":{"pos":[0,500]},"material3":{"pos":[450,200]},"noise1":{"pos":[450,50]},"attrib_create1":{"pos":[450,-50]}}},"point_light1":{"pos":[400,-300]},"hemisphere_light1":{"pos":[450,0]},"null2":{"pos":[350,-150]},"null3":{"pos":[450,-550]},"spot_light1":{"pos":[150,-50]},"null4":{"pos":[50,-300]},"directional_light1":{"pos":[-50,-150]},"ambient_light1":{"pos":[300,50]},"orthographic_camera1":{"pos":[-250,-250]},"perspective_camera2":{"pos":[-450,-50]}}}}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(273),i=n(310),a=function(){function e(e){this._data=e}return e.load_data=function(t){return new e(t).scene()},e.prototype.scene=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(e=new o.PolyScene).loading_controller.mark_as_loading(),(t=this._data.properties)&&(e.set_frame(t.frame||1),n=t.frame_range||[],e.time_controller.set_frame_range(n[0]||1,n[1]||100),(a=t.frame_range_locked)&&e.time_controller.set_frame_range_locked(a[0],a[1]),e.time_controller.set_fps(t.fps||30),t.master_camera_node_path&&e.cameras_controller.set_master_camera_node_path(t.master_camera_node_path)),e.cooker.block(),s=i.JsonImportDispatcher.dispatch_node(e.root),this._data.root&&s.process_data(this._data.root),this._data.ui&&s.process_ui_data(this._data.ui),[4,e.loading_controller.mark_as_loaded()];case 1:return r.sent(),e.cooker.unblock(),[2,e]}}))}))},e}();t.SceneJsonImporter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(51)),i=r.__importDefault(n(232)),a=r.__importDefault(n(102)),s=r.__importDefault(n(47)),u=r.__importDefault(n(29)),_=n(6),l=n(310),c=function(){function e(e){this._node=e}return e.prototype.process_data=function(e){if(this.create_nodes(e.nodes),this.set_selection(e.selection),this._node.io.inputs.override_clonable_state_allowed()){var t=e.override_clonable_state;t&&this._node.io.inputs.set_override_clonable_state(t)}this.set_flags(e),this.set_params(e.params),this.from_data_custom(e),this._node.lifecycle.set_creation_completed()},e.prototype.process_inputs_data=function(e){this.set_inputs(e.inputs)},e.prototype.process_ui_data=function(e){if(e){var t=this._node.ui_data,n=e.pos;if(n){var r=(new _.Vector2).fromArray(n);t.set_position(r)}var o=e.comment;o&&t.set_comment(o),this.process_nodes_ui_data(e.nodes)}},e.prototype.create_nodes=function(e){if(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],i=e[o].type;if(this._node.children_allowed()&&this._node.children_controller)(c=this._node.create_node(i))&&(c.set_name(o),t.push(c))}for(var a=[],s=0,u=0,_=t;u<_.length;u++){var c=_[u],p=l.JsonImportDispatcher.dispatch_node(c);a.push(p),p.process_data(e[c.name]),s++}s=0;for(var d=0,f=t;d<f.length;d++){c=f[d];(p=a[s]).process_inputs_data(e[c.name]),s++}}},e.prototype.set_selection=function(e){var t=this;if(this._node.children_allowed()&&this._node.children_controller&&e&&e.length>0){var n=[];e.forEach((function(e){var r=t._node.node(e);r&&n.push(r)})),this._node.children_controller.selection.set(n)}},e.prototype.set_flags=function(e){var t,n,r,o,i=e.flags;if(i){var a=i.bypass;null!=a&&(null===(n=null===(t=this._node.flags)||void 0===t?void 0:t.bypass)||void 0===n||n.set(a));var s=i.display;null!=s&&(null===(o=null===(r=this._node.flags)||void 0===r?void 0:r.display)||void 0===o||o.set(s))}},e.prototype.set_inputs=function(e){var t=this;e&&e.forEach((function(e,n){if(e&&t._node.parent)if(o.default(e)){var r=e,i=t._node.parent.node(r);t._node.set_input(n,i)}else{i=t._node.parent.node(e.node);var a=e.name;t._node.io.inputs.has_named_input(a)?t._node.set_input(e.name,i,e.output):console.warn(t._node.full_path()+" has no input named "+a)}}))},e.prototype.process_nodes_ui_data=function(e){var t=this;e&&Object.keys(e).forEach((function(n){var r=t._node.node(n);if(r){var o=e[n];l.JsonImportDispatcher.dispatch_node(r).process_ui_data(o)}}))},e.prototype.set_params=function(e){if(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],o=e[r];this._is_param_data_complex(o)?this._process_param_data_complex(r,o):this._process_param_data_simple(r,o)}this._node.params.run_on_scene_load_hooks()}},e.prototype._process_param_data_simple=function(e,t){var n;null===(n=this._node.params.get(e))||void 0===n||n.set(t)},e.prototype._process_param_data_complex=function(e,t){var n,r=this._node.params.has_param(e),o=t.type,i=!1;if(r&&((n=this._node.params.get(e))&&n.type==o||null==o)&&(i=!0),i)(n=this._node.params.get(e))&&l.JsonImportDispatcher.dispatch_param(n).process_data(t);else{var a=t.options;if(a&&o)!0===a.spare&&t.default_value&&(r&&this._node.params.delete_param(e),(n=this._node.add_param(o,e,t.default_value,a))&&l.JsonImportDispatcher.dispatch_param(n).process_data(t))}},e.prototype._is_param_data_complex=function(e){return!(o.default(e)||s.default(e)||u.default(e)||i.default(e))&&!(!a.default(e)||!Object.keys(e).includes("type"))},e.prototype.from_data_custom=function(e){},e}();t.NodeJsonImporter=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(e){},t}(n(174).ParamJsonImporter);t.ParamMultipleJsonImporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(174),i=/\\n+/g,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(e){var t=e.raw_input;void 0!==t&&(t=t.replace(i,"\n"),this._param.set(t))},t}(o.ParamJsonImporter);t.ParamStringJsonImporter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(e){var t=e.raw_input;t&&this._param.set(t)},t}(n(174).ParamJsonImporter);t.ParamRampJsonImporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._commands=[],this._index=0,this._index_at_scene_save=0}return e.instance=function(){return this._instance=this._instance||new e},Object.defineProperty(e.prototype,"scene_modified",{get:function(){return this._index!=this._index_at_scene_save},enumerable:!0,configurable:!0}),e.prototype.mark_scene_as_saved=function(){this._index_at_scene_save=this._index},e.prototype.push_command=function(e){this._commands.length>this._index&&(this._commands=this._commands.splice(0,this._index)),this._commands.push(e),this._index=this._commands.length,e.do()},e.prototype.undo=function(){var e=this._commands[this._index-1];e?(this._index-=1,e.undo()):console.log("nothing to undo")},e.prototype.redo=function(){var e=this._commands[this._index];e?(this._index+=1,e.do()):console.log("nothing to redo")},e}();t.HistoryStack=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(311),o=function(){function e(e){this._nodes=e,this._lines=[]}return e.prototype.process=function(e,t){return this._lines=[],this.add_process(e,t),this._lines},e.prototype.process_with_existing_nodes=function(e,t,n){return this._lines=[],this.add_existing_nodes(e,t),this.add_process(t,n),this._lines},e.prototype.add_process=function(e,t){var n=this;e&&(this.multi_push(this.create_function_declare(e)),this.multi_push(this.create_function_call(e))),this._nodes.forEach((function(e){n.multi_push(r.CodeExporterDispatcher.dispatch_node(e).set_up({position_x_offset:t}))}))},e.prototype.add_existing_nodes=function(e,t){var n=this;e.children().forEach((function(e){var o="var "+r.CodeExporterDispatcher.dispatch_node(e).var_name()+" = "+t+".node('"+e.name+"')";n._lines.push(o)}))},e.prototype.create_function_declare=function(e){var t=[];return this._nodes.forEach((function(n){r.CodeExporterDispatcher.dispatch_node(n).create_function_declare(e).forEach((function(e){t.push(e)}))})),t},e.prototype.create_function_call=function(e){var t=[];return this._nodes.forEach((function(n){var o=r.CodeExporterDispatcher.dispatch_node(n).create_function_call(e);t.push(o)})),t},e.prototype.multi_push=function(e){var t=this;e.forEach((function(e){t._lines.push(e)}))},e}();t.NodesCodeExporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(t.MouseButton||(t.MouseButton={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(20),i=n(853);!function(e){e.PRESS="on_key_press",e.DOWN="on_key_down",e.UP="on_key_up"}(r||(r={}));var a=function(){function e(){this._active=!1,this._on_keypress_bound=this._on_keypress.bind(this),this._on_keydown_bound=this._on_keydown.bind(this),this._on_keyup_bound=this._on_keyup.bind(this),this.activate()}return e.instance=function(){return this._instance=this._instance||new e},e.activate=function(){this.instance().activate()},e.prototype.activate=function(){this._active||(this._active=!0,document.addEventListener("keypress",this._on_keypress_bound),document.addEventListener("keydown",this._on_keydown_bound),document.addEventListener("keyup",this._on_keyup_bound))},e.deactivate=function(){this.instance().deactivate()},e.prototype.deactivate=function(){this._active&&(this._active=!1,document.removeEventListener("keypress",this._on_keypress_bound),document.removeEventListener("keydown",this._on_keydown_bound),document.removeEventListener("keyup",this._on_keyup_bound))},e.prototype.register_processor=function(e){this._processor=e},e.prototype.deregister_processor=function(e){e===this._processor&&(this._processor=void 0)},e.prototype._on_keypress=function(e){this._process_on_key_event(e,r.PRESS)},e.prototype._on_keydown=function(e){this._process_on_key_event(e,r.DOWN)},e.prototype._on_keyup=function(e){this._process_on_key_event(e,r.UP)},e.prototype._process_on_key_event=function(e,t){var n=!1;if(this._processor){var r=this._processor[t];r&&(n=r(e))}n||this[t](e)},e.prototype.on_key_press=function(e){switch(e.key){case"u":return o.StoreController.editor.go_up();case"i":return o.StoreController.editor.go_down();case"y":if(e.ctrlKey)return i.HistoryStack.instance().redo();break;case"z":if(e.ctrlKey)return i.HistoryStack.instance().undo();break;default:switch(e.code){case"Space":return o.StoreController.scene.time_controller.toggle_play_pause()}}},e.prototype.on_key_down=function(e){var t=o.StoreController.scene;switch(e.key){case"s":if(e.ctrlKey)return e.preventDefault(),o.StoreController.save_scene(),!1;break;case"ArrowRight":return e.ctrlKey?t.set_frame(t.frame_range[1]):t.time_controller.increment_frame();case"ArrowLeft":return e.ctrlKey?t.set_frame(t.frame_range[0]):t.time_controller.decrement_frame()}},e.prototype.on_key_up=function(e){return"Escape"==e.key&&o.StoreController.close_all_popups(),!1},e}();t.KeyEventsDispatcher=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t,n){var r=e.call(this)||this;return r._node=t,r._new_name=n,r._old_name=r._node.name,r}return r.__extends(t,e),t.prototype.do=function(){this._node.set_name(this._new_name)},t.prototype.undo=function(){this._node.set_name(this._old_name)},t}(n(141).BaseCommand);t.NodeSetNameCommand=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(344),i=n(236),a=n(82),s=n(136),u=n(76),_=function(e){function t(t){var n=e.call(this)||this;return n._uv_name=t,n}return r.__extends(t,e),t.prototype.set_texture_allocations_controller=function(e){this._texture_allocations_controller=e},t.prototype.handle_globals_node=function(e,t,n){if(this._texture_allocations_controller){var r=e.io.outputs.named_output_connection_points_by_name(t),o=e.gl_var_name(t);if(this._texture_allocations_controller.variable(t)&&r){var a=r.type,s=a+" "+o+" = "+this.read_attribute(e,a,t,n);n.add_body_lines(e,[s])}else this.globals_geometry_handler=this.globals_geometry_handler||new i.GlobalsGeometryHandler,this.globals_geometry_handler.handle_globals_node(e,t,n)}},t.prototype.read_attribute=function(e,t,n,r){if(this._texture_allocations_controller){var o=this._texture_allocations_controller.variable(n);if(!o)return i.GlobalsGeometryHandler.read_attribute(e,t,n,r);this.add_particles_sim_uv_attribute(e,r);var a=o.component,_=o.allocation;if(_){var l=_.texture_name,c=new s.UniformGLDefinition(e,u.ConnectionPointType.SAMPLER_2D,l);return r.add_definitions(e,[c]),"texture2D( "+l+", "+this._uv_name+" )."+a}}},t.prototype.add_particles_sim_uv_attribute=function(e,n){var r=new s.AttributeGLDefinition(e,u.ConnectionPointType.VEC2,t.UV_ATTRIB),o=new s.VaryingGLDefinition(e,u.ConnectionPointType.VEC2,t.UV_VARYING);n.add_definitions(e,[r,o],a.ShaderName.VERTEX),n.add_definitions(e,[o],a.ShaderName.FRAGMENT),n.add_body_lines(e,[t.UV_VARYING+" = "+t.UV_ATTRIB],a.ShaderName.VERTEX)},t.UV_ATTRIB="particles_sim_uv_attrib",t.UV_VARYING="particles_sim_uv_varying",t.PARTICLE_SIM_UV="particleUV",t}(o.GlobalsBaseController);t.GlobalsTextureHandler=_},function(e,t,n){"use strict";n.r(t);var r=n(581),o=n(1),i=n(34),a=n(89),s=n(84),u=n(6),_=n(100),l={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")},c=n(48),p=n(41),d=n(65),f=function(e,t){d.a.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof c.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=p.UniformsUtils.clone(e.uniforms),this.material=new c.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new d.a.FullScreenQuad(this.material)};f.prototype=Object.assign(Object.create(d.a.prototype),{constructor:f,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var h=function(e,t){d.a.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};h.prototype=Object.assign(Object.create(d.a.prototype),{constructor:h,render:function(e,t,n){var r,o,i=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,o=1):(r=1,o=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),a.buffers.stencil.setFunc(i.ALWAYS,r,4294967295),a.buffers.stencil.setClear(o),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(i.EQUAL,1,4294967295),a.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),a.buffers.stencil.setLocked(!0)}});var m=function(){d.a.call(this),this.needsSwap=!1};m.prototype=Object.create(d.a.prototype),Object.assign(m.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}),n.d(t,"EffectComposer",(function(){return g})),n.d(t,"Pass",(function(){return w}));var g=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,stencilBuffer:!1},i=e.getSize(new u.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new _.a(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===l&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===f&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new f(l),this.clock=new r.a};Object.assign(g.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),o=!1,i=this.passes.length;for(n=0;n<i;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,o),t.needsSwap){if(o){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==h&&(t instanceof h?o=!0:t instanceof m&&(o=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new u.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var o=0;o<this.passes.length;o++)this.passes[o].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var v,y,b,w=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(w.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),w.FullScreenQuad=(v=new a.OrthographicCamera(-1,1,1,-1,0,1),y=new s.PlaneBufferGeometry(2,2),b=function(e){this._mesh=new i.Mesh(y,e)},Object.defineProperty(b.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(b.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,v)}}),b)},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Editor full_page_height grid-y",on:{"!contextmenu":function(e){e.preventDefault()}}},[t("PanelNodeSelector"),t("DialogAlert"),t("DialogConfirm"),t("DialogPrompt"),this.full_screen_activated?this._e():t("Retractable",[t("TopBar",{attrs:{scene_update_allowed:this.scene_update_allowed,username:this.username}}),t("NavigationBar")],1),t("MultiplePanel",{ref:"multiple_panel"}),t("PlayBar"),t("NumericSlider"),t("NodeContextMenu"),t("ParamContextMenu")],1)},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TopMenu cell shrink app_header grid-x"},[n("div",{staticClass:"cell shrink"},[n("DropDownMenu",{attrs:{label:"File",entries:e.file_menu_entries},on:{select:e.on_file_menu_entry_select}}),n("DropDownMenu",{attrs:{label:"Edit",entries:e.edit_menu_entries},on:{select:e.on_edit_menu_entry_select}}),e.display_desktop_entries?n("DropDownMenu",{attrs:{label:"Desktop",entries:e.desktop_menu_entries},on:{select:e.on_desktop_menu_entry_select}}):e._e()],1)])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown_menu",class:e.dropdown_menu_class_object,on:{click:e.toggle_display}},[n("div",{class:e.dropdown_menu_label_object,style:e.menu_label_style_object},[e.display_label?n("div",{staticClass:"dropdown_menu_label_content"},[e._v(e._s(e.label))]):e._e(),n("div",{staticClass:"dropdown_menu_pixel",class:e.pixel_class_object},[n("div",{ref:"dropdown_menu_content",staticClass:"dropdown_menu_content",class:e.content_class_object,style:e.content_style_object,on:{mouseleave:e.unset_hovered_entry}},[n("ul",e._l(e.sorted_entries,(function(t,r){return n("li",{key:r,ref:"entry_element",refInFor:!0,on:{mouseenter:function(t){return e.set_hovered_entry_index(r)}}},[n("div",{staticClass:"entry",class:e.entry_class_objects[r],on:{click:function(n){return n.stopPropagation(),e.select(t)}}},[e.has_emphasis?n("span",[n("span",[e._v(e._s(e.entry_labels_pre_emphasis[r]))]),n("span",{staticClass:"emphasis"},[e._v(e._s(e.emphasis))]),n("span",[e._v(e._s(e.entry_labels_post_emphasis[r]))])]):n("span",[n("span",[e._v(e._s(e.entry_labels[r]))])])])])})),0)]),e.hovered_entry_has_children?n("DropDownMenu",{key:e.hovered_entry_id,staticClass:"sub_entries_dropdown",style:e.sub_dropdown_style_object,attrs:{init_position_top:e.sub_dropdown_init_position_top,level:e.level+1,display_label:!1,entries:e.hovered_entry_children,event_id_prefix:e.hovered_entry_id,always_visible:!0,emphasis:e.emphasis},on:{select:e.on_entry_select}}):e._e()],1)])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.display?n("div",{staticClass:"DialogAlert"},[n("Modal",{ref:"modal",attrs:{title:e.title,size:{x:400,y:180},resizable:!1}},[n("div",{staticClass:"full_height_container grid-y"},[n("div",{staticClass:"cell auto text-center message-container"},[e._v(e._s(e.message))]),n("div",{staticClass:"cell shrink text-right"},[n("div",{staticClass:"buttons"},[n("div",{staticClass:"button success",on:{click:e.close}},[e._v("Ok")])])])])])],1):e._e()},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.display?n("div",{staticClass:"DialogConfirm"},[n("Modal",{ref:"modal",attrs:{title:e.question,size:{x:400,y:120},resizable:!1}},[n("div",{staticClass:"full_height_container grid-y"},[n("div",{staticClass:"cell shrink text-center"},[n("div",{staticClass:"buttons"},[n("button",{ref:"cancel_button",staticClass:"button clear",on:{click:e.close}},[e._v("Cancel")]),n("button",{ref:"accept_button",staticClass:"button alert",on:{click:e.accept}},[e._v(e._s(e.accept_label))])])])])])],1):e._e()},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.display?n("div",{staticClass:"DialogPrompt"},[n("Modal",{ref:"modal",attrs:{title:e.title,size:{x:400,y:180},resizable:!1}},[n("div",{staticClass:"full_height_container grid-y"},[n("div",{staticClass:"cell auto"},[n("form",[n("input",{ref:"main_input",attrs:{type:"text"},domProps:{value:e.default_value},on:{keypress:function(t){return t.stopPropagation(),e.on_keypress(t)},keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()}}})])]),n("div",{staticClass:"cell shrink text-right"},[n("div",{staticClass:"buttons"},[n("div",{staticClass:"button clear",on:{click:e.close}},[e._v("Cancel")]),n("div",{staticClass:"button success",on:{click:e.save}},[e._v(e._s(e.confirm_label))])])])])])],1):e._e()},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"element",staticClass:"Panel Multiple cell auto"},[e.is_split?n("div",{class:e.split_container_class_object},[n("div",{staticClass:"cell",style:e.cell_style_objects[0]},[n("div",{staticClass:"full_height_container grid-y"},[n("MultiplePanel",{ref:"split_panel0",attrs:{level:e.level+1,init_properties:e.split_panel_init_properties[0],scene_update_allowed:e.scene_update_allowed,panel_id:e.cell_panel_ids[0]},on:{delete:function(t){return e.delete_split_panel(0)}}})],1)]),n("div",{staticClass:"cell",style:e.cell_style_objects[1]},[n("div",{staticClass:"full_height_container grid-y"},[n("MultiplePanel",{ref:"split_panel1",attrs:{level:e.level+1,init_properties:e.split_panel_init_properties[1],scene_update_allowed:e.scene_update_allowed,panel_id:e.cell_panel_ids[1]},on:{delete:function(t){return e.delete_split_panel(1)}}})],1)]),e.full_screen_activated?e._e():n("div",{staticClass:"split_panel_separator",style:e.split_panel_separator_style_object,on:{mousedown:e.on_move_start}},[n("div",{staticClass:"split_panel_separator_line"})])]):n("div",{staticClass:"full_height_container grid-y"},[e.full_screen_activated?e._e():n("div",{staticClass:"cell shrink panel_tabs"},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell auto"},[n("ul",{staticClass:"no-bullet tab_list"},[e._l(e.panel_types,(function(t,r){return n("li",{staticClass:"tab_item_container",class:e.tab_class_objects[r]},[n("span",{staticClass:"tab_item"},[n("span",{staticClass:"panel_type_name",on:{click:function(t){return e.set_current_panel_index(r)}}},[e._v(e._s(t))]),e.tab_delete_allowed?n("span",{staticClass:"panel_type_close",on:{click:function(t){return e.remove_tab(r)}}},[e._v("")]):e._e()])])})),n("li",{staticClass:"tab_item_container new_panel"},[n("DropDownMenu",{attrs:{label:"+",entries:e.available_panel_types,on_hover:!1,label_padding:e.tab_menu_label_padding},on:{select:e.add_tab}})],1)],2)]),n("div",{staticClass:"cell shrink split_menu_container_container"},[n("div",{staticClass:"split_menu_container"},[n("DropDownMenu",{attrs:{label:"-",entries:e.split_types,on_hover:!1,label_padding:e.tab_menu_label_padding,right_aligned:!0},on:{select:e.set_split_mode}})],1)])])]),n("div",{staticClass:"cell auto panels_container"},[n(e.current_panel_type,{ref:"current_panel",tag:"Component",attrs:{panel_id:e.panel_id,scene_update_allowed:e.scene_update_allowed},on:{created:e.on_component_created}})],1)])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NavigationBar"},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"button-group"},[n("div",{staticClass:"button tiny primary backward",class:e.go_backward_class_object,on:{click:e.go_backward}},[n("v-icon",{attrs:{name:"angle-double-left"}})],1),n("div",{staticClass:"button tiny primary forward",class:e.go_forward_class_object,on:{click:e.go_forward}},[n("v-icon",{attrs:{name:"angle-double-right"}})],1)])]),n("div",{staticClass:"cell auto"},[n("ul",{staticClass:"path_elements"},[n("li",{staticClass:"path_element"},[n("span",{staticClass:"path_element_name",on:{click:function(t){return e.go_to_path("/")}}},[e._v("/")])]),e._l(e.path_elements,(function(t,r){return n("li",{key:r,staticClass:"path_element"},[n("span",{staticClass:"path_element_name",on:{click:function(t){return e.go_to_path_elements_index(r)}}},[e._v(e._s(t))]),r<e.path_elements.length-1?n("span",{staticClass:"path_separator"},[e._v("/")]):e._e()])}))],2)])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Bar Play"},[n("div",{staticClass:"grid-x",attrs:{id:"play_bar"}},[n("div",{ref:"scrubber",staticClass:"cell auto play_bar_scrubber",on:{click:e.scrubber_set_frame,mousedown:e.on_mouse_down}},[n("div",{staticClass:"frame_indicator",style:e.frame_indicator_style_object})]),n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"play_bar_buttons_container grid-x"},[n("div",{staticClass:"cell-shrink"},[n("form",{on:{submit:function(e){e.preventDefault(),e.stopPropagation()}}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.frame,expression:"frame",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.frame},on:{input:function(t){t.target.composing||(e.frame=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),n("div",{staticClass:"cell-shrink play_bar_buttons"},[n("div",{staticClass:"button tiny disable-select",on:{click:e.decrement_frame}},[n("v-icon",{attrs:{name:"angle-left"}})],1),n("div",{staticClass:"button tiny success disable-select",on:{click:e.toggle_play_pause}},[e.playing?n("v-icon",{attrs:{name:"pause"}}):n("v-icon",{attrs:{name:"play"}})],1),n("div",{staticClass:"button tiny disable-select",on:{click:e.increment_frame}},[n("v-icon",{attrs:{name:"angle-right"}})],1)]),n("div",{staticClass:"cell-shrink frame-range"},[n("form",{on:{submit:function(e){e.preventDefault(),e.stopPropagation()}}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.frame_range_start,expression:"frame_range_start",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.frame_range_start},on:{input:function(t){t.target.composing||(e.frame_range_start=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.frame_range_end,expression:"frame_range_end",modifiers:{number:!0}}],attrs:{type:"number",disabled:!e.frame_range_end_locked},domProps:{value:e.frame_range_end},on:{input:function(t){t.target.composing||(e.frame_range_end=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.frame_range_end_locked,expression:"frame_range_end_locked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.frame_range_end_locked)?e._i(e.frame_range_end_locked,null)>-1:e.frame_range_end_locked},on:{change:function(t){var n=e.frame_range_end_locked,r=t.target,o=!!r.checked;if(Array.isArray(n)){var i=e._i(n,null);r.checked?i<0&&(e.frame_range_end_locked=n.concat([null])):i>-1&&(e.frame_range_end_locked=n.slice(0,i).concat(n.slice(i+1)))}else e.frame_range_end_locked=o}}})])])])])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.display?n("div",{staticClass:"NodeSelector"},[n("Modal",{ref:"modal",attrs:{title:"Choose a node:",size:{x:400,y:600}}},[n("div",{staticClass:"full_height_container grid-y"},[n("div",{staticClass:"cell auto"},[n("NodeTree",{attrs:{graph_node_id:e.root_id,node_context:e.node_context,selected_graph_node_id:e.selected_graph_node_id,init_expanded:!0},on:{select:e.on_select}})],1),n("div",{staticClass:"cell shrink text-right"},[n("div",{staticClass:"buttons"},[n("div",{staticClass:"button success",class:e.accept_button_class_object,on:{click:e.accept_selected}},[e._v("Accept")]),n("div",{staticClass:"button clear",on:{click:e.close}},[e._v("Cancel")])])])])])],1):e._e()},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NodeTree",class:e.class_object},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"expand_button",style:e.expand_button_class_object,on:{click:e.toggle_expanded}},[e._v(e._s(e.expand_label))])]),n("div",{staticClass:"cell auto"},[n("div",{staticClass:"node_name",on:{click:e.on_click}},[e._v(e._s(e.node_name))]),e.expanded?n("div",{staticClass:"children"},e._l(e.children,(function(t,r){return n("NodeTree",{key:t.graph_node_id,attrs:{graph_node_id:t.graph_node_id,node_context:e.node_context,selected_graph_node_id:e.selected_graph_node_id},on:{select:e.on_child_select}})})),1):e._e()])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.display?n("div",{staticClass:"NumericSlider",style:e.main_style_object},[n("div",{staticClass:"increment_starters_container",class:e.starters_container_class_object},e._l(e.increments,(function(t,r){return n("div",{staticClass:"increment_starter text-center",class:e.increment_starter_class_objects[r],on:{mouseenter:function(t){return e.set_current_increment_index(r)}}},[n("div",{staticClass:"increment_label"},[e._v(e._s(t))]),e.increment_starter_class_actives[r]?n("div",{staticClass:"value_label"},[e._v(e._s(e.displayed_value))]):e._e()])})),0)]):e._e()},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return this.active?t("div",{staticClass:"ParamMenu",style:this.style_object},[t("DropDownMenu",{attrs:{display_label:!1,always_visible:!0,entries:this.menu_entries,sort_entries:!0},on:{select:this.on_select}})],1):this._e()},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return this.active?t("div",{staticClass:"ParamMenu",style:this.style_object},[t("DropDownMenu",{attrs:{display_label:!1,always_visible:!0,entries:this.menu_entries,sort_entries:!0},on:{select:this.on_select}})],1):this._e()},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Retractable cell shrink"},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.retracted,expression:"retracted"}],staticClass:"grid-x"},[t("div",{staticClass:"retractable-toggler horizontal",on:{click:this.toggle}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:!this.retracted,expression:"!retracted"}],staticClass:"grid-x"},[t("div",{staticClass:"cell shrink"},[t("div",{staticClass:"retractable-toggler vertical",on:{click:this.toggle}})]),t("div",{staticClass:"cell auto"},[this._t("default")],2)])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Polygon-Modal-Container"},[n("div",{staticClass:"Polygon-Modal",style:e.style_object},[n("div",{staticClass:"grid-y modal-grid"},[n("div",{staticClass:"cell shrink disable-select"},[n("div",{staticClass:"Modal-title text-center",on:{mousedown:e.on_move_start}},[e._v(e._s(e.title))])]),n("div",{staticClass:"cell auto Modal-body"},[e._t("default")],2),e.resizable?n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"Modal-size-handle",on:{mousedown:e.on_resize_start}})]):e._e()])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Panel Network full_height_container grid-y"},[n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"grid-x buttons-container-height-0"},[n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"button tiny above-event-catcher disable-select",on:{click:e.toggle_tab_menu,"!contextmenu":function(t){return t.preventDefault(),e.toggle_tab_menu(t)}}},[e._v("+ Add Node")])]),n("div",{staticClass:"cell auto"}),n("div",{staticClass:"cell shrink"},[e.display_go_up_button?n("div",{staticClass:"go-up-button-container above-event-catcher"},[n("div",{staticClass:"go-up-button",on:{click:e.go_up}},[n("v-icon",{attrs:{name:"angle-double-up"}})],1)]):e._e()])])]),n("div",{staticClass:"cell auto"},[n("div",{ref:"canvas_container",staticClass:"canvas_container"},[n("div",{ref:"canvas",staticClass:"canvas",class:e.canvas_class_object,on:{click:e.on_click,wheel:function(t){return t.preventDefault(),e.on_wheel(t)}}},[n("div",{staticClass:"zoom-container",style:e.zoom_container_style_object},[n("div",{staticClass:"pan-container",style:e.pan_container_style_object},[n("div",{ref:"nodes_container",staticClass:"nodes-container",on:{mousedown:e.on_mouse_down,mousemove:e.on_mouse_move,mouseup:e.on_mouse_up}},[n("div",{staticClass:"nodes-container-events-catcher"}),n("div",{staticClass:"selection-rectangle",style:e.selection_rectangle_style_object}),n("div",{staticClass:"node-creation-rectangle",style:e.node_creation_rectangle_style_object}),e._l(e.json_children,(function(t){return n("Node",{key:t.graph_node_id,attrs:{json_node:t,json_parent:e.json_node,action_in_progress:e.action_in_progress},on:{capture_node_for_move:e.on_capture_node_for_move,capture_node_src_for_connection:e.on_capture_node_src_for_connection,capture_node_dest_for_connection:e.on_capture_node_dest_for_connection,capture_node_final_for_connection:e.on_capture_node_final_for_connection,set_display_flag:e.on_set_display_flag,set_bypass_flag:e.on_set_bypass_flag}})})),e.connection_data.active?n("InterractiveConnection",{attrs:{mouse_start:e.connection_data.mouse_start,mouse_progress:e.connection_data.mouse_progress}}):e._e()],2)])])])])]),e.tab_menu_opened?n("TabMenu",{style:e.tab_menu_style_object,attrs:{json_node:e.json_node},on:{close:e.close_tab_menu,select:e.on_tab_menu_select}}):e._e()],1)},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Panel Params full_height_container grid-y"},[e.first_selected_json_node?e._e():n("div",{staticClass:"text-center"},[e._v("no node selected.")]),e.display_toolbar?n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell auto"},[n("div",{staticClass:"node_name_container text-center"},[n("span",{staticClass:"node_name",on:{click:e.on_name_click}},[e._v(e._s(e.selected_node_name))]),e.selected_node_type?n("span",{staticClass:"node_type"},[e._v("("+e._s(e.selected_node_type)+")")]):e._e()])]),n("div",{staticClass:"cell shrink"})])]):e._e(),n("div",{staticClass:"cell auto params_container"},[n("form",[e.display_top_folders?n("div",{staticClass:"grid-x"},e._l(e.top_folder_json_params,(function(t,r){return n("div",{staticClass:"cell auto params_folder",class:e.folder_class_objects[r]},[t.name.length>0?n("div",{staticClass:"folder_name",on:{click:function(n){return e.set_active_folder_id(t.graph_node_id)}}},[e._v(e._s(t.name))]):e._e()])})),0):e._e(),e._l(e.selected_node_json_params_for_current_folder,(function(e,t){return n("ParamFieldContainer",{key:e.graph_node_id,attrs:{json_param:e,tabindex:100*(t+1)}})}))],2)])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Panel Viewer full_height_container grid-y"},[t("div",{staticClass:"cell shrink viewer_top_bar"},[t("div",{staticClass:"grid-x"},[t("div",{staticClass:"cell shrink"},[t("DropDownMenu",{attrs:{label:this.camera_menu_label,entries:this.camera_menu_entries,sort_entries:!0},on:{select:this.on_select_camera_menu_entry_select}})],1),t("div",{staticClass:"cell auto"}),t("div",{staticClass:"cell shrink text-right"},[t("div",{staticClass:"full-screen-button",on:{click:this.toggle_fullscreen}},[t("v-icon",{attrs:{name:"regular/square"}})],1)])])]),t("div",{ref:"viewer_container",staticClass:"cell auto viewers_container"},[t("ThreejsViewer",{key:this.current_camera_node_graph_id,ref:"viewer",attrs:{current_camera_node_graph_id:this.current_camera_node_graph_id}})],1)])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Panel Spreadsheet full_height_container grid-y"},[n("div",{staticClass:"cell shrink"},[e.loading?n("span",[n("i",{staticClass:"fa fa-refresh fa-spin"}),n("span",[e._v("loading...")])]):e._e()]),e.loading?e._e():n("div",{ref:"table_container",staticClass:"cell auto"},[n("div",{staticClass:"full_height_container grid-y"},[n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"spreadsheet-drop-down-container"},[n("div",{staticClass:"spreadsheet-drop-down-label"},[e._v("view attributes")]),n("div",{staticClass:"spreadsheet-drop-down-content"},[n("div",{staticClass:"spreadsheet-drop-down-entry",on:{click:e.select_all_attributes}},[n("span",{staticClass:"attr-selection-icon"},[n("v-icon",{attrs:{name:"regular/check-square"}})],1),n("span",{staticClass:"attr-name"},[e._v("select all")])]),n("div",{staticClass:"spreadsheet-drop-down-entry",on:{click:e.select_no_attributes}},[n("span",{staticClass:"attr-selection-icon"},[n("v-icon",{attrs:{name:"regular/square"}})],1),n("span",{staticClass:"attr-name"},[e._v("select none")])]),n("div",{staticClass:"spreadsheet-drop-down-separator"}),e._l(e.attrib_names,(function(t){return n("div",{staticClass:"spreadsheet-drop-down-entry",on:{click:function(n){return e.toggle_attrib_selection(t)}}},[n("span",{staticClass:"attr-selection-icon"},[e.attrib_selected_states[t]?n("v-icon",{attrs:{name:"regular/check-square"}}):n("v-icon",{attrs:{name:"regular/square"}})],1),n("span",{staticClass:"attr-name"},[e._v(e._s(t))])])}))],2)])]),n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"attrib-class-selectors"},[n("div",{staticClass:"attrib-class-selector",class:{active:0==e.attrib_class_vertex},attrs:{title:"objects"},on:{click:function(t){return e.set_attrib_class_vertex(!1)}}},[n("v-icon",{attrs:{name:"square"}})],1),n("div",{staticClass:"attrib-class-selector",class:{active:1==e.attrib_class_vertex},attrs:{title:"vertices"},on:{click:function(t){return e.set_attrib_class_vertex(!0)}}},[n("v-icon",{attrs:{name:"regular/circle"}})],1)])])])]),n("div",{staticClass:"cell auto"},[n("ag-grid-vue",{staticClass:"ag-theme-balham",attrs:{rowData:e.table_data,columnDefs:e.columnDefs,modules:e.modules,defaultColDef:e.defaultColDef,columnTypes:e.columnTypes,getRowClass:e.getRowClass}})],1)])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"TabMenu"},[t("DropDownMenu",{attrs:{display_label:!1,always_visible:!0,entries:this.menu_entries,sort_entries:!0,emphasis:this.filter},on:{select:this.on_select}})],1)},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NetworkNode",class:e.class_object,style:e.style_object},[n("div",{staticClass:"node-body",style:e.node_body_style_object,on:{mousedown:e.on_body_mousedown,mouseup:e.on_body_mouseup,dblclick:e.on_body_dblclick,contextmenu:e.on_contextmenu}},[e.display_icon?n("div",{staticClass:"icon-container"},[n("v-icon",{attrs:{name:e.icon,scale:"1"}})],1):e._e()]),e.is_errored?n("div",{staticClass:"error-flag-container",style:e.error_flag_container_style_object},[n("div",{staticClass:"error-flag"},[n("v-icon",{attrs:{name:"exclamation-triangle",scale:"4"}})],1)]):e._e(),e.has_bypass_flag?n("div",{staticClass:"flag-container",style:e.bypass_flag_container_style_object},[n("div",{staticClass:"node-flag bypass-flag",class:e.bypass_flag_class_object,style:e.bypass_flag_style_object,on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.on_bypass_flag_click(t)}}})]):e._e(),e.has_display_flag?n("div",{staticClass:"flag-container",style:e.display_flag_container_style_object},[n("div",{staticClass:"node-flag display-flag",class:e.display_flag_class_object,style:e.display_flag_style_object,on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.on_display_flag_click(t)}}})]):e._e(),n("div",{staticClass:"name-container disable-select",style:e.name_container_style_object},[n("div",{staticClass:"name-element",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.on_name_click(t)}}},[e._v(e._s(e.name))])]),n("div",{staticClass:"comment-container",style:e.comment_container_style_object},[e.display_comment?n("div",{staticClass:"comment-element"},[e._v(e._s(e.comment))]):e._e()]),e.children_allowed?n("div",{staticClass:"enter-button-container",style:e.enter_button_container_style_object},[n("div",{staticClass:"enter-button",on:{click:e.open_node}},[n("v-icon",{attrs:{name:"angle-double-down"}})],1)]):e._e(),n("div",{staticClass:"inputs-container",style:e.inputs_container_style_object},e._l(e.available_inputs,(function(t,r){return n("div",{staticClass:"connection-pixel input-pixel",class:e.connection_pixel_input_class_objects[r],style:e.inputs_pixel_style_objects[r]},[n("div",{staticClass:"connection-name-element",class:e.connection_name_element_class_objects},[e._v(e._s(e.input_names[r]))]),n("div",{staticClass:"connection-element",attrs:{title:e.input_titles[r]},on:{mousedown:function(t){return e.on_input_mousedown(t,r)},mouseup:function(t){return e.on_input_mouseup(t,r)}}})])})),0),e.has_outputs?n("div",{staticClass:"outputs-container",style:e.output_container_style_object},e._l(e.available_outputs,(function(t,r){return n("div",{staticClass:"connection-pixel output-pixel",class:e.connection_pixel_output_class_objects[r],style:e.outputs_pixel_style_objects[r]},[n("div",{staticClass:"connection-name-element",class:e.connection_name_element_class_objects},[e._v(e._s(e.output_names[r]))]),n("div",{staticClass:"connection-element",attrs:{title:e.output_titles[r]},on:{mousedown:function(t){return e.on_output_mousedown(t,r)},mouseup:function(t){return e.on_output_mouseup(t,r)}}})])})),0):e._e(),e._l(e.inputs,(function(t,r){return e.input_valid_states[r]?n("Connection",{key:r,attrs:{input_index:r,output_index:e.input_connection_output_indices[r],src_json_node:e.input_json_nodes[r],dest_json_node:e.json_node}}):e._e()})),e.display_node_info?n("NodeInfo",{attrs:{graph_node_id:e.graph_node_id}}):e._e()],2)},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"NetworkNodeInterractiveConnection"},[t("svg",{style:this.svg_style_object},[t("line",{attrs:{x1:this.src_position.x,y1:this.src_position.y,x2:this.dest_position.x,y2:this.dest_position.y}})])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.param_visible?n("div",{staticClass:"ParamContainer grid-x"},[n("div",{staticClass:"cell small-3 text-right param_name",attrs:{title:e.label_tooltip},on:{click:e.toggle_expression_mode,mousedown:e.open_numeric_slider_if_numeric_or_color,contextmenu:e.on_contextmenu}},[e.display_label?n("label",{staticClass:"disable-select"},[e._v(e._s(e.name))]):e._e()]),n("div",{staticClass:"cell small-9"},[n(e.field_component_type,{tag:"Component",attrs:{json_param:e.json_param,displays_expression_result:e.displays_expression_result,tabindex:e.tabindex}})],1)]):e._e()},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ThreejsViewer"},[t("div",{ref:"viewer"})])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"NetworkNodeConnection"},[t("svg",{style:this.svg_style_object},[t("line",{class:this.line_class_object,attrs:{x1:this.src_position.x,y1:this.src_position.y,x2:this.dest_position.x,y2:this.dest_position.y}})])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NetworkNodeInfo",on:{mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()},dblclick:function(e){e.stopPropagation()}}},[n("div",{staticClass:"arrow-left"}),n("div",{staticClass:"node_title_container",on:{click:e.on_name_click}},[e._v(e._s(e.node_name))]),n("div",{staticClass:"node_info_container"},[n("div",{staticClass:"time_dependency icon_prefixed",class:e.time_dependency_class_object},[n("v-icon",{attrs:{name:"regular/clock"}}),n("span",[e._v(e._s(e.time_dependency_label))])],1),e.error_message?n("div",{staticClass:"error_message icon_prefixed"},[n("v-icon",{attrs:{name:"exclamation-triangle"}}),n("span",[e._v(e._s(e.error_message))])],1):n("div",{staticClass:"test"},[e._v("not errored")]),n("div",{staticClass:"node_info_separator"}),e.current_node_info_type?n(e.current_node_info_type,{tag:"Component",attrs:{graph_node_id:e.graph_node_id}}):e._e(),e.current_node_info_type?n("div",{staticClass:"node_info_separator"}):e._e(),n("div",{staticClass:"dependencies"},[n("div",{staticClass:"dependencies_section dependencies_predecessors"},[n("div",{staticClass:"dependencies_section_title"},[e._v("PREDECESSORS:")]),n("div",{staticClass:"dependencies_list"},e._l(e.scene_predecessor_paths,(function(t,r){return n("div",{staticClass:"dependendies_item",on:{click:function(n){return e.go_to_node_path(t)}}},[e._v(e._s(t))])})),0)]),n("div",{staticClass:"dependencies_section dependencies_successors"},[n("div",{staticClass:"dependencies_section_title"},[e._v("SUCCESSORS:")]),n("div",{staticClass:"dependencies_list"},e._l(e.scene_successor_paths,(function(t,r){return n("div",{staticClass:"dependendies_item",on:{click:function(n){return e.go_to_node_path(t)}}},[e._v(e._s(t))])})),0)])])],1)])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Toggle grid-x",class:e.class_object,on:{contextmenu:e.on_contextmenu}},[n("div",{staticClass:"cell shrink"},[n("input",{attrs:{type:"checkbox",tabindex:e.tabindex},domProps:{checked:e.value},on:{change:e.on_checkbox_update}})]),n("div",{staticClass:"cell auto"},[e.is_field_visible?n("Numeric",{attrs:{json_param:e.json_param,displays_expression_result:e.displays_expression_result,tabindex:e.tabindex+1}}):n("label",{staticClass:"disable-select",on:{click:e.toggle_param}},[e._v(e._s(e.name))])],1)])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Numeric",class:e.class_object,on:{contextmenu:e.on_contextmenu}},[n("input",{staticClass:"raw_input",class:e.input_value_class_object,attrs:{type:"text",title:e.error_message,tabindex:e.tabindex},domProps:{value:e.raw_input},on:{keypress:function(e){e.stopPropagation()},keyup:function(t){return t.stopPropagation(),e.on_keyup(t)},keydown:function(e){e.stopPropagation()},change:function(t){return t.stopPropagation(),e.on_update_value(t)},blur:function(t){return t.stopPropagation(),e.on_update_value(t)},mousedown:e.open_numeric_slider,paste:e.on_paste,click:function(t){return t.ctrlKey?e.reset_to_default(t):null}}}),n("input",{staticClass:"expression_result",attrs:{readonly:"",type:"text",title:e.value,tabindex:e.tabindex},domProps:{value:e.value}})])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Button"},[n("button",{staticClass:"button expanded",attrs:{tabindex:e.tabindex},on:{click:function(t){return t.preventDefault(),e.on_click(t)}}},[e._v(e._s(e.json_param.name))])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Multiple Color grid-x"},[n("div",{staticClass:"cell shrink"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.input_color,expression:"input_color"}],attrs:{type:"color",name:"color_input_name",tabindex:e.tabindex+1},domProps:{value:e.input_color},on:{input:function(t){t.target.composing||(e.input_color=t.target.value)}}})]),n("div",{staticClass:"cell auto"},[n("div",{staticClass:"grid-x"},e._l(e.json_components,(function(t,r){return n("div",{key:r,staticClass:"cell",class:e.cell_class_object},[n("Numeric",{attrs:{json_param:t,displays_expression_result:e.displays_expression_result,tabindex:e.tabindex+1+r}})],1)})),0)])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Float",class:e.class_object,on:{contextmenu:e.on_contextmenu}},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell auto"},[n("input",{staticClass:"raw_input",class:e.input_value_class_object,attrs:{type:"text",title:e.error_message,tabindex:e.tabindex},domProps:{value:e.raw_input},on:{keypress:function(e){e.stopPropagation()},keyup:function(t){return t.stopPropagation(),e.on_keyup(t)},keydown:function(e){e.stopPropagation()},change:function(t){return t.stopPropagation(),e.on_update_value(t)},focus:function(t){return t.stopPropagation(),e.on_focus(t)},blur:function(t){return t.stopPropagation(),e.on_blur(t)},mousedown:e.open_numeric_slider,paste:e.on_paste,click:function(t){return t.ctrlKey?e.reset_to_default(t):null}}}),n("input",{staticClass:"expression_result",attrs:{readonly:"",type:"text",title:e.value,tabindex:e.tabindex},domProps:{value:e.value}})]),e.display_slider?n("div",{staticClass:"cell small-10 slider_container"},[n("input",{attrs:{type:"range",min:e.param_range[0],max:e.param_range[1],step:e.slider_step},domProps:{value:e.value},on:{mousedown:e.on_slider_mousedown,mouseup:e.on_slider_mouseup,change:e.on_slider_change,input:e.on_slider_drag}})]):e._e()])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"Field Folder"})},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Integer",class:e.class_object,on:{contextmenu:e.on_contextmenu}},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell auto"},[n("input",{staticClass:"raw_input",class:e.input_value_class_object,attrs:{type:"text",title:e.error_message,tabindex:e.tabindex},domProps:{value:e.raw_input},on:{keypress:function(e){e.stopPropagation()},keyup:function(t){return t.stopPropagation(),e.on_keyup(t)},keydown:function(e){e.stopPropagation()},change:function(t){return t.stopPropagation(),e.on_update_value(t)},focus:function(t){return t.stopPropagation(),e.on_focus(t)},blur:function(t){return t.stopPropagation(),e.on_blur(t)},mousedown:e.open_numeric_slider,paste:e.on_paste,click:function(t){return t.ctrlKey?e.reset_to_default(t):null}}}),n("input",{staticClass:"expression_result",attrs:{readonly:"",type:"text",title:e.value,tabindex:e.tabindex},domProps:{value:e.value}})]),e.display_slider?n("div",{staticClass:"cell small-10 slider_container"},[n("input",{attrs:{type:"range",min:e.param_range[0],max:e.param_range[1],step:e.slider_step},domProps:{value:e.value},on:{mousedown:e.on_slider_mousedown,mouseup:e.on_slider_mouseup,change:e.on_slider_change,input:e.on_slider_drag}})]):e._e()])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field OperatorPath",class:e.class_object,on:{contextmenu:e.on_contextmenu}},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell auto"},[n("input",{staticClass:"raw_input",class:e.input_value_class_object,attrs:{type:"text",title:e.error_message,tabindex:e.tabindex},domProps:{value:e.raw_input},on:{keypress:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()},change:function(t){return t.stopPropagation(),e.on_update_value(t)},blue:function(t){return t.stopPropagation(),e.on_update_value(t)}}}),n("input",{staticClass:"expression_result",attrs:{readonly:"",type:"text",tabindex:e.tabindex},domProps:{value:e.value}})]),n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"button-group"},[n("div",{staticClass:"button tiny primary",attrs:{title:"go to node"},on:{click:e.go_to_node}},[n("v-icon",{attrs:{name:"angle-double-right"}})],1),n("div",{staticClass:"button tiny warning",attrs:{title:"select node"},on:{click:e.open_node_selector}},[n("v-icon",{attrs:{name:"align-left"}})],1)])])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Radio"},[n("div",{staticClass:"radio_inputs_container"},[n("select",{ref:"select",staticClass:"select",attrs:{tabindex:e.tabindex},on:{change:e.set_from_select}},e._l(e.entries,(function(t,r){return n("option",{key:r,domProps:{value:t.value,selected:e.selected_states[r]}},[e._v(e._s(t.name))])})),0)])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement;this._self._c;return this._m(0)},o=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Field Separator"},[t("div",{staticClass:"horizontal-border"})])}];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field String",class:e.class_object,on:{contextmenu:e.on_contextmenu}},[e.is_single_line?n("div",{staticClass:"single_line_inputs_container"},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell auto"},[n("input",{staticClass:"raw_input",attrs:{type:"text",tabindex:e.tabindex},domProps:{value:e.raw_input},on:{keypress:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()},change:function(t){return t.stopPropagation(),e.on_update_value(t)},blur:function(t){return t.stopPropagation(),e.on_update_value(t)}}}),n("input",{staticClass:"expression_result",attrs:{readonly:"",type:"text",tabindex:e.tabindex},domProps:{value:e.value}})]),e.display_browse_button?n("div",{staticClass:"cell shrink"},[n("div",{staticClass:"button browse_button",on:{click:e.browse_file}},[e._v("Browse Files")])]):e._e()])]):n("div",{staticClass:"multiline_inputs_container"},[n("textarea",{staticClass:"value",attrs:{rows:e.rows,tabindex:e.tabindex},on:{keypress:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()},change:function(t){return t.stopPropagation(),e.on_update_value(t)},blur:function(t){return t.stopPropagation(),e.on_update_value(t)}}},[e._v(e._s(e.raw_input))]),n("textarea",{staticClass:"expression_result",attrs:{rows:e.rows,tabindex:e.tabindex,readonly:""}},[e._v(e._s(e.result))])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Multiple Vector grid-x"},e._l(e.json_components,(function(t,r){return n("div",{key:r,staticClass:"cell",class:e.cell_class_object},[n("Numeric",{attrs:{json_param:t,displays_expression_result:e.displays_expression_result,tabindex:e.tabindex+r}})],1)})),0)},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Multiple Vector grid-x"},e._l(e.json_components,(function(t,r){return n("div",{key:r,staticClass:"cell",class:e.cell_class_object},[n("Numeric",{attrs:{json_param:t,displays_expression_result:e.displays_expression_result,tabindex:e.tabindex+r}})],1)})),0)},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Multiple Vector grid-x"},e._l(e.json_components,(function(t,r){return n("div",{key:r,staticClass:"cell",class:e.cell_class_object},[n("Numeric",{attrs:{json_param:t,displays_expression_result:e.displays_expression_result,tabindex:e.tabindex+r}})],1)})),0)},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Field Ramp",class:e.class_object,on:{contextmenu:e.on_contextmenu}},[n("div",{staticClass:"grid-x"},[n("div",{staticClass:"cell auto"},[n("div",{staticClass:"points_container"},[n("svg",{ref:"svg",on:{click:e.add_point}},[e._l(e.curve_points,(function(t,r){return n("circle",{staticClass:"interpolated_curve_point",class:e.interpolated_curve_class_object,attrs:{cx:e.curve_point_positions_percent[r],cy:e.curve_point_values_percent[r]}})})),e._l(e.ramp_points,(function(t,r){return n("circle",{staticClass:"control_point",class:e.control_point_class_objects[r],attrs:{cx:e.control_point_positions_percent[r],cy:e.control_point_values_percent[r]},on:{mousedown:function(t){return t.stopPropagation(),e.on_point_move_start(t,r)},click:function(e){e.stopPropagation()}}})}))],2)])])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NetworkNodeInfoSop"},[n("div",{staticClass:"node_info_sop_section inline objects_count"},[n("div",{staticClass:"node_info_sop_section_title"},[e._v("objects count:")]),n("div",{staticClass:"node_info_sop_section_content"},[n("span",[e._v(e._s(e.objects_count))]),n("span",{staticClass:"objects_count_visible",class:e.objects_count_visible_class_object},[e._v("(visible: "+e._s(e.objects_visible_count)+")")])])]),e._l(e.object_types,(function(t){return n("div",{staticClass:"node_info_sop_section inline objects_types"},[n("div",{staticClass:"node_info_sop_section_title"},[e._v(e._s(t)+":")]),n("div",{staticClass:"node_info_sop_section_content"},[n("span",[e._v(e._s(e.objects_count_by_type[t]))])])])})),n("div",{staticClass:"node_info_sop_section inline points_count"},[n("div",{staticClass:"node_info_sop_section_title"},[e._v("points count:")]),n("div",{staticClass:"node_info_sop_section_content"},[e._v(e._s(e.points_count))])]),n("div",{staticClass:"node_info_separator"}),n("div",{staticClass:"node_info_separator"}),n("div",{staticClass:"node_info_sop_section attributes block"},[n("strong",{staticClass:"node_info_sop_section_title"},[e._v("vertex attributes:")]),e._l(e.vertex_attribute_names,(function(t){return n("div",{staticClass:"node_info_sop_section_content attribute_info",class:e.vertex_class_objects_by_name[t]},[e._v(e._s(t)+" ("+e._s(e.vertex_human_labels_by_name[t])+")")])}))],2),n("div",{staticClass:"bbox_infos"},[n("table",e._l(e.table_prop_names,(function(t){return n("tr",[n("td",[e._v(e._s(t))]),e._l([0,1,2],(function(r){return n("td",{staticClass:"number"},[e._v(e._s(e.table_props[t][r]))])}))],2)})),0)])],2)},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NetworkNodeInfoMat"},[n("div",{staticClass:"buttons"},e._l(e.shader_names,(function(t,r){return n("div",{staticClass:"button expanded",on:{click:function(n){return e.copy_shader(t)}}},[e._v("Copy "+e._s(t)+" Shader")])})),0)])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NetworkNodeInfoGl"},[n("div",{staticClass:"buttons"},e._l(e.shader_names,(function(t,r){return n("div",{staticClass:"button expanded",on:{click:function(n){return e.copy_shader(t)}}},[e._v("Copy Shader "+e._s(t))])})),0)])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"NetworkNodeInfoCop"},[this.resolution?t("div",{staticClass:"node_info_cop_section inline resolution"},[t("div",{staticClass:"node_info_cop_section_title"},[this._v("resolution:")]),t("div",{staticClass:"node_info_cop_section_content"},[t("span",[this._v(this._s(this.resolution))])])]):this._e(),t("div",{staticClass:"node_info_cop_section"},[t("canvas",{ref:"canvas"})])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"NetworkNodeInfoSopCache"},[t("div",{staticClass:"buttons"},[t("div",{staticClass:"button expanded",on:{click:this.copy_cache}},[this._v("Copy Cache")])])])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NetworkNodeInfoSopParticlesSystemGPU"},[n("div",{staticClass:"buttons"},e._l(e.shader_names,(function(t,r){return n("div",{staticClass:"button expanded",on:{click:function(n){return e.copy_shader(t)}}},[e._v("Copy Shader "+e._s(t))])})),0)])},o=[];r._withStripped=!0,n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(127)),i=r.__importDefault(n(19));o.default.use(i.default),o.default.config.productionTip=!1;var a=r.__importDefault(n(995));o.default.use(a.default);var s=n(1285),u=n(20);s.EditorStore?u.StoreController.set_store(s.EditorStore):console.warn("store not ready for StoreController"),n(1298);var _=r.__importDefault(n(1317));n(689);var l=n(848),c=function(){function e(){this._loaded=!1}return e.instance=function(){return this._instance=this._instance||new e},e.load_scene=function(e,t,n){return void 0===n&&(n={}),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.instance().load_scene(e,t,n)];case 1:return[2,r.sent()]}}))}))},e.on_save=function(e){this.instance().set_on_save_callback(e)},e.prototype.set_on_save_callback=function(e){this._on_save_callback=e},Object.defineProperty(e.prototype,"on_save_callback",{get:function(){return this._on_save_callback},enumerable:!0,configurable:!0}),e.prototype.load_scene=function(e,t,n){var i;return r.__awaiter(this,void 0,void 0,(function(){var a,c,p;return r.__generator(this,(function(r){switch(r.label){case 0:return this._loaded?[2]:(this._loaded=!0,[4,l.SceneJsonImporter.load_data(t)]);case 1:return a=r.sent(),u.StoreController.set_scene(a),window.scene=a,n.current_node&&((c=a.node(n.current_node))?(u.StoreController.editor.set_current_node(c),n.selected&&((p=c.node(n.selected))?null===(i=c.children_controller)||void 0===i||i.selection.set([p]):console.warn("child node '"+n.selected+"' not found for selected option"))):console.warn("node '"+n.current_node+"' not found for current_node option")),new o.default({el:e,store:s.EditorStore,render:function(e,t){return e(_.default,{props:t})}}),[2]}}))}))},e}();t.Editor=c},,,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(3),a=i.__importDefault(n(85)),s=i.__importDefault(n(199)),u=i.__importDefault(n(127)),_=n(20);!function(e){e.SCENE="SCENE",e.SCENE_FRAME_UPDATED="SCENE_FRAME_UPDATED",e.SCENE_FRAME_RANGE_UPDATED="SCENE_FRAME_RANGE_UPDATED",e.SCENE_PLAY_STATE_UPDATED="SCENE_PLAY_STATE_UPDATED",e.NODE_ERROR_UPDATED="NODE_ERROR_UPDATED",e.NODE_UI_DATA_POSITION_UPDATED="NODE_UI_DATA_POSITION_UPDATED",e.NODE_UI_DATA_COMMENT_UPDATED="NODE_UI_DATA_COMMENT_UPDATED",e.NODE_SELECTION_UPDATED="NODE_SELECTION_UPDATED",e.NODE_DISPLAY_FLAG_UPDATED="NODE_DISPLAY_FLAG_UPDATED",e.NODE_BYPASS_FLAG_UPDATED="NODE_BYPASS_FLAG_UPDATED",e.NODE_NAME_UPDATED="NODE_NAME_UPDATED",e.NODE_INPUTS_UPDATED="NODE_INPUTS_UPDATED",e.NODE_NAMED_INPUTS_UPDATED="NODE_NAMED_INPUTS_UPDATED",e.NODE_NAMED_OUTPUTS_UPDATED="NODE_NAMED_OUTPUTS_UPDATED",e.NODE_ADD_PARAMS_TO_STORE="NODE_ADD_PARAMS_TO_STORE",e.NODE_PARAMS_UPDATED="NODE_PARAMS_UPDATED",e.NODE_CREATED="NODE_CREATED",e.NODE_DELETED="NODE_DELETED",e.PARAM_RAW_INPUT_UPDATED="PARAM_RAW_INPUT_UPDATED",e.PARAM_VALUE_UPDATED="PARAM_VALUE_UPDATED",e.PARAM_EXPRESSION_UPDATED="PARAM_EXPRESSION_UPDATED",e.PARAM_ERROR_UPDATED="PARAM_ERROR_UPDATED",e.PARAM_VISIBLE_STATE="PARAM_VISIBLE_STATE"}(o=t.EngineMutation||(t.EngineMutation={}));var l=function(e,t){return e.nodes_by_graph_node_id[t.graph_node_id]};function c(e,t){var n=_.StoreController.engine.node(t);if(n){var r=l(e,n);r&&(u.default.set(r,"inputs",n.serializer.input_ids()),u.default.set(r,"input_connection_output_indices",n.serializer.connection_input_indices()),u.default.set(r,"named_input_connections",n.serializer.named_input_connections()),u.default.set(r,"named_output_connections",n.serializer.named_output_connections()))}}t.EngineStoreModule={namespaced:!0,state:function(){return{scene_uuid:void 0,nodes_by_graph_node_id:{},params_by_graph_node_id:{},frame:0,frame_range:[0,10],frame_range_locked:[!0,!0],fps:30,playing_state:!1}},getters:{frame:function(e){return e.frame},frame_range:function(e){return e.frame_range},frame_range_locked:function(e){return e.frame_range_locked},fps:function(e){return e.fps},playing_state:function(e){return e.playing_state},json_node:function(e){return function(t){return e.nodes_by_graph_node_id[t]}},json_param:function(e){return function(t){return e.params_by_graph_node_id[t]}},json_nodes_by_name:function(e){return function(t){return s.default(e.nodes_by_graph_node_id).filter((function(e){return e.name===t}))}},json_root:function(e){var t=_.StoreController.scene.root.graph_node_id;return e.nodes_by_graph_node_id[t]},json_children:function(e){return function(t){if(t){var n=t.children.map((function(t){return e.nodes_by_graph_node_id[t]})),r=a.default(n);return r.length!==n.length&&console.warn("some children resolved to null in engine/json_children!",n),r}return[]}},json_params:function(e){return function(t){if(t){for(var n=t.param_ids,r=[],o=0,i=Object.keys(n);o<i.length;o++){var a=i[o],s=e.params_by_graph_node_id[a];s&&r.push(s)}return r}return[]}}},mutations:(r={},r[o.SCENE]=function(e){for(var t=_.StoreController.scene,n={},r=0,o=t.nodes_controller.all_nodes();r<o.length;r++){var i=o[r];n[i.graph_node_id]=i.to_json(!1)}e.nodes_by_graph_node_id=n,e.params_by_graph_node_id={},e.frame=t.frame,u.default.set(e.frame_range,0,t.frame_range[0]),u.default.set(e.frame_range,1,t.frame_range[1]),u.default.set(e.frame_range_locked,0,t.time_controller.frame_range_locked[0]),u.default.set(e.frame_range_locked,1,t.time_controller.frame_range_locked[1]),e.fps=t.time_controller.fps,e.scene_uuid=t.uuid},r[o.SCENE_FRAME_UPDATED]=function(e){e.frame=_.StoreController.scene.frame},r[o.SCENE_FRAME_RANGE_UPDATED]=function(e){var t=_.StoreController.scene;u.default.set(e.frame_range,0,t.frame_range[0]),u.default.set(e.frame_range,1,t.frame_range[1]),u.default.set(e.frame_range_locked,0,t.time_controller.frame_range_locked[0]),u.default.set(e.frame_range_locked,1,t.time_controller.frame_range_locked[1]),e.fps=t.time_controller.fps},r[o.SCENE_PLAY_STATE_UPDATED]=function(e){var t=_.StoreController.scene;e.playing_state=t.time_controller.playing},r[o.NODE_ERROR_UPDATED]=function(e,t){var n=_.StoreController.engine.node(t);n&&(l(e,n).error_message=n.states.error.message)},r[o.NODE_UI_DATA_POSITION_UPDATED]=function(e,t){var n=_.StoreController.engine.node(t);if(n){var r=l(e,n);r&&(r.ui_data_json.x=n.ui_data.position.x,r.ui_data_json.y=n.ui_data.position.y)}},r[o.NODE_UI_DATA_COMMENT_UPDATED]=function(e,t){var n=_.StoreController.engine.node(t);if(n){var r=l(e,n);r&&(r.ui_data_json.comment=n.ui_data.comment)}},r[o.NODE_SELECTION_UPDATED]=function(e,t){var n=_.StoreController.engine.node(t);if(n&&n.children_allowed()&&n.children_controller){var r=l(e,n);if(r&&r.selection){for(;r.selection.pop(););for(var o=0,i=n.children_controller.selection.to_json();o<i.length;o++){var a=i[o];r.selection.push(a)}}}},r[o.NODE_DISPLAY_FLAG_UPDATED]=function(e,t){var n,r,o=_.StoreController.engine.node(t);if(o&&(null===(n=o.flags)||void 0===n?void 0:n.display)){var i=l(e,o);i&&null!=(null===(r=i.flags)||void 0===r?void 0:r.display)&&(i.flags.display=o.flags.display.active)}},r[o.NODE_BYPASS_FLAG_UPDATED]=function(e,t){var n,r,o=_.StoreController.engine.node(t);if(o&&(null===(n=o.flags)||void 0===n?void 0:n.bypass)){var i=l(e,o);i&&null!=(null===(r=i.flags)||void 0===r?void 0:r.bypass)&&(i.flags.bypass=o.flags.bypass.active)}},r[o.NODE_NAME_UPDATED]=function(e,t){var n=_.StoreController.engine.node(t);if(n){var r=l(e,n);r&&(r.name=n.name)}},r[o.NODE_INPUTS_UPDATED]=function(e,t){c(e,t)},r[o.NODE_NAMED_INPUTS_UPDATED]=function(e,t){c(e,t)},r[o.NODE_NAMED_OUTPUTS_UPDATED]=function(e,t){c(e,t)},r[o.NODE_ADD_PARAMS_TO_STORE]=function(e,t){var n=_.StoreController.engine.node(t);if(n)for(var r=0,o=n.params.all;r<o.length;r++){var i=o[r];if(!e.params_by_graph_node_id[i.graph_node_id]&&(u.default.set(e.params_by_graph_node_id,i.graph_node_id,i.to_json()),i.components))for(var a=0,s=i.components;a<s.length;a++){var l=s[a];u.default.set(e.params_by_graph_node_id,l.graph_node_id,l.to_json())}}},r[o.NODE_PARAMS_UPDATED]=function(e,t){var n=_.StoreController.engine.node(t),r=_.StoreController.engine.json_node(t);if(n&&r){for(var o=0,i=r.param_ids;o<i.length;o++){var a=i[o];u.default.delete(e.params_by_graph_node_id,a)}u.default.set(r,"param_ids",n.serializer.to_json_params(!1));for(var s=0,l=n.params.all;s<l.length;s++){var c=l[s];if(u.default.set(e.params_by_graph_node_id,c.graph_node_id,c.to_json()),c.components)for(var p=0,d=c.components;p<d.length;p++){var f=d[p];u.default.set(e.params_by_graph_node_id,f.graph_node_id,f.to_json())}}}},r.override_clonable_state_update=function(e,t){var n=t.emitter,r=l(e,n);r&&(r.override_clonable_state=n.io.inputs.override_clonable_state(),r.inputs_clonable_state_with_override=n.io.inputs.inputs_clonable_state_with_override())},r[o.NODE_DELETED]=function(e,t){var n=t.parent_id,r=e.nodes_by_graph_node_id[n];if(r){var o=t.child_id,i=r.children.indexOf(o);r.children.splice(i,1),u.default.delete(e.nodes_by_graph_node_id,o)}},r[o.NODE_CREATED]=function(e,t){var n=t.parent_id,r=_.StoreController.engine.node(n);if(r){var o=t.child_node_json;u.default.set(e.nodes_by_graph_node_id,o.graph_node_id,o),e.nodes_by_graph_node_id[r.graph_node_id].children.push(o.graph_node_id)}},r[o.PARAM_RAW_INPUT_UPDATED]=function(e,t){if(e.params_by_graph_node_id[t]){var n=_.StoreController.engine.param(t);n&&u.default.set(e.params_by_graph_node_id[t],"raw_input",n.serializer.raw_input())}},r[o.PARAM_VALUE_UPDATED]=function(e,t){if(e.params_by_graph_node_id[t]){var n=_.StoreController.engine.param(t);n&&u.default.set(e.params_by_graph_node_id[t],"value",n.serializer.value())}},r[o.PARAM_EXPRESSION_UPDATED]=function(e,t){if(e.params_by_graph_node_id[t]){var n=_.StoreController.engine.param(t);n&&u.default.set(e.params_by_graph_node_id[t],"expression",n.serializer.expression())}},r[o.PARAM_ERROR_UPDATED]=function(e,t){if(e.params_by_graph_node_id[t]){var n=_.StoreController.engine.param(t);n&&u.default.set(e.params_by_graph_node_id[t],"error_message",n.serializer.error_message())}},r[o.PARAM_VISIBLE_STATE]=function(e,t){if(e.params_by_graph_node_id[t]){var n=_.StoreController.engine.param(t);n&&(e.params_by_graph_node_id[t].is_visible=n.serializer.is_visible())}},r)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NODE_ID="NODE_ID",e.PARAM_ID="PARAM_ID"}(o=t.EditorClipboardMutation||(t.EditorClipboardMutation={})),t.EditorClipboardStateModule={namespaced:!0,state:function(){return{node_id:null,param_id:null}},mutations:(r={},r[o.NODE_ID]=function(e,t){e.node_id=t},r[o.PARAM_ID]=function(e,t){e.param_id=t},r)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.POSITION="POSITION",e.PARAM_ID="PARAM_ID",e.NODE_ID="NODE_ID"}(o=t.EditorContextMenuMutation||(t.EditorContextMenuMutation={}));var i=function(e){e.param_id=null,e.node_id=null};t.EditorContextMenuStateModule={namespaced:!0,state:function(){return{position:{x:0,y:0},param_id:null,node_id:null}},mutations:(r={},r[o.POSITION]=function(e,t){e.position.x=t.x,e.position.y=t.y},r[o.PARAM_ID]=function(e,t){i(e),e.param_id=t},r[o.NODE_ID]=function(e,t){i(e),e.node_id=t},r)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SHOW="SHOW",e.HIDE="HIDE"}(o=t.EditorDialogAlertMutation||(t.EditorDialogAlertMutation={})),t.EditorDialogAlertStateModule={namespaced:!0,state:function(){return{display:!1,message:"",title:"Alert",on_close:void 0}},mutations:(r={},r[o.SHOW]=function(e,t){e.message=t.message,e.title=t.title||"Alert",e.display=!0,e.on_close=t.on_close},r[o.HIDE]=function(e){e.display=!1},r)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SHOW="SHOW",e.HIDE="HIDE"}(o=t.EditorDialogConfirmMutation||(t.EditorDialogConfirmMutation={})),t.EditorDialogConfirmStateModule={namespaced:!0,state:function(){return{display:!1,question:"Are you Sure?",accept_label:"Delete",on_accept:void 0}},mutations:(r={},r[o.SHOW]=function(e,t){e.question=t.question,e.accept_label=t.accept_label,e.on_accept=t.on_accept,e.display=!0},r[o.HIDE]=function(e){e.display=!1,e.on_accept=void 0},r)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SHOW="SHOW",e.HIDE="HIDE"}(o=t.EditorDialogPromptMutation||(t.EditorDialogPromptMutation={})),t.EditorDialogPromptStateModule={namespaced:!0,state:function(){return{display:!1,title:"",default_value:"",confirm_label:"ok",on_save:void 0}},mutations:(r={},r[o.SHOW]=function(e,t){e.title=t.title,e.default_value=t.default_value,e.confirm_label=t.confirm_label,e.on_save=t.on_save,e.display=!0},r[o.HIDE]=function(e){e.display=!1,e.on_save=void 0},r)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0});var i,a,s=n(3).__importDefault(n(127));!function(e){e.NODE_IDS_BEING_MOVED="NODE_IDS_BEING_MOVED"}(i=t.EditorNetworkGetter||(t.EditorNetworkGetter={})),function(e){e.SET_NODE_IDS_BEING_MOVED="SET_NODE_IDS_BEING_MOVED",e.RESET_NODE_IDS_BEING_MOVED="RESET_NODE_IDS_BEING_MOVED"}(a=t.EditorNetworkMutation||(t.EditorNetworkMutation={})),t.EditorNetworkStateModule={namespaced:!0,state:function(){return{node_ids_being_moved:{}}},getters:(r={},r[i.NODE_IDS_BEING_MOVED]=function(e){return e.node_ids_being_moved},r),mutations:(o={},o[a.SET_NODE_IDS_BEING_MOVED]=function(e,t){for(var n=0,r=t;n<r.length;n++){var o=r[n];s.default.set(e.node_ids_being_moved,o,!0)}},o[a.RESET_NODE_IDS_BEING_MOVED]=function(e){s.default.set(e,"node_ids_being_moved",{})},o)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OPEN="OPEN",e.CLOSE="CLOSE"}(o=t.EditorNumericSliderMutation||(t.EditorNumericSliderMutation={})),t.EditorNumericSliderStateModule={namespaced:!0,state:function(){return{param_id:null,position:{x:0,y:0}}},mutations:(r={},r[o.OPEN]=function(e,t){e.param_id=t.param_id,e.position.x=t.position.x,e.position.y=t.position.y},r[o.CLOSE]=function(e){e.param_id=null},r)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FULLSCREEN_PANEL_ID="FULLSCREEN_PANEL_ID"}(o=t.EditorPanelMutation||(t.EditorPanelMutation={})),t.EditorPanelStateModule={namespaced:!0,state:function(){return{fullscreen_panel_id:null}},mutations:(r={},r[o.FULLSCREEN_PANEL_ID]=function(e,t){e.fullscreen_panel_id=t},r)}},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OPEN="OPEN",e.CLOSE="CLOSE"}(o=t.EditorPanelNodeSelectorMutation||(t.EditorPanelNodeSelectorMutation={})),t.EditorPanelNodeSelectorStateModule={namespaced:!0,state:function(){return{param_id:null}},mutations:(r={},r[o.OPEN]=function(e,t){e.param_id=t.param_id},r[o.CLOSE]=function(e){e.param_id=null},r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=o.__importDefault(n(633)),a=o.__importDefault(n(335));!function(e){e.ASSET="asset",e.CUSTOM_NODE_EDITOR="custom_node_editor",e.NETWORK="network",e.PARAMS="params",e.PARAM_EDIT="param_edit",e.PERFORMANCE="performance",e.SPREADSHEET="spreadsheet",e.VIEWER="viewer"}(r=t.PanelType||(t.PanelType={}));var s=[r.ASSET,r.CUSTOM_NODE_EDITOR,r.NETWORK,r.PARAMS,r.PARAM_EDIT,r.PERFORMANCE,r.SPREADSHEET,r.VIEWER],u=[r.NETWORK,r.PARAMS,r.PERFORMANCE,r.SPREADSHEET,r.VIEWER],_=n(19);t.SetupMultiplePanelPanels=function(e,t,n){var r=_.ref(e.init_properties.current_panel_index||0),o=_.ref(e.init_properties.panel_types||["viewer","param","network"]),l=_.computed((function(){var t=s;return e.scene_update_allowed||(t=u),t.map((function(e){return{id:e}}))})),c=_.computed((function(){var e=o.value[r.value];return null==e&&(e=o.value[0]),a.default(i.default(e))})),p=_.computed((function(){return o.value.length>1}));function d(e){r.value=e}return{set_panel_types_from_split_panel:function(e){if(t.value&&n.value){var r=0===e?t.value:n.value;console.log("remaining_panel",r)}},set_panel_types_from_json:function(e){o.value=e},set_current_panel_index:d,remove_tab:function(e){p.value&&(o.value.splice(e,1),r.value>=o.value.length&&(r.value=o.value.length-1))},add_tab:function(e){o.value.push(e),d(o.value.length-1)},tab_class_objects:_.computed((function(){return o.value.map((function(e,t){var n;return(n={active:t===r.value})[e]=!0,n}))})),tab_delete_allowed:p,current_panel_type:c,available_panel_types:l,panel_types:o,current_panel_index:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(273),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(t.MultiplePanelSplitMode||(t.MultiplePanelSplitMode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(311),o=n(50),i=function(){function e(e){this._scene=e}return e.prototype.process=function(){var e=[];this._scene.nodes_controller.reset_node_context_signatures(),r.CodeExporterDispatcher.dispatch_node(this._scene.root).create().forEach((function(t){e.push(t)})),e.push(this.var_name()+".set_frame("+(this._scene.frame||1)+")"),e.push(this.var_name()+".set_frame_range("+this._scene.frame_range.join(",")+")"),e.push(this.var_name()+".time_controller.set_fps("+this._scene.time_controller.fps+")");var t=this._scene.cameras_controller.master_camera_node_path;return t&&e.push(this.var_name()+".cameras_controller.set_master_camera_node_path('"+t+"')"),this.add_semi_colons(e),e.join("\n")},e.prototype.add_semi_colons=function(e){e.forEach((function(t,n){var r=t[t.length-1];"{}".includes(r)||(e[n]=t+";")}))},e.prototype.var_name=function(){return"scene"},e.sanitize_string=function(e){return e=e.replace(/'/g,"\\'"),e=o.CoreString.escape_line_breaks(e)},e}();t.SceneCodeExporter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(152);t.SetupNumericSlider=function(e,t){var n=void 0,o=void 0;return{on_slider_mousedown:function(e){e.target&&(t.has_expression()&&t.expression_controller?o=t.expression_controller.expression:n=t.value)},on_slider_mouseup:function(e){if(e.target){if(o)new r.ParamSetCommand(t,t.value,o).push();else if(!t.is_value_equal(n))new r.ParamSetCommand(t,t.value,n).push();n=void 0,o=void 0}},on_slider_drag:function(e){var n=e.target;if(n){var r=n.value;t.is_raw_input_equal(r)||t.set(r)}},on_slider_change:function(e){e.target}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(20);t.SetupSelectedNode=function(){var e=r.computed((function(){var e=o.StoreController.editor.current_node_graph_id();if(e){var t=o.StoreController.engine.json_node(e);if(t&&t.selection)return t.selection[0]}return null})),t=r.computed((function(){return e.value?o.StoreController.engine.json_node(e.value):null})),n=r.computed((function(){var e;return null===(e=t.value)||void 0===e?void 0:e.name})),i=r.computed((function(){var e;return null===(e=t.value)||void 0===e?void 0:e.type}));return{first_selected_node_id:e,first_selected_json_node:t,first_selected_node:function(){var t=e.value;return t?o.StoreController.engine.node(t):null},selected_node_name:n,selected_node_type:i}}},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(870),o=n(556);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1497);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/NodeTree.vue",t.default=s.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(993),i=r.__importDefault(n(847)),a=n(50),s=new URLSearchParams(window.location.search),u={current_node:s.get("current_node")||void 0,selected:s.get("selected")||void 0,perf:s.has("perf")?a.CoreString.to_boolean(s.get("perf")||""):void 0};o.Editor.load_scene("#app",i.default,u),o.Editor.on_save((function(e){console.log(JSON.stringify(e))}))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(995)),o=n(996),i=n(1297);t.EditorStore=new r.default.Store({modules:{engine:o.EngineStoreModule,editor:i.EditortoreModule}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(1287),i=n(1288),a=n(1289),s=n(1290),u=n(1291),_=n(1292),l=n(1293),c=n(1294),p=n(1295),d=function(){function e(){this.clipboard=o.EditorClipboardStoreController,this.context_menu=i.EditorContextMenuStoreController,this.dialog_alert=a.EditorDialogAlertStoreController,this.dialog_confirm=s.EditorDialogConfirmStoreController,this.dialog_prompt=u.EditorDialogPromptStoreController,this.network=_.EditorNetworkStoreController,this.numeric_slider=l.EditorNumericSliderStoreController,this.panel=c.EditorPanelStoreController,this.panel_node_selector=p.EditorPanelNodeSelectorStoreController}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_scene=function(e){this._scene=e},Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),e.prototype.set_store=function(e){this._store=e,this.clipboard.set_store(e),this.context_menu.set_store(e),this.dialog_alert.set_store(e),this.dialog_confirm.set_store(e),this.dialog_prompt.set_store(e),this.network.set_store(e),this.numeric_slider.set_store(e),this.panel.set_store(e),this.panel_node_selector.set_store(e)},e.prototype.close_all_popups=function(){this.context_menu.set_node_id(null),this.context_menu.set_param_id(null),this.numeric_slider.close(),this.panel_node_selector.close()},e.prototype.current_node_graph_id=function(){return this._store.getters["editor/current_node_id"]},e.prototype.current_json_node=function(){var e=this.current_node_graph_id();return e?r.StoreController.engine.json_node(e):null},e.prototype.current_node=function(){var e=this.current_node_graph_id();if(e){var t=this._scene.graph.node_from_id(e);if(t)return t}return r.StoreController.scene.root},e.prototype.set_current_node=function(e){this._store.commit("editor/current_node",e)},e.prototype.go_up=function(){var e=this.current_node().parent;e&&this.set_current_node(e)},e.prototype.go_down=function(){var e=this.current_node();if(e.children_allowed()&&e.children_controller){var t=e.children_controller.selection.nodes()[0];t&&this.set_current_node(t)}},e}();t.EditorStoreControllerClass=d,t.EditorStoreController=d.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(997),o=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},Object.defineProperty(e.prototype,"local_state",{get:function(){return this._store.state.editor.clipboard},enumerable:!0,configurable:!0}),e.prototype.node_id=function(){return this.local_state.node_id},e.prototype.param_id=function(){return this.local_state.param_id},e.prototype.set_node_id=function(e){this._store.commit("editor/clipboard/"+r.EditorClipboardMutation.NODE_ID,e)},e.prototype.set_param_id=function(e){this._store.commit("editor/clipboard/"+r.EditorClipboardMutation.PARAM_ID,e)},e}();t.EditorClipboardStoreControllerClass=o,t.EditorClipboardStoreController=o.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(998),o=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},Object.defineProperty(e.prototype,"local_state",{get:function(){return this._store.state.editor.context_menu},enumerable:!0,configurable:!0}),e.prototype.position=function(){return this.local_state.position},e.prototype.node_id=function(){return this.local_state.node_id},e.prototype.param_id=function(){return this.local_state.param_id},e.prototype.set_position=function(e){this._store.commit("editor/context_menu/"+r.EditorContextMenuMutation.POSITION,e)},e.prototype.set_node_id=function(e){this._store.commit("editor/context_menu/"+r.EditorContextMenuMutation.NODE_ID,e)},e.prototype.set_param_id=function(e){this._store.commit("editor/context_menu/"+r.EditorContextMenuMutation.PARAM_ID,e)},e}();t.EditorContextMenuStoreControllerClass=o,t.EditorContextMenuStoreController=o.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(999),i=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},Object.defineProperty(e.prototype,"local_state",{get:function(){return this._store.state.editor.dialog_alert},enumerable:!0,configurable:!0}),e.prototype.display=function(){return this.local_state.display},e.prototype.title=function(){return this.local_state.title},e.prototype.message=function(){return this.local_state.message},e.prototype.show=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(n){return[2,new Promise((function(n,r){var i={title:e.title,message:e.message,on_close:n};t._store.commit("editor/dialog_alert/"+o.EditorDialogAlertMutation.SHOW,i)}))]}))}))},e.prototype.hide=function(){this._store.commit("editor/dialog_alert/"+o.EditorDialogAlertMutation.HIDE)},e}();t.EditorDialogAlertStoreControllerClass=i,t.EditorDialogAlertStoreController=i.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1e3),i=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},Object.defineProperty(e.prototype,"local_state",{get:function(){return this._store.state.editor.dialog_confirm},enumerable:!0,configurable:!0}),e.prototype.display=function(){return this.local_state.display},e.prototype.question=function(){return this.local_state.question},e.prototype.accept_label=function(){return this.local_state.accept_label},e.prototype.on_accept=function(){return this.local_state.on_accept},e.prototype.show=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(n){return[2,new Promise((function(n,r){var i={question:e.question,accept_label:e.accept_label,on_accept:n};t._store.commit("editor/dialog_confirm/"+o.EditorDialogConfirmMutation.SHOW,i)}))]}))}))},e.prototype.hide=function(){this._store.commit("editor/dialog_prompt/"+o.EditorDialogConfirmMutation.HIDE)},e}();t.EditorDialogConfirmStoreControllerClass=i,t.EditorDialogConfirmStoreController=i.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1001),i=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},Object.defineProperty(e.prototype,"local_state",{get:function(){return this._store.state.editor.dialog_prompt},enumerable:!0,configurable:!0}),e.prototype.display=function(){return this.local_state.display},e.prototype.title=function(){return this.local_state.title},e.prototype.default_value=function(){return this.local_state.default_value},e.prototype.confirm_label=function(){return this.local_state.confirm_label},e.prototype.on_save=function(){return this.local_state.on_save},e.prototype.show=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(n){return[2,new Promise((function(n,r){var i={title:e.title,confirm_label:e.confirm_label,default_value:e.default_value,on_save:n};t._store.commit("editor/dialog_prompt/"+o.EditorDialogPromptMutation.SHOW,i)}))]}))}))},e.prototype.hide=function(){this._store.commit("editor/dialog_prompt/"+o.EditorDialogPromptMutation.HIDE)},e}();t.EditorDialogPromptStoreControllerClass=i,t.EditorDialogPromptStoreController=i.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1002),o=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},e.prototype.node_ids_being_moved=function(){return this._store.getters["editor/network/"+r.EditorNetworkGetter.NODE_IDS_BEING_MOVED]},e.prototype.set_node_ids_being_moved=function(e){this._store.commit("editor/network/"+r.EditorNetworkMutation.SET_NODE_IDS_BEING_MOVED,e)},e.prototype.reset_node_ids_being_moved=function(){this._store.commit("editor/network/"+r.EditorNetworkMutation.RESET_NODE_IDS_BEING_MOVED)},e}();t.EditorNetworkStoreControllerClass=o,t.EditorNetworkStoreController=o.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1003),o=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},Object.defineProperty(e.prototype,"local_state",{get:function(){return this._store.state.editor.numeric_slider},enumerable:!0,configurable:!0}),e.prototype.param_id=function(){return this.local_state.param_id},e.prototype.position=function(){return this.local_state.position},e.prototype.open=function(e){this._store.commit("editor/numeric_slider/"+r.EditorNumericSliderMutation.OPEN,e)},e.prototype.close=function(){this._store.commit("editor/numeric_slider/"+r.EditorNumericSliderMutation.CLOSE)},e}();t.EditorNumericSliderStoreControllerClass=o,t.EditorNumericSliderStoreController=o.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1004),o=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},Object.defineProperty(e.prototype,"local_state",{get:function(){return this._store.state.editor.panel},enumerable:!0,configurable:!0}),e.prototype.fullscreen_panel_id=function(){return this.local_state.fullscreen_panel_id},e.prototype.set_fullscreen_panel_id=function(e){this._store.commit("editor/panel/"+r.EditorPanelMutation.FULLSCREEN_PANEL_ID,e),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),0)},e}();t.EditorPanelStoreControllerClass=o,t.EditorPanelStoreController=o.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1005),o=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_store=function(e){this._store=e},Object.defineProperty(e.prototype,"local_state",{get:function(){return this._store.state.editor.panel_node_selector},enumerable:!0,configurable:!0}),e.prototype.param_id=function(){return this.local_state.param_id},e.prototype.open=function(e){this._store.commit("editor/panel_node_selector/"+r.EditorPanelNodeSelectorMutation.OPEN,e)},e.prototype.close=function(){this._store.commit("editor/panel_node_selector/"+r.EditorPanelNodeSelectorMutation.CLOSE)},e}();t.EditorPanelNodeSelectorStoreControllerClass=o,t.EditorPanelNodeSelectorStoreController=o.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(996),o=function(){function e(){}return e.instance=function(){return this._instance=this._instance||new e},e.prototype.set_scene=function(e){this._scene=e,this.update_scene()},Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),e.prototype.set_store=function(e){this._store=e,this.update_scene()},e.prototype.node=function(e){return this._scene.graph.node_from_id(e)},e.prototype.param=function(e){return this._scene.graph.node_from_id(e)},e.prototype.json_node=function(e){return this._store.getters["engine/json_node"](e)},e.prototype.json_param=function(e){return this._store.getters["engine/json_param"](e)},e.prototype.json_children=function(e){var t=this.json_node(e);return t?this._store.getters["engine/json_children"](t):[]},e.prototype.frame=function(){return this._store.getters["engine/frame"]},e.prototype.frame_range=function(){return this._store.getters["engine/frame_range"]},e.prototype.frame_range_locked=function(){return this._store.getters["engine/frame_range_locked"]},e.prototype.playing_state=function(){return this._store.getters["engine/playing_state"]},e.prototype.update_scene=function(){this._store&&this._scene&&this._store.commit("engine/"+r.EngineMutation.SCENE)},e.prototype.update_frame=function(){this._store.commit("engine/"+r.EngineMutation.SCENE_FRAME_UPDATED)},e.prototype.update_frame_range=function(){this._store.commit("engine/"+r.EngineMutation.SCENE_FRAME_RANGE_UPDATED)},e.prototype.update_play_state=function(){this._store.commit("engine/"+r.EngineMutation.SCENE_PLAY_STATE_UPDATED)},e.prototype.update_node_error=function(e){this._commit(r.EngineMutation.NODE_ERROR_UPDATED,e)},e.prototype.update_node_ui_data_position=function(e){this._commit(r.EngineMutation.NODE_UI_DATA_POSITION_UPDATED,e)},e.prototype.update_node_ui_data_comment=function(e){this._commit(r.EngineMutation.NODE_UI_DATA_COMMENT_UPDATED,e)},e.prototype.update_node_selection=function(e){this._commit(r.EngineMutation.NODE_SELECTION_UPDATED,e)},e.prototype.update_node_display_flag=function(e){this._commit(r.EngineMutation.NODE_DISPLAY_FLAG_UPDATED,e)},e.prototype.update_node_bypass_flag=function(e){this._commit(r.EngineMutation.NODE_BYPASS_FLAG_UPDATED,e)},e.prototype.update_node_name=function(e){this._commit(r.EngineMutation.NODE_NAME_UPDATED,e)},e.prototype.update_node_inputs=function(e){this._commit(r.EngineMutation.NODE_INPUTS_UPDATED,e)},e.prototype.update_node_named_inputs=function(e){this._commit(r.EngineMutation.NODE_NAMED_INPUTS_UPDATED,e)},e.prototype.update_node_named_outputs=function(e){this._commit(r.EngineMutation.NODE_NAMED_OUTPUTS_UPDATED,e)},e.prototype.add_node_params_to_store=function(e){this._commit(r.EngineMutation.NODE_ADD_PARAMS_TO_STORE,e)},e.prototype.update_params=function(e){this._commit(r.EngineMutation.NODE_PARAMS_UPDATED,e)},e.prototype.add_node=function(e,t){this._commit(r.EngineMutation.NODE_CREATED,{parent_id:e,child_node_json:t.child_node_json})},e.prototype.delete_node=function(e,t){this._commit(r.EngineMutation.NODE_DELETED,{parent_id:t.parent_id,child_id:e})},e.prototype.update_param_raw_input=function(e){this._commit(r.EngineMutation.PARAM_RAW_INPUT_UPDATED,e)},e.prototype.update_param_value=function(e){this._commit(r.EngineMutation.PARAM_VALUE_UPDATED,e)},e.prototype.update_param_expression=function(e){this._commit(r.EngineMutation.PARAM_EXPRESSION_UPDATED,e)},e.prototype.update_param_error=function(e){this._commit(r.EngineMutation.PARAM_ERROR_UPDATED,e)},e.prototype.update_param_visible_state=function(e){this._commit(r.EngineMutation.PARAM_VISIBLE_STATE,e)},e.prototype._commit=function(e,t){this._store.commit("engine/"+e,t)},e}();t.EngineStoreControllerClass=o,t.EngineStoreController=o.instance()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(997),o=n(998),i=n(999),a=n(1001),s=n(1004),u=n(1005),_=n(1002),l=n(1003),c=n(1e3);t.EditortoreModule={namespaced:!0,modules:{clipboard:r.EditorClipboardStateModule,context_menu:o.EditorContextMenuStateModule,dialog_alert:i.EditorDialogAlertStateModule,dialog_confirm:c.EditorDialogConfirmStateModule,dialog_prompt:a.EditorDialogPromptStateModule,network:_.EditorNetworkStateModule,numeric_slider:l.EditorNumericSliderStateModule,panel:s.EditorPanelStateModule,panel_node_selector:u.EditorPanelNodeSelectorStateModule},state:function(){return{current_node_id:void 0,current_camera_name:void 0,current_node_selection_ids:[],display_loader:!0}},getters:{display_loader:function(e){return e.display_loader},current_node_id:function(e){return e.current_node_id}},mutations:{current_node:function(e,t){t.children_allowed()&&(e.current_node_id=t.graph_node_id)},hide_loader:function(e){return e.display_loader=!1}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(127));n(1299),n(1301),n(1302),n(1303),n(1304),n(1305),n(1306),n(1307),n(1308),n(1309),n(1310),n(1311),n(1312),n(1313),n(1314),n(1315),n(1316);var i=r.__importDefault(n(46));o.default.component("v-icon",i.default)},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(860),o=n(377);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1515);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/editor/Editor.vue",t.default=s.exports},function(e,t,n){"use strict";n.r(t);var r=n(861),o=n(379);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1321);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/editor/top/Top.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(383);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".dropdown_menu,.dropdown_menu_label,.dropdown_menu_label_content{display:inline-block}.dropdown_menu.on_hover:hover>.dropdown_menu_label>.dropdown_menu_pixel:not(.always_visible){display:block}.dropdown_menu li{display:block}.dropdown_menu .dropdown_menu_label{position:relative;cursor:pointer}.dropdown_menu .dropdown_menu_label .dropdown_menu_label_content:hover{opacity:.8}.dropdown_menu .dropdown_menu_label .dropdown_menu_pixel:not(.always_visible){display:none}.dropdown_menu .dropdown_menu_label .dropdown_menu_pixel.always_visible{display:block}.dropdown_menu .dropdown_menu_pixel{z-index:999;position:absolute;height:1px}.dropdown_menu .dropdown_menu_pixel.bottom_left:not(.right_aligned){bottom:0px;left:0px}.dropdown_menu .dropdown_menu_pixel.top_right{top:0px;left:100%}.dropdown_menu .dropdown_menu_pixel.right_aligned{bottom:0px;left:100%}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content{position:absolute;border:1px solid #7b7b7b;background-color:#bababa;overflow-x:hidden}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content.right_aligned{position:relative;right:100%}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content .dropdown_menu,.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content .dropdown_menu_label{display:block}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content ul{list-style-type:none;margin:0px}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content ul li .entry{padding:5px 10px;white-space:nowrap}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content ul li .entry .dropdown_menu_label{top:-5px}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content ul li .entry.disabled{cursor:default;color:#878787}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content ul li .entry.active{cursor:pointer}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content ul li .entry.active:hover{background-color:#aeaeae}.dropdown_menu .dropdown_menu_pixel .dropdown_menu_content ul li .entry .emphasis{color:#cc4b37;font-weight:bold;border-bottom:2px solid #cc4b37}.dropdown_menu .dropdown_menu_pixel .sub_entries_dropdown{position:absolute}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(384);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".TopMenu{background-color:#7b7b7b}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(863),o=n(385);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1326);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/dialogs/Alert.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(389);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Polygon-Modal-Container{position:relative;width:0px;height:0px;top:0px;left:0px}.Polygon-Modal-Container .Polygon-Modal{position:absolute;z-index:100;border-radius:5px;border:2px solid gray;box-shadow:5px 5px 5px #737373;background-color:#add8e6}.Polygon-Modal-Container .Polygon-Modal .modal-grid{height:100%}.Polygon-Modal-Container .Polygon-Modal .modal-grid .Modal-title{font-weight:bold;cursor:pointer;padding:5px;border-bottom:1px solid gray}.Polygon-Modal-Container .Polygon-Modal .modal-grid .Modal-body{max-height:100%}.Polygon-Modal-Container .Polygon-Modal .modal-grid .Modal-size-handle{height:10px;background-color:green;cursor:se-resize}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(390);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".DialogAlert{background-color:#fff}.DialogAlert .message-container{padding:20px}.DialogAlert .buttons{padding:10px;margin-bottom:0px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(864),o=n(391);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1329);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/dialogs/Confirm.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(393);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".DialogConfirm{background-color:#fff}.DialogConfirm .buttons{padding:10px;margin-bottom:10px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(865),o=n(394);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1332);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/dialogs/Prompt.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(396);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".DialogPrompt{background-color:#fff}.DialogPrompt form{padding:10px}.DialogPrompt form input{margin:0}.DialogPrompt .buttons{padding:10px;margin-bottom:0px}.DialogPrompt .buttons .button{margin-bottom:0px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(866),o=n(397);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1488);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/multiple/Multiple.vue",t.default=s.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);t.SetupMultiplePanelJson=function(e,t){return r.onBeforeMount((function(){})),{on_component_created:function(){}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(3).__importDefault(n(179)),a=n(185),s=n(1007),u=n(19);!function(e){e.HORIZONTAL="left/right",e.VERTICAL="top/bottom"}(r||(r={})),function(e){e.DELETE="delete"}(o||(o={}));var _=n(20),l={split_mode:s.MultiplePanelSplitMode.VERTICAL,sub_panels_init_properties:[{panel_types:["viewer"],current_panel_index:0},{panel_types:["param"],current_panel_index:0}]},c={panel_types:["network"],current_panel_index:0};t.SetupMultiplePanelSplit=function(e,t,n,p,d){var f=u.ref(e.init_properties.split_mode||null),h=u.ref(e.init_properties.sub_panels_init_properties||[l,c]),m=u.ref(.5),g=u.computed((function(){var e=_.StoreController.editor.panel.fullscreen_panel_id();return e?e.includes(E.value[0])?[!0,!1]:[!1,!0]:[!0,!0]})),v=u.computed((function(){var e=_.StoreController.editor.panel.fullscreen_panel_id();return e?e.includes(E.value[0])?1:0:m.value}));u.onBeforeMount((function(){}));var y=u.computed((function(){return null!=f.value})),b=u.computed((function(){return y.value&&f.value==s.MultiplePanelSplitMode.HORIZONTAL})),w=u.computed((function(){return y.value&&f.value==s.MultiplePanelSplitMode.VERTICAL})),x=u.computed((function(){var t=[{id:s.MultiplePanelSplitMode.HORIZONTAL,label:"split "+r.HORIZONTAL},{id:s.MultiplePanelSplitMode.VERTICAL,label:"split "+r.VERTICAL}];return e.level>0&&t.push({id:o.DELETE,label:"delete"}),t})),C=u.computed((function(){return{"split-panel-horizontal":b.value,"split-panel-vertical":w.value,"full_height_container grid-x":b.value,"full_height_container grid-y":w.value}})),P=u.computed((function(){return null!=_.StoreController.editor.panel.fullscreen_panel_id()})),E=u.computed((function(){return[e.panel_id+":0",e.panel_id+":1"]})),O=u.computed((function(){var e=b.value?"width":"height",t={},n={};return t[e]=100*v.value+"%",n[e]=100*(1-v.value)+"%",g.value[0]||(t.display="none"),g.value[1]||(n.display="none"),[t,n]})),T=u.computed((function(){return b.value?{left:100*m.value+"%"}:{top:100*m.value+"%"}})),N={min:{x:0,y:0},size:{x:0,y:0}};function j(e){var t=e.pageX,n=e.pageY,r={x:(t-N.min.x)/N.size.x,y:(n-N.min.y)/N.size.y};m.value=b.value?r.x:r.y}function A(e){document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",A),a.CoreDom.remove_drag_classes(),window.dispatchEvent(new Event("resize"))}return{is_split:y,on_move_start:function(e){if(n.value){var t=n.value.getBoundingClientRect();N.min.x=t.left,N.min.y=t.top,N.size.x=n.value.offsetWidth,N.size.y=n.value.offsetHeight,a.CoreDom.add_drag_classes(),document.addEventListener("mousemove",j),document.addEventListener("mouseup",A)}},delete_split_panel:function(e){p.set_panel_types_from_split_panel(e),f.value=null},set_split_mode:function(n){n===o.DELETE?t.emit("delete",e.panel_id):(f.value=n,h.value=[i.default(d()),i.default(d())])},split_mode:f,full_screen_activated:P,split_panel_separator_style_object:T,cell_panel_ids:E,cell_style_objects:O,split_container_class_object:C,split_types:x,split_panel_init_properties:h}}},function(e,t,n){"use strict";n.r(t);var r=n(876),o=n(399);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1425);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/Network.vue",t.default=s.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(19);t.SetupCamera=function(e,t,n,i){o.onMounted((function(){e.value&&(i.set_element(e.value),_())}));var a=o.computed((function(){return{transform:"scale("+t.value.zoom+")"}})),s=o.computed((function(){return{left:t.value.position.x+"px",top:t.value.position.y+"px"}})),u=o.computed((function(){return r.StoreController.editor.current_node_graph_id()}));function _(){i.set_parent_node(r.StoreController.editor.current_node())}function l(e){n[e]={position:{x:t.value.position.x,y:t.value.position.y},zoom:t.value.zoom}}return o.watch(u,(function(e,r){var o;r&&l(r),e&&(o=n[e])&&(t.value.zoom=o.zoom,t.value.position.x=o.position.x,t.value.position.y=o.position.y),_()})),{zoom_container_style_object:a,pan_container_style_object:s,save_camera_history_for_json_node:l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1340),o=n(20);t.SetupEventKey=function(e,t,n){function i(){var e=o.StoreController.editor.current_node();e&&e.children_allowed()&&e.children_controller&&new r.NodeDeleteCommand(e,e.children_controller.selection.nodes()).push()}function a(){}function s(){var t=o.StoreController.editor.current_node();t&&t.children_allowed()&&t.children_controller&&e.copy_from_node(t,t.children_controller.selection.nodes())}function u(){var n=o.StoreController.editor.current_node();n&&e.paste_in_node(n,t)}return{on_key_press:function(e){return!1},on_key_down:function(e){var r=!0;if(e.ctrlKey)switch(e.key){case"x":break;case"c":s();break;case"v":u();break;default:r=!1}else switch(e.key){case"Delete":i();break;case"f":t.frame_selection();break;case"Escape":n.close_tab_menu(),n.close_node_create();break;case"Tab":n.toggle_tab_menu(),e.preventDefault(),e.stopPropagation();break;default:r=!1}return r},on_key_up:function(e){return!1},delete_selected_nodes:i,cut:a,copy:s,paste:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(141),i=n(854),a=r.__importDefault(n(199)),s=function(e){function t(t,n){var r=e.call(this)||this;return r._parent=t,r._nodes=n,r._undo_code_lines=[],r._required_nodes_code_by_name={},r._required_outputs_code_by_name=new Map,r.prepare(),r}return r.__extends(t,e),t.prototype.prepare=function(){var e=this,t=new i.NodesCodeExporter(this._nodes);this._undo_code_lines=t.process("tmp_parent");var n={};this._nodes.forEach((function(t){t.io.inputs.inputs().forEach((function(e){if(e){var t=e.name;n[t]=e}})),t.io.connections.output_connections().forEach((function(r){if(r){var o=r.node_dest,i=o.name;n[i]=o;var a=r.input_index,s=r.output_index;e._required_outputs_code_by_name.get(i)||e._required_outputs_code_by_name.set(i,new Map);var u=i+".set_input("+a+", "+t.name+", "+s+")";e._required_outputs_code_by_name.get(i).set(a,u)}}))})),a.default(n).forEach((function(t){var n=t.name;e._required_nodes_code_by_name[n]="const "+n+" = tmp_parent.node('"+n+"')"}))},t.prototype.do=function(){var e=this;this._nodes.forEach((function(t){e._remove_node(t)})),this._change_display_flag()},t.prototype.undo=function(){var e=this;this._parent.scene.lifecycle_controller.on_create_prevent((function(){var t=a.default(e._required_nodes_code_by_name),n=[];e._required_outputs_code_by_name.forEach((function(e,t){e.forEach((function(e,t){n.push(e)}))})),a.default(e._required_outputs_code_by_name).map((function(e){return a.default(e)}));var r=[].concat(t,e._undo_code_lines,n).join("\n");new Function("tmp_parent",r)(e._parent),e._revert_display_flag()}))},t.prototype._remove_node=function(e){this._parent.remove_node(e)},t.prototype._change_display_flag=function(){},t.prototype._revert_display_flag=function(){},t}(o.BaseCommand);t.NodeDeleteCommand=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(80)),o=n(1008),i=n(854),a=n(311),s=function(){function e(e){this._node=e,this._lines=[]}return e.prototype.create=function(e){return this.reset(),this.is_root()||(this.add_create(e),this.add_name()),this.add_children(),this.add_selection(),this.add_position({}),this.add_input_clonable_state(),this.add_bypass_flag(),this.add_display_flag(),this.add_params(),this.add_custom(),this._lines.push(this.var_name()+".lifecycle.set_creation_completed();"),this._lines},e.prototype.set_up=function(e){return void 0===e&&(e={}),this.reset(),this.add_input(),this._lines},e.prototype.create_function_declare=function(e){void 0===e&&(e="parent"),this._node.scene.nodes_controller.register_node_context_signature(this._node);var t=[];return t.push("function "+this.function_name()+"("+e+"){"),this.create(e).forEach((function(e){t.push("\t"+e)})),t.push("\treturn "+this.var_name()),t.push("}"),t},e.prototype.create_function_call=function(e){return null==e&&this._node.parent&&(e=a.CodeExporterDispatcher.dispatch_node(this._node.parent).var_name()),"var "+this.var_name()+" = "+this.function_name()+"("+e+")"},e.prototype.var_name=function(){return this.is_root()?new o.SceneCodeExporter(this._node.scene).var_name()+".root":this._node.name.replace(/\//g,"_")},e.prototype.function_name=function(){return"create_"+this.var_name().replace(/[^a-z0-9]/gim,"_")},e.prototype.is_root=function(){return null===this._node.parent&&this._node.graph_node_id==this._node.root.graph_node_id},e.prototype.reset=function(){this._lines=[]},e.prototype.add_create=function(e){null==e&&(this._node.parent&&(e=a.CodeExporterDispatcher.dispatch_node(this._node.parent).var_name()));var t="var "+this.var_name()+" = "+e+".create_node('"+this._node.type+"')";this._lines.push(t)},e.prototype.add_name=function(){this._node.graph_node_id!==this._node.root.graph_node_id&&this._lines.push(this.var_name()+".set_name('"+this._node.name+"')")},e.prototype.add_input=function(){var e=this;this._node.io.inputs.inputs().forEach((function(t,n){var r=e._node.io.connections.input_connection(n);if(t&&r){var o=r.output_index,i=a.CodeExporterDispatcher.dispatch_node(t),s=void 0;if(e._node.io.inputs.has_named_inputs){var u=e._node.io.inputs.named_input_connection_points[n].name,_=t.io.outputs.named_output_connection_points[o].name;s=e.var_name()+".set_input('"+u+"', "+i.var_name()+", '"+_+"')"}else s=e.var_name()+".set_input("+n+", "+i.var_name()+")";e._lines.push(s)}}))},e.prototype.add_position=function(e){if(void 0===e&&(e={}),this._node.parent){var t,n=this._node.ui_data.position.clone();null!=(t=e.position_x_offset)&&(n.x+=t),this._lines.push(this.var_name()+".ui_data.set_position("+n.x+", "+n.y+")")}},e.prototype.add_params=function(){var e=this;this._node.params.all.forEach((function(t){a.CodeExporterDispatcher.dispatch_param(t).process().forEach((function(t){e._lines.push(t)}))})),this._lines.push(this.var_name()+".params.run_on_scene_load_hooks()")},e.prototype.add_input_clonable_state=function(){this._node.io.inputs.override_clonable_state_allowed()&&(this._node.io.inputs.override_clonable_state()&&this._lines.push(this.var_name()+".io.inputs.set_override_clonable_state(true)"))},e.prototype.add_bypass_flag=function(){var e,t;(null===(e=this._node.flags)||void 0===e?void 0:e.has_bypass())&&(null===(t=this._node.flags.bypass)||void 0===t?void 0:t.active)&&this._lines.push(this.var_name()+".flags.bypass.set(true)")},e.prototype.add_display_flag=function(){var e,t;(null===(e=this._node.flags)||void 0===e?void 0:e.has_display())&&(null===(t=this._node.flags.display)||void 0===t?void 0:t.active)&&this._lines.push(this.var_name()+".flags.display.set(true)")},e.prototype.add_children=function(){var e=this,t=r.default(this._node.children(),(function(e){return e.name}));new i.NodesCodeExporter(t).process().forEach((function(t){e._lines.push(t)}))},e.prototype.add_custom=function(){},e.prototype.add_selection=function(){var e;if(null!=(null===(e=this._node.children_controller)||void 0===e?void 0:e.selection))for(var t=0,n=this._node.children_controller.selection.nodes();t<n.length;t++){var r=n[t],o=a.CodeExporterDispatcher.dispatch_node(r);this._lines.push(this.var_name()+".children_controller.selection.add("+o.var_name()+")")}},e}();t.NodeCodeExporter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(237),i=n(311),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.as_code_default_value_string=function(){return"["+this._param.components.map((function(e){return e.value})).join(",")+"]"},t.prototype.add_main=function(){var e=this;this._param.components.forEach((function(t){i.CodeExporterDispatcher.dispatch_param(t).process().forEach((function(t){e._lines.push(t)}))}))},t}(o.ParamCodeExporter);t.ParamMultipleCodeExporter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.add_main=function(){var e;if(this._param.has_expression()&&this._param.expression_controller){var t=null===(e=this._param.expression_controller.expression)||void 0===e?void 0:e.replace(/'/g,"\\'");this._lines.push(this.prefix()+".set('"+t+"')")}else this._lines.push(this.prefix()+".set("+this._param.value+")")},t}(n(237).ParamCodeExporter);t.ParamNumericCodeExporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.as_code_default_value_string=function(){return"'"+this._param.default_value+"'"},t.prototype.add_main=function(){var e=this._param.value;e=e.replace(/'/g,"\\'");var t=this.prefix()+".set('"+e+"')";this._lines.push(t)},t}(n(237).ParamCodeExporter);t.ParamOperatorPathCodeExporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(51)),i=n(237),a=n(1008),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.as_code_default_value_string=function(){return"'"+this._param.default_value+"'"},t.prototype.add_main=function(){var e=this._param.raw_input;o.default(e)&&(e=a.SceneCodeExporter.sanitize_string(e));var t=this.prefix()+".set('"+e+"')";this._lines.push(t)},t}(i.ParamCodeExporter);t.ParamStringCodeExporter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.default_value=function(){return JSON.stringify(this._param.default_value_serialized)},t.prototype.add_main=function(){var e=this._param.value.to_json(),t=this.prefix()+".set('"+JSON.stringify(e)+"')";this._lines.push(t)},t}(n(237).ParamCodeExporter);t.ParamRampCodeExporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(855),o=n(19),i=n(856),a=n(20);t.SetupEventMouse=function(e,t){var n=e.node_animation_helper,s=e.connection_helper,u=e.node_selection_helper,_=e.cam_animation_helper,l=e.node_creation_helper,c=t.event_key_options,p=t.tab_menu_options,d=t.camera_options,f=o.ref(!1),h=o.ref(!1);return{canvas_class_object:o.computed((function(){return{pan_in_progress:f.value,zoom_in_progress:h.value}})),on_mouse_down:function(e){switch(e.button){case r.MouseButton.LEFT:if(n.move_start(e))return;if(s.move_start(e))return;u.move_start(e);break;case r.MouseButton.MIDDLE:_.pan_start(e),f.value=!0;break;case r.MouseButton.RIGHT:_.zoom_start(e),h.value=!0}},on_mouse_move:function(e){i.KeyEventsDispatcher.instance().register_processor(c),p.update_tab_menu_position(e),_.pan_progress(e),_.zoom_progress(e),n.move_progress(e),l.move_progress(e),s.move_progress(e),u.move_progress(e)},on_mouse_up:function(e){var t=n.move_in_progress()||_.move_in_progress(),r=n.mouse_barely_moved();u.move_end(e,t,r),_.pan_end(),_.zoom_end(),h.value=!1,f.value=!1,n.move_end(),s.move_end(),p.close_tab_menu();var o=a.StoreController.editor.current_node_graph_id();o&&d.save_camera_history_for_json_node(o)},on_click:function(e){p.close_tab_menu(),l.create(e)},on_context_menu:function(e){return!1},on_wheel:function(e){_.zoom(e);var t=a.StoreController.editor.current_node_graph_id();t&&d.save_camera_history_for_json_node(t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetupJson=function(e,t){return{from_json:function(e){var n=e.camera;if(n){var r=n.position,o=n.zoom;r&&(n.position.x=r.x,n.position.y=r.y),o&&(n.zoom=o)}var i=e.history;if(i)for(var a=0,s=Object.keys(i);a<s.length;a++){var u=s[a];t[u]=i[u]}},to_json:function(){return{camera:{position:{x:e.position.x,y:e.position.y},zoom:e.zoom},history:t}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);t.SetupNodeAnimation=function(e,t){return r.onMounted((function(){t.value&&e.set_element(t.value)})),{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(19);t.SetupNodeConnection=function(e,t,n){return o.onMounted((function(){n.value&&t.set_element(n.value)})),{connection_src_json_node:o.computed((function(){var t=e.node_src_id;return t?r.StoreController.engine.json_node(t):null})),connection_dest_json_node:o.computed((function(){var t=e.node_dest_id;return t?r.StoreController.engine.json_node(t):null}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(125),o=n(20),i=n(19);t.SetupNodeCreation=function(e,t){var n=i.computed((function(){return o.StoreController.editor.current_node_graph_id()}));function a(){var e=o.StoreController.editor.current_node();t.set_parent_node(e)}return i.onMounted((function(){e.value&&t.set_element(e.value),a()})),i.watch(n,(function(e,t){a()})),{node_creation_rectangle_style_object:i.computed((function(){if(t.active){var e=r.Constants.NODE_UNIT;return{display:"block",left:t.position.x+"px",top:t.position.y+"px",width:e+"px",height:e+"px"}}return{display:"none"}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1353),o=n(1354),i=n(20);t.SetupNodeEvent=function(e){var t=e.node_animation_helper,n=e.connection_helper;return{on_capture_node_for_move:function(e){t.capture_node(e)},on_capture_node_src_for_connection:function(e,t){n.capture_node_src(e,t)},on_capture_node_dest_for_connection:function(e,t){n.capture_node_dest(e,t)},on_capture_node_final_for_connection:function(e){n.capture_node_final(e)},on_set_display_flag:function(e){var t=i.StoreController.engine.node(e),n=i.StoreController.editor.current_node();if(n&&n.children_allowed()&&n.children_controller){var o=n.children_controller.selection,a=o.contains(t)?o.nodes():[t];new r.SetDisplayFlagCommand(a).push()}},on_set_bypass_flag:function(e){var t=i.StoreController.engine.node(e),n=i.StoreController.editor.current_node();if(n&&n.children_allowed()&&n.children_controller){var r=n.children_controller.selection,a=r.contains(t)?r.nodes():[t];new o.SetBypassFlagCommand(a).push()}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t){var n,r,o=e.call(this)||this;if(o._nodes=t,o._first_node=o._nodes[0],o._first_node){var i=o._first_node.parent;i&&(i.display_node_controller?o._old_node=i.display_node_controller.display_node:o._new_display_state=!(null===(r=null===(n=o._first_node.flags)||void 0===n?void 0:n.display)||void 0===r?void 0:r.active))}return o}return r.__extends(t,e),t.prototype.do=function(){var e,t,n,r;if(this._first_node&&this._first_node.parent)if(this._first_node.parent.display_node_controller)null===(t=null===(e=this._first_node.flags)||void 0===e?void 0:e.display)||void 0===t||t.set(!0);else if(null!=this._new_display_state)for(var o=0,i=this._nodes;o<i.length;o++){null===(r=null===(n=i[o].flags)||void 0===n?void 0:n.display)||void 0===r||r.set(this._new_display_state)}},t.prototype.undo=function(){var e,t,n,r;if(this._first_node)if(this._old_node)null===(t=null===(e=this._old_node.flags)||void 0===e?void 0:e.display)||void 0===t||t.set(!0);else if(null!=this._new_display_state)for(var o=0,i=this._nodes;o<i.length;o++){null===(r=null===(n=i[o].flags)||void 0===n?void 0:n.display)||void 0===r||r.set(!this._new_display_state)}},t}(n(141).BaseCommand);t.SetDisplayFlagCommand=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t){var n,r,o=e.call(this)||this;return o._nodes=t,o._first_node=t[0],o._first_node&&(o._current_state=null===(r=null===(n=o._first_node.flags)||void 0===n?void 0:n.bypass)||void 0===r?void 0:r.active),o}return r.__extends(t,e),t.prototype.do=function(){var e,t;if(this._first_node&&null!=this._current_state){var n=this._first_node.scene.cooker;n.block();for(var r=0,o=this._nodes;r<o.length;r++){null===(t=null===(e=o[r].flags)||void 0===e?void 0:e.bypass)||void 0===t||t.set(!this._current_state)}n.unblock()}},t.prototype.undo=function(){var e,t;if(this._first_node&&null!=this._current_state)for(var n=0,r=this._nodes;n<r.length;n++){null===(t=null===(e=r[n].flags)||void 0===e?void 0:e.bypass)||void 0===t||t.set(this._current_state)}},t}(n(141).BaseCommand);t.SetBypassFlagCommand=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(19);t.SetupNodeNavigation=function(){var e=o.computed((function(){return r.StoreController.editor.current_node_graph_id()}));return{display_go_up_button:o.computed((function(){return!!e&&(r.StoreController.editor.current_node()&&null!=r.StoreController.editor.current_node().parent)})),go_up:function(){r.StoreController.editor.go_up()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(20),i=n(19);t.SetupNodeSelection=function(e,t,n){var a=i.computed((function(){return o.StoreController.editor.current_node_graph_id()}));function s(){var e=o.StoreController.editor.current_node();e&&t.set_parent_node(e)}return i.onMounted((function(){n.value&&t.set_element(n.value),s()})),i.watch(a,(function(e,t){s()})),{selection_rectangle_style_object:i.computed((function(){var n=t.box(),o=new r.Vector2;return n.getSize(o),{display:""+(e.active?"block":"none"),left:n.min.x+"px",top:n.min.y+"px",width:o.x+"px",height:o.y+"px"}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(214),o=n(19);t.SetupTabMenu=function(e,t){var n=o.ref(!1),i=o.ref({x:0,y:0}),a=o.computed((function(){return{left:i.value.x-10+"px",top:i.value.y+"px"}}));function s(e){n.value=e}return{tab_menu_opened:n,tab_menu_style_object:a,open_tab_menu:function(){s(!0)},toggle_tab_menu:function(){s(!n.value)},close_tab_menu:function(){s(!1)},on_tab_menu_select:function(e){var n=e.split("/"),r=n[n.length-1];t.activate(r)},close_node_create:function(){t.deactivate()},update_tab_menu_position:function(t){!n.value&&e.value&&new r.EventHelper(e.value).element_position(t,i.value)}}}},function(e,t,n){"use strict";n.r(t);var r=n(880),o=n(401);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1359);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/TabMenu.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(403);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".TabMenu{position:absolute}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(881),o=n(404);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1410);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/Node.vue",t.default=s.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetupCapture=function(e,t){return{capture_node_for_move:function(){t.emit("capture_node_for_move",e.graph_node_id)},capture_node_src_for_connection:function(n){t.emit("capture_node_src_for_connection",e.graph_node_id,n)},capture_node_dest_for_connection:function(n){t.emit("capture_node_dest_for_connection",e.graph_node_id,n)},capture_node_final_for_connection:function(){t.emit("capture_node_final_for_connection",e.graph_node_id)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(19);t.SetupChildrenOwner=function(e,t,n){var i=r.StoreController.engine.node(e.graph_node_id);return{children_allowed:o.computed((function(){return(null==i?void 0:i.children_allowed())||!1})),enter_button_container_style_object:o.computed((function(){if(n.value)return{right:.5*t.value.x+"px",top:0*t.value.y+"px"}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);t.SetupCommentable=function(e,t,n){var o=r.computed((function(){return e.ui_data_json.comment})),i=r.computed((function(){return null!=o.value&&""!=o.value})),a=r.computed((function(){return n.value?{left:.5*t.value.x+"px",top:.5*t.value.y+"px"}:{left:-.5*t.value.x+"px",top:-.5*t.value.y+"px"}}));return{display_comment:i,comment:o,comment_container_style_object:a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20);t.SetupContextMenu=function(e){function t(){r.StoreController.editor.context_menu.set_node_id(null)}return{on_contextmenu:function(n){var o=r.StoreController.editor.context_menu.node_id(),i=e.graph_node_id;o==i?t():r.StoreController.editor.context_menu.set_node_id(i),r.StoreController.editor.context_menu.set_position({x:n.pageX,y:n.pageY})},on_contextmenu_close:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(125),o=n(19),i=n(20);t.SetupBypassFlag=function(e,t){var n=i.StoreController.engine.node(e.graph_node_id),a=o.computed((function(){var t;return null!=(null===(t=e.flags)||void 0===t?void 0:t.bypass)})),s=o.computed((function(){var t;return 1==(null===(t=e.flags)||void 0===t?void 0:t.bypass)})),u=o.computed((function(){return{top:-.5*r.Constants.NODE_HEIGHT+"px",left:-.5*((null==n?void 0:n.ui_data.width())||100)+2+"px",height:t.value.y+"px"}})),_=o.computed((function(){return{top:"5px",height:t.value.y-10+"px"}})),l=o.computed((function(){return{on:s.value,off:!s.value}}));return{has_bypass_flag:a,is_bypassed:s,bypass_flag_container_style_object:u,bypass_flag_style_object:_,bypass_flag_class_object:l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(125),o=n(20),i=n(19);t.SetupDisplayFlag=function(e,t){var n=o.StoreController.engine.node(e.graph_node_id);return{has_display_flag:i.computed((function(){var t;return null!=(null===(t=e.flags)||void 0===t?void 0:t.display)})),display_flag_container_style_object:i.computed((function(){return{top:-.5*r.Constants.NODE_HEIGHT+"px",left:.5*((null==n?void 0:n.ui_data.width())||100)-2+"px",height:t.value.y+"px"}})),display_flag_style_object:i.computed((function(){return{top:"5px",height:t.value.y-10+"px"}})),display_flag_class_object:i.computed((function(){var t,n=1==(null===(t=e.flags)||void 0===t?void 0:t.display);return{on:n,off:!n}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(125),o=n(20),i=n(19);t.SetupErrored=function(e,t){var n=o.StoreController.engine.node(e.graph_node_id),a=i.computed((function(){if(e)return e.error_message})),s=i.computed((function(){return null!=a.value})),u=i.computed((function(){return{top:-.5*r.Constants.NODE_HEIGHT+"px",left:-.5*((null==n?void 0:n.ui_data.width())||100)+"px",width:((null==n?void 0:n.ui_data.width())||100)+"px",height:t.value.y+"px"}}));return{error_message:a,is_errored:s,error_flag_container_style_object:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(855),i=n(20),a=n(857);t.SetupEventMouse=function(e,t,n,s){function u(){var t=i.StoreController.engine.node(e.graph_node_id);t&&i.StoreController.editor.set_current_node(t)}return{on_body_mousedown:function(e){switch(e.button){case o.MouseButton.LEFT:n.capture_node_for_move();break;case o.MouseButton.MIDDLE:s.display_info(),e.stopPropagation()}},on_body_mouseup:function(e){e.button==o.MouseButton.MIDDLE?s.hide_info():n.capture_node_final_for_connection()},on_body_dblclick:function(e){u()},on_input_mousedown:function(e,t){n.capture_node_dest_for_connection(t)},on_input_mouseup:function(e,t){n.capture_node_dest_for_connection(t)},on_output_mousedown:function(e,t){n.capture_node_src_for_connection(t)},on_output_mouseup:function(e,t){n.capture_node_src_for_connection(t)},on_display_flag_click:function(){t.emit("set_display_flag",e.graph_node_id)},on_bypass_flag_click:function(){t.emit("set_bypass_flag",e.graph_node_id)},on_name_click:function(){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,i.StoreController.editor.dialog_prompt.show({title:"Rename Node:",default_value:e.name,confirm_label:"Update Name"})];case 1:return null!=(t=r.sent())&&t.length>0&&(n=i.StoreController.engine.node(e.graph_node_id))&&new a.NodeSetNameCommand(n,t).push(),[2]}}))}))},on_name_mouseup:function(){},open_node:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);t.SetupIcon=function(e){var t=r.computed((function(){return null})),n=r.computed((function(){return null!=t.value}));return{icon:t,display_icon:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);t.SetupInfos=function(){var e=r.ref(!1);return{display_node_info:e,display_info:function(){e.value=!0},hide_info:function(){e.value=!1}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(125),i=r.__importDefault(n(86)),a=n(20),s=n(19);t.SetupInputs=function(e,t,n){var r=a.StoreController.engine.node(e.graph_node_id),u=s.computed((function(){return e.inputs||[]})),_=s.computed((function(){return r?r.io.inputs.has_named_inputs?e.named_input_connections.map((function(e){return e.name})):r.constructor.displayed_input_names():[]})),l=s.computed((function(){if(r)return r.io.inputs.has_named_inputs?e.named_input_connections.map((function(e){return e.name+" ("+e.type+")"})):[]})),c=s.computed((function(){return e.input_connection_output_indices||[]})),p=s.computed((function(){return e.inputs.map((function(e){if(e)return a.StoreController.engine.json_node(e)}))})),d=s.computed((function(){return e.inputs.map((function(e){return null!=e}))})),f=s.computed((function(){return(null==r?void 0:r.io.inputs.max_inputs_count)||0})),h=s.computed((function(){var t=f.value;return r?(r.io.inputs.has_named_inputs&&(t=e.named_input_connections.length),i.default(t)):[]})),m=s.computed((function(){return n.value?{bottom:.5*t.value.y+"px",left:-.5*t.value.x+"px",width:t.value.x+"px",height:o.Constants.CONNECTION_VERTICAL_MARGIN+"px"}:{top:-.5*t.value.y+"px",left:-.5*t.value.x-o.Constants.CONNECTION_VERTICAL_MARGIN+"px",width:o.Constants.CONNECTION_VERTICAL_MARGIN+"px",height:t.value.y+"px"}})),g=s.computed((function(){if(n.value){var e=h.value.length+1;return h.value.map((function(t,n){return{marginLeft:100*(n+1)/e+"%"}}))}return h.value.map((function(e,t){return{top:o.Constants.CONNECTION_VERTICAL_SPACING*t+o.Constants.CONNECTION_VERTICAL_START+"px"}}))})),v=s.computed((function(){return r?r.io.inputs.has_named_inputs?e.named_input_connections.map((function(e,t){var n;return(n={})[e.type]=!0,n})):[]:{}}));return{inputs:u,input_names:_,input_titles:l,input_connection_output_indices:c,input_json_nodes:p,input_valid_states:d,max_inputs_count:f,available_inputs:h,inputs_container_style_object:m,inputs_pixel_style_objects:g,connection_pixel_input_class_objects:v}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(19);t.SetupNamed=function(e,t,n){var i=r.StoreController.engine.node(e.graph_node_id);return{name:o.computed((function(){return e.name})),name_container_style_object:o.computed((function(){return n.value?{left:.5*t.value.x+"px"}:{left:-.5*t.value.x+"px",top:-.5*t.value.y+"px"}})),connection_name_element_class_objects:o.computed((function(){return i?i.io.inputs.has_named_inputs||i.io.outputs.has_named_outputs?{named_element:!0}:{non_named_element:!0}:{}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(125),i=r.__importDefault(n(86)),a=n(20),s=n(19);t.SetupOutputs=function(e,t,n){var r=a.StoreController.engine.node(e.graph_node_id),u=s.computed((function(){return!!r&&(r.io.outputs.has_named_outputs?e.named_output_connections.length>0:r.io.outputs.has_outputs)})),_=s.computed((function(){return n.value?{top:.5*t.value.y+"px",left:-.5*t.value.x+"px",width:t.value.x+"px",height:o.Constants.CONNECTION_VERTICAL_MARGIN+"px"}:{top:-.5*t.value.y+"px",left:.5*t.value.x+"px",width:o.Constants.CONNECTION_VERTICAL_MARGIN+"px",height:t.value.x+"px"}})),l=s.computed((function(){return r&&r.io.outputs.has_named_outputs?e.named_output_connections.map((function(e){return e.name})):[]})),c=s.computed((function(){return r&&r.io.outputs.has_named_outputs?e.named_output_connections.map((function(e){return e.name+" ("+e.type+")"})):[]})),p=s.computed((function(){return r?r.io.outputs.has_named_outputs?e.named_output_connections.length:1:0})),d=s.computed((function(){return i.default(p.value)})),f=s.computed((function(){return n.value?d.value.map((function(e,t){return{}})):d.value.map((function(e,t){return{top:o.Constants.CONNECTION_VERTICAL_SPACING*t+o.Constants.CONNECTION_VERTICAL_START+"px"}}))})),h=s.computed((function(){return r?e.named_output_connections.map((function(e,t){var n;return(n={})[e.type]=!0,n})):{}}));return{has_outputs:u,output_container_style_object:_,output_names:l,output_titles:c,max_outputs_count:p,available_outputs:d,outputs_pixel_style_objects:f,connection_pixel_output_class_objects:h}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(20),i=n(6);t.SetupPosition=function(e){var t=new i.Vector2;return{position:r.computed((function(){return t.set(e.ui_data_json.x,e.ui_data_json.y),t})),is_being_moved:r.computed((function(){return o.StoreController.editor.network.node_ids_being_moved()[e.graph_node_id]||!1}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);t.SetupSelection=function(e,t){return{is_selected:r.computed((function(){return!!t.selection&&t.selection.includes(e.graph_node_id)}))}}},function(e,t,n){"use strict";n.r(t);var r=n(885),o=n(406);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1378);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/Connection.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(408);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeConnection{position:absolute;width:0;height:0}.NetworkNodeConnection svg{position:absolute;pointer-events:none}.NetworkNodeConnection svg line{pointer-events:auto;stroke:#1779ba;stroke-width:2px}.NetworkNodeConnection svg line.is_src_not_cloned{stroke:purple;stroke-width:6px}.NetworkNodeConnection svg line.is_src_not_cloned:hover{stroke:#9a009a}.NetworkNodeConnection svg line:hover{stroke:#1a88d1}.NetworkNodeConnection svg line.mismatched_types{stroke:#cc4b37;stroke-width:6px}.NetworkNodeConnection svg line.bool{stroke:#e600e6}.NetworkNodeConnection svg line.int{stroke:#f38073}.NetworkNodeConnection svg line.float{stroke:#ff0}.NetworkNodeConnection svg line.vec2{stroke:#008f00}.NetworkNodeConnection svg line.vec3{stroke:#66f}.NetworkNodeConnection svg line.vec4{stroke:#990}.NetworkNodeConnection svg line.mat3{stroke:#99f}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(886),o=n(409);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1408);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/NodeInfo.vue",t.default=s.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(6),i=n(13),a=n(1382),s=n(858),u=n(17),_=n(30),l=n(346),c=n(1387),p=n(1388),d=n(9),f=n(345),h=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.start_frame=d.ParamConfig.FLOAT(1,{range:[1,100]}),t.auto_textures_size=d.ParamConfig.BOOLEAN(1),t.max_textures_size=d.ParamConfig.VECTOR2([1024,1024],{visible_if:{auto_textures_size:1}}),t.textures_size=d.ParamConfig.VECTOR2([64,64],{visible_if:{auto_textures_size:0}}),t.reset=d.ParamConfig.BUTTON(null,{callback:function(e,t){m.PARAM_CALLBACK_reset(e)}}),t.material=d.ParamConfig.OPERATOR_PATH("",{node_selection:{context:_.NodeContext.MAT},dependent_on_found_node:!1}),t}return r.__extends(t,e),t}(d.NodeParamsConfig)),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params_config=h,t._assembler_controller=new l.GlAssemblerController(t,a.ShaderAssemblerParticles),t.gpu_controller=new p.ParticlesSystemGpuComputeController(t),t.render_controller=new c.ParticlesSystemGpuRenderController(t),t._reset_material_if_dirty_bound=t._reset_material_if_dirty.bind(t),t}return r.__extends(t,e),t.type=function(){return"particles_system_gpu"},Object.defineProperty(t.prototype,"assembler_controller",{get:function(){return this._assembler_controller},enumerable:!0,configurable:!0}),t.require_webgl2=function(){return!0},t.PARAM_CALLBACK_reset=function(e){e.PARAM_CALLBACK_reset()},t.prototype.PARAM_CALLBACK_reset=function(){this.gpu_controller.reset_gpu_compute_and_set_dirty()},t.displayed_input_names=function(){return["points to emit particles from"]},t.prototype.initialize_node=function(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([u.InputCloneMode.NEVER]),this.add_post_dirty_hook("_reset_material_if_dirty",this._reset_material_if_dirty_bound)},t.prototype.create_node=function(t){return e.prototype.create_node.call(this,t)},t.prototype.children=function(){return e.prototype.children.call(this)},t.prototype.nodes_by_type=function(t){return e.prototype.nodes_by_type.call(this,t)},t.prototype._reset_material_if_dirty=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.p.material.is_dirty?(this.render_controller.reset_render_material(),this.is_on_frame_start()?[3,2]:[4,this.render_controller.init_render_material()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.is_on_frame_start=function(){return this.scene.frame==this.pv.start_frame},t.prototype.cook=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return t=e[0],[4,this.compile_if_required()];case 1:return n.sent(),[4,this.assembler_controller.assign_uniform_values()];case 2:return n.sent(),this.is_on_frame_start()&&this.gpu_controller.reset_particle_groups(),this.gpu_controller.initialized?[3,4]:[4,this.gpu_controller.init(t)];case 3:n.sent(),n.label=4;case 4:return this.render_controller.initialized?[3,6]:(this.render_controller.init_core_group(t),[4,this.render_controller.init_render_material()]);case 5:n.sent(),n.label=6;case 6:return this.gpu_controller.compute_similation(),this.is_on_frame_start()?this.set_core_group(t):this.cook_controller.end_cook(),[2]}}))}))},t.prototype.compile_if_required=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this.assembler_controller.compile_required()?[4,this.run_assembler()]:[3,2];case 1:t.sent(),e=this.assembler_controller.assembler.shaders_by_name(),this.gpu_controller.set_shaders_by_name(e),this.render_controller.set_shaders_by_name(e),this.gpu_controller.reset_gpu_compute(),this.gpu_controller.reset_particle_groups(),t.label=2;case 2:return[2]}}))}))},t.prototype.run_assembler=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=this._find_root_nodes()).length>0?(t=new s.GlobalsTextureHandler(s.GlobalsTextureHandler.PARTICLE_SIM_UV),this.assembler_controller.set_assembler_globals_handler(t),this.assembler_controller.assembler.set_root_nodes(e),this.assembler_controller.assembler.compile(),[4,this.assembler_controller.post_compile()]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype._find_root_nodes=function(){var e=f.GlNodeFinder.find_attribute_export_nodes(this),t=f.GlNodeFinder.find_output_nodes(this);if(t.length>1)return this.states.error.set("only one output node is allowed"),[];var n=t[0];return n&&e.push(n),e},t.prototype.on_create=function(){var e=this.create_node("globals"),t=this.create_node("output");e.ui_data.set_position(new o.Vector2(-200,0)),t.ui_data.set_position(new o.Vector2(200,0));var n=this.scene.root.nodes_by_type("materials")[0]||this.scene.root.create_node("materials");n.set_name("MAT");var r=n.node("points_particles")||function(e,t){var n=e.create_node("points");n.set_name(t);var r=n.create_node("constant");r.set_name("constant_point_size"),r.p.value_float.set(4);var o=n.node("output1");return o&&o.set_input("gl_PointSize",r,"value"),n}(n,"points_particles");r&&this.p.material.set(r.full_path())},t}(i.TypedSopNode);t.ParticlesSystemGpuSopNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(342),i=r.__importDefault(n(1383)),a=n(1384),s=n(124),u=n(343),_=n(23),l=n(111),c=n(76),p=n(136),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"_template_shader",{get:function(){},enumerable:!0,configurable:!0}),t.prototype._template_shader_for_shader_name=function(e){return i.default},t.prototype.compile=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.setup_shader_names_and_variables()];case 1:return e.sent(),[4,this.update_shaders()];case 2:return e.sent(),[2]}}))}))},t.prototype.root_nodes_by_shader_name=function(e){for(var t,n=[],r=0,o=this._root_nodes;r<o.length;r++){var i=o[r];switch(i.type){case"output":n.push(i);break;case"attribute":var a=i.attribute_name,s=null===(t=this._texture_allocations_controller)||void 0===t?void 0:t.variable(a);if(s&&s.allocation)s.allocation.shader_name==e&&n.push(i)}}return n},t.prototype.leaf_nodes_by_shader_name=function(e){for(var t,n=[],r=0,o=this._leaf_nodes;r<o.length;r++){var i=o[r];switch(i.type){case"globals":n.push(i);break;case"attribute":var a=i.attribute_name,s=null===(t=this._texture_allocations_controller)||void 0===t?void 0:t.variable(a);if(s&&s.allocation)s.allocation.shader_name==e&&n.push(i)}}return n},t.prototype.setup_shader_names_and_variables=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:t=new u.TypedNodeTraverser(this,this._gl_parent_node),this._leaf_nodes=t.leaves_from_nodes(this._root_nodes),n=0,o=this._root_nodes,r.label=1;case 1:return n<o.length?[4,o[n].params.eval_all()]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:i=0,s=this._leaf_nodes,r.label=5;case 5:return i<s.length?[4,s[i].params.eval_all()]:[3,8];case 6:r.sent(),r.label=7;case 7:return i++,[3,5];case 8:return this._texture_allocations_controller=new a.TextureAllocationsController,this._texture_allocations_controller.allocate_connections_from_root_nodes(this._root_nodes,this._leaf_nodes),this.globals_handler&&(null===(e=this.globals_handler)||void 0===e||e.set_texture_allocations_controller(this._texture_allocations_controller)),this._reset_shader_configs(),[2]}}))}))},t.prototype.update_shaders=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,i,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:for(this._shaders_by_name=new Map,this._lines=new Map,e=0,t=this.shader_names;e<t.length;e++)a=t[e],n=this._template_shader_for_shader_name(a),this._lines.set(a,n.split("\n"));return this._root_nodes.length>0?[4,this.build_code_from_nodes(this._root_nodes)]:[3,2];case 1:r.sent(),this._build_lines(),r.label=2;case 2:for(o=0,i=this.shader_names;o<i.length;o++)a=i[o],(s=this._lines.get(a))&&this._shaders_by_name.set(a,s.join("\n"));return[2]}}))}))},t.prototype.add_output_params=function(e){e.add_param(_.ParamType.VECTOR3,"position",[0,0,0]),e.add_param(_.ParamType.VECTOR3,"velocity",[0,0,0]),e.add_param(_.ParamType.VECTOR3,"acceleration",[0,0,0])},t.prototype.add_globals_params=function(e){e.io.outputs.set_named_output_connection_points([new l.TypedNamedConnectionPoint("position",c.ConnectionPointType.VEC3),new l.TypedNamedConnectionPoint("velocity",c.ConnectionPointType.VEC3),new l.TypedNamedConnectionPoint("acceleration",c.ConnectionPointType.VEC3),new l.TypedNamedConnectionPoint("frame",c.ConnectionPointType.FLOAT)])},t.prototype.allow_attribute_exports=function(){return!0},Object.defineProperty(t.prototype,"texture_allocations_controller",{get:function(){return this._texture_allocations_controller=this._texture_allocations_controller||new a.TextureAllocationsController},enumerable:!0,configurable:!0}),t.prototype.create_shader_configs=function(){var e;return(null===(e=this._texture_allocations_controller)||void 0===e?void 0:e.create_shader_configs())||[]},t.prototype.create_variable_configs=function(){return[]},Object.defineProperty(t.prototype,"shader_names",{get:function(){return this.texture_allocations_controller.shader_names()||[]},enumerable:!0,configurable:!0}),t.prototype.input_names_for_shader_name=function(e,t){return this.texture_allocations_controller.input_names_for_shader_name(e,t)||[]},t.prototype.insert_define_after=function(e){return"// INSERT DEFINE"},t.prototype.insert_body_after=function(e){return"// INSERT BODY"},t.prototype.lines_to_remove=function(e){return["// INSERT DEFINE","// INSERT BODY"]},t.prototype.add_export_body_line=function(e,t,n,r,o){var i;if(n){var a=e.variable_for_input(t),u=s.ThreeToGl.vector3(a);if(u){var _=this.texture_allocations_controller.variable(r),l=o.current_shader_name;if(_&&(null===(i=_.allocation)||void 0===i?void 0:i.shader_name)==l){var c="gl_FragColor."+_.component+" = "+u;o.add_body_lines(e,[c],l)}}}},t.prototype.set_node_lines_output=function(e,t){var n=t.current_shader_name,r=this.texture_allocations_controller.input_names_for_shader_name(e,n);if(r)for(var o=0,i=r;o<i.length;o++){var a=i[o],s=e.io.inputs.named_input(a);if(s){var u=a;this.add_export_body_line(e,a,s,u,t)}}},t.prototype.set_node_lines_attribute=function(e,t){var n,r;if(e.is_importing){var o=e.gl_type(),i=e.attribute_name,a=null===(n=this.globals_handler)||void 0===n?void 0:n.read_attribute(e,o,i,t),s=e.gl_var_name(e.output_name),u=o+" "+s+" = "+a;t.add_body_lines(e,[u]);var _=this.texture_allocations_controller.variable(i),l=t.current_shader_name;if(_&&(null===(r=_.allocation)||void 0===r?void 0:r.shader_name)==l){var c=this.texture_allocations_controller.variable(i);if(c){var p="gl_FragColor."+c.component+" = "+s;t.add_body_lines(e,[p])}}}if(e.is_exporting){var d=e.connected_input_node();if(d){var f=e.attribute_name;this.add_export_body_line(e,e.input_name,d,f,t)}}},t.prototype.set_node_lines_globals=function(e,t){for(var n=0,r=e.io.outputs.used_output_names();n<r.length;n++){var o=r[n];switch(o){case"frame":this._handle_globals_frame(e,o,t);break;default:this._handle_globals_default(e,o,t)}}},t.prototype._handle_globals_frame=function(e,t,n){var r=new p.UniformGLDefinition(e,c.ConnectionPointType.FLOAT,t);n.add_definitions(e,[r]);var o="float "+e.gl_var_name(t)+" = "+t;n.add_body_lines(e,[o]),this.set_frame_dependent()},t.prototype._handle_globals_default=function(e,t,n){var r,o=e.io.outputs.named_output_connection_points_by_name(t);if(o){var i=o.type,a=null===(r=this.globals_handler)||void 0===r?void 0:r.read_attribute(e,i,t,n),s=i+" "+e.gl_var_name(t)+" = "+a;n.add_body_lines(e,[s])}},t}(o.BaseGlShaderAssembler);t.ShaderAssemblerParticles=d},function(e,t,n){"use strict";n.r(t),t.default="#include <common>\n\n// INSERT DEFINE\n\nvoid main() {\n\n\tvec2 particleUV = (gl_FragCoord.xy / resolution.xy);\n\n\t// INSERT BODY\n\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(74)),i=r.__importDefault(n(95)),a=r.__importDefault(n(80)),s=r.__importDefault(n(336)),u=n(1385),_=n(1386),l=n(82),c=n(76),p=function(){function e(){this._allocations=[],this._next_allocation_index=0}return e.prototype.allocate_connections_from_root_nodes=function(e,t){for(var n=[],r=0,o=e;r<o.length;r++){var i=(h=o[r]).graph_node_id;switch(h.type){case"output":for(var a=0,s=h.io.inputs.named_input_connection_points;a<s.length;a++){var u=s[a];if(h.io.inputs.named_input(u.name))(x=new _.TextureVariable(u.name,c.ConnectionPointComponentsCountMap[u.type])).add_graph_node_id(i),n.push(x)}break;case"attribute":var l=h,p=l.connected_input_node();u=l.connected_input_connection_point();if(p&&u)(x=new _.TextureVariable(l.attribute_name,c.ConnectionPointComponentsCountMap[u.type])).add_graph_node_id(i),n.push(x)}}for(var d=0,f=t;d<f.length;d++){var h;i=(h=f[d]).graph_node_id;switch(h.type){case"globals":for(var m=h,g=["position","normal","color","uv"],v=0,y=m.io.outputs.used_output_names();v<y.length;v++){var b=y[v];if(g.includes(b))if(u=m.io.outputs.named_output_connection_points_by_name(b)){var w=u.type;(x=new _.TextureVariable(b,c.ConnectionPointComponentsCountMap[w])).add_graph_node_id(i),n.push(x)}}break;case"attribute":var x,C=h;if(u=C.output_connection_point())(x=new _.TextureVariable(C.attribute_name,c.ConnectionPointComponentsCountMap[u.type])).add_graph_node_id(i),n.push(x)}}this.allocate_variables(n)},e.prototype.allocate_variables=function(e){for(var t=0,n=a.default(e,(function(e){return-e.size}));t<n.length;t++){var r=n[t];this.allocate_variable(r)}},e.prototype.allocate_variable=function(e){var t,n=this.has_variable(e.name);if(n){var r=this.variables().filter((function(t){return t.name==e.name}))[0];null===(t=e.graph_node_ids)||void 0===t||t.forEach((function(e,t){r.add_graph_node_id(t)}))}else{if(!n)for(var o=0,i=this._allocations;o<i.length;o++){var a=i[o];!n&&a.has_space_for_variable(e)&&(a.add_variable(e),n=!0)}if(!n){var s=new u.TextureAllocation(this.next_allocation_name());this._allocations.push(s),s.add_variable(e)}}},e.prototype.next_allocation_name=function(){var e=l.ParticleShaderNames[this._next_allocation_index];return this._next_allocation_index+=1,e},e.prototype.shader_names=function(){var e=this._allocations.map((function(e){return e.shader_name}));return i.default(e)},e.prototype.create_shader_configs=function(){return[]},e.prototype.allocation_for_shader_name=function(e){return this._allocations.filter((function(t){return t.shader_name==e}))[0]},e.prototype.input_names_for_shader_name=function(e,t){var n=this.allocation_for_shader_name(t);if(n)return n.input_names_for_node(e)},e.prototype.variable=function(e){for(var t=0,n=this._allocations;t<n.length;t++){var r=n[t].variable(e);if(r)return r}},e.prototype.variables=function(){return o.default(this._allocations.map((function(e){return e.variables||[]})))},e.prototype.has_variable=function(e){var t=this.variables().map((function(e){return e.name}));return s.default(t,e)},e.prototype.to_json=function(e){return this._allocations.map((function(t){var n;return(n={})[t.texture_name]=t.to_json(e),n}))},e.prototype.print=function(e){console.log(JSON.stringify(this.to_json(e),[""],2))},e}();t.TextureAllocationsController=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._shader_name=e,this._size=0}return e.prototype.add_variable=function(e){this._variables=this._variables||[],this._variables.push(e),e.set_position(this._size),e.set_allocation(this),this._size+=e.size},e.prototype.has_space_for_variable=function(e){return this._size+e.size<=4},Object.defineProperty(e.prototype,"shader_name",{get:function(){return this._shader_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture_name",{get:function(){return"texture_"+this._shader_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this._variables},enumerable:!0,configurable:!0}),e.prototype.variables_for_input_node=function(e){var t;return null===(t=this._variables)||void 0===t?void 0:t.filter((function(t){var n;return(null===(n=t.graph_node_ids)||void 0===n?void 0:n.has(e.graph_node_id))||!1}))},e.prototype.input_names_for_node=function(e){var t;return null===(t=this.variables_for_input_node(e))||void 0===t?void 0:t.map((function(e){return e.name}))},e.prototype.variable=function(e){if(this._variables)for(var t=0,n=this._variables;t<n.length;t++){var r=n[t];if(r.name==e)return r}},e.prototype.to_json=function(e){var t;return null===(t=this._variables)||void 0===t?void 0:t.map((function(t){return t.to_json(e)}))},e}();t.TextureAllocation=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){if(this._name=e,this._size=t,this._position=-1,!e)throw"TextureVariable requires a name"}return e.prototype.set_allocation=function(e){this._allocation=e},Object.defineProperty(e.prototype,"allocation",{get:function(){return this._allocation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graph_node_ids",{get:function(){return this._graph_node_ids},enumerable:!0,configurable:!0}),e.prototype.add_graph_node_id=function(e){this._graph_node_ids=this._graph_node_ids||new Map,this._graph_node_ids.set(e,!0)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),e.prototype.set_position=function(e){this._position=e},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return"xyzw".split("").splice(this._position,this._size).join("")},enumerable:!0,configurable:!0}),e.prototype.to_json=function(e){var t=[];return this._graph_node_ids&&this._graph_node_ids.forEach((function(n,r){var o=e.graph.node_from_id(r).name;t.push(o)})),{name:this.name,nodes:t.sort()}},e}();t.TextureVariable=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=r.__importDefault(n(179)),i=n(858),a=n(184),s=function(){function e(e){this.node=e,this._particles_group_objects=[]}return e.prototype.set_shaders_by_name=function(e){this._shaders_by_name=e,this.reset_render_material()},e.prototype.assign_render_material=function(){if(this._render_material){for(var e=0,t=this._particles_group_objects;e<t.length;e++){var n=t[e];n.geometry&&(n.material=this._render_material,a.CoreMaterial.apply_custom_materials(n,this._render_material),n.matrixAutoUpdate=!1,n.updateMatrix())}this._render_material.needsUpdate=!0,this.update_render_material_uniforms()}},e.prototype.update_render_material_uniforms=function(){var e,t=this;this._render_material&&(null===(e=this._shaders_by_name)||void 0===e||e.forEach((function(e,n){var r,o=null===(r=t.node.gpu_controller.getCurrentRenderTarget(n))||void 0===r?void 0:r.texture;if(o){var i="texture_"+n;t._render_material&&(t._render_material.uniforms[i].value=o,a.CoreMaterial.assign_custom_uniforms(t._render_material,i,o))}})))},e.prototype.reset_render_material=function(){this._render_material=void 0,this._particles_group_objects=[]},Object.defineProperty(e.prototype,"initialized",{get:function(){return null!=this._render_material},enumerable:!0,configurable:!0}),e.prototype.init_core_group=function(e){for(var t=0,n=e.objects();t<n.length;t++){var r=n[t];this._particles_group_objects.push(r)}},e.prototype.init_render_material=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){var t,n,s,u,_,l=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this._render_material?[2]:(t=this.node.p.material.found_node())?(n=this.node.assembler_controller.assembler.texture_allocations_controller.to_json(this.node.scene),(s=new i.GlobalsTextureHandler(i.GlobalsTextureHandler.UV_VARYING)).set_texture_allocations_controller(this.node.assembler_controller.assembler.texture_allocations_controller),t.assembler_controller.set_assembler_globals_handler(s),this._texture_allocations_json&&JSON.stringify(this._texture_allocations_json)==JSON.stringify(n)||(this._texture_allocations_json=o.default(n),t.set_dirty()),[4,t.request_container()]):[3,2];case 1:return u=r.sent(),this._render_material=u.material(),[3,3];case 2:this.node.states.error.set("render material not valid"),r.label=3;case 3:return this._render_material&&(_=this._render_material.uniforms,null===(e=this._shaders_by_name)||void 0===e||e.forEach((function(e,t){var n="texture_"+t,r={value:null};_[n]=r,l._render_material&&a.CoreMaterial.init_custom_material_uniforms(l._render_material,n,r)}))),this.assign_render_material(),[2]}}))}))},e}();t.ParticlesSystemGpuRenderController=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(6),i=n(26),a=n(312),s=n(10),u=n(96),_=n(858),l=n(1389),c=n(56),p=function(){function e(e){this.node=e,this._simulation_restart_required=!1,this._points=[],this.variables_by_name=new Map,this._created_textures_by_name=new Map,this._used_textures_size=new o.Vector2}return e.prototype.set_shaders_by_name=function(e){this._shaders_by_name=e,this.reset_gpu_compute()},e.prototype.init=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.init_particle_group_points(e),[4,this.create_gpu_compute()];case 1:return t.sent(),[2]}}))}))},e.prototype.getCurrentRenderTarget=function(e){var t,n=this.variables_by_name.get(e);if(n)return null===(t=this._gpu_compute)||void 0===t?void 0:t.getCurrentRenderTarget(n)},e.prototype.init_particle_group_points=function(e){this.reset_gpu_compute(),e&&(this._particles_core_group=e,this._points=this._get_points()||[])},e.prototype.compute_similation=function(){var e=this.node.scene.frame,t=this.node.pv.start_frame;e>=t&&(null==this._last_simulated_frame&&(this._last_simulated_frame=t-1),e>this._last_simulated_frame&&this._compute_simulation(e-this._last_simulated_frame))},e.prototype._compute_simulation=function(e){if(void 0===e&&(e=1),this._gpu_compute){this.update_simulation_material_uniforms();for(var t=0;t<e;t++)this._gpu_compute.compute();this.node.render_controller.update_render_material_uniforms(),this._last_simulated_frame=this.node.scene.frame}},e.prototype.create_gpu_compute=function(){var e,t;return r.__awaiter(this,void 0,void 0,(function(){var n,o,a,s,_,p,d=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(this.node.pv.auto_textures_size)n=u.CoreMath.nearestPower2(Math.sqrt(this._points.length)),this._used_textures_size.x=Math.min(n,this.node.pv.max_textures_size.x),this._used_textures_size.y=Math.min(n,this.node.pv.max_textures_size.y);else{if(!i._Math.isPowerOfTwo(this.node.pv.textures_size.x)||!i._Math.isPowerOfTwo(this.node.pv.textures_size.y))return this.node.states.error.set("texture size must be a power of 2"),[2];if(o=this.node.pv.textures_size.x*this.node.pv.textures_size.y,this._points.length>o)return this.node.states.error.set("max particles is set to ("+this.node.pv.textures_size.x+"x"+this.node.pv.textures_size.y+"=) "+o),[2];this._used_textures_size.copy(this.node.pv.textures_size)}return this.node.states.time_dependent.force_time_dependent(),this._init_particles_uvs(),this.node.render_controller.reset_render_material(),[4,c.POLY.renderers_controller.wait_for_renderer()];case 1:return(a=r.sent())?this._renderer=a:this.node.states.error.set("no renderer found"),s=new l.GPUComputationRenderer(this._used_textures_size.x,this._used_textures_size.y,this._renderer),this._gpu_compute=s,this._gpu_compute?(this._last_simulated_frame=void 0,this.variables_by_name.forEach((function(e,t){e.renderTargets[0].dispose(),e.renderTargets[1].dispose(),d.variables_by_name.delete(t)})),_=[],null===(e=this._shaders_by_name)||void 0===e||e.forEach((function(e,t){var n,r=null===(n=d._gpu_compute)||void 0===n?void 0:n.addVariable("texture_"+t,e,d._created_textures_by_name.get(t));r&&(d.variables_by_name.set(t,r),_.push(r))})),null===(t=this.variables_by_name)||void 0===t||t.forEach((function(e,t){var n;null===(n=d._gpu_compute)||void 0===n||n.setVariableDependencies(e,_)})),this._create_texture_render_targets(),this._fill_textures(),this.create_simulation_material_uniforms(),null!==(p=this._gpu_compute.init())&&(console.error(p),this.node.states.error.set(p)),[2]):(this.node.states.error.set("failed to create the GPUComputationRenderer"),[2])}}))}))},e.prototype.create_simulation_material_uniforms=function(){var e=this;this.variables_by_name.forEach((function(t,n){var r=t.material.uniforms;r.frame={value:e.node.scene.frame};for(var o=0,i=e.node.assembler_controller.assembler.param_configs();o<i.length;o++){var a=i[o];r[a.uniform_name]=a.uniform}}))},e.prototype.update_simulation_material_uniforms=function(){var e=this;this.variables_by_name.forEach((function(t,n){t.material.uniforms.frame.value=e.node.scene.frame}))},e.prototype._init_particles_uvs=function(){for(var e=new Float32Array(2*this._points.length),t=0,n=0,r=0;r<this._used_textures_size.x;r++)for(var o=0;o<this._used_textures_size.y&&(e[t++]=o/(this._used_textures_size.x-1),e[t++]=r/(this._used_textures_size.y-1),!((n+=2)>=e.length));o++);var i=_.GlobalsTextureHandler.UV_ATTRIB;if(this._particles_core_group)for(var u=0,l=this._particles_core_group.core_geometries();u<l.length;u++){var c=l[u],p=c.geometry(),d=c.marked_as_instance()?a.InstancedBufferAttribute:s.BufferAttribute;p.setAttribute(i,new d(e,2))}},e.prototype.created_textures_by_name=function(){return this._created_textures_by_name},e.prototype._fill_textures=function(){var e=this;this._created_textures_by_name.forEach((function(t,n){var r=e.node.assembler_controller.assembler.texture_allocations_controller.allocation_for_shader_name(n);if(r){var o=r.variables;if(o)for(var i=t.image.data,a=0,s=o;a<s.length;a++){var u=s[a],_=u.position,l=u.name,c=e._points[0];if(c)if(c.has_attrib(l))for(var p=c.attrib_size(l),d=_,f=0,h=e._points;f<h.length;f++){var m=h[f];if(1==p){var g=m.attrib_value(l);i[d]=g}else m.attrib_value(l).toArray(i,d);d+=4}}}}))},e.prototype.reset_gpu_compute=function(){this._gpu_compute=void 0,this._simulation_restart_required=!0},e.prototype.reset_gpu_compute_and_set_dirty=function(){this.reset_gpu_compute(),this.node.set_dirty()},e.prototype.reset_particle_groups=function(){this._particles_core_group=void 0},Object.defineProperty(e.prototype,"initialized",{get:function(){return null!=this._particles_core_group&&null!=this._gpu_compute},enumerable:!0,configurable:!0}),e.prototype._create_texture_render_targets=function(){var e=this;this._created_textures_by_name.forEach((function(e,t){e.dispose()})),this._created_textures_by_name.clear(),this.variables_by_name.forEach((function(t,n){e._gpu_compute&&e._created_textures_by_name.set(n,e._gpu_compute.createTexture())}))},e.prototype._restart_simulation=function(){var e=this;this._last_simulated_frame=void 0,this._create_texture_render_targets(),this._get_points()&&(this._fill_textures(),this.variables_by_name.forEach((function(t,n){var r=e._created_textures_by_name.get(n);e._gpu_compute&&r&&(e._gpu_compute.renderTexture(r,t.renderTargets[0]),e._gpu_compute.renderTexture(r,t.renderTargets[1]))})))},e.prototype._get_points=function(){if(this._particles_core_group){var e=this._particles_core_group.core_geometries(),t=e[0];if(t){for(var n=t.marked_as_instance(),r=[],o=0,i=e;o<i.length;o++){(_=i[o]).marked_as_instance()==n&&r.push(_)}for(var a=[],s=0,u=r;s<u.length;s++)for(var _,l=0,c=(_=u[s]).points();l<c.length;l++){var p=c[l];a.push(p)}return a}return[]}},e}();t.ParticlesSystemGpuComputeController=p},function(e,t,n){"use strict";n.r(t),n.d(t,"GPUComputationRenderer",(function(){return c}));var r=n(155),o=n(1),i=n(113),a=n(34),s=n(84),u=n(99),_=n(48),l=n(100),c=function(e,t,n){this.variables=[],this.currentTextureIndex=0;var c=new u.Scene,p=new r.a;p.position.z=1;var d={passThruTexture:{value:null}},f=g("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",d),h=new a.Mesh(new s.PlaneBufferGeometry(2,2),f);function m(n){n.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function g(e,t){t=t||{};var n=new _.ShaderMaterial({uniforms:t,vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:e});return m(n),n}c.add(h),this.addVariable=function(e,t,n){var r={name:e,initialValueTexture:n,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:o.NearestFilter,magFilter:o.NearestFilter};return this.variables.push(r),r},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!n.capabilities.isWebGL2&&!n.extensions.get("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var r=0;r<this.variables.length;r++){var o=this.variables[r];o.renderTargets[0]=this.createRenderTarget(e,t,o.wrapS,o.wrapT,o.minFilter,o.magFilter),o.renderTargets[1]=this.createRenderTarget(e,t,o.wrapS,o.wrapT,o.minFilter,o.magFilter),this.renderTexture(o.initialValueTexture,o.renderTargets[0]),this.renderTexture(o.initialValueTexture,o.renderTargets[1]);var i=o.material.uniforms;if(null!==o.dependencies)for(var a=0;a<o.dependencies.length;a++){var s=o.dependencies[a];if(s.name!==o.name){for(var u=!1,_=0;_<this.variables.length;_++)if(s.name===this.variables[_].name){u=!0;break}if(!u)return"Variable dependency not found. Variable="+o.name+", dependency="+s.name}i[s.name]={value:null}}}return this.currentTextureIndex=0,null},this.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,n=0,r=this.variables.length;n<r;n++){var o=this.variables[n];if(null!==o.dependencies)for(var i=o.material.uniforms,a=0,s=o.dependencies.length;a<s;a++){var u=o.dependencies[a];i[u.name].value=u.renderTargets[e].texture}this.doRenderTarget(o.material,o.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=m,this.createShaderMaterial=g,this.createRenderTarget=function(n,r,i,a,s,u){return n=n||e,r=r||t,i=i||o.ClampToEdgeWrapping,a=a||o.ClampToEdgeWrapping,s=s||o.NearestFilter,u=u||o.NearestFilter,new l.a(n,r,{wrapS:i,wrapT:a,minFilter:s,magFilter:u,format:o.RGBAFormat,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?o.HalfFloatType:o.FloatType,stencilBuffer:!1,depthBuffer:!1})},this.createTexture=function(){var n=new Float32Array(e*t*4);return new i.DataTexture(n,e,t,o.RGBAFormat,o.FloatType)},this.renderTexture=function(e,t){d.passThruTexture.value=e,this.doRenderTarget(f,t),d.passThruTexture.value=null},this.doRenderTarget=function(e,t){var r=n.getRenderTarget();h.material=e,n.setRenderTarget(t),n.render(c,p),h.material=f,n.setRenderTarget(r)}}},function(e,t,n){"use strict";n.r(t);var r=n(902),o=n(411);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1391);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/nodes/node_infos/Sop.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(413);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeInfoSop .bbox_infos table{margin-top:10px}.NetworkNodeInfoSop .bbox_infos table td{border:1px solid #000;text-align:center;padding:0px 5px}.NetworkNodeInfoSop .bbox_infos table td.number{white-space:nowrap}.NetworkNodeInfoSop .node_info_sop_section{white-space:nowrap}.NetworkNodeInfoSop .node_info_sop_section.inline .node_info_sop_section_title{display:inline-block;margin-right:5px}.NetworkNodeInfoSop .node_info_sop_section.inline .node_info_sop_section_content{display:inline-block}.NetworkNodeInfoSop .node_info_sop_section.object_names .node_info_sop_section_title{position:relative;top:0px}.NetworkNodeInfoSop .node_info_sop_section.object_names .node_info_sop_section_content{max-height:200px;overflow-y:scroll}.NetworkNodeInfoSop .objects_count_visible{margin-left:10px;opacity:.7}.NetworkNodeInfoSop .objects_count_visible.highlighted{opacity:1;font-weight:bold}.NetworkNodeInfoSop .attribute_info.string{color:#1779ba}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(903),o=n(414);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1394);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/nodes/node_infos/Mat.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(416);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeInfoMat .button{margin-bottom:5px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(904),o=n(417);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1397);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/nodes/node_infos/Gl.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(419);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeInfoGl .button{margin-bottom:5px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(905),o=n(420);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1400);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/nodes/node_infos/Cop.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(422);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeInfoCop .bbox_infos table{margin-top:10px}.NetworkNodeInfoCop .bbox_infos table td{border:1px solid #000;text-align:center;padding:0px 5px}.NetworkNodeInfoCop .bbox_infos table td.number{white-space:nowrap}.NetworkNodeInfoCop .node_info_cop_section{white-space:nowrap}.NetworkNodeInfoCop .node_info_cop_section.inline .node_info_cop_section_title{display:inline-block;margin-right:5px}.NetworkNodeInfoCop .node_info_cop_section.inline .node_info_cop_section_content{display:inline-block}.NetworkNodeInfoCop canvas{max-width:512px;border:1px solid #d3d3d3}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(906),o=n(423);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1403);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/nodes/node_infos/SopCache.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(425);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeInfoMatShaderBuilder .button{margin-bottom:5px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(907),o=n(426);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1406);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/nodes/node_infos/SopParticlesSystemGPU.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(428);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeInfoSopParticlesSystemGPU .button{margin-bottom:5px}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(429);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeInfo{position:absolute;z-index:500;transform:translateY(-50%);margin-left:35px;background-color:#dad5e1;border:4px solid #716288}.NetworkNodeInfo .arrow-left{width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-right:10px solid #716288;position:absolute;top:50%;transform:translate(-100%, -50%)}.NetworkNodeInfo .node_title_container{background-color:#716288;color:#fff;text-align:center;cursor:pointer}.NetworkNodeInfo .node_info_container{padding:20px}.NetworkNodeInfo .node_info_container .icon_prefixed svg{margin-right:10px;position:relative;top:3px}.NetworkNodeInfo .node_info_container .time_dependency{white-space:nowrap}.NetworkNodeInfo .node_info_container .time_dependency.time_dependent{color:#177e3e}.NetworkNodeInfo .node_info_container .error_message{color:#cc4b37}.NetworkNodeInfo .node_info_container .node_info_separator{margin:10px 0px;height:1px;background-color:#a59ab6}.NetworkNodeInfo .node_info_container .dependencies .dependencies_section{margin-top:10px}.NetworkNodeInfo .node_info_container .dependencies .dependencies_section .dependencies_section_title{font-weight:bold}.NetworkNodeInfo .node_info_container .dependencies .dependencies_section .dependencies_list .dependendies_item{cursor:pointer}.NetworkNodeInfo .node_info_container .dependencies .dependencies_section .dependencies_list .dependendies_item:hover{background-color:#cdc6d6}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(430);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNode{position:absolute;width:0px;height:0px}.NetworkNode.selected .node-body{border:3px solid #54ff00 !important}.NetworkNode.is_being_moved .node-body{box-shadow:4px 4px 8px #8b7ca1}.NetworkNode.bypassed .node-body{background-color:#a59ab6;border:3px solid #988bab}.NetworkNode.bypassed .node-body .icon-container{opacity:.2}.NetworkNode.bypassed .name-container,.NetworkNode.bypassed .comment-container{opacity:.4}.NetworkNode.layout_horizontal .name-container{transform:translateY(-100%)}.NetworkNode.layout_horizontal .name-container .name-element{margin:0}.NetworkNode.layout_horizontal .inputs-container{position:absolute}.NetworkNode.layout_horizontal .inputs-container .output-pixel{left:100%}.NetworkNode.layout_horizontal .outputs-container{position:absolute}.NetworkNode.layout_horizontal .outputs-container .output-pixel{top:10px;left:100%}.NetworkNode .node-body{position:absolute;background-color:#dad5e1;border-radius:3px;cursor:move;z-index:8}.NetworkNode .node-body:hover{border:1px solid #584d6a}.NetworkNode .node-body .icon-container{opacity:.5;margin:auto;text-align:center;height:100%}.NetworkNode .node-body .icon-container svg{position:relative;top:50%;transform:translateY(-50%)}.NetworkNode .error-flag-container{position:absolute;pointer-events:none}.NetworkNode .error-flag-container .error-flag{position:absolute;left:-80px;margin-right:20px;color:#cc4b37}.NetworkNode .flag-container{position:absolute;z-index:9}.NetworkNode .flag-container .node-flag{position:absolute;width:10px;cursor:pointer}.NetworkNode .flag-container .node-flag.bypass-flag{left:0px}.NetworkNode .flag-container .node-flag.bypass-flag.on{background-color:#ff0}.NetworkNode .flag-container .node-flag.bypass-flag.off{background-color:#fff}.NetworkNode .flag-container .node-flag.display-flag{right:0px}.NetworkNode .flag-container .node-flag.display-flag.on{background-color:#1779ba}.NetworkNode .flag-container .node-flag.display-flag.off{background-color:#fff}.NetworkNode .name-container{position:absolute;transform:translateY(-50%);z-index:5}.NetworkNode .name-container .name-element{margin-left:10px;cursor:text}.NetworkNode .comment-container{position:absolute;width:200px;z-index:4}.NetworkNode .comment-container .comment-element{font-size:.8rem;margin-left:10px;margin-top:-10px;padding:5px;background-color:#add8e6;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.NetworkNode .enter-button-container{position:absolute;transform:translateY(-50%);z-index:6}.NetworkNode .enter-button-container .enter-button{margin-right:10px;padding:5px;border-radius:25px;width:25px;height:25px;text-align:center;background-color:#90ee90;cursor:pointer;line-height:0}.NetworkNode .enter-button-container .enter-button:hover{background-color:#64e764}.NetworkNode .enter-button-container .enter-button svg{display:inline-block;margin:auto;position:relative}.NetworkNode .connection-pixel{position:absolute}.NetworkNode .connection-pixel.bool .connection-name-element{background-color:#e06be4}.NetworkNode .connection-pixel.bool .connection-element{background-color:#e600e6 !important}.NetworkNode .connection-pixel.int .connection-name-element{background-color:#e7abaa}.NetworkNode .connection-pixel.int .connection-element{background-color:#f38073 !important}.NetworkNode .connection-pixel.float .connection-name-element{background-color:#e1ddb4}.NetworkNode .connection-pixel.float .connection-element{background-color:#ff0 !important}.NetworkNode .connection-pixel.vec2 .connection-name-element{background-color:#aec7b4}.NetworkNode .connection-pixel.vec2 .connection-element{background-color:#008f00 !important}.NetworkNode .connection-pixel.vec3 .connection-name-element{background-color:#ccf}.NetworkNode .connection-pixel.vec3 .connection-element{background-color:#66f !important}.NetworkNode .connection-pixel.vec4 .connection-name-element{background-color:#cdc9b4}.NetworkNode .connection-pixel.vec4 .connection-element{background-color:#990 !important}.NetworkNode .connection-pixel.mat3 .connection-name-element{background-color:#bab7f0}.NetworkNode .connection-pixel.mat3 .connection-element{background-color:#99f !important}.NetworkNode .connection-pixel.color .connection-name-element{background-color:#ed6b71}.NetworkNode .connection-pixel.color .connection-element{background-color:red !important}.NetworkNode .connection-pixel:hover{z-index:999}.NetworkNode .connection-pixel:hover .connection-name-element.non_named_element{display:block}.NetworkNode .connection-pixel .connection-name-element{position:absolute;pointer-events:none;background-color:#dad5e1;line-height:1;padding:2px 4px;border-radius:2px;border:1px solid #a59ab6}.NetworkNode .connection-pixel .connection-name-element.named_element{z-index:19;font-size:.5rem}.NetworkNode .connection-pixel .connection-name-element.non_named_element{z-index:21;font-size:.8rem;padding:5px 10px;display:none;top:-20px;left:0px;transform:translate(-50%, -100%)}.NetworkNode .connection-pixel .connection-element{width:12px;height:12px;border-radius:100px;transform:translate(-50%, -50%);position:relative;z-index:20;cursor:pointer}.NetworkNode .connection-pixel .connection-element:hover{width:16px;height:16px}.NetworkNode .inputs-container{position:absolute}.NetworkNode .inputs-container .input-pixel{top:0;width:0;height:0}.NetworkNode .inputs-container .input-pixel .connection-name-element.named_element{padding-left:10px;transform:translate(0%, -50%)}.NetworkNode .inputs-container .input-pixel .connection-element{border:1px solid #010304;background-color:#1779ba}.NetworkNode .outputs-container{position:absolute}.NetworkNode .outputs-container .output-pixel{bottom:0;width:0;height:0;left:50%}.NetworkNode .outputs-container .output-pixel .connection-name-element.named_element{padding-right:10px;transform:translate(-100%, -50%)}.NetworkNode .outputs-container .output-pixel .connection-element{border:1px solid #0b3e1e;background-color:#3adb76}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(882),o=n(431);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1413);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/network/components/InterractiveConnection.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(433);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NetworkNodeInterractiveConnection{position:absolute;width:0;height:0}.NetworkNodeInterractiveConnection svg{position:absolute;pointer-events:none}.NetworkNodeInterractiveConnection svg line{stroke:#3adb76;stroke-width:4}",""]),e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(214),i=n(125),a=n(1416),s=function(){function e(e,t){this.data=e,this.camera_data=t,this.move_progress_position=new r.Vector2,this.create_position=new r.Vector2,this.event_helper=new o.EventHelper(document.body)}return e.prototype.set_element=function(e){this.event_helper.set_element(e)},e.prototype.set_parent_node=function(e){this.parent_node=e,this._node_type=void 0},Object.defineProperty(e.prototype,"active",{get:function(){return this.data.active},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.data.position},enumerable:!0,configurable:!0}),e.prototype.activate=function(e){this._node_type=e,this.data.active=!0},e.prototype.deactivate=function(){this.data.active=!1},e.prototype.activated=function(){return this.data.active},e.prototype.move_progress=function(e){this.event_helper.element_position(e,this.move_progress_position),this.move_progress_position.divideScalar(this.camera_data.zoom),this.data.position.x=this.move_progress_position.x-.5*i.Constants.NODE_UNIT,this.data.position.y=this.move_progress_position.y-.5*i.Constants.NODE_UNIT},e.prototype.create=function(e){if(this.activated()){this.event_helper.element_position(e,this.create_position),this.create_position.divideScalar(this.camera_data.zoom);var t=1*i.Constants.NODE_HEIGHT;if(this.create_position.x=t*Math.round(this.create_position.x/t),this.create_position.y=t*Math.round(this.create_position.y/t),this.parent_node&&this._node_type)new a.NodeCreateCommand(this.parent_node,this._node_type,this.create_position.clone()).push();this.deactivate()}},e}();t.NodeCreationHelper=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t,n,r){var o=e.call(this)||this;return o._parent=t,o._node_type=n,o._node_pos=r,o}return r.__extends(t,e),t.prototype.do=function(){this._node=this._parent.create_node(this._node_type),this._node&&this._node.ui_data.set_position(this._node_pos)},t.prototype.undo=function(){this._node&&this._parent.remove_node(this._node)},t}(n(141).BaseCommand);t.NodeCreateCommand=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(358),i=n(96),a=n(214),s=new r.Vector2(1,1),u=function(){function e(e){this.data=e,this.event_helper=new a.EventHelper(document.body),this.pan_start_mouse_position=new r.Vector2,this.pan_start_camera_position=new r.Vector2,this.mouse_position=new r.Vector2,this.pan_progress_position=new r.Vector2,this._pan_in_progress=!1,this.zoom_start_mouse_position=new r.Vector2,this.zoom_current_mouse_position=new r.Vector2,this._zoom_offset=new r.Vector2,this._zoom_in_progress=!1,this.min_zoom=.1,this.max_zoom=2}return e.prototype.set_element=function(e){this.event_helper.set_element(e)},e.prototype.set_parent_node=function(e){this.parent_node=e},e.prototype.position=function(){return new r.Vector2(this.data.position.x,this.data.position.y)},e.prototype.move_in_progress=function(){return this.is_pan_in_progress()||this.is_zoom_in_progress()},e.prototype.reset=function(){},e.prototype.pan_start=function(e){this.event_helper.element_position(e,this.pan_start_mouse_position),this.pan_start_camera_position.x=this.data.position.x,this.pan_start_camera_position.y=this.data.position.y,this._pan_in_progress=!0},e.prototype.pan_progress=function(e){if(!this.is_pan_in_progress())return!1;this.event_helper.element_position(e,this.mouse_position);var t=this.mouse_position.sub(this.pan_start_mouse_position).divideScalar(this.data.zoom);return this.pan_progress_position.copy(this.pan_start_camera_position).add(t),this.data.position.x=this.pan_progress_position.x,this.data.position.y=this.pan_progress_position.y,!0},e.prototype.pan_end=function(){this._pan_in_progress=!1},e.prototype.is_pan_in_progress=function(){return this._pan_in_progress},e.prototype.zoom_start=function(e){this.event_helper.element_position(e,this.zoom_start_mouse_position),this._zoom_in_progress=!0},e.prototype.zoom_progress=function(e){if(this.is_zoom_in_progress()){this.event_helper.element_position(e,this.zoom_current_mouse_position),this._zoom_offset.copy(this.zoom_start_mouse_position),this._zoom_offset.sub(this.zoom_current_mouse_position);var t=this._zoom_offset.dot(s),n=this.data.zoom-.001*t;this.set_zoom(n),this.zoom_start_mouse_position.copy(this.zoom_current_mouse_position)}},e.prototype.zoom_end=function(){this._zoom_in_progress=!1},e.prototype.is_zoom_in_progress=function(){return this._zoom_in_progress},e.prototype.zoom=function(e){var t=.9;e.deltaY<0&&(t=1/t);var n=this.data.zoom*t;this.set_zoom(n)},e.prototype.set_zoom=function(e){e=i.CoreMath.clamp(e,this.min_zoom,this.max_zoom),this.data.zoom=e},e.prototype.frame_selection=function(){if(this.parent_node&&this.parent_node.children_allowed()&&this.parent_node.children_controller){var e=this.parent_node.children_controller.selection.nodes(),t=e.length>0?e:this.parent_node.children(),n=new o.Box2;t.forEach((function(e){n.expandByPoint(e.ui_data.position)}));var i=new r.Vector2;n.getCenter(i),this.data.position.x=-i.x,this.data.position.y=-i.y}},e}();t.CameraAnimationHelper=u},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(3),Vector2_1=__webpack_require__(6),max_1=tslib_1.__importDefault(__webpack_require__(173)),map_1=tslib_1.__importDefault(__webpack_require__(329)),min_1=tslib_1.__importDefault(__webpack_require__(212)),Nodes_1=__webpack_require__(854),Constants_1=__webpack_require__(125),NodeEvent_1=__webpack_require__(52),ClipBoardHelper=function(){function ClipBoardHelper(){this._nodes_by_parent_node_type={}}return ClipBoardHelper.prototype.copy_from_node=function(e,t){var n=this.create_code_for_nodes(e,t);n&&e.children_controller&&this.write_cache(e.children_controller.context,n)},ClipBoardHelper.prototype.paste_in_node=function(parent_node,cam_animation_helper){var _this=this;parent_node.scene.lifecycle_controller.on_create_prevent((function(){if(parent_node.children_controller){var code=_this.read_cache(parent_node.children_controller.context);if(code){var current_node_ids_1=parent_node.children().map((function(e){return e.graph_node_id}));parent_node.scene.cooker.block();var code_wrapped_timestamp=Math.floor(1e4*performance.now()),code_wrapped_function_name="paste_clipboard_"+code_wrapped_timestamp,code_wrapped="const "+code_wrapped_function_name+" = function(parent){ const context={}; "+code+"}; "+code_wrapped_function_name+"(parent_node.scene.node('"+parent_node.full_path()+"'))";eval(code_wrapped),parent_node.scene.cooker.unblock();var new_node_ids=parent_node.children().map((function(e){return e.graph_node_id})).filter((function(e){return!current_node_ids_1.includes(e)})),new_nodes=new_node_ids.map((function(e){return parent_node.scene.graph.node_from_id(e)})),camera_position=cam_animation_helper.position();_this.offset_nodes(new_nodes,camera_position.multiplyScalar(-1)),new_nodes.forEach((function(e){e.emit(NodeEvent_1.NodeEvent.PARAMS_UPDATED)})),parent_node.children_controller.selection.set(new_nodes)}}}))},ClipBoardHelper.prototype.offset_nodes=function(e,t){var n=e.map((function(e){return e.ui_data.position})),r=new Vector2_1.Vector2(min_1.default(map_1.default(n,"x")),min_1.default(map_1.default(n,"y"))),o=new Vector2_1.Vector2(max_1.default(map_1.default(n,"x")),max_1.default(map_1.default(n,"y"))),i=r.add(o).multiplyScalar(.5),a=t.sub(i),s=1*Constants_1.Constants.NODE_UNIT;a.x=s*Math.round(a.x/s),a.y=s*Math.round(a.y/s),e.forEach((function(e){e.ui_data.translate(a,!0)}))},ClipBoardHelper.prototype.create_code_for_nodes=function(e,t){var n=map_1.default(t,(function(e){return e.ui_data.position})),r=map_1.default(n,"x"),o=min_1.default(r),i=max_1.default(r);if(null!=i&&null!=o){var a=i-o+2;return new Nodes_1.NodesCodeExporter(t).process_with_existing_nodes(e,"parent_node",a).join("\n")}},ClipBoardHelper.prototype.write_cache=function(e,t){localStorage.setItem(e,t)},ClipBoardHelper.prototype.read_cache=function(e){var t=localStorage.getItem(e);return null==t&&console.warn("no cache available at "+e),t},ClipBoardHelper}();exports.ClipBoardHelper=ClipBoardHelper},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3).__importDefault(n(85)),o=n(6),i=n(185),a=n(214),s=n(125),u=n(1420),_=n(20),l=function(){function e(e){this.camera_data=e,this.node_start_positions=[],this.start_position=new o.Vector2,this.move_progress_current_position=new o.Vector2,this.move_offset=new o.Vector2,this.event_helper=new a.EventHelper(document.body),this._move_in_progress=!1}return e.prototype.set_element=function(e){this.event_helper.set_element(e)},e.prototype.capture_node=function(e){var t=_.StoreController.engine.node(e)||void 0;this._captured_node=t},e.prototype.has_captured_nodes=function(){return this.captured_nodes().length>0},e.prototype.captured_nodes=function(){if(this._captured_node){var e=this._captured_node.parent;if(e&&e.children_allowed()&&e.children_controller&&e.children_controller.selection.contains(this._captured_node))return e.children_controller.selection.nodes()}return r.default([this._captured_node])},e.prototype.move_start=function(e){if(!this.has_captured_nodes())return!1;i.CoreDom.add_drag_classes(),this._move_in_progress=!0;var t=this.captured_nodes();this.node_start_positions=t.map((function(e){var t=e.ui_data.position.clone(),n=1*s.Constants.NODE_UNIT;return t.x=n*Math.round(t.x/n),t.y=n*Math.round(t.y/n),t})),this.event_helper.element_position(e,this.start_position),this.start_position.divideScalar(this.camera_data.zoom),this.move_offset.set(0,0);var n=t.map((function(e){return e.graph_node_id}));return _.StoreController.editor.network.set_node_ids_being_moved(n),!0},e.prototype.move_progress=function(e){var t=this;this.has_captured_nodes()&&(this.event_helper.element_position(e,this.move_progress_current_position),this.move_progress_current_position.divideScalar(this.camera_data.zoom),this.move_offset.copy(this.move_progress_current_position).sub(this.start_position),this.captured_nodes().forEach((function(e,n){var r=t.node_start_positions[n].clone().add(t.move_offset);e.ui_data.set_position(r)})))},e.prototype.move_end=function(){var e=this;if(this.has_captured_nodes()){i.CoreDom.remove_drag_classes();var t=this.captured_nodes(),n=1*s.Constants.NODE_UNIT;if(t.length>0&&this.move_offset){var r=this.move_offset.clone();if(r.x=n*Math.round(r.x/n),r.y=n*Math.round(r.y/n),t.forEach((function(t,n){return t.ui_data.set_position(e.node_start_positions[n])})),Math.abs(r.x)>0||Math.abs(r.y)>0)new u.NodeMoveCommand(t,r).push()}_.StoreController.editor.network.reset_node_ids_being_moved(),this._captured_node=void 0,this.node_start_positions=[],this._move_in_progress=!1}},e.prototype.move_in_progress=function(){return this._move_in_progress},e.prototype.mouse_barely_moved=function(){return this.move_offset.length()<5},e}();t.NodeAnimationHelper=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(6),i=function(e){function t(t,n){var r=e.call(this)||this;return r._nodes=t,r._offset=n,r._inverted_offset=new o.Vector2,r._inverted_offset.copy(r._offset).multiplyScalar(-1),r}return r.__extends(t,e),t.prototype.do=function(){var e=this;this._nodes.forEach((function(t){t.ui_data.translate(e._offset,!0)}))},t.prototype.undo=function(){var e=this;this._nodes.forEach((function(t){t.ui_data.translate(e._inverted_offset,!0)}))},t}(n(141).BaseCommand);t.NodeMoveCommand=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(185),i=n(214),a=n(20),s=n(1422),u=function(){function e(e,t){this.data=e,this.camera_data=t,this.start_position=new r.Vector2,this.move_position=new r.Vector2,this.event_helper=new i.EventHelper(document.body)}return e.prototype.set_element=function(e){this.event_helper.set_element(e)},e.prototype.capture_node_src=function(e,t){var n=a.StoreController.engine.node(e);this.data.node_src_id=n.graph_node_id,this.data.output_index=t},e.prototype.capture_node_dest=function(e,t){var n=a.StoreController.engine.node(e);this.data.node_dest_id=n.graph_node_id,this.data.input_index=t},e.prototype.capture_node_final=function(e){var t=a.StoreController.engine.node(e);this.data.node_dest_id?this.data.node_src_id=t.graph_node_id:this.data.node_src_id&&(this.data.node_dest_id=t.graph_node_id,this.data.input_index=0),this.both_end_captured()&&this.create_connection(),this.reset()},e.prototype.move_start=function(e){return!!this.has_captured_node()&&(o.CoreDom.add_drag_classes(),this.event_helper.element_position(e,this.start_position),this.start_position.divideScalar(this.camera_data.zoom),this.data.mouse_start.x=this.start_position.x,this.data.mouse_start.y=this.start_position.y,this.data.mouse_progress=this.data.mouse_start,this.data.active=!0,!0)},e.prototype.move_progress=function(e){this.has_captured_node()&&(this.event_helper.element_position(e,this.move_position),this.move_position.divideScalar(this.camera_data.zoom),this.data.mouse_progress=this.move_position)},e.prototype.move_end=function(){this.has_captured_node()&&(o.CoreDom.remove_drag_classes(),this.both_end_captured()?this.create_connection():null!=this.data.node_dest_id&&null==this.data.node_src_id&&this.disconnect_dest(),this.reset())},e.prototype.create_connection=function(){if(this.data.node_src_id&&this.data.node_dest_id){var e=a.StoreController.scene.graph.node_from_id(this.data.node_src_id),t=a.StoreController.scene.graph.node_from_id(this.data.node_dest_id);new s.NodeConnectCommand(e,t,this.data.input_index,this.data.output_index).push()}},e.prototype.disconnect_dest=function(){if(this.data.node_dest_id){var e=a.StoreController.scene.graph.node_from_id(this.data.node_dest_id);new s.NodeConnectCommand(null,e,this.data.input_index).push()}},e.prototype.reset=function(){this.data.node_src_id=null,this.data.node_dest_id=null,this.data.mouse_start.x=0,this.data.mouse_start.y=0,this.data.mouse_progress.x=0,this.data.mouse_progress.y=0,this.data.active=!1},e.prototype.has_captured_node=function(){return null!=(this.data.node_dest_id||this.data.node_src_id)},e.prototype.both_end_captured=function(){return null!=this.data.node_dest_id&&null!=this.data.node_src_id},e}();t.ConnectionHelper=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t,n,r,o){var i=e.call(this)||this;if(i._node_src=t,i._node_dest=n,i._input_index=r,i._output_index=o,i._old_node_src=i._node_dest.io.inputs.input(i._input_index),i._node_dest.io.inputs.named_input_connection_points[i._input_index]){var a=i._node_dest.io.connections.input_connections();if(a){var s=a[i._input_index];s&&(i._old_node_output_index=s.output_index)}}return i}return r.__extends(t,e),t.prototype.do=function(){this._node_dest.set_input(this._input_index,this._node_src,this._output_index)},t.prototype.undo=function(){this._node_dest.set_input(this._input_index,this._old_node_src,this._old_node_output_index)},t}(n(141).BaseCommand);t.NodeConnectCommand=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(358),i=n(185),a=n(214),s=n(125),u=n(1424),_=n(20),l=function(){function e(e,t){this.data=e,this.camera_data=t,this.event_helper=new a.EventHelper(document.body),this.method=u.SelectionMethod.ADD,this.start_position=new r.Vector2,this.end_position=new r.Vector2,this.node_around_mouse_position=new r.Vector2}return e.prototype.set_element=function(e){this.event_helper.set_element(e)},e.prototype.set_parent_node=function(e){this.parent_node=e},e.prototype.capture_node=function(e){var t=_.StoreController.engine.node(e);t?this.capture_nodes([t]):this.capture_nodes([])},e.prototype.capture_nodes=function(e){this.parent_node&&this.parent_node.children_allowed()&&this.parent_node.children_controller?this.parent_node.children_controller.selection.equals(e)||new u.NodeSelectCommand(this.parent_node,e,this.method).push():console.warn("selection has no parent node")},e.prototype.clear_selection=function(){this.capture_nodes([])},e.prototype.mouse_barely_moved=function(e){return this.start_position.distanceTo(this.end_position)<3},e.prototype.move_start=function(e){i.CoreDom.add_drag_classes(),this.event_helper.element_position(e,this.start_position),this.start_position.divideScalar(this.camera_data.zoom),this.data.start.x=this.start_position.x,this.data.start.y=this.start_position.y,this.data.end.x=this.data.start.x,this.data.end.y=this.data.start.y,this.data.active=!0},e.prototype.move_progress=function(e){this.data.active&&(this.event_helper.element_position(e,this.end_position),this.end_position.divideScalar(this.camera_data.zoom),this.data.end.x=this.end_position.x,this.data.end.y=this.end_position.y)},e.prototype.move_end=function(e,t,n){i.CoreDom.remove_drag_classes(),e.ctrlKey?this.method=u.SelectionMethod.ADD:e.shiftKey?this.method=u.SelectionMethod.REMOVE:this.method=u.SelectionMethod.OVERRIDE;var r=this.nodes_inside_box();if(n){var o=this.node_around_mouse(e);o&&(r=[o])}(!t||t&&n)&&(this.mouse_barely_moved(e)?0==r.length?this.clear_selection():this.capture_nodes(r):r.length>0?this.capture_nodes(r):this.clear_selection()),this.data.active=!1},e.prototype.node_around_mouse=function(e){this.event_helper.element_position(e,this.node_around_mouse_position),this.node_around_mouse_position.divideScalar(this.camera_data.zoom);var t=this.node_around_mouse_position,n=new o.Box2(t,t),r=null;if(this.parent_node)for(var i=0,a=this.parent_node.children();i<a.length;i++){var s=a[i],u=this.node_box(s);n.intersectsBox(u)&&(r=r||s)}return r},e.prototype.box=function(){var e=this.data,t=new r.Vector2(Math.min(e.end.x,e.start.x),Math.min(e.end.y,e.start.y)),n=new r.Vector2(Math.max(e.end.x,e.start.x),Math.max(e.end.y,e.start.y));return new o.Box2(t,n)},e.prototype.nodes_inside_box=function(){var e=this.box(),t=[];if(this.parent_node)for(var n=0,r=this.parent_node.children();n<r.length;n++){var o=r[n],i=this.node_box(o);e.intersectsBox(i)&&t.push(o)}return t},e.prototype.node_box=function(e){var t=s.Constants.NODE_UNIT,n=e.ui_data.position.clone();return new o.Box2(n.clone().subScalar(.5*t),n.clone().addScalar(.5*t))},e}();t.NodeSelectionHelper=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=n(141),a=n(151);!function(e){e.OVERRIDE="OVERRIDE",e.ADD="ADD",e.REMOVE="REMOVE"}(r=t.SelectionMethod||(t.SelectionMethod={}));var s=function(e){function t(t,n,r){var o=e.call(this)||this;return o._parent=t,o.nodes=n,o._method=r,o._parent.children_allowed()&&o._parent.children_controller&&(o._old_nodes=o._parent.children_controller.selection.nodes()),o}return o.__extends(t,e),t.prototype.do=function(){if(this._parent.children_allowed()&&this._parent.children_controller){var e=this._parent.children_controller.selection;switch(this._method){case r.OVERRIDE:return e.set(this.nodes);case r.ADD:return e.add(this.nodes);case r.REMOVE:return e.remove(this.nodes)}a.TypeAssert.unreachable(this._method)}},t.prototype.undo=function(){this._parent.children_allowed()&&this._parent.children_controller&&this._old_nodes&&this._parent.children_controller.selection.set(this._old_nodes)},t}(i.BaseCommand);t.NodeSelectCommand=s},function(e,t,n){"use strict";var r=n(434);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".above-event-catcher{position:relative;z-index:10}.Panel.Network{position:relative}.Panel.Network .buttons-container-height-0{height:0px;padding-left:5px;padding-top:5px}.Panel.Network .buttons-container-height-0 .go-up-button-container{margin-right:5px}.Panel.Network .buttons-container-height-0 .go-up-button-container .go-up-button{padding:5px;border-radius:25px;width:25px;height:25px;text-align:center;background-color:#90ee90;cursor:pointer;opacity:.7;line-height:0}.Panel.Network .buttons-container-height-0 .go-up-button-container .go-up-button:hover{opacity:1}.Panel.Network .buttons-container-height-0 .go-up-button-container .go-up-button svg{display:inline-block;margin:auto;position:relative}.Panel.Network .canvas_container,.Panel.Network .canvas,.Panel.Network .object_parents{width:100%;height:100%}.Panel.Network .canvas_container .canvas{overflow:hidden;position:relative}.Panel.Network .canvas_container .canvas.pan_in_progress{cursor:move}.Panel.Network .canvas_container .canvas.zoom_in_progress{cursor:zoom-in}.Panel.Network .canvas_container .canvas .selection-rectangle{pointer-events:none;position:absolute;border:3px solid green;z-index:10;background-color:gray;opacity:.2}.Panel.Network .canvas_container .canvas .node-creation-rectangle{pointer-events:none;position:absolute;border:3px solid green;z-index:10}.Panel.Network .canvas_container .canvas .zoom-container{position:absolute;top:50%;left:50%;width:20px;height:20px}.Panel.Network .canvas_container .canvas .zoom-container .pan-container{position:absolute;width:10px;height:10px}.Panel.Network .canvas_container .canvas .zoom-container .pan-container .nodes-container{position:relative;width:0;height:0;top:0;left:0}.Panel.Network .canvas_container .canvas .zoom-container .pan-container .nodes-container .nodes-container-events-catcher{position:absolute;width:50000px;height:50000px;top:-25000px;left:-25000px}.Panel.Network .canvas_container .canvas .zoom-container .pan-container .nodes-container svg.connection-line-container{position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:10;pointer-events:none}.Panel.Network .canvas_container .canvas .zoom-container .pan-container .nodes-container svg.connection-line-container line{stroke:gray;stroke-width:2}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(877),o=n(435);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1474);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/Params.vue",t.default=s.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(20),i=n(23);t.SetupFolders=function(e){var t=r.ref(null),n=new Map,a=r.computed((function(){return e.first_selected_json_node.value})),s=r.computed((function(){return a.value?a.value.param_ids.map((function(e){return o.StoreController.engine.json_param(e)})):[]})),u=r.computed((function(){return s.value.filter((function(e){if(e)return p(e)}))})),_=r.computed((function(){return u.value.length>1})),l=r.computed((function(){var e="",t={};a.value&&a.value.param_ids.map((function(e){return o.StoreController.engine.json_param(e)})).forEach((function(n){n&&(p(n)?e=n.graph_node_id:(t[e]=t[e]||[],t[e].push(n.graph_node_id)))}));return t})),c=r.computed((function(){return u.value.map((function(e){return{active:t.value==(null==e?void 0:e.graph_node_id)}}))}));function p(e){if(e.type==i.ParamType.FOLDER){var t=o.StoreController.engine.param(e.graph_node_id);if(t&&0==t.options.level)return!0}return!1}var d=r.computed((function(){if(a.value){var e=a.value.param_ids[0];if(e)o.StoreController.engine.json_param(e)||o.StoreController.engine.add_node_params_to_store(a.value.graph_node_id);var n=void 0;if(t.value){var r=l.value[t.value];r&&(n=r.map((function(e){return o.StoreController.engine.json_param(e)})))}return n||(n=a.value.param_ids.map((function(e){return o.StoreController.engine.json_param(e)}))),n.filter((function(e){if(e){var t=o.StoreController.engine.param(e.graph_node_id);return t&&null==t.parent_param}}))}return[]}));function f(){var e;if(a.value){var t=a.value.graph_node_id;if(n.has(t)){var r=n.get(t);r&&h(r)}else u.value[0]&&h(null===(e=u.value[0])||void 0===e?void 0:e.graph_node_id)}}function h(e){t.value=e,a.value&&n.set(a.value.graph_node_id,e)}return r.onMounted((function(){f()})),r.watch(e.first_selected_node_id,(function(e,t){e&&f()})),{display_top_folders:_,top_folder_json_params:u,selected_node_json_params_for_current_folder:d,folder_class_objects:c,set_active_folder_id:h}}},function(e,t,n){"use strict";n.r(t);var r=n(883),o=n(437);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1472);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/Param.vue",t.default=s.exports},function(e,t,n){"use strict";n.r(t);var r=n(887),o=n(439);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1431);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Boolean.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(443);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Field.Toggle input.raw_input{display:block}.Field.Toggle input.expression_result{display:none}.Field.Toggle.displays_expression_result input.raw_input{display:none}.Field.Toggle.displays_expression_result input.expression_result{display:block}.Field.Toggle input{margin:0px}.Field.Toggle input.has_expression{background-color:#86b586}.Field.Toggle input[type=checkbox]{cursor:pointer;-ms-transform:scale(1.4);-moz-transform:scale(1.4);-webkit-transform:scale(1.4);-o-transform:scale(1.4);transform:scale(1.4);margin-right:5px;position:relative;top:2px}.Field.Toggle label{padding:5px;cursor:pointer}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(889),o=n(444);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1434);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Button.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(446);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,"",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(890),o=n(447);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1437);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Color.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(449);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Field.Color input[type=color]{cursor:pointer;width:30px;height:100%;padding:0px;margin-right:5px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(891),o=n(450);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1440);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Float.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(452);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,"",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(892),o=n(453);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1443);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Folder.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(455);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,"",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(893),o=n(456);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1446);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Integer.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(458);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,"",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(894),o=n(459);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1449);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/OperatorPath.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(461);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Field.OperatorPath .button-group{position:relative;top:1px;margin-right:5px}.Field.OperatorPath .button-group .button{margin-left:5px;margin-bottom:0px;line-height:0;padding:.7em 1em}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(895),o=n(462);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1452);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Radio.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(464);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Field.Radio input,.Field.Radio label{cursor:pointer}.Field.Radio select.select{margin-bottom:0}.Field.Radio label{padding-top:5px;padding-left:10px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(896),o=n(465);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1455);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Separator.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(467);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Field.Separator .horizontal-border{height:2px;background-color:#a9a9a9;margin:10px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(897),o=n(468);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1458);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/String.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(470);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Field.String input.raw_input,.Field.String textarea.raw_input{display:block}.Field.String input.expression_result,.Field.String textarea.expression_result{display:none}.Field.String.displays_expression_result input.raw_input,.Field.String.displays_expression_result textarea.raw_input{display:none}.Field.String.displays_expression_result input.expression_result,.Field.String.displays_expression_result textarea.expression_result{display:block}.Field.String input,.Field.String textarea{margin:0px}.Field.String input.has_expression:not(.is_errored),.Field.String textarea.has_expression:not(.is_errored){background-color:#86b586}.Field.String input.is_errored,.Field.String textarea.is_errored{background-color:#cc4b37}.Field.String.displays_expression_only input,.Field.String.displays_expression_only textarea{border:0;background-color:transparent;box-shadow:none}.Field.String .browse_button{margin-left:10px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(898),o=n(471);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1461);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Vector2.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(473);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,"",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(899),o=n(474);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1464);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Vector3.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(476);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,"",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(900),o=n(477);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1467);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Vector4.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(479);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,"",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(901),o=n(480);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1470);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/params/components/fields/Ramp.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(482);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Field.Ramp .points_container{background-color:#fff}.Field.Ramp .points_container svg{display:block;height:160px;width:100%}.Field.Ramp .points_container svg circle.control_point{r:5;stroke:#000;stroke-width:1;fill:gray;cursor:pointer}.Field.Ramp .points_container svg circle.control_point:hover,.Field.Ramp .points_container svg circle.control_point.dragged{stroke-width:2;fill:#d3d3d3}.Field.Ramp .points_container svg circle.interpolated_curve_point{r:2;fill:#000}.Field.Ramp .points_container svg circle.interpolated_curve_point.point_about_to_be_removed{fill:red}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(483);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".ParamContainer{padding:1px 0px;overflow:hidden}.ParamContainer .param_menu_container{position:relative;height:1px;width:100%;background-color:red}.ParamContainer .param_name{position:relative;z-index:1}.ParamContainer .param_name label{font-size:.8rem;color:#111;cursor:pointer;margin:5px;padding:0rem 10px}.ParamContainer .param_name label:hover{background-color:#5bbb7f}.ParamContainer .Field{position:relative;z-index:2}.ParamContainer .Field input.raw_input{display:block}.ParamContainer .Field input.expression_result{display:none}.ParamContainer .Field.displays_expression_result input.raw_input{display:none}.ParamContainer .Field.displays_expression_result input.expression_result{display:block}.ParamContainer .Field input,.ParamContainer .Field select{margin:0px;padding:.2rem;font-size:.8rem;height:2rem}.ParamContainer .Field input.has_expression:not(.is_errored),.ParamContainer .Field select.has_expression:not(.is_errored){background-color:#c5dcc5}.ParamContainer .Field input.is_errored,.ParamContainer .Field select.is_errored{background-color:#d15d4b}.ParamContainer .Field .slider_container{padding:0px 10px}.ParamContainer .Field .slider_container input[type=range]{width:100%;height:100%;padding:0;margin:0;-webkit-appearance:none;appearance:none;outline:none;background-color:transparent}.ParamContainer .Field .slider_container input[type=range]:hover::-webkit-slider-thumb{background-color:#2196e3}.ParamContainer .Field .slider_container input[type=range]:hover::-moz-range-thumb{background-color:#2196e3}.ParamContainer .Field .slider_container input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;position:relative;top:-7px;width:16px;height:16px;border-radius:16px;background-color:#1779ba;cursor:pointer}.ParamContainer .Field .slider_container input[type=range]::-moz-range-thumb{-webkit-appearance:none;appearance:none;position:relative;top:-7px;width:16px;height:16px;border-radius:16px;background-color:#1779ba;cursor:pointer}.ParamContainer .Field .slider_container input[type=range]::-webkit-slider-runnable-track{width:100%;height:2px;background:#fff}.ParamContainer .Field .slider_container input[type=range]::-moz-range-track{width:100%;height:2px;background:#fff}.ParamContainer .Field.Multiple.grid-x .cell .Field.Numeric:not:first-child{padding-left:2px}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(484);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Panel.Params .params_container{overflow-y:auto}.Panel.Params .node_name_container,.Panel.Params .node_help_button{margin:10px 5px}.Panel.Params .node_name_container .node_name{cursor:pointer}.Panel.Params .node_name_container .node_name:hover{color:#000}.Panel.Params .node_name_container .node_type{margin-left:10px;opacity:.75;font-style:italic}.Panel.Params .node_help_button{color:#111;display:inline-block;cursor:pointer;margin-right:10px;padding:0px 10px;border-bottom:2px solid transparent}.Panel.Params .node_help_button:hover{color:#1779ba;border-bottom:2px solid #1779ba}.Panel.Params .params_container{padding-right:10px;padding-bottom:10px}.Panel.Params .params_container .params_folder .folder_name{padding:2px 5px;font-size:.8rem;margin-bottom:5px;cursor:pointer;text-align:center;background-color:#b5e0c5;border-bottom:2px solid #42a165}.Panel.Params .params_container .params_folder .folder_name:hover{opacity:.8;background-color:#42a165}.Panel.Params .params_container .params_folder.active .folder_name{background-color:#42a165}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(878),o=n(485);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1480);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/viewer/Viewer.vue",t.default=s.exports},function(e,t,n){"use strict";n.r(t);var r=n(884),o=n(487);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1478);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/viewer/components/Threejs.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(489);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".ThreejsViewer{height:100%}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(490);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Panel.Viewer canvas,.Panel.Viewer #mapbox_container{width:100%;height:100%}.Panel.Viewer .viewer_top_bar{background-color:#a8c8dc}.Panel.Viewer .viewer_top_bar .viewer_top_bar-controls-right{padding-right:10px}.Panel.Viewer .viewer_top_bar input{margin-bottom:0px;padding:0px}.Panel.Viewer .viewer_top_bar input[type=color]{width:20px;height:20px}.Panel.Viewer .viewer_top_bar .color-bg-input-container{margin-top:4px}.Panel.Viewer .viewers_container{position:relative}.Panel.Viewer .viewers_container .panel_container{position:absolute;min-width:360px;top:0px;left:0px;padding:10px 10px;opacity:.85}.Panel.Viewer .viewers_container .panel_container:hover{opacity:1}.Panel.Viewer .full-screen-button{margin-right:10px;height:100%;position:relative;cursor:pointer;line-height:0}.Panel.Viewer .full-screen-button svg{position:relative;top:50%;transform:translateY(-50%)}.Panel.Viewer .full-screen-button:hover{opacity:.7}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(879),o=n(491);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1486);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/panels/spreadsheet/Spreadsheet.vue",t.default=s.exports},,,,function(e,t,n){"use strict";var r=n(546);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Panel.Spreadsheet .ag-theme-balham{height:100%}.Panel.Spreadsheet .spreadsheet-drop-down-container{position:relative;cursor:pointer;display:inline-block}.Panel.Spreadsheet .spreadsheet-drop-down-container:hover .spreadsheet-drop-down-label{color:#7b7b7b;background-color:#111}.Panel.Spreadsheet .spreadsheet-drop-down-container:hover .spreadsheet-drop-down-content{display:block}.Panel.Spreadsheet .spreadsheet-drop-down-container .spreadsheet-drop-down-label{padding:2px 5px;margin:2px;display:inline-block;background-color:#6e6e6e;border:1px solid #464646;border-radius:3px}.Panel.Spreadsheet .spreadsheet-drop-down-container .spreadsheet-drop-down-content{display:none;z-index:100;position:absolute;top:100%;left:10px;width:auto;background-color:#7b7b7b;border:1px solid #464646}.Panel.Spreadsheet .spreadsheet-drop-down-container .spreadsheet-drop-down-content .spreadsheet-drop-down-separator{padding:10px 0px}.Panel.Spreadsheet .spreadsheet-drop-down-container .spreadsheet-drop-down-content .spreadsheet-drop-down-entry{min-width:100px;padding:2px 5px}.Panel.Spreadsheet .spreadsheet-drop-down-container .spreadsheet-drop-down-content .spreadsheet-drop-down-entry:hover{background-color:#6e6e6e}.Panel.Spreadsheet .spreadsheet-drop-down-container .spreadsheet-drop-down-content .spreadsheet-drop-down-entry .attr-selection-icon{display:inline-block;position:relative;top:3px}.Panel.Spreadsheet .spreadsheet-drop-down-container .spreadsheet-drop-down-content .spreadsheet-drop-down-entry .attr-name{display:inline-block;margin-left:5px}.Panel.Spreadsheet .attrib-class-selectors{margin-left:20px}.Panel.Spreadsheet .attrib-class-selectors .attrib-class-selector{display:inline-block;margin-left:2px;border:1px solid #111;border-radius:5px;padding:2px 10px;cursor:pointer}.Panel.Spreadsheet .attrib-class-selectors .attrib-class-selector:hover{background-color:#616161}.Panel.Spreadsheet .attrib-class-selectors .attrib-class-selector.active{background-color:#1673b1;color:#7b7b7b}.Panel.Spreadsheet .attrib-class-selectors .attrib-class-selector svg{position:relative;top:2px}.Panel.Spreadsheet .row-odd{background-color:#e6e6e6}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(547);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Panel{background-color:#7b7b7b}.Panel.Network{background-color:#a59ab6}.Panel.Params{background-color:#a3d9b7}.Panel.ParamEdit{background-color:#d9efe1}.Panel.Viewer{background-color:#96bcd5}.Panel.Performance{background-color:#e6e61a}.Panel.Asset{background-color:#d5c596}.Panel.Spreadsheet{background-color:#d096c9}.Panel.CustomNodeEditor{background-color:#4d8eb8}.Panel.Multiple .split_panel_separator{min-width:4px;min-height:4px;background-color:transparent}.Panel.Multiple .split_panel_separator:hover{background-color:#497a9b}.Panel.Multiple .split-panel-horizontal,.Panel.Multiple .split-panel-vertical{position:relative}.Panel.Multiple .split-panel-horizontal>.split_panel_separator{position:absolute;top:0px;height:100%;cursor:ew-resize}.Panel.Multiple .split-panel-horizontal>.split_panel_separator .split_panel_separator_line{width:1px;height:100%;background-color:#1779ba}.Panel.Multiple .split-panel-vertical>.split_panel_separator{position:absolute;left:0px;width:100%;cursor:ns-resize;transform:translateY(-100%)}.Panel.Multiple .split-panel-vertical>.split_panel_separator .split_panel_separator_line{position:relative;top:4px;height:1px;background-color:#1779ba}.Panel.Multiple .panel_tabs{padding-left:5px}.Panel.Multiple .panel_tabs ul.tab_list{position:relative;top:3px;margin:0px}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container{display:inline-block;margin-left:4px;font-size:.75rem;cursor:pointer;background-color:#7b7b7b;border:1px solid #484848;border-bottom:0px;border-top-left-radius:3px;border-top-right-radius:3px;color:#333}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.network{background-color:#a59ab6}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.params{background-color:#a3d9b7}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.param_edit{background-color:#d9efe1}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.viewer{background-color:#96bcd5}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.performance{background-color:#e6e61a}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.asset{background-color:#d5c596}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.spreadsheet{background-color:#d096c9}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.custom_node_editor{background-color:#4d8eb8}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.new_panel{background-color:#949494}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container.active{color:#000;padding-bottom:4px;top:-3px;position:relative}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container .tab_item{padding:0px 5px}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container .tab_item .panel_type_close{margin-left:5px;position:relative;top:1px}.Panel.Multiple .panel_tabs ul.tab_list li.tab_item_container .tab_item .panel_type_close:hover{opacity:.6}.Panel.Multiple .panel_tabs .split_menu_container_container{position:relative}.Panel.Multiple .panel_tabs .split_menu_container_container .split_menu_container{background-color:#949494;position:absolute;top:5px;right:4px;border-radius:20px;border:1px solid #000;line-height:1}.Panel.Multiple .panel_tabs .split_menu_container_container .split_menu_container .dropdown_menu_label{top:-1px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(867),o=n(548);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1491);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/editor/top/Navigation.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(550);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NavigationBar{background-color:#7b7b7b;font-size:.8rem}.NavigationBar ul.path_elements,.NavigationBar .button-group{padding:2px 2px}.NavigationBar .button-group{margin:0px 5px}.NavigationBar .button-group .button{margin-top:4px;margin-bottom:0px;line-height:0;padding:4px 4px}.NavigationBar .button-group .button.backward{margin-left:0px}.NavigationBar .button-group .button.forward{margin-left:2px}.NavigationBar ul.path_elements{margin:2px;border-radius:3px;background-color:#aeaeae}.NavigationBar ul.path_elements .path_element{display:inline-block}.NavigationBar ul.path_elements .path_element:not(:last-child) .path_element_name{margin-left:5px;background-color:#949494}.NavigationBar ul.path_elements .path_element:not(:last-child) .path_element_name:hover{cursor:pointer;background-color:gray;opacity:.75}.NavigationBar ul.path_elements .path_element .path_element_name,.NavigationBar ul.path_elements .path_element .path_separator{padding:5px;display:inline-block}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(868),o=n(551);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1494);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/editor/widgets/PlayBar.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(553);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Bar.Play input,.Bar.Play .button{margin-bottom:0px}.Bar.Play .button{padding:.5em 1em}.Bar.Play .play_bar_scrubber{position:relative;cursor:pointer;background-color:#bababa;overflow:hidden}.Bar.Play .play_bar_scrubber .frame_indicator{position:absolute;top:0px;height:100%;min-width:10px;background-color:#6294b5}.Bar.Play .play_bar_scrubber .frame_indicator:hover{background-color:#739fbd}.Bar.Play .play_bar_buttons_container{padding:5px}.Bar.Play .play_bar_buttons_container .play_bar_buttons{margin:0px 10px}.Bar.Play input[type=number]{display:inline-block;margin-bottom:0;padding:2px;text-align:right;height:auto;width:80px}.Bar.Play .frame-range input{margin-left:1px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(869),o=n(554);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1499);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/editor/widgets/PanelNodeSelector.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(558);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NodeTree{margin-bottom:5px}.NodeTree.selected .node_name{background-color:#62a9d0}.NodeTree .expand_button{cursor:pointer;padding:0px 5px}.NodeTree .expand_button:hover{opacity:.8}.NodeTree .node_name{cursor:pointer;padding:0px 5px}.NodeTree .node_name:hover{background-color:#8fc5dd}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(559);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NodeSelector{background-color:red}.NodeSelector .buttons{margin-bottom:10px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(871),o=n(560);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1502);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/NumericSlider.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(562);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".NumericSlider{position:absolute;z-index:999;width:0px;height:0px}.NumericSlider .increment_starters_container{position:absolute;top:-175px;left:-25px;border:1px solid #fff}.NumericSlider .increment_starters_container.integer{top:-125px}.NumericSlider .increment_starters_container .increment_starter{background-color:#000;color:#fff;width:50px;height:50px;border-bottom:1px solid #fff;padding:5px}.NumericSlider .increment_starters_container .increment_starter:hover,.NumericSlider .increment_starters_container .increment_starter.active{background-color:#ff0;color:#000}.NumericSlider .increment_starters_container .increment_starter.inactive .increment_label{top:10px}.NumericSlider .increment_starters_container .increment_starter .increment_label,.NumericSlider .increment_starters_container .increment_starter .value_label{position:relative;font-size:.7rem}.NumericSlider .increment_starters_container .increment_starter .value_label{top:5px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(872),o=n(563);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1507);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/context_menus/NodeContextMenu.vue",t.default=s.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t,n){var r=e.call(this)||this;return r._node=t,r._new_comment=n,r._old_comment=r._node.ui_data.comment,r}return r.__extends(t,e),t.prototype.do=function(){this._node.ui_data.set_comment(this._new_comment)},t.prototype.undo=function(){this._node.ui_data.set_comment(this._old_comment)},t}(n(141).BaseCommand);t.NodeSetCommentCommand=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t,n){var r=e.call(this)||this;return r._node=t,r._new_state=n,r._old_state=r._node.io.inputs.override_clonable_state(),r}return r.__extends(t,e),t.prototype.do=function(){this._node.io.inputs.set_override_clonable_state(this._new_state)},t.prototype.undo=function(){this._node.io.inputs.set_override_clonable_state(this._old_state)},t}(n(141).BaseCommand);t.NodeSetOverrideClonableStateCommand=o},function(e,t,n){"use strict";var r=n(565);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".ParamMenu{position:absolute}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(873),o=n(566);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1510);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/widgets/context_menus/ParamContextMenu.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(568);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".ParamMenu{position:absolute}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(874),o=n(569);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(1513);var a=n(15),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="src/editor/components/editor/widgets/Retractable.vue",t.default=s.exports},function(e,t,n){"use strict";var r=n(571);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,".Retractable .retractable-toggler{background-color:red;cursor:pointer;opacity:.5}.Retractable .retractable-toggler:hover{opacity:1}.Retractable .retractable-toggler.horizontal{width:100%;height:5px}.Retractable .retractable-toggler.vertical{width:5px;height:100%}",""]),e.exports=t},function(e,t,n){"use strict";var r=n(572);n.n(r).a},function(e,t,n){(t=n(31)(!1)).push([e.i,'/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}.foundation-mq{font-family:"small=0em&medium=40em&large=64em&xlarge=75em&xxlarge=90em"}html{box-sizing:border-box;font-size:100%}*,*::before,*::after{box-sizing:inherit}body{margin:0;padding:0;background:#fefefe;font-family:"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;font-weight:normal;line-height:1.5;color:#0a0a0a;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}img{display:inline-block;vertical-align:middle;max-width:100%;height:auto;-ms-interpolation-mode:bicubic}textarea{height:auto;min-height:50px;border-radius:0}select{box-sizing:border-box;width:100%;border-radius:0}.map_canvas img,.map_canvas embed,.map_canvas object,.mqa-display img,.mqa-display embed,.mqa-display object{max-width:none !important}button{padding:0;appearance:none;border:0;border-radius:0;background:transparent;line-height:1;cursor:auto}[data-whatinput=mouse] button{outline:0}pre{overflow:auto}button,input,optgroup,select,textarea{font-family:inherit}.is-visible{display:block !important}.is-hidden{display:none !important}.grid-container{padding-right:0.625rem;padding-left:0.625rem;max-width:75rem;margin-left:auto;margin-right:auto}@media print,screen and (min-width: 40em){.grid-container{padding-right:0.9375rem;padding-left:0.9375rem}}.grid-container.fluid{padding-right:0.625rem;padding-left:0.625rem;max-width:100%;margin-left:auto;margin-right:auto}@media print,screen and (min-width: 40em){.grid-container.fluid{padding-right:0.9375rem;padding-left:0.9375rem}}.grid-container.full{padding-right:0;padding-left:0;max-width:100%;margin-left:auto;margin-right:auto}.grid-x{display:flex;flex-flow:row wrap}.cell{flex:0 0 auto;min-height:0px;min-width:0px;width:100%}.cell.auto{flex:1 1 0px}.cell.shrink{flex:0 0 auto}.grid-x>.auto{width:auto}.grid-x>.shrink{width:auto}.grid-x>.small-shrink,.grid-x>.small-full,.grid-x>.small-1,.grid-x>.small-2,.grid-x>.small-3,.grid-x>.small-4,.grid-x>.small-5,.grid-x>.small-6,.grid-x>.small-7,.grid-x>.small-8,.grid-x>.small-9,.grid-x>.small-10,.grid-x>.small-11,.grid-x>.small-12{flex-basis:auto}@media print,screen and (min-width: 40em){.grid-x>.medium-shrink,.grid-x>.medium-full,.grid-x>.medium-1,.grid-x>.medium-2,.grid-x>.medium-3,.grid-x>.medium-4,.grid-x>.medium-5,.grid-x>.medium-6,.grid-x>.medium-7,.grid-x>.medium-8,.grid-x>.medium-9,.grid-x>.medium-10,.grid-x>.medium-11,.grid-x>.medium-12{flex-basis:auto}}@media print,screen and (min-width: 64em){.grid-x>.large-shrink,.grid-x>.large-full,.grid-x>.large-1,.grid-x>.large-2,.grid-x>.large-3,.grid-x>.large-4,.grid-x>.large-5,.grid-x>.large-6,.grid-x>.large-7,.grid-x>.large-8,.grid-x>.large-9,.grid-x>.large-10,.grid-x>.large-11,.grid-x>.large-12{flex-basis:auto}}.grid-x>.small-12,.grid-x>.small-11,.grid-x>.small-10,.grid-x>.small-9,.grid-x>.small-8,.grid-x>.small-7,.grid-x>.small-6,.grid-x>.small-5,.grid-x>.small-4,.grid-x>.small-3,.grid-x>.small-2,.grid-x>.small-1{flex:0 0 auto}.grid-x>.small-1{width:8.3333333333%}.grid-x>.small-2{width:16.6666666667%}.grid-x>.small-3{width:25%}.grid-x>.small-4{width:33.3333333333%}.grid-x>.small-5{width:41.6666666667%}.grid-x>.small-6{width:50%}.grid-x>.small-7{width:58.3333333333%}.grid-x>.small-8{width:66.6666666667%}.grid-x>.small-9{width:75%}.grid-x>.small-10{width:83.3333333333%}.grid-x>.small-11{width:91.6666666667%}.grid-x>.small-12{width:100%}@media print,screen and (min-width: 40em){.grid-x>.medium-auto{flex:1 1 0px;width:auto}.grid-x>.medium-12,.grid-x>.medium-11,.grid-x>.medium-10,.grid-x>.medium-9,.grid-x>.medium-8,.grid-x>.medium-7,.grid-x>.medium-6,.grid-x>.medium-5,.grid-x>.medium-4,.grid-x>.medium-3,.grid-x>.medium-2,.grid-x>.medium-1,.grid-x>.medium-shrink{flex:0 0 auto}.grid-x>.medium-shrink{width:auto}.grid-x>.medium-1{width:8.3333333333%}.grid-x>.medium-2{width:16.6666666667%}.grid-x>.medium-3{width:25%}.grid-x>.medium-4{width:33.3333333333%}.grid-x>.medium-5{width:41.6666666667%}.grid-x>.medium-6{width:50%}.grid-x>.medium-7{width:58.3333333333%}.grid-x>.medium-8{width:66.6666666667%}.grid-x>.medium-9{width:75%}.grid-x>.medium-10{width:83.3333333333%}.grid-x>.medium-11{width:91.6666666667%}.grid-x>.medium-12{width:100%}}@media print,screen and (min-width: 64em){.grid-x>.large-auto{flex:1 1 0px;width:auto}.grid-x>.large-12,.grid-x>.large-11,.grid-x>.large-10,.grid-x>.large-9,.grid-x>.large-8,.grid-x>.large-7,.grid-x>.large-6,.grid-x>.large-5,.grid-x>.large-4,.grid-x>.large-3,.grid-x>.large-2,.grid-x>.large-1,.grid-x>.large-shrink{flex:0 0 auto}.grid-x>.large-shrink{width:auto}.grid-x>.large-1{width:8.3333333333%}.grid-x>.large-2{width:16.6666666667%}.grid-x>.large-3{width:25%}.grid-x>.large-4{width:33.3333333333%}.grid-x>.large-5{width:41.6666666667%}.grid-x>.large-6{width:50%}.grid-x>.large-7{width:58.3333333333%}.grid-x>.large-8{width:66.6666666667%}.grid-x>.large-9{width:75%}.grid-x>.large-10{width:83.3333333333%}.grid-x>.large-11{width:91.6666666667%}.grid-x>.large-12{width:100%}}.grid-margin-x:not(.grid-x)>.cell{width:auto}.grid-margin-y:not(.grid-y)>.cell{height:auto}.grid-margin-x{margin-left:-0.625rem;margin-right:-0.625rem}@media print,screen and (min-width: 40em){.grid-margin-x{margin-left:-0.9375rem;margin-right:-0.9375rem}}.grid-margin-x>.cell{width:calc(100% - 1.25rem);margin-left:0.625rem;margin-right:0.625rem}@media print,screen and (min-width: 40em){.grid-margin-x>.cell{width:calc(100% - 1.875rem);margin-left:0.9375rem;margin-right:0.9375rem}}.grid-margin-x>.auto{width:auto}.grid-margin-x>.shrink{width:auto}.grid-margin-x>.small-1{width:calc(8.3333333333% - 1.25rem)}.grid-margin-x>.small-2{width:calc(16.6666666667% - 1.25rem)}.grid-margin-x>.small-3{width:calc(25% - 1.25rem)}.grid-margin-x>.small-4{width:calc(33.3333333333% - 1.25rem)}.grid-margin-x>.small-5{width:calc(41.6666666667% - 1.25rem)}.grid-margin-x>.small-6{width:calc(50% - 1.25rem)}.grid-margin-x>.small-7{width:calc(58.3333333333% - 1.25rem)}.grid-margin-x>.small-8{width:calc(66.6666666667% - 1.25rem)}.grid-margin-x>.small-9{width:calc(75% - 1.25rem)}.grid-margin-x>.small-10{width:calc(83.3333333333% - 1.25rem)}.grid-margin-x>.small-11{width:calc(91.6666666667% - 1.25rem)}.grid-margin-x>.small-12{width:calc(100% - 1.25rem)}@media print,screen and (min-width: 40em){.grid-margin-x>.auto{width:auto}.grid-margin-x>.shrink{width:auto}.grid-margin-x>.small-1{width:calc(8.3333333333% - 1.875rem)}.grid-margin-x>.small-2{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x>.small-3{width:calc(25% - 1.875rem)}.grid-margin-x>.small-4{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x>.small-5{width:calc(41.6666666667% - 1.875rem)}.grid-margin-x>.small-6{width:calc(50% - 1.875rem)}.grid-margin-x>.small-7{width:calc(58.3333333333% - 1.875rem)}.grid-margin-x>.small-8{width:calc(66.6666666667% - 1.875rem)}.grid-margin-x>.small-9{width:calc(75% - 1.875rem)}.grid-margin-x>.small-10{width:calc(83.3333333333% - 1.875rem)}.grid-margin-x>.small-11{width:calc(91.6666666667% - 1.875rem)}.grid-margin-x>.small-12{width:calc(100% - 1.875rem)}.grid-margin-x>.medium-auto{width:auto}.grid-margin-x>.medium-shrink{width:auto}.grid-margin-x>.medium-1{width:calc(8.3333333333% - 1.875rem)}.grid-margin-x>.medium-2{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x>.medium-3{width:calc(25% - 1.875rem)}.grid-margin-x>.medium-4{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x>.medium-5{width:calc(41.6666666667% - 1.875rem)}.grid-margin-x>.medium-6{width:calc(50% - 1.875rem)}.grid-margin-x>.medium-7{width:calc(58.3333333333% - 1.875rem)}.grid-margin-x>.medium-8{width:calc(66.6666666667% - 1.875rem)}.grid-margin-x>.medium-9{width:calc(75% - 1.875rem)}.grid-margin-x>.medium-10{width:calc(83.3333333333% - 1.875rem)}.grid-margin-x>.medium-11{width:calc(91.6666666667% - 1.875rem)}.grid-margin-x>.medium-12{width:calc(100% - 1.875rem)}}@media print,screen and (min-width: 64em){.grid-margin-x>.large-auto{width:auto}.grid-margin-x>.large-shrink{width:auto}.grid-margin-x>.large-1{width:calc(8.3333333333% - 1.875rem)}.grid-margin-x>.large-2{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x>.large-3{width:calc(25% - 1.875rem)}.grid-margin-x>.large-4{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x>.large-5{width:calc(41.6666666667% - 1.875rem)}.grid-margin-x>.large-6{width:calc(50% - 1.875rem)}.grid-margin-x>.large-7{width:calc(58.3333333333% - 1.875rem)}.grid-margin-x>.large-8{width:calc(66.6666666667% - 1.875rem)}.grid-margin-x>.large-9{width:calc(75% - 1.875rem)}.grid-margin-x>.large-10{width:calc(83.3333333333% - 1.875rem)}.grid-margin-x>.large-11{width:calc(91.6666666667% - 1.875rem)}.grid-margin-x>.large-12{width:calc(100% - 1.875rem)}}.grid-padding-x .grid-padding-x{margin-right:-0.625rem;margin-left:-0.625rem}@media print,screen and (min-width: 40em){.grid-padding-x .grid-padding-x{margin-right:-0.9375rem;margin-left:-0.9375rem}}.grid-container:not(.full)>.grid-padding-x{margin-right:-0.625rem;margin-left:-0.625rem}@media print,screen and (min-width: 40em){.grid-container:not(.full)>.grid-padding-x{margin-right:-0.9375rem;margin-left:-0.9375rem}}.grid-padding-x>.cell{padding-right:0.625rem;padding-left:0.625rem}@media print,screen and (min-width: 40em){.grid-padding-x>.cell{padding-right:0.9375rem;padding-left:0.9375rem}}.small-up-1>.cell{width:100%}.small-up-2>.cell{width:50%}.small-up-3>.cell{width:33.3333333333%}.small-up-4>.cell{width:25%}.small-up-5>.cell{width:20%}.small-up-6>.cell{width:16.6666666667%}.small-up-7>.cell{width:14.2857142857%}.small-up-8>.cell{width:12.5%}@media print,screen and (min-width: 40em){.medium-up-1>.cell{width:100%}.medium-up-2>.cell{width:50%}.medium-up-3>.cell{width:33.3333333333%}.medium-up-4>.cell{width:25%}.medium-up-5>.cell{width:20%}.medium-up-6>.cell{width:16.6666666667%}.medium-up-7>.cell{width:14.2857142857%}.medium-up-8>.cell{width:12.5%}}@media print,screen and (min-width: 64em){.large-up-1>.cell{width:100%}.large-up-2>.cell{width:50%}.large-up-3>.cell{width:33.3333333333%}.large-up-4>.cell{width:25%}.large-up-5>.cell{width:20%}.large-up-6>.cell{width:16.6666666667%}.large-up-7>.cell{width:14.2857142857%}.large-up-8>.cell{width:12.5%}}.grid-margin-x.small-up-1>.cell{width:calc(100% - 1.25rem)}.grid-margin-x.small-up-2>.cell{width:calc(50% - 1.25rem)}.grid-margin-x.small-up-3>.cell{width:calc(33.3333333333% - 1.25rem)}.grid-margin-x.small-up-4>.cell{width:calc(25% - 1.25rem)}.grid-margin-x.small-up-5>.cell{width:calc(20% - 1.25rem)}.grid-margin-x.small-up-6>.cell{width:calc(16.6666666667% - 1.25rem)}.grid-margin-x.small-up-7>.cell{width:calc(14.2857142857% - 1.25rem)}.grid-margin-x.small-up-8>.cell{width:calc(12.5% - 1.25rem)}@media print,screen and (min-width: 40em){.grid-margin-x.small-up-1>.cell{width:calc(100% - 1.875rem)}.grid-margin-x.small-up-2>.cell{width:calc(50% - 1.875rem)}.grid-margin-x.small-up-3>.cell{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x.small-up-4>.cell{width:calc(25% - 1.875rem)}.grid-margin-x.small-up-5>.cell{width:calc(20% - 1.875rem)}.grid-margin-x.small-up-6>.cell{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x.small-up-7>.cell{width:calc(14.2857142857% - 1.875rem)}.grid-margin-x.small-up-8>.cell{width:calc(12.5% - 1.875rem)}.grid-margin-x.medium-up-1>.cell{width:calc(100% - 1.875rem)}.grid-margin-x.medium-up-2>.cell{width:calc(50% - 1.875rem)}.grid-margin-x.medium-up-3>.cell{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x.medium-up-4>.cell{width:calc(25% - 1.875rem)}.grid-margin-x.medium-up-5>.cell{width:calc(20% - 1.875rem)}.grid-margin-x.medium-up-6>.cell{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x.medium-up-7>.cell{width:calc(14.2857142857% - 1.875rem)}.grid-margin-x.medium-up-8>.cell{width:calc(12.5% - 1.875rem)}}@media print,screen and (min-width: 64em){.grid-margin-x.large-up-1>.cell{width:calc(100% - 1.875rem)}.grid-margin-x.large-up-2>.cell{width:calc(50% - 1.875rem)}.grid-margin-x.large-up-3>.cell{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x.large-up-4>.cell{width:calc(25% - 1.875rem)}.grid-margin-x.large-up-5>.cell{width:calc(20% - 1.875rem)}.grid-margin-x.large-up-6>.cell{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x.large-up-7>.cell{width:calc(14.2857142857% - 1.875rem)}.grid-margin-x.large-up-8>.cell{width:calc(12.5% - 1.875rem)}}.small-margin-collapse{margin-right:0;margin-left:0}.small-margin-collapse>.cell{margin-right:0;margin-left:0}.small-margin-collapse>.small-1{width:8.3333333333%}.small-margin-collapse>.small-2{width:16.6666666667%}.small-margin-collapse>.small-3{width:25%}.small-margin-collapse>.small-4{width:33.3333333333%}.small-margin-collapse>.small-5{width:41.6666666667%}.small-margin-collapse>.small-6{width:50%}.small-margin-collapse>.small-7{width:58.3333333333%}.small-margin-collapse>.small-8{width:66.6666666667%}.small-margin-collapse>.small-9{width:75%}.small-margin-collapse>.small-10{width:83.3333333333%}.small-margin-collapse>.small-11{width:91.6666666667%}.small-margin-collapse>.small-12{width:100%}@media print,screen and (min-width: 40em){.small-margin-collapse>.medium-1{width:8.3333333333%}.small-margin-collapse>.medium-2{width:16.6666666667%}.small-margin-collapse>.medium-3{width:25%}.small-margin-collapse>.medium-4{width:33.3333333333%}.small-margin-collapse>.medium-5{width:41.6666666667%}.small-margin-collapse>.medium-6{width:50%}.small-margin-collapse>.medium-7{width:58.3333333333%}.small-margin-collapse>.medium-8{width:66.6666666667%}.small-margin-collapse>.medium-9{width:75%}.small-margin-collapse>.medium-10{width:83.3333333333%}.small-margin-collapse>.medium-11{width:91.6666666667%}.small-margin-collapse>.medium-12{width:100%}}@media print,screen and (min-width: 64em){.small-margin-collapse>.large-1{width:8.3333333333%}.small-margin-collapse>.large-2{width:16.6666666667%}.small-margin-collapse>.large-3{width:25%}.small-margin-collapse>.large-4{width:33.3333333333%}.small-margin-collapse>.large-5{width:41.6666666667%}.small-margin-collapse>.large-6{width:50%}.small-margin-collapse>.large-7{width:58.3333333333%}.small-margin-collapse>.large-8{width:66.6666666667%}.small-margin-collapse>.large-9{width:75%}.small-margin-collapse>.large-10{width:83.3333333333%}.small-margin-collapse>.large-11{width:91.6666666667%}.small-margin-collapse>.large-12{width:100%}}.small-padding-collapse{margin-right:0;margin-left:0}.small-padding-collapse>.cell{padding-right:0;padding-left:0}@media print,screen and (min-width: 40em){.medium-margin-collapse{margin-right:0;margin-left:0}.medium-margin-collapse>.cell{margin-right:0;margin-left:0}}@media print,screen and (min-width: 40em){.medium-margin-collapse>.small-1{width:8.3333333333%}.medium-margin-collapse>.small-2{width:16.6666666667%}.medium-margin-collapse>.small-3{width:25%}.medium-margin-collapse>.small-4{width:33.3333333333%}.medium-margin-collapse>.small-5{width:41.6666666667%}.medium-margin-collapse>.small-6{width:50%}.medium-margin-collapse>.small-7{width:58.3333333333%}.medium-margin-collapse>.small-8{width:66.6666666667%}.medium-margin-collapse>.small-9{width:75%}.medium-margin-collapse>.small-10{width:83.3333333333%}.medium-margin-collapse>.small-11{width:91.6666666667%}.medium-margin-collapse>.small-12{width:100%}}@media print,screen and (min-width: 40em){.medium-margin-collapse>.medium-1{width:8.3333333333%}.medium-margin-collapse>.medium-2{width:16.6666666667%}.medium-margin-collapse>.medium-3{width:25%}.medium-margin-collapse>.medium-4{width:33.3333333333%}.medium-margin-collapse>.medium-5{width:41.6666666667%}.medium-margin-collapse>.medium-6{width:50%}.medium-margin-collapse>.medium-7{width:58.3333333333%}.medium-margin-collapse>.medium-8{width:66.6666666667%}.medium-margin-collapse>.medium-9{width:75%}.medium-margin-collapse>.medium-10{width:83.3333333333%}.medium-margin-collapse>.medium-11{width:91.6666666667%}.medium-margin-collapse>.medium-12{width:100%}}@media print,screen and (min-width: 64em){.medium-margin-collapse>.large-1{width:8.3333333333%}.medium-margin-collapse>.large-2{width:16.6666666667%}.medium-margin-collapse>.large-3{width:25%}.medium-margin-collapse>.large-4{width:33.3333333333%}.medium-margin-collapse>.large-5{width:41.6666666667%}.medium-margin-collapse>.large-6{width:50%}.medium-margin-collapse>.large-7{width:58.3333333333%}.medium-margin-collapse>.large-8{width:66.6666666667%}.medium-margin-collapse>.large-9{width:75%}.medium-margin-collapse>.large-10{width:83.3333333333%}.medium-margin-collapse>.large-11{width:91.6666666667%}.medium-margin-collapse>.large-12{width:100%}}@media print,screen and (min-width: 40em){.medium-padding-collapse{margin-right:0;margin-left:0}.medium-padding-collapse>.cell{padding-right:0;padding-left:0}}@media print,screen and (min-width: 64em){.large-margin-collapse{margin-right:0;margin-left:0}.large-margin-collapse>.cell{margin-right:0;margin-left:0}}@media print,screen and (min-width: 64em){.large-margin-collapse>.small-1{width:8.3333333333%}.large-margin-collapse>.small-2{width:16.6666666667%}.large-margin-collapse>.small-3{width:25%}.large-margin-collapse>.small-4{width:33.3333333333%}.large-margin-collapse>.small-5{width:41.6666666667%}.large-margin-collapse>.small-6{width:50%}.large-margin-collapse>.small-7{width:58.3333333333%}.large-margin-collapse>.small-8{width:66.6666666667%}.large-margin-collapse>.small-9{width:75%}.large-margin-collapse>.small-10{width:83.3333333333%}.large-margin-collapse>.small-11{width:91.6666666667%}.large-margin-collapse>.small-12{width:100%}}@media print,screen and (min-width: 64em){.large-margin-collapse>.medium-1{width:8.3333333333%}.large-margin-collapse>.medium-2{width:16.6666666667%}.large-margin-collapse>.medium-3{width:25%}.large-margin-collapse>.medium-4{width:33.3333333333%}.large-margin-collapse>.medium-5{width:41.6666666667%}.large-margin-collapse>.medium-6{width:50%}.large-margin-collapse>.medium-7{width:58.3333333333%}.large-margin-collapse>.medium-8{width:66.6666666667%}.large-margin-collapse>.medium-9{width:75%}.large-margin-collapse>.medium-10{width:83.3333333333%}.large-margin-collapse>.medium-11{width:91.6666666667%}.large-margin-collapse>.medium-12{width:100%}}@media print,screen and (min-width: 64em){.large-margin-collapse>.large-1{width:8.3333333333%}.large-margin-collapse>.large-2{width:16.6666666667%}.large-margin-collapse>.large-3{width:25%}.large-margin-collapse>.large-4{width:33.3333333333%}.large-margin-collapse>.large-5{width:41.6666666667%}.large-margin-collapse>.large-6{width:50%}.large-margin-collapse>.large-7{width:58.3333333333%}.large-margin-collapse>.large-8{width:66.6666666667%}.large-margin-collapse>.large-9{width:75%}.large-margin-collapse>.large-10{width:83.3333333333%}.large-margin-collapse>.large-11{width:91.6666666667%}.large-margin-collapse>.large-12{width:100%}}@media print,screen and (min-width: 64em){.large-padding-collapse{margin-right:0;margin-left:0}.large-padding-collapse>.cell{padding-right:0;padding-left:0}}.small-offset-0{margin-left:0%}.grid-margin-x>.small-offset-0{margin-left:calc(0% + 0.625rem)}.small-offset-1{margin-left:8.3333333333%}.grid-margin-x>.small-offset-1{margin-left:calc(8.3333333333% + 0.625rem)}.small-offset-2{margin-left:16.6666666667%}.grid-margin-x>.small-offset-2{margin-left:calc(16.6666666667% + 0.625rem)}.small-offset-3{margin-left:25%}.grid-margin-x>.small-offset-3{margin-left:calc(25% + 0.625rem)}.small-offset-4{margin-left:33.3333333333%}.grid-margin-x>.small-offset-4{margin-left:calc(33.3333333333% + 0.625rem)}.small-offset-5{margin-left:41.6666666667%}.grid-margin-x>.small-offset-5{margin-left:calc(41.6666666667% + 0.625rem)}.small-offset-6{margin-left:50%}.grid-margin-x>.small-offset-6{margin-left:calc(50% + 0.625rem)}.small-offset-7{margin-left:58.3333333333%}.grid-margin-x>.small-offset-7{margin-left:calc(58.3333333333% + 0.625rem)}.small-offset-8{margin-left:66.6666666667%}.grid-margin-x>.small-offset-8{margin-left:calc(66.6666666667% + 0.625rem)}.small-offset-9{margin-left:75%}.grid-margin-x>.small-offset-9{margin-left:calc(75% + 0.625rem)}.small-offset-10{margin-left:83.3333333333%}.grid-margin-x>.small-offset-10{margin-left:calc(83.3333333333% + 0.625rem)}.small-offset-11{margin-left:91.6666666667%}.grid-margin-x>.small-offset-11{margin-left:calc(91.6666666667% + 0.625rem)}@media print,screen and (min-width: 40em){.medium-offset-0{margin-left:0%}.grid-margin-x>.medium-offset-0{margin-left:calc(0% + 0.9375rem)}.medium-offset-1{margin-left:8.3333333333%}.grid-margin-x>.medium-offset-1{margin-left:calc(8.3333333333% + 0.9375rem)}.medium-offset-2{margin-left:16.6666666667%}.grid-margin-x>.medium-offset-2{margin-left:calc(16.6666666667% + 0.9375rem)}.medium-offset-3{margin-left:25%}.grid-margin-x>.medium-offset-3{margin-left:calc(25% + 0.9375rem)}.medium-offset-4{margin-left:33.3333333333%}.grid-margin-x>.medium-offset-4{margin-left:calc(33.3333333333% + 0.9375rem)}.medium-offset-5{margin-left:41.6666666667%}.grid-margin-x>.medium-offset-5{margin-left:calc(41.6666666667% + 0.9375rem)}.medium-offset-6{margin-left:50%}.grid-margin-x>.medium-offset-6{margin-left:calc(50% + 0.9375rem)}.medium-offset-7{margin-left:58.3333333333%}.grid-margin-x>.medium-offset-7{margin-left:calc(58.3333333333% + 0.9375rem)}.medium-offset-8{margin-left:66.6666666667%}.grid-margin-x>.medium-offset-8{margin-left:calc(66.6666666667% + 0.9375rem)}.medium-offset-9{margin-left:75%}.grid-margin-x>.medium-offset-9{margin-left:calc(75% + 0.9375rem)}.medium-offset-10{margin-left:83.3333333333%}.grid-margin-x>.medium-offset-10{margin-left:calc(83.3333333333% + 0.9375rem)}.medium-offset-11{margin-left:91.6666666667%}.grid-margin-x>.medium-offset-11{margin-left:calc(91.6666666667% + 0.9375rem)}}@media print,screen and (min-width: 64em){.large-offset-0{margin-left:0%}.grid-margin-x>.large-offset-0{margin-left:calc(0% + 0.9375rem)}.large-offset-1{margin-left:8.3333333333%}.grid-margin-x>.large-offset-1{margin-left:calc(8.3333333333% + 0.9375rem)}.large-offset-2{margin-left:16.6666666667%}.grid-margin-x>.large-offset-2{margin-left:calc(16.6666666667% + 0.9375rem)}.large-offset-3{margin-left:25%}.grid-margin-x>.large-offset-3{margin-left:calc(25% + 0.9375rem)}.large-offset-4{margin-left:33.3333333333%}.grid-margin-x>.large-offset-4{margin-left:calc(33.3333333333% + 0.9375rem)}.large-offset-5{margin-left:41.6666666667%}.grid-margin-x>.large-offset-5{margin-left:calc(41.6666666667% + 0.9375rem)}.large-offset-6{margin-left:50%}.grid-margin-x>.large-offset-6{margin-left:calc(50% + 0.9375rem)}.large-offset-7{margin-left:58.3333333333%}.grid-margin-x>.large-offset-7{margin-left:calc(58.3333333333% + 0.9375rem)}.large-offset-8{margin-left:66.6666666667%}.grid-margin-x>.large-offset-8{margin-left:calc(66.6666666667% + 0.9375rem)}.large-offset-9{margin-left:75%}.grid-margin-x>.large-offset-9{margin-left:calc(75% + 0.9375rem)}.large-offset-10{margin-left:83.3333333333%}.grid-margin-x>.large-offset-10{margin-left:calc(83.3333333333% + 0.9375rem)}.large-offset-11{margin-left:91.6666666667%}.grid-margin-x>.large-offset-11{margin-left:calc(91.6666666667% + 0.9375rem)}}.grid-y{display:flex;flex-flow:column nowrap}.grid-y>.cell{height:auto;max-height:none}.grid-y>.auto{height:auto}.grid-y>.shrink{height:auto}.grid-y>.small-shrink,.grid-y>.small-full,.grid-y>.small-1,.grid-y>.small-2,.grid-y>.small-3,.grid-y>.small-4,.grid-y>.small-5,.grid-y>.small-6,.grid-y>.small-7,.grid-y>.small-8,.grid-y>.small-9,.grid-y>.small-10,.grid-y>.small-11,.grid-y>.small-12{flex-basis:auto}@media print,screen and (min-width: 40em){.grid-y>.medium-shrink,.grid-y>.medium-full,.grid-y>.medium-1,.grid-y>.medium-2,.grid-y>.medium-3,.grid-y>.medium-4,.grid-y>.medium-5,.grid-y>.medium-6,.grid-y>.medium-7,.grid-y>.medium-8,.grid-y>.medium-9,.grid-y>.medium-10,.grid-y>.medium-11,.grid-y>.medium-12{flex-basis:auto}}@media print,screen and (min-width: 64em){.grid-y>.large-shrink,.grid-y>.large-full,.grid-y>.large-1,.grid-y>.large-2,.grid-y>.large-3,.grid-y>.large-4,.grid-y>.large-5,.grid-y>.large-6,.grid-y>.large-7,.grid-y>.large-8,.grid-y>.large-9,.grid-y>.large-10,.grid-y>.large-11,.grid-y>.large-12{flex-basis:auto}}.grid-y>.small-12,.grid-y>.small-11,.grid-y>.small-10,.grid-y>.small-9,.grid-y>.small-8,.grid-y>.small-7,.grid-y>.small-6,.grid-y>.small-5,.grid-y>.small-4,.grid-y>.small-3,.grid-y>.small-2,.grid-y>.small-1{flex:0 0 auto}.grid-y>.small-1{height:8.3333333333%}.grid-y>.small-2{height:16.6666666667%}.grid-y>.small-3{height:25%}.grid-y>.small-4{height:33.3333333333%}.grid-y>.small-5{height:41.6666666667%}.grid-y>.small-6{height:50%}.grid-y>.small-7{height:58.3333333333%}.grid-y>.small-8{height:66.6666666667%}.grid-y>.small-9{height:75%}.grid-y>.small-10{height:83.3333333333%}.grid-y>.small-11{height:91.6666666667%}.grid-y>.small-12{height:100%}@media print,screen and (min-width: 40em){.grid-y>.medium-auto{flex:1 1 0px;height:auto}.grid-y>.medium-12,.grid-y>.medium-11,.grid-y>.medium-10,.grid-y>.medium-9,.grid-y>.medium-8,.grid-y>.medium-7,.grid-y>.medium-6,.grid-y>.medium-5,.grid-y>.medium-4,.grid-y>.medium-3,.grid-y>.medium-2,.grid-y>.medium-1,.grid-y>.medium-shrink{flex:0 0 auto}.grid-y>.medium-shrink{height:auto}.grid-y>.medium-1{height:8.3333333333%}.grid-y>.medium-2{height:16.6666666667%}.grid-y>.medium-3{height:25%}.grid-y>.medium-4{height:33.3333333333%}.grid-y>.medium-5{height:41.6666666667%}.grid-y>.medium-6{height:50%}.grid-y>.medium-7{height:58.3333333333%}.grid-y>.medium-8{height:66.6666666667%}.grid-y>.medium-9{height:75%}.grid-y>.medium-10{height:83.3333333333%}.grid-y>.medium-11{height:91.6666666667%}.grid-y>.medium-12{height:100%}}@media print,screen and (min-width: 64em){.grid-y>.large-auto{flex:1 1 0px;height:auto}.grid-y>.large-12,.grid-y>.large-11,.grid-y>.large-10,.grid-y>.large-9,.grid-y>.large-8,.grid-y>.large-7,.grid-y>.large-6,.grid-y>.large-5,.grid-y>.large-4,.grid-y>.large-3,.grid-y>.large-2,.grid-y>.large-1,.grid-y>.large-shrink{flex:0 0 auto}.grid-y>.large-shrink{height:auto}.grid-y>.large-1{height:8.3333333333%}.grid-y>.large-2{height:16.6666666667%}.grid-y>.large-3{height:25%}.grid-y>.large-4{height:33.3333333333%}.grid-y>.large-5{height:41.6666666667%}.grid-y>.large-6{height:50%}.grid-y>.large-7{height:58.3333333333%}.grid-y>.large-8{height:66.6666666667%}.grid-y>.large-9{height:75%}.grid-y>.large-10{height:83.3333333333%}.grid-y>.large-11{height:91.6666666667%}.grid-y>.large-12{height:100%}}.grid-padding-y .grid-padding-y{margin-top:-0.625rem;margin-bottom:-0.625rem}@media print,screen and (min-width: 40em){.grid-padding-y .grid-padding-y{margin-top:-0.9375rem;margin-bottom:-0.9375rem}}.grid-padding-y>.cell{padding-top:0.625rem;padding-bottom:0.625rem}@media print,screen and (min-width: 40em){.grid-padding-y>.cell{padding-top:0.9375rem;padding-bottom:0.9375rem}}.grid-margin-y{margin-top:-0.625rem;margin-bottom:-0.625rem}@media print,screen and (min-width: 40em){.grid-margin-y{margin-top:-0.9375rem;margin-bottom:-0.9375rem}}.grid-margin-y>.cell{height:calc(100% - 1.25rem);margin-top:0.625rem;margin-bottom:0.625rem}@media print,screen and (min-width: 40em){.grid-margin-y>.cell{height:calc(100% - 1.875rem);margin-top:0.9375rem;margin-bottom:0.9375rem}}.grid-margin-y>.auto{height:auto}.grid-margin-y>.shrink{height:auto}.grid-margin-y>.small-1{height:calc(8.3333333333% - 1.25rem)}.grid-margin-y>.small-2{height:calc(16.6666666667% - 1.25rem)}.grid-margin-y>.small-3{height:calc(25% - 1.25rem)}.grid-margin-y>.small-4{height:calc(33.3333333333% - 1.25rem)}.grid-margin-y>.small-5{height:calc(41.6666666667% - 1.25rem)}.grid-margin-y>.small-6{height:calc(50% - 1.25rem)}.grid-margin-y>.small-7{height:calc(58.3333333333% - 1.25rem)}.grid-margin-y>.small-8{height:calc(66.6666666667% - 1.25rem)}.grid-margin-y>.small-9{height:calc(75% - 1.25rem)}.grid-margin-y>.small-10{height:calc(83.3333333333% - 1.25rem)}.grid-margin-y>.small-11{height:calc(91.6666666667% - 1.25rem)}.grid-margin-y>.small-12{height:calc(100% - 1.25rem)}@media print,screen and (min-width: 40em){.grid-margin-y>.auto{height:auto}.grid-margin-y>.shrink{height:auto}.grid-margin-y>.small-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.small-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.small-3{height:calc(25% - 1.875rem)}.grid-margin-y>.small-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.small-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.small-6{height:calc(50% - 1.875rem)}.grid-margin-y>.small-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.small-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.small-9{height:calc(75% - 1.875rem)}.grid-margin-y>.small-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.small-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.small-12{height:calc(100% - 1.875rem)}.grid-margin-y>.medium-auto{height:auto}.grid-margin-y>.medium-shrink{height:auto}.grid-margin-y>.medium-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.medium-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.medium-3{height:calc(25% - 1.875rem)}.grid-margin-y>.medium-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.medium-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.medium-6{height:calc(50% - 1.875rem)}.grid-margin-y>.medium-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.medium-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.medium-9{height:calc(75% - 1.875rem)}.grid-margin-y>.medium-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.medium-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.medium-12{height:calc(100% - 1.875rem)}}@media print,screen and (min-width: 64em){.grid-margin-y>.large-auto{height:auto}.grid-margin-y>.large-shrink{height:auto}.grid-margin-y>.large-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.large-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.large-3{height:calc(25% - 1.875rem)}.grid-margin-y>.large-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.large-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.large-6{height:calc(50% - 1.875rem)}.grid-margin-y>.large-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.large-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.large-9{height:calc(75% - 1.875rem)}.grid-margin-y>.large-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.large-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.large-12{height:calc(100% - 1.875rem)}}.grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;width:100vw}.cell .grid-frame{width:100%}.cell-block{overflow-x:auto;max-width:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.cell-block-y{overflow-y:auto;max-height:100%;min-height:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.cell-block-container{display:flex;flex-direction:column;max-height:100%}.cell-block-container>.grid-x{max-height:100%;flex-wrap:nowrap}@media print,screen and (min-width: 40em){.medium-grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;width:100vw}.cell .medium-grid-frame{width:100%}.medium-cell-block{overflow-x:auto;max-width:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.medium-cell-block-container{display:flex;flex-direction:column;max-height:100%}.medium-cell-block-container>.grid-x{max-height:100%;flex-wrap:nowrap}.medium-cell-block-y{overflow-y:auto;max-height:100%;min-height:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}}@media print,screen and (min-width: 64em){.large-grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;width:100vw}.cell .large-grid-frame{width:100%}.large-cell-block{overflow-x:auto;max-width:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.large-cell-block-container{display:flex;flex-direction:column;max-height:100%}.large-cell-block-container>.grid-x{max-height:100%;flex-wrap:nowrap}.large-cell-block-y{overflow-y:auto;max-height:100%;min-height:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}}.grid-y.grid-frame{width:auto;overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;height:100vh}@media print,screen and (min-width: 40em){.grid-y.medium-grid-frame{width:auto;overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;height:100vh}}@media print,screen and (min-width: 64em){.grid-y.large-grid-frame{width:auto;overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;height:100vh}}.cell .grid-y.grid-frame{height:100%}@media print,screen and (min-width: 40em){.cell .grid-y.medium-grid-frame{height:100%}}@media print,screen and (min-width: 64em){.cell .grid-y.large-grid-frame{height:100%}}.grid-margin-y{margin-top:-0.625rem;margin-bottom:-0.625rem}@media print,screen and (min-width: 40em){.grid-margin-y{margin-top:-0.9375rem;margin-bottom:-0.9375rem}}.grid-margin-y>.cell{height:calc(100% - 1.25rem);margin-top:0.625rem;margin-bottom:0.625rem}@media print,screen and (min-width: 40em){.grid-margin-y>.cell{height:calc(100% - 1.875rem);margin-top:0.9375rem;margin-bottom:0.9375rem}}.grid-margin-y>.auto{height:auto}.grid-margin-y>.shrink{height:auto}.grid-margin-y>.small-1{height:calc(8.3333333333% - 1.25rem)}.grid-margin-y>.small-2{height:calc(16.6666666667% - 1.25rem)}.grid-margin-y>.small-3{height:calc(25% - 1.25rem)}.grid-margin-y>.small-4{height:calc(33.3333333333% - 1.25rem)}.grid-margin-y>.small-5{height:calc(41.6666666667% - 1.25rem)}.grid-margin-y>.small-6{height:calc(50% - 1.25rem)}.grid-margin-y>.small-7{height:calc(58.3333333333% - 1.25rem)}.grid-margin-y>.small-8{height:calc(66.6666666667% - 1.25rem)}.grid-margin-y>.small-9{height:calc(75% - 1.25rem)}.grid-margin-y>.small-10{height:calc(83.3333333333% - 1.25rem)}.grid-margin-y>.small-11{height:calc(91.6666666667% - 1.25rem)}.grid-margin-y>.small-12{height:calc(100% - 1.25rem)}@media print,screen and (min-width: 40em){.grid-margin-y>.auto{height:auto}.grid-margin-y>.shrink{height:auto}.grid-margin-y>.small-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.small-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.small-3{height:calc(25% - 1.875rem)}.grid-margin-y>.small-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.small-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.small-6{height:calc(50% - 1.875rem)}.grid-margin-y>.small-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.small-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.small-9{height:calc(75% - 1.875rem)}.grid-margin-y>.small-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.small-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.small-12{height:calc(100% - 1.875rem)}.grid-margin-y>.medium-auto{height:auto}.grid-margin-y>.medium-shrink{height:auto}.grid-margin-y>.medium-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.medium-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.medium-3{height:calc(25% - 1.875rem)}.grid-margin-y>.medium-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.medium-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.medium-6{height:calc(50% - 1.875rem)}.grid-margin-y>.medium-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.medium-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.medium-9{height:calc(75% - 1.875rem)}.grid-margin-y>.medium-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.medium-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.medium-12{height:calc(100% - 1.875rem)}}@media print,screen and (min-width: 64em){.grid-margin-y>.large-auto{height:auto}.grid-margin-y>.large-shrink{height:auto}.grid-margin-y>.large-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.large-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.large-3{height:calc(25% - 1.875rem)}.grid-margin-y>.large-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.large-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.large-6{height:calc(50% - 1.875rem)}.grid-margin-y>.large-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.large-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.large-9{height:calc(75% - 1.875rem)}.grid-margin-y>.large-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.large-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.large-12{height:calc(100% - 1.875rem)}}.grid-frame.grid-margin-y{height:calc(100vh + 1.25rem)}@media print,screen and (min-width: 40em){.grid-frame.grid-margin-y{height:calc(100vh + 1.875rem)}}@media print,screen and (min-width: 64em){.grid-frame.grid-margin-y{height:calc(100vh + 1.875rem)}}@media print,screen and (min-width: 40em){.grid-margin-y.medium-grid-frame{height:calc(100vh + 1.875rem)}}@media print,screen and (min-width: 64em){.grid-margin-y.large-grid-frame{height:calc(100vh + 1.875rem)}}div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}p{margin-bottom:1rem;font-size:inherit;line-height:1.6;text-rendering:optimizeLegibility}em,i{font-style:italic;line-height:inherit}strong,b{font-weight:bold;line-height:inherit}small{font-size:80%;line-height:inherit}h1,.h1,h2,.h2,h3,.h3,h4,.h4,h5,.h5,h6,.h6{font-family:"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;font-style:normal;font-weight:normal;color:inherit;text-rendering:optimizeLegibility}h1 small,.h1 small,h2 small,.h2 small,h3 small,.h3 small,h4 small,.h4 small,h5 small,.h5 small,h6 small,.h6 small{line-height:0;color:#cacaca}h1,.h1{font-size:1.5rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h2,.h2{font-size:1.25rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h3,.h3{font-size:1.1875rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h4,.h4{font-size:1.125rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h5,.h5{font-size:1.0625rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h6,.h6{font-size:1rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}@media print,screen and (min-width: 40em){h1,.h1{font-size:3rem}h2,.h2{font-size:2.5rem}h3,.h3{font-size:1.9375rem}h4,.h4{font-size:1.5625rem}h5,.h5{font-size:1.25rem}h6,.h6{font-size:1rem}}a{line-height:inherit;color:#1779ba;text-decoration:none;cursor:pointer}a:hover,a:focus{color:#1468a0}a img{border:0}hr{clear:both;max-width:75rem;height:0;margin:1.25rem auto;border-top:0;border-right:0;border-bottom:1px solid #cacaca;border-left:0}ul,ol,dl{margin-bottom:1rem;list-style-position:outside;line-height:1.6}li{font-size:inherit}ul{margin-left:1.25rem;list-style-type:disc}ol{margin-left:1.25rem}ul ul,ul ol,ol ul,ol ol{margin-left:1.25rem;margin-bottom:0}dl{margin-bottom:1rem}dl dt{margin-bottom:.3rem;font-weight:bold}blockquote{margin:0 0 1rem;padding:.5625rem 1.25rem 0 1.1875rem;border-left:1px solid #cacaca}blockquote,blockquote p{line-height:1.6;color:#8a8a8a}abbr,abbr[title]{border-bottom:1px dotted #0a0a0a;cursor:help;text-decoration:none}figure{margin:0}kbd{margin:0;padding:.125rem .25rem 0;background-color:#e6e6e6;font-family:Consolas,"Liberation Mono",Courier,monospace;color:#0a0a0a}.subheader{margin-top:.2rem;margin-bottom:.5rem;font-weight:normal;line-height:1.4;color:#8a8a8a}.lead{font-size:125%;line-height:1.6}.stat{font-size:2.5rem;line-height:1}p+.stat{margin-top:-1rem}ul.no-bullet,ol.no-bullet{margin-left:0;list-style:none}.cite-block,cite{display:block;color:#8a8a8a;font-size:.8125rem}.cite-block:before,cite:before{content:" "}.code-inline,code{border:1px solid #cacaca;background-color:#e6e6e6;font-family:Consolas,"Liberation Mono",Courier,monospace;font-weight:normal;color:#0a0a0a;display:inline;max-width:100%;word-wrap:break-word;padding:.125rem .3125rem .0625rem}.code-block{border:1px solid #cacaca;background-color:#e6e6e6;font-family:Consolas,"Liberation Mono",Courier,monospace;font-weight:normal;color:#0a0a0a;display:block;overflow:auto;white-space:pre;padding:1rem;margin-bottom:1.5rem}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}@media print,screen and (min-width: 40em){.medium-text-left{text-align:left}.medium-text-right{text-align:right}.medium-text-center{text-align:center}.medium-text-justify{text-align:justify}}@media print,screen and (min-width: 64em){.large-text-left{text-align:left}.large-text-right{text-align:right}.large-text-center{text-align:center}.large-text-justify{text-align:justify}}.show-for-print{display:none !important}@media print{*{background:transparent !important;color:#000 !important;color-adjust:economy;box-shadow:none !important;text-shadow:none !important}.show-for-print{display:block !important}.hide-for-print{display:none !important}table.show-for-print{display:table !important}thead.show-for-print{display:table-header-group !important}tbody.show-for-print{display:table-row-group !important}tr.show-for-print{display:table-row !important}td.show-for-print{display:table-cell !important}th.show-for-print{display:table-cell !important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}abbr[title]:after{content:" (" attr(title) ")"}pre,blockquote{border:1px solid #8a8a8a;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:.5cm}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}.print-break-inside{page-break-inside:auto}}.button{display:inline-block;vertical-align:middle;margin:0 0 1rem 0;padding:.85em 1em;border:1px solid transparent;border-radius:0;transition:background-color .25s ease-out,color .25s ease-out;font-family:inherit;font-size:.9rem;-webkit-appearance:none;line-height:1;text-align:center;cursor:pointer}[data-whatinput=mouse] .button{outline:0}.button.tiny{font-size:.6rem}.button.small{font-size:.75rem}.button.large{font-size:1.25rem}.button.expanded{display:block;width:100%;margin-right:0;margin-left:0}.button,.button.disabled,.button[disabled],.button.disabled:hover,.button[disabled]:hover,.button.disabled:focus,.button[disabled]:focus{background-color:#1779ba;color:#fefefe}.button:hover,.button:focus{background-color:#14679e;color:#fefefe}.button.primary,.button.primary.disabled,.button.primary[disabled],.button.primary.disabled:hover,.button.primary[disabled]:hover,.button.primary.disabled:focus,.button.primary[disabled]:focus{background-color:#1779ba;color:#fefefe}.button.primary:hover,.button.primary:focus{background-color:#126195;color:#fefefe}.button.secondary,.button.secondary.disabled,.button.secondary[disabled],.button.secondary.disabled:hover,.button.secondary[disabled]:hover,.button.secondary.disabled:focus,.button.secondary[disabled]:focus{background-color:#767676;color:#fefefe}.button.secondary:hover,.button.secondary:focus{background-color:#5e5e5e;color:#fefefe}.button.success,.button.success.disabled,.button.success[disabled],.button.success.disabled:hover,.button.success[disabled]:hover,.button.success.disabled:focus,.button.success[disabled]:focus{background-color:#3adb76;color:#0a0a0a}.button.success:hover,.button.success:focus{background-color:#22bb5b;color:#0a0a0a}.button.warning,.button.warning.disabled,.button.warning[disabled],.button.warning.disabled:hover,.button.warning[disabled]:hover,.button.warning.disabled:focus,.button.warning[disabled]:focus{background-color:#ffae00;color:#0a0a0a}.button.warning:hover,.button.warning:focus{background-color:#cc8b00;color:#0a0a0a}.button.alert,.button.alert.disabled,.button.alert[disabled],.button.alert.disabled:hover,.button.alert[disabled]:hover,.button.alert.disabled:focus,.button.alert[disabled]:focus{background-color:#cc4b37;color:#fefefe}.button.alert:hover,.button.alert:focus{background-color:#a53b2a;color:#fefefe}.button.hollow,.button.hollow:hover,.button.hollow:focus,.button.hollow.disabled,.button.hollow.disabled:hover,.button.hollow.disabled:focus,.button.hollow[disabled],.button.hollow[disabled]:hover,.button.hollow[disabled]:focus{background-color:transparent}.button.hollow,.button.hollow.disabled,.button.hollow[disabled],.button.hollow.disabled:hover,.button.hollow[disabled]:hover,.button.hollow.disabled:focus,.button.hollow[disabled]:focus{border:1px solid #1779ba;color:#1779ba}.button.hollow:hover,.button.hollow:focus{border-color:#0c3d5d;color:#0c3d5d}.button.hollow.primary,.button.hollow.primary.disabled,.button.hollow.primary[disabled],.button.hollow.primary.disabled:hover,.button.hollow.primary[disabled]:hover,.button.hollow.primary.disabled:focus,.button.hollow.primary[disabled]:focus{border:1px solid #1779ba;color:#1779ba}.button.hollow.primary:hover,.button.hollow.primary:focus{border-color:#0c3d5d;color:#0c3d5d}.button.hollow.secondary,.button.hollow.secondary.disabled,.button.hollow.secondary[disabled],.button.hollow.secondary.disabled:hover,.button.hollow.secondary[disabled]:hover,.button.hollow.secondary.disabled:focus,.button.hollow.secondary[disabled]:focus{border:1px solid #767676;color:#767676}.button.hollow.secondary:hover,.button.hollow.secondary:focus{border-color:#3b3b3b;color:#3b3b3b}.button.hollow.success,.button.hollow.success.disabled,.button.hollow.success[disabled],.button.hollow.success.disabled:hover,.button.hollow.success[disabled]:hover,.button.hollow.success.disabled:focus,.button.hollow.success[disabled]:focus{border:1px solid #3adb76;color:#3adb76}.button.hollow.success:hover,.button.hollow.success:focus{border-color:#157539;color:#157539}.button.hollow.warning,.button.hollow.warning.disabled,.button.hollow.warning[disabled],.button.hollow.warning.disabled:hover,.button.hollow.warning[disabled]:hover,.button.hollow.warning.disabled:focus,.button.hollow.warning[disabled]:focus{border:1px solid #ffae00;color:#ffae00}.button.hollow.warning:hover,.button.hollow.warning:focus{border-color:#805700;color:#805700}.button.hollow.alert,.button.hollow.alert.disabled,.button.hollow.alert[disabled],.button.hollow.alert.disabled:hover,.button.hollow.alert[disabled]:hover,.button.hollow.alert.disabled:focus,.button.hollow.alert[disabled]:focus{border:1px solid #cc4b37;color:#cc4b37}.button.hollow.alert:hover,.button.hollow.alert:focus{border-color:#67251a;color:#67251a}.button.clear,.button.clear:hover,.button.clear:focus,.button.clear.disabled,.button.clear.disabled:hover,.button.clear.disabled:focus,.button.clear[disabled],.button.clear[disabled]:hover,.button.clear[disabled]:focus{border-color:transparent;background-color:transparent}.button.clear,.button.clear.disabled,.button.clear[disabled],.button.clear.disabled:hover,.button.clear[disabled]:hover,.button.clear.disabled:focus,.button.clear[disabled]:focus{color:#1779ba}.button.clear:hover,.button.clear:focus{color:#0c3d5d}.button.clear.primary,.button.clear.primary.disabled,.button.clear.primary[disabled],.button.clear.primary.disabled:hover,.button.clear.primary[disabled]:hover,.button.clear.primary.disabled:focus,.button.clear.primary[disabled]:focus{color:#1779ba}.button.clear.primary:hover,.button.clear.primary:focus{color:#0c3d5d}.button.clear.secondary,.button.clear.secondary.disabled,.button.clear.secondary[disabled],.button.clear.secondary.disabled:hover,.button.clear.secondary[disabled]:hover,.button.clear.secondary.disabled:focus,.button.clear.secondary[disabled]:focus{color:#767676}.button.clear.secondary:hover,.button.clear.secondary:focus{color:#3b3b3b}.button.clear.success,.button.clear.success.disabled,.button.clear.success[disabled],.button.clear.success.disabled:hover,.button.clear.success[disabled]:hover,.button.clear.success.disabled:focus,.button.clear.success[disabled]:focus{color:#3adb76}.button.clear.success:hover,.button.clear.success:focus{color:#157539}.button.clear.warning,.button.clear.warning.disabled,.button.clear.warning[disabled],.button.clear.warning.disabled:hover,.button.clear.warning[disabled]:hover,.button.clear.warning.disabled:focus,.button.clear.warning[disabled]:focus{color:#ffae00}.button.clear.warning:hover,.button.clear.warning:focus{color:#805700}.button.clear.alert,.button.clear.alert.disabled,.button.clear.alert[disabled],.button.clear.alert.disabled:hover,.button.clear.alert[disabled]:hover,.button.clear.alert.disabled:focus,.button.clear.alert[disabled]:focus{color:#cc4b37}.button.clear.alert:hover,.button.clear.alert:focus{color:#67251a}.button.disabled,.button[disabled]{opacity:.25;cursor:not-allowed}.button.dropdown::after{display:block;width:0;height:0;border:inset .4em;content:"";border-bottom-width:0;border-top-style:solid;border-color:#fefefe transparent transparent;position:relative;top:.4em;display:inline-block;float:right;margin-left:1em}.button.dropdown.hollow::after,.button.dropdown.clear::after{border-top-color:#1779ba}.button.dropdown.hollow.primary::after,.button.dropdown.clear.primary::after{border-top-color:#1779ba}.button.dropdown.hollow.secondary::after,.button.dropdown.clear.secondary::after{border-top-color:#767676}.button.dropdown.hollow.success::after,.button.dropdown.clear.success::after{border-top-color:#3adb76}.button.dropdown.hollow.warning::after,.button.dropdown.clear.warning::after{border-top-color:#ffae00}.button.dropdown.hollow.alert::after,.button.dropdown.clear.alert::after{border-top-color:#cc4b37}.button.arrow-only::after{top:-0.1em;float:none;margin-left:0}a.button:hover,a.button:focus{text-decoration:none}[type=text],[type=password],[type=date],[type=datetime],[type=datetime-local],[type=month],[type=week],[type=email],[type=number],[type=search],[type=tel],[type=time],[type=url],[type=color],textarea{display:block;box-sizing:border-box;width:100%;height:2.4375rem;margin:0 0 1rem;padding:.5rem;border:1px solid #cacaca;border-radius:0;background-color:#fefefe;box-shadow:inset 0 1px 2px rgba(10,10,10,.1);font-family:inherit;font-size:1rem;font-weight:normal;line-height:1.5;color:#0a0a0a;transition:box-shadow .5s,border-color .25s ease-in-out;appearance:none}[type=text]:focus,[type=password]:focus,[type=date]:focus,[type=datetime]:focus,[type=datetime-local]:focus,[type=month]:focus,[type=week]:focus,[type=email]:focus,[type=number]:focus,[type=search]:focus,[type=tel]:focus,[type=time]:focus,[type=url]:focus,[type=color]:focus,textarea:focus{outline:none;border:1px solid #8a8a8a;background-color:#fefefe;box-shadow:0 0 5px #cacaca;transition:box-shadow .5s,border-color .25s ease-in-out}textarea{max-width:100%}textarea[rows]{height:auto}input:disabled,input[readonly],textarea:disabled,textarea[readonly]{background-color:#e6e6e6;cursor:not-allowed}[type=submit],[type=button]{appearance:none;border-radius:0}input[type=search]{box-sizing:border-box}::placeholder{color:#cacaca}[type=file],[type=checkbox],[type=radio]{margin:0 0 1rem}[type=checkbox]+label,[type=radio]+label{display:inline-block;vertical-align:baseline;margin-left:.5rem;margin-right:1rem;margin-bottom:0}[type=checkbox]+label[for],[type=radio]+label[for]{cursor:pointer}label>[type=checkbox],label>[type=radio]{margin-right:.5rem}[type=file]{width:100%}label{display:block;margin:0;font-size:.875rem;font-weight:normal;line-height:1.8;color:#0a0a0a}label.middle{margin:0 0 1rem;padding:.5625rem 0}.help-text{margin-top:-0.5rem;font-size:.8125rem;font-style:italic;color:#0a0a0a}.input-group{display:flex;width:100%;margin-bottom:1rem;align-items:stretch}.input-group>:first-child,.input-group>:first-child.input-group-button>*{border-radius:0 0 0 0}.input-group>:last-child,.input-group>:last-child.input-group-button>*{border-radius:0 0 0 0}.input-group-button a,.input-group-button input,.input-group-button button,.input-group-button label,.input-group-button,.input-group-field,.input-group-label{margin:0;white-space:nowrap}.input-group-label{padding:0 1rem;border:1px solid #cacaca;background:#e6e6e6;color:#0a0a0a;text-align:center;white-space:nowrap;display:flex;flex:0 0 auto;align-items:center}.input-group-label:first-child{border-right:0}.input-group-label:last-child{border-left:0}.input-group-field{border-radius:0;flex:1 1 0px;min-width:0}.input-group-button{padding-top:0;padding-bottom:0;text-align:center;display:flex;flex:0 0 auto}.input-group-button a,.input-group-button input,.input-group-button button,.input-group-button label{align-self:stretch;height:auto;padding-top:0;padding-bottom:0;font-size:1rem}fieldset{margin:0;padding:0;border:0}legend{max-width:100%;margin-bottom:.5rem}.fieldset{margin:1.125rem 0;padding:1.25rem;border:1px solid #cacaca}.fieldset legend{margin:0;margin-left:-0.1875rem;padding:0 .1875rem}select{height:2.4375rem;margin:0 0 1rem;padding:.5rem;appearance:none;border:1px solid #cacaca;border-radius:0;background-color:#fefefe;font-family:inherit;font-size:1rem;font-weight:normal;line-height:1.5;color:#0a0a0a;background-image:url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' version=\'1.1\' width=\'32\' height=\'24\' viewBox=\'0 0 32 24\'><polygon points=\'0,0 32,0 16,24\' style=\'fill: rgb%28138, 138, 138%29\'></polygon></svg>");background-origin:content-box;background-position:right -1rem center;background-repeat:no-repeat;background-size:9px 6px;padding-right:1.5rem;transition:box-shadow .5s,border-color .25s ease-in-out}@media screen and (min-width: 0\\0 ){select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNrEkckNgDAMBBfRkEt0ObRBBdsGXUDgmQfK4XhH2m8czQAAy27R3tsw4Qfe2x8uOO6oYLb6GlOor3GF+swURAOmUJ+RwtEJs9WvTGEYxBXqI1MQAZhCfUQKRzDMVj+TwrAIV6jvSUEkYAr1LSkcyTBb/V+KYfX7xAeusq3sLDtGH3kEGACPWIflNZfhRQAAAABJRU5ErkJggg==")}}select:focus{outline:none;border:1px solid #8a8a8a;background-color:#fefefe;box-shadow:0 0 5px #cacaca;transition:box-shadow .5s,border-color .25s ease-in-out}select:disabled{background-color:#e6e6e6;cursor:not-allowed}select::-ms-expand{display:none}select[multiple]{height:auto;background-image:none}select:not([multiple]){padding-top:0;padding-bottom:0}.is-invalid-input:not(:focus){border-color:#cc4b37;background-color:#f9ecea}.is-invalid-input:not(:focus)::placeholder{color:#cc4b37}.is-invalid-label{color:#cc4b37}.form-error{display:none;margin-top:-0.5rem;margin-bottom:1rem;font-size:.75rem;font-weight:bold;color:#cc4b37}.form-error.is-visible{display:block}table{border-collapse:collapse;width:100%;margin-bottom:1rem;border-radius:0}thead,tbody,tfoot{border:1px solid #f1f1f1;background-color:#fefefe}caption{padding:.5rem .625rem .625rem;font-weight:bold}thead{background:#f8f8f8;color:#0a0a0a}tfoot{background:#f1f1f1;color:#0a0a0a}thead tr,tfoot tr{background:transparent}thead th,thead td,tfoot th,tfoot td{padding:.5rem .625rem .625rem;font-weight:bold;text-align:left}tbody th,tbody td{padding:.5rem .625rem .625rem}tbody tr:nth-child(even){border-bottom:0;background-color:#f1f1f1}table.unstriped tbody{background-color:#fefefe}table.unstriped tbody tr{border-bottom:0;border-bottom:1px solid #f1f1f1;background-color:#fefefe}@media print,screen and (max-width: 63.99875em){table.stack thead{display:none}table.stack tfoot{display:none}table.stack tr,table.stack th,table.stack td{display:block}table.stack td{border-top:0}}table.scroll{display:block;width:100%;overflow-x:auto}table.hover thead tr:hover{background-color:#f3f3f3}table.hover tfoot tr:hover{background-color:#ececec}table.hover tbody tr:hover{background-color:#f9f9f9}table.hover:not(.unstriped) tr:nth-of-type(even):hover{background-color:#ececec}.table-scroll{overflow-x:auto}.hide{display:none !important}.invisible{visibility:hidden}@media print,screen and (max-width: 39.99875em){.hide-for-small-only{display:none !important}}@media screen and (max-width: 0em),screen and (min-width: 40em){.show-for-small-only{display:none !important}}@media print,screen and (min-width: 40em){.hide-for-medium{display:none !important}}@media screen and (max-width: 39.99875em){.show-for-medium{display:none !important}}@media print,screen and (min-width: 40em)and (max-width: 63.99875em){.hide-for-medium-only{display:none !important}}@media screen and (max-width: 39.99875em),screen and (min-width: 64em){.show-for-medium-only{display:none !important}}@media print,screen and (min-width: 64em){.hide-for-large{display:none !important}}@media screen and (max-width: 63.99875em){.show-for-large{display:none !important}}@media print,screen and (min-width: 64em)and (max-width: 74.99875em){.hide-for-large-only{display:none !important}}@media screen and (max-width: 63.99875em),screen and (min-width: 75em){.show-for-large-only{display:none !important}}.show-for-sr,.show-on-focus{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important}.show-on-focus:active,.show-on-focus:focus{position:static !important;width:auto !important;height:auto !important;overflow:visible !important;clip:auto !important;white-space:normal !important}.show-for-landscape,.hide-for-portrait{display:block !important}@media screen and (orientation: landscape){.show-for-landscape,.hide-for-portrait{display:block !important}}@media screen and (orientation: portrait){.show-for-landscape,.hide-for-portrait{display:none !important}}.hide-for-landscape,.show-for-portrait{display:none !important}@media screen and (orientation: landscape){.hide-for-landscape,.show-for-portrait{display:none !important}}@media screen and (orientation: portrait){.hide-for-landscape,.show-for-portrait{display:block !important}}.Editor{background-color:#7b7b7b;color:#111;overflow:hidden}.full_height_container{height:100%}.full_page_height{height:100vh}.button{margin-bottom:0px}select.select{background-image:none}.disable-select{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none}.cursor_col_resize{cursor:col-resize}',""]),e.exports=t}]);
//# sourceMappingURL=polygonjs-editor.js.map