/*! For license information please see vendors~Sop.bundle.js.LICENSE.txt */
(window.webpackJsonpPOLY=window.webpackJsonpPOLY||[]).push([["vendors~Sop"],Array(335).concat([function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(373);function o(t){this.manager=void 0!==t?t:r.a,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(o.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}})},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(349),o=n(335),i={};function a(t){o.a.call(this,t)}a.prototype=Object.assign(Object.create(o.a.prototype),{constructor:a,load:function(t,e,n,o){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var a=this,s=r.a.get(t);if(void 0!==s)return a.manager.itemStart(t),setTimeout((function(){e&&e(s),a.manager.itemEnd(t)}),0),s;if(void 0===i[t]){var u=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(u){var c=u[1],f=!!u[2],l=u[3];l=decodeURIComponent(l),f&&(l=atob(l));try{var h,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),m=0;m<l.length;m++)d[m]=l.charCodeAt(m);h="blob"===p?new Blob([d.buffer],{type:c}):d.buffer;break;case"document":var g=new DOMParser;h=g.parseFromString(l,c);break;case"json":h=JSON.parse(l);break;default:h=l}setTimeout((function(){e&&e(h),a.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){o&&o(e),a.manager.itemError(t),a.manager.itemEnd(t)}),0)}}else{i[t]=[],i[t].push({onLoad:e,onProgress:n,onError:o});var v=new XMLHttpRequest;for(var y in v.open("GET",t,!0),v.addEventListener("load",(function(e){var n=this.response,o=i[t];if(delete i[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),r.a.add(t,n);for(var s=0,u=o.length;s<u;s++){(c=o[s]).onLoad&&c.onLoad(n)}a.manager.itemEnd(t)}else{for(s=0,u=o.length;s<u;s++){var c;(c=o[s]).onError&&c.onError(e)}a.manager.itemError(t),a.manager.itemEnd(t)}}),!1),v.addEventListener("progress",(function(e){for(var n=i[t],r=0,o=n.length;r<o;r++){var a=n[r];a.onProgress&&a.onProgress(e)}}),!1),v.addEventListener("error",(function(e){var n=i[t];delete i[t];for(var r=0,o=n.length;r<o;r++){var s=n[r];s.onError&&s.onError(e)}a.manager.itemError(t),a.manager.itemEnd(t)}),!1),v.addEventListener("abort",(function(e){var n=i[t];delete i[t];for(var r=0,o=n.length;r<o;r++){var s=n[r];s.onError&&s.onError(e)}a.manager.itemError(t),a.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)v.setRequestHeader(y,this.requestHeader[y]);v.send(null)}return a.manager.itemStart(t),v}i[t].push({onLoad:e,onProgress:n,onError:o})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}})},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(4),o=n(83);function i(t,e,n,i,a,s,u,c,f){o.a.call(this,t,e,n,i,a,s,u,c,f),this.format=void 0!==u?u:r.dc,this.minFilter=void 0!==s?s:r.R,this.magFilter=void 0!==a?a:r.R,this.generateMipmaps=!1}i.prototype=Object.assign(Object.create(o.a.prototype),{constructor:i,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}})},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}}},,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(10),o=n(2),i=n(29);function a(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(a.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],o=this.getPoint(0),i=0;for(r.push(0),n=1;n<=t;n++)i+=(e=this.getPoint(n/t)).distanceTo(o),r.push(i),o=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),o=0,i=r.length;n=e||t*r[i-1];for(var a,s=0,u=i-1;s<=u;)if((a=r[o=Math.floor(s+(u-s)/2)]-n)<0)s=o+1;else{if(!(a>0)){u=o;break}u=o-1}if(r[o=u]===n)return o/(i-1);var c=r[o];return(o+(n-c)/(r[o+1]-c))/(i-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var r=this.getPoint(e);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,a,s,u=new o.a,c=[],f=[],l=[],h=new o.a,p=new i.a;for(n=0;n<=t;n++)a=n/t,c[n]=this.getTangentAt(a),c[n].normalize();f[0]=new o.a,l[0]=new o.a;var d=Number.MAX_VALUE,m=Math.abs(c[0].x),g=Math.abs(c[0].y),v=Math.abs(c[0].z);for(m<=d&&(d=m,u.set(1,0,0)),g<=d&&(d=g,u.set(0,1,0)),v<=d&&u.set(0,0,1),h.crossVectors(c[0],u).normalize(),f[0].crossVectors(c[0],h),l[0].crossVectors(c[0],f[0]),n=1;n<=t;n++)f[n]=f[n-1].clone(),l[n]=l[n-1].clone(),h.crossVectors(c[n-1],c[n]),h.length()>Number.EPSILON&&(h.normalize(),s=Math.acos(r.a.clamp(c[n-1].dot(c[n]),-1,1)),f[n].applyMatrix4(p.makeRotationAxis(h,s))),l[n].crossVectors(c[n],f[n]);if(!0===e)for(s=Math.acos(r.a.clamp(f[0].dot(f[t]),-1,1)),s/=t,c[0].dot(h.crossVectors(f[0],f[t]))>0&&(s=-s),n=1;n<=t;n++)f[n].applyMatrix4(p.makeRotationAxis(c[n],s*n)),l[n].crossVectors(c[n],f[n]);return{tangents:c,normals:f,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}})},,,,,,,,,,,,function(t,e,n){var r=n(86),o=n(60);t.exports=function(t,e,n){(void 0===n||o(t[e],n))&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(349),o=n(335);function i(t){o.a.call(this,t)}i.prototype=Object.assign(Object.create(o.a.prototype),{constructor:i,load:function(t,e,n,o){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=r.a.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function u(){s.removeEventListener("load",u,!1),s.removeEventListener("error",c,!1),r.a.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(e){s.removeEventListener("load",u,!1),s.removeEventListener("error",c,!1),o&&o(e),i.manager.itemError(t),i.manager.itemEnd(t)}return s.addEventListener("load",u,!1),s.addEventListener("error",c,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}})},function(t,e,n){"use strict";function r(t,e,n){var r=this,o=!1,i=0,a=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===o&&void 0!==r.onStart&&r.onStart(t,i,a),o=!0},this.itemEnd=function(t){i++,void 0!==r.onProgress&&r.onProgress(t,i,a),i===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var r=u[e],o=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return o}return null}}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));var o=new r},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(330),o=n(24);function i(t){r.a.call(this),this.type="PointsMaterial",this.color=new o.a(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}i.prototype=Object.create(r.a.prototype),i.prototype.constructor=i,i.prototype.isPointsMaterial=!0,i.prototype.copy=function(t){return r.a.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this}},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(4),o=n(372),i=n(83),a=n(335);function s(t){a.a.call(this,t)}s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,load:function(t,e,n,a){var s=new i.a,u=new o.a(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(t,(function(n){s.image=n;var o=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);s.format=o?r.dc:r.Db,s.needsUpdate=!0,void 0!==e&&e(s)}),n,a),s}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(4),o=n(330),i=n(12),a=n(24);function s(t){o.a.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new a.a(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a.a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=r.Qc,this.normalScale=new i.a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}s.prototype=Object.create(o.a.prototype),s.prototype.constructor=s,s.prototype.isMeshStandardMaterial=!0,s.prototype.copy=function(t){return o.a.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),o=n(180),i=n(470),a=n(90);function s(t,e,n,r){a.a.call(this,t,e,n,r)}s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,interpolate_:function(t){return this.copySampleValue_(t-1)}});var u=n(472);function c(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=u.a.convertArray(e,this.TimeBufferType),this.values=u.a.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}Object.assign(c,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:u.a.convertArray(t.times,Array),values:u.a.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}),Object.assign(c.prototype,{constructor:c,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:r.L,InterpolantFactoryMethodDiscrete:function(t){return new s(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new i.a(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new o.a(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case r.K:e=this.InterpolantFactoryMethodDiscrete;break;case r.L:e=this.InterpolantFactoryMethodLinear;break;case r.M:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return r.K;case this.InterpolantFactoryMethodLinear:return r.L;case this.InterpolantFactoryMethodSmooth:return r.M}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,o=0,i=r-1;o!==r&&n[o]<t;)++o;for(;-1!==i&&n[i]>e;)--i;if(++i,0!==o||i!==r){o>=i&&(o=(i=Math.max(i,1))-1);var a=this.getValueSize();this.times=u.a.arraySlice(n,o,i),this.values=u.a.arraySlice(this.values,o*a,i*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var i=null,a=0;a!==o;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==i&&i>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,i),t=!1;break}i=s}if(void 0!==r&&u.a.isTypedArray(r)){a=0;for(var c=r.length;a!==c;++a){var f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),t=!1;break}}}return t},optimize:function(){for(var t=u.a.arraySlice(this.times),e=u.a.arraySlice(this.values),n=this.getValueSize(),o=this.getInterpolation()===r.M,i=1,a=t.length-1,s=1;s<a;++s){var c=!1,f=t[s];if(f!==t[s+1]&&(1!==s||f!==f[0]))if(o)c=!0;else for(var l=s*n,h=l-n,p=l+n,d=0;d!==n;++d){var m=e[l+d];if(m!==e[h+d]||m!==e[p+d]){c=!0;break}}if(c){if(s!==i){t[i]=t[s];var g=s*n,v=i*n;for(d=0;d!==n;++d)e[v+d]=e[g+d]}++i}}if(a>0){t[i]=t[a];for(g=a*n,v=i*n,d=0;d!==n;++d)e[v+d]=e[g+d];++i}return i!==t.length?(this.times=u.a.arraySlice(t,0,i),this.values=u.a.arraySlice(e,0,i*n)):(this.times=t,this.values=e),this},clone:function(){var t=u.a.arraySlice(this.times,0),e=u.a.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}})},,function(t,e,n){var r=n(46),o=n(403),i=n(84),a=n(404),s=i((function(t){var e=r(t,a);return e.length&&e[0]===t[0]?o(e):[]}));t.exports=s},,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(330),o=n(4),i=n(24);function a(t){r.a.call(this),this.type="MeshLambertMaterial",this.color=new i.a(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i.a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.jb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}a.prototype=Object.create(r.a.prototype),a.prototype.constructor=a,a.prototype.isMeshLambertMaterial=!0,a.prototype.copy=function(t){return r.a.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}},,function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return c}));var r=n(337),o=n(329),i=n(328),a=n(2),s=n(12);function u(t,e,n,o,i,a,s,u){r.a.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:o,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:u},this.fromBufferGeometry(new c(t,e,n,o,i,a,s,u)),this.mergeVertices()}function c(t,e,n,r,u,c,f,l){o.a.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:u,openEnded:c,thetaStart:f,thetaLength:l};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,u=Math.floor(u)||1,c=void 0!==c&&c,f=void 0!==f?f:0,l=void 0!==l?l:2*Math.PI;var p=[],d=[],m=[],g=[],v=0,y=[],b=n/2,x=0;function w(n){var o,i,u,c=new s.a,y=new a.a,w=0,S=!0===n?t:e,M=!0===n?1:-1;for(i=v,o=1;o<=r;o++)d.push(0,b*M,0),m.push(0,M,0),g.push(.5,.5),v++;for(u=v,o=0;o<=r;o++){var A=o/r*l+f,T=Math.cos(A),O=Math.sin(A);y.x=S*O,y.y=b*M,y.z=S*T,d.push(y.x,y.y,y.z),m.push(0,M,0),c.x=.5*T+.5,c.y=.5*O*M+.5,g.push(c.x,c.y),v++}for(o=0;o<r;o++){var k=i+o,E=u+o;!0===n?p.push(E,E+1,k):p.push(E+1,E,k),w+=3}h.addGroup(x,w,!0===n?1:2),x+=w}!function(){var o,i,s=new a.a,c=new a.a,w=0,S=(e-t)/n;for(i=0;i<=u;i++){var M=[],A=i/u,T=A*(e-t)+t;for(o=0;o<=r;o++){var O=o/r,k=O*l+f,E=Math.sin(k),R=Math.cos(k);c.x=T*E,c.y=-A*n+b,c.z=T*R,d.push(c.x,c.y,c.z),s.set(E,S,R).normalize(),m.push(s.x,s.y,s.z),g.push(O,1-A),M.push(v++)}y.push(M)}for(o=0;o<r;o++)for(i=0;i<u;i++){var C=y[i][o],U=y[i+1][o],_=y[i+1][o+1],I=y[i][o+1];p.push(C,U,I),p.push(U,_,I),w+=6}h.addGroup(x,w,0),x+=w}(),!1===c&&(t>0&&w(!0),e>0&&w(!1)),this.setIndex(p),this.setAttribute("position",new i.b(d,3)),this.setAttribute("normal",new i.b(m,3)),this.setAttribute("uv",new i.b(g,2))}u.prototype=Object.create(r.a.prototype),u.prototype.constructor=u,c.prototype=Object.create(o.a.prototype),c.prototype.constructor=c},,,function(t,e,n){var r=n(398),o=n(402)((function(t,e,n){r(t,e,n)}));t.exports=o},function(t,e,n){var r=n(85),o=n(369),i=n(187),a=n(399),s=n(17),u=n(123),c=n(370);t.exports=function t(e,n,f,l,h){e!==n&&i(n,(function(i,u){if(h||(h=new r),s(i))a(e,n,u,f,t,l,h);else{var p=l?l(c(e,u),i,u+"",e,n,h):void 0;void 0===p&&(p=i),o(e,u,p)}}),u)}},function(t,e,n){var r=n(369),o=n(184),i=n(185),a=n(131),s=n(186),u=n(63),c=n(3),f=n(124),l=n(48),h=n(61),p=n(17),d=n(400),m=n(64),g=n(370),v=n(401);t.exports=function(t,e,n,y,b,x,w){var S=g(t,n),M=g(e,n),A=w.get(M);if(A)r(t,n,A);else{var T=x?x(S,M,n+"",t,e,w):void 0,O=void 0===T;if(O){var k=c(M),E=!k&&l(M),R=!k&&!E&&m(M);T=M,k||E||R?c(S)?T=S:f(S)?T=a(S):E?(O=!1,T=o(M,!0)):R?(O=!1,T=i(M,!0)):T=[]:d(M)||u(M)?(T=S,u(S)?T=v(S):p(S)&&!h(S)||(T=s(M))):O=!1}O&&(w.set(M,T),b(T,M,y,x,w),w.delete(M)),r(t,n,T)}}},function(t,e,n){var r=n(26),o=n(87),i=n(18),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,f=u.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}},function(t,e,n){var r=n(62),o=n(123);t.exports=function(t){return r(t,o(t))}},function(t,e,n){var r=n(84),o=n(128);t.exports=function(t){return r((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e}))}},function(t,e,n){var r=n(88),o=n(132),i=n(133),a=n(46),s=n(49),u=n(89),c=Math.min;t.exports=function(t,e,n){for(var f=n?i:o,l=t[0].length,h=t.length,p=h,d=Array(h),m=1/0,g=[];p--;){var v=t[p];p&&e&&(v=a(v,s(e))),m=c(v.length,m),d[p]=!n&&(e||l>=120&&v.length>=120)?new r(p&&v):void 0}v=t[0];var y=-1,b=d[0];t:for(;++y<l&&g.length<m;){var x=v[y],w=e?e(x):x;if(x=n||0!==x?x:0,!(b?u(b,w):f(g,w,n))){for(p=h;--p;){var S=d[p];if(!(S?u(S,w):f(t[p],w,n)))continue t}b&&b.push(w),g.push(x)}}return g}},function(t,e,n){var r=n(124);t.exports=function(t){return r(t)?t:[]}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(358),o=n(383),i=n(29),a=n(25),s=n(2),u=n(374),c=n(329),f=new i.a,l=new o.a,h=new r.a,p=new s.a;function d(t,e){a.a.call(this),this.type="Points",this.geometry=void 0!==t?t:new c.a,this.material=void 0!==e?e:new u.a,this.updateMorphTargets()}function m(t,e,n,r,o,i,a){var u=l.distanceSqToPoint(t);if(u<n){var c=new s.a;l.closestPointToPoint(t,c),c.applyMatrix4(r);var f=o.ray.origin.distanceTo(c);if(f<o.near||f>o.far)return;i.push({distance:f,distanceToRay:Math.sqrt(u),point:c,index:e,face:null,object:a})}}d.prototype=Object.assign(Object.create(a.a.prototype),{constructor:d,isPoints:!0,raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),h.copy(n.boundingSphere),h.applyMatrix4(r),h.radius+=o,!1!==t.ray.intersectsSphere(h)){f.getInverse(r),l.copy(t.ray).applyMatrix4(f);var i=o/((this.scale.x+this.scale.y+this.scale.z)/3),a=i*i;if(n.isBufferGeometry){var s=n.index,u=n.attributes.position.array;if(null!==s)for(var c=s.array,d=0,g=c.length;d<g;d++){var v=c[d];p.fromArray(u,3*v),m(p,v,a,r,t,e,this)}else{d=0;for(var y=u.length/3;d<y;d++)p.fromArray(u,3*d),m(p,d,a,r,t,e,this)}}else{var b=n.vertices;for(d=0,y=b.length;d<y;d++)m(b[d],d,a,r,t,e,this)}}},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var o=r.morphAttributes,i=Object.keys(o);if(i.length>0){var a=o[i[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=new(n(2).a);function o(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}Object.defineProperties(o.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(o.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)r.x=this.getX(e),r.y=this.getY(e),r.z=this.getZ(e),r.applyMatrix4(t),this.setXYZ(e,r.x,r.y,r.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,o){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=o,this}})},function(t,e,n){"use strict";function r(t,e,n,r,o){var i=.5*(r-e),a=.5*(o-n),s=t*t;return(2*n-2*r+i+a)*(t*s)+(-3*n+3*r-2*i-a)*s+i*t+n}function o(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function i(t,e,n,r,o){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,o)}n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return i}))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(336);function o(t){r.a.call(this,t),this.type="RawShaderMaterial"}o.prototype=Object.create(r.a.prototype),o.prototype.constructor=o,o.prototype.isRawShaderMaterial=!0},,,,,,function(t,e,n){var r=n(189),o=n(190),i=n(136),a=Math.min;t.exports=function(t,e){if((t=i(t))<1||t>9007199254740991)return[];var n=4294967295,s=a(t,4294967295);e=o(e),t-=4294967295;for(var u=r(s,e);++n<t;)e(n);return u}},function(t,e,n){var r=n(475),o=n(509),i=n(50);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(357),o=n(12);function i(t,e,n,o,i,a,s,u){r.a.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=o||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=u||0}i.prototype=Object.create(r.a.prototype),i.prototype.constructor=i,i.prototype.isEllipseCurve=!0,i.prototype.getPoint=function(t,e){for(var n=e||new o.a,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var s=this.aStartAngle+t*i,u=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var f=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=u-this.aX,p=c-this.aY;u=h*f-p*l+this.aX,c=h*l+p*f+this.aY}return n.set(u,c)},i.prototype.copy=function(t){return r.a.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},i.prototype.toJSON=function(){var t=r.a.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},i.prototype.fromJSON=function(t){return r.a.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n(337),o=n(381);function i(t,e){r.a.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new a(t,e)),this.mergeVertices()}function a(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];o.a.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}i.prototype=Object.create(r.a.prototype),i.prototype.constructor=i,a.prototype=Object.create(o.a.prototype),a.prototype.constructor=a},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n(337),o=n(329),i=n(328),a=n(2);function s(t,e,n,o,i,a,s){r.a.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:o,p:i,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new u(t,e,n,o,i,a)),this.mergeVertices()}function u(t,e,n,r,s,u){o.a.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:s,q:u},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,s=s||2,u=u||3;var c,f,l=[],h=[],p=[],d=[],m=new a.a,g=new a.a,v=new a.a,y=new a.a,b=new a.a,x=new a.a,w=new a.a;for(c=0;c<=n;++c){var S=c/n*s*Math.PI*2;for(C(S,s,u,t,v),C(S+.01,s,u,t,y),x.subVectors(y,v),w.addVectors(y,v),b.crossVectors(x,w),w.crossVectors(b,x),b.normalize(),w.normalize(),f=0;f<=r;++f){var M=f/r*Math.PI*2,A=-e*Math.cos(M),T=e*Math.sin(M);m.x=v.x+(A*w.x+T*b.x),m.y=v.y+(A*w.y+T*b.y),m.z=v.z+(A*w.z+T*b.z),h.push(m.x,m.y,m.z),g.subVectors(m,v).normalize(),p.push(g.x,g.y,g.z),d.push(c/n),d.push(f/r)}}for(f=1;f<=n;f++)for(c=1;c<=r;c++){var O=(r+1)*(f-1)+(c-1),k=(r+1)*f+(c-1),E=(r+1)*f+c,R=(r+1)*(f-1)+c;l.push(O,k,R),l.push(k,E,R)}function C(t,e,n,r,o){var i=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);o.x=r*(2+u)*.5*i,o.y=r*(2+u)*a*.5,o.z=r*Math.sin(s)*.5}this.setIndex(l),this.setAttribute("position",new i.b(h,3)),this.setAttribute("normal",new i.b(p,3)),this.setAttribute("uv",new i.b(d,2))}s.prototype=Object.create(r.a.prototype),s.prototype.constructor=s,u.prototype=Object.create(o.a.prototype),u.prototype.constructor=u},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n(337),o=n(329),i=n(328),a=n(2);function s(t,e,n,o,i){r.a.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:o,arc:i},this.fromBufferGeometry(new u(t,e,n,o,i)),this.mergeVertices()}function u(t,e,n,r,s){o.a.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:s},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,s=s||2*Math.PI;var u,c,f=[],l=[],h=[],p=[],d=new a.a,m=new a.a,g=new a.a;for(u=0;u<=n;u++)for(c=0;c<=r;c++){var v=c/r*s,y=u/n*Math.PI*2;m.x=(t+e*Math.cos(y))*Math.cos(v),m.y=(t+e*Math.cos(y))*Math.sin(v),m.z=e*Math.sin(y),l.push(m.x,m.y,m.z),d.x=t*Math.cos(v),d.y=t*Math.sin(v),g.subVectors(m,d).normalize(),h.push(g.x,g.y,g.z),p.push(c/r),p.push(u/n)}for(u=1;u<=n;u++)for(c=1;c<=r;c++){var b=(r+1)*u+c-1,x=(r+1)*(u-1)+c-1,w=(r+1)*(u-1)+c,S=(r+1)*u+c;f.push(b,x,S),f.push(x,w,S)}this.setIndex(f),this.setAttribute("position",new i.b(l,3)),this.setAttribute("normal",new i.b(h,3)),this.setAttribute("uv",new i.b(p,2))}s.prototype=Object.create(r.a.prototype),s.prototype.constructor=s,u.prototype=Object.create(o.a.prototype),u.prototype.constructor=u},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n(337),o=n(424);function i(t,e){r.a.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new a(t,e)),this.mergeVertices()}function a(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new r.a;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),o.a.call(this,i,e),this.type="TextBufferGeometry"}i.prototype=Object.create(r.a.prototype),i.prototype.constructor=i,a.prototype=Object.create(o.a.prototype),a.prototype.constructor=a},function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return f}));var r=n(337),o=n(329),i=n(328),a=n(12),s=n(2),u=n(458);function c(t,e){r.a.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new f(t,e)),this.mergeVertices()}function f(t,e){o.a.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,r=[],c=[],f=0,h=t.length;f<h;f++){p(t[f])}function p(t){var o=[],i=void 0!==e.curveSegments?e.curveSegments:12,f=void 0!==e.steps?e.steps:1,h=void 0!==e.depth?e.depth:100,p=void 0===e.bevelEnabled||e.bevelEnabled,d=void 0!==e.bevelThickness?e.bevelThickness:6,m=void 0!==e.bevelSize?e.bevelSize:d-2,g=void 0!==e.bevelOffset?e.bevelOffset:0,v=void 0!==e.bevelSegments?e.bevelSegments:3,y=e.extrudePath,b=void 0!==e.UVGenerator?e.UVGenerator:l;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=e.amount);var x,w,S,M,A,T,O,k,E=!1;y&&(x=y.getSpacedPoints(f),E=!0,p=!1,w=y.computeFrenetFrames(f,!1),S=new s.a,M=new s.a,A=new s.a),p||(v=0,d=0,m=0,g=0);var R=t.extractPoints(i),C=R.shape,U=R.holes;if(!u.a.isClockWise(C))for(C=C.reverse(),O=0,k=U.length;O<k;O++)T=U[O],u.a.isClockWise(T)&&(U[O]=T.reverse());var _=u.a.triangulateShape(C,U),I=C;for(O=0,k=U.length;O<k;O++)T=U[O],C=C.concat(T);function L(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var D,P,B,N,F,j,G=C.length,z=_.length;function H(t,e,n){var r,o,i,s=t.x-e.x,u=t.y-e.y,c=n.x-t.x,f=n.y-t.y,l=s*s+u*u,h=s*f-u*c;if(Math.abs(h)>Number.EPSILON){var p=Math.sqrt(l),d=Math.sqrt(c*c+f*f),m=e.x-u/p,g=e.y+s/p,v=((n.x-f/d-m)*f-(n.y+c/d-g)*c)/(s*f-u*c),y=(r=m+s*v-t.x)*r+(o=g+u*v-t.y)*o;if(y<=2)return new a.a(r,o);i=Math.sqrt(y/2)}else{var b=!1;s>Number.EPSILON?c>Number.EPSILON&&(b=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(b=!0):Math.sign(u)===Math.sign(f)&&(b=!0),b?(r=-u,o=s,i=Math.sqrt(l)):(r=s,o=u,i=Math.sqrt(l/2))}return new a.a(r/i,o/i)}for(var q=[],W=0,V=I.length,Y=V-1,X=W+1;W<V;W++,Y++,X++)Y===V&&(Y=0),X===V&&(X=0),q[W]=H(I[W],I[Y],I[X]);var J,Z,Q=[],K=q.concat();for(O=0,k=U.length;O<k;O++){for(T=U[O],J=[],W=0,Y=(V=T.length)-1,X=W+1;W<V;W++,Y++,X++)Y===V&&(Y=0),X===V&&(X=0),J[W]=H(T[W],T[Y],T[X]);Q.push(J),K=K.concat(J)}for(D=0;D<v;D++){for(B=D/v,N=d*Math.cos(B*Math.PI/2),P=m*Math.sin(B*Math.PI/2)+g,W=0,V=I.length;W<V;W++)tt((F=L(I[W],q[W],P)).x,F.y,-N);for(O=0,k=U.length;O<k;O++)for(T=U[O],J=Q[O],W=0,V=T.length;W<V;W++)tt((F=L(T[W],J[W],P)).x,F.y,-N)}for(P=m+g,W=0;W<G;W++)F=p?L(C[W],K[W],P):C[W],E?(M.copy(w.normals[0]).multiplyScalar(F.x),S.copy(w.binormals[0]).multiplyScalar(F.y),A.copy(x[0]).add(M).add(S),tt(A.x,A.y,A.z)):tt(F.x,F.y,0);for(Z=1;Z<=f;Z++)for(W=0;W<G;W++)F=p?L(C[W],K[W],P):C[W],E?(M.copy(w.normals[Z]).multiplyScalar(F.x),S.copy(w.binormals[Z]).multiplyScalar(F.y),A.copy(x[Z]).add(M).add(S),tt(A.x,A.y,A.z)):tt(F.x,F.y,h/f*Z);for(D=v-1;D>=0;D--){for(B=D/v,N=d*Math.cos(B*Math.PI/2),P=m*Math.sin(B*Math.PI/2)+g,W=0,V=I.length;W<V;W++)tt((F=L(I[W],q[W],P)).x,F.y,h+N);for(O=0,k=U.length;O<k;O++)for(T=U[O],J=Q[O],W=0,V=T.length;W<V;W++)F=L(T[W],J[W],P),E?tt(F.x,F.y+x[f-1].y,x[f-1].x+N):tt(F.x,F.y,h+N)}function $(t,e){var n,r;for(W=t.length;--W>=0;){n=W,(r=W-1)<0&&(r=t.length-1);var o=0,i=f+2*v;for(o=0;o<i;o++){var a=G*o,s=G*(o+1);nt(e+n+a,e+r+a,e+r+s,e+n+s)}}}function tt(t,e,n){o.push(t),o.push(e),o.push(n)}function et(t,e,o){rt(t),rt(e),rt(o);var i=r.length/3,a=b.generateTopUV(n,r,i-3,i-2,i-1);ot(a[0]),ot(a[1]),ot(a[2])}function nt(t,e,o,i){rt(t),rt(e),rt(i),rt(e),rt(o),rt(i);var a=r.length/3,s=b.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);ot(s[0]),ot(s[1]),ot(s[3]),ot(s[1]),ot(s[2]),ot(s[3])}function rt(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function ot(t){c.push(t.x),c.push(t.y)}!function(){var t=r.length/3;if(p){var e=0,o=G*e;for(W=0;W<z;W++)et((j=_[W])[2]+o,j[1]+o,j[0]+o);for(o=G*(e=f+2*v),W=0;W<z;W++)et((j=_[W])[0]+o,j[1]+o,j[2]+o)}else{for(W=0;W<z;W++)et((j=_[W])[2],j[1],j[0]);for(W=0;W<z;W++)et((j=_[W])[0]+G*f,j[1]+G*f,j[2]+G*f)}n.addGroup(t,r.length/3-t,0)}(),function(){var t=r.length/3,e=0;for($(I,e),e+=I.length,O=0,k=U.length;O<k;O++)$(T=U[O],e),e+=T.length;n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new i.b(r,3)),this.setAttribute("uv",new i.b(c,2)),this.computeVertexNormals()}c.prototype=Object.create(r.a.prototype),c.prototype.constructor=c,c.prototype.toJSON=function(){var t=r.a.prototype.toJSON.call(this);return h(this.parameters.shapes,this.parameters.options,t)},f.prototype=Object.create(o.a.prototype),f.prototype.constructor=f,f.prototype.toJSON=function(){var t=o.a.prototype.toJSON.call(this);return h(this.parameters.shapes,this.parameters.options,t)};var l={generateTopUV:function(t,e,n,r,o){var i=e[3*n],s=e[3*n+1],u=e[3*r],c=e[3*r+1],f=e[3*o],l=e[3*o+1];return[new a.a(i,s),new a.a(u,c),new a.a(f,l)]},generateSideWallUV:function(t,e,n,r,o,i){var s=e[3*n],u=e[3*n+1],c=e[3*n+2],f=e[3*r],l=e[3*r+1],h=e[3*r+2],p=e[3*o],d=e[3*o+1],m=e[3*o+2],g=e[3*i],v=e[3*i+1],y=e[3*i+2];return Math.abs(u-l)<.01?[new a.a(s,1-c),new a.a(f,1-h),new a.a(p,1-m),new a.a(g,1-y)]:[new a.a(u,1-c),new a.a(l,1-h),new a.a(d,1-m),new a.a(v,1-y)]}};function h(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,o=t.length;r<o;r++){var i=t[r];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n(337),o=n(329),i=n(328),a=n(458);function s(t,e){r.a.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new u(t,e)),this.mergeVertices()}function u(t,e){o.a.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],s=[],u=[],c=0,f=0;if(!1===Array.isArray(t))h(t);else for(var l=0;l<t.length;l++)h(t[l]),this.addGroup(c,f,l),c+=f,f=0;function h(t){var o,i,c,l=r.length/3,h=t.extractPoints(e),p=h.shape,d=h.holes;for(!1===a.a.isClockWise(p)&&(p=p.reverse()),o=0,i=d.length;o<i;o++)c=d[o],!0===a.a.isClockWise(c)&&(d[o]=c.reverse());var m=a.a.triangulateShape(p,d);for(o=0,i=d.length;o<i;o++)c=d[o],p=p.concat(c);for(o=0,i=p.length;o<i;o++){var g=p[o];r.push(g.x,g.y,0),s.push(0,0,1),u.push(g.x,g.y)}for(o=0,i=m.length;o<i;o++){var v=m[o],y=v[0]+l,b=v[1]+l,x=v[2]+l;n.push(y,b,x),f+=3}}this.setIndex(n),this.setAttribute("position",new i.b(r,3)),this.setAttribute("normal",new i.b(s,3)),this.setAttribute("uv",new i.b(u,2))}function c(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var o=t[n];e.shapes.push(o.uuid)}else e.shapes.push(t.uuid);return e}s.prototype=Object.create(r.a.prototype),s.prototype.constructor=s,s.prototype.toJSON=function(){var t=r.a.prototype.toJSON.call(this);return c(this.parameters.shapes,t)},u.prototype=Object.create(o.a.prototype),u.prototype.constructor=u,u.prototype.toJSON=function(){var t=o.a.prototype.toJSON.call(this);return c(this.parameters.shapes,t)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var r=n(394);function o(t,e,n,o,i,a,s){r.b.call(this,0,t,e,n,o,i,a,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:o,openEnded:i,thetaStart:a,thetaLength:s}}function i(t,e,n,o,i,a,s){r.a.call(this,0,t,e,n,o,i,a,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:o,openEnded:i,thetaStart:a,thetaLength:s}}o.prototype=Object.create(r.b.prototype),o.prototype.constructor=o,i.prototype=Object.create(r.a.prototype),i.prototype.constructor=i},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return c}));var r=n(337),o=n(329),i=n(328),a=n(2),s=n(12);function u(t,e,n,o){r.a.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:o},this.fromBufferGeometry(new c(t,e,n,o)),this.mergeVertices()}function c(t,e,n,r){o.a.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var u,c,f=[],l=[],h=[],p=[],d=new a.a,m=new s.a;for(l.push(0,0,0),h.push(0,0,1),p.push(.5,.5),c=0,u=3;c<=e;c++,u+=3){var g=n+c/e*r;d.x=t*Math.cos(g),d.y=t*Math.sin(g),l.push(d.x,d.y,d.z),h.push(0,0,1),m.x=(l[u]/t+1)/2,m.y=(l[u+1]/t+1)/2,p.push(m.x,m.y)}for(u=1;u<=e;u++)f.push(u,u+1,0);this.setIndex(f),this.setAttribute("position",new i.b(l,3)),this.setAttribute("normal",new i.b(h,3)),this.setAttribute("uv",new i.b(p,2))}u.prototype=Object.create(r.a.prototype),u.prototype.constructor=u,c.prototype=Object.create(o.a.prototype),c.prototype.constructor=c},function(t,e){var n=Object.prototype,r=n.hasOwnProperty,o=n.toString,i=n.propertyIsEnumerable;t.exports=function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?o.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}(t)}(t)&&r.call(t,"callee")&&(!i.call(t,"callee")||"[object Arguments]"==o.call(t))}},,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(4);function o(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=r.Mc,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(o.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(o.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,o=this.stride;r<o;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}})},function(t,e,n){var r=n(475),o=n(510),i=n(50);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(2),o=n(357);function i(){var t=0,e=0,n=0,r=0;function o(o,i,a,s){t=o,e=a,n=-3*o+3*i-2*a-s,r=2*o-2*i+a+s}return{initCatmullRom:function(t,e,n,r,i){o(e,n,i*(n-t),i*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,i,a,s){var u=(e-t)/i-(n-t)/(i+a)+(n-e)/a,c=(n-e)/a-(r-e)/(a+s)+(r-n)/s;o(e,n,u*=a,c*=a)},calc:function(o){var i=o*o;return t+e*o+n*i+r*(i*o)}}}var a=new r.a,s=new i,u=new i,c=new i;function f(t,e,n,r){o.a.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}f.prototype=Object.create(o.a.prototype),f.prototype.constructor=f,f.prototype.isCatmullRomCurve3=!0,f.prototype.getPoint=function(t,e){var n,o,i,f,l=e||new r.a,h=this.points,p=h.length,d=(p-(this.closed?0:1))*t,m=Math.floor(d),g=d-m;if(this.closed?m+=m>0?0:(Math.floor(Math.abs(m)/p)+1)*p:0===g&&m===p-1&&(m=p-2,g=1),this.closed||m>0?n=h[(m-1)%p]:(a.subVectors(h[0],h[1]).add(h[0]),n=a),o=h[m%p],i=h[(m+1)%p],this.closed||m+2<p?f=h[(m+2)%p]:(a.subVectors(h[p-1],h[p-2]).add(h[p-1]),f=a),"centripetal"===this.curveType||"chordal"===this.curveType){var v="chordal"===this.curveType?.5:.25,y=Math.pow(n.distanceToSquared(o),v),b=Math.pow(o.distanceToSquared(i),v),x=Math.pow(i.distanceToSquared(f),v);b<1e-4&&(b=1),y<1e-4&&(y=b),x<1e-4&&(x=b),s.initNonuniformCatmullRom(n.x,o.x,i.x,f.x,y,b,x),u.initNonuniformCatmullRom(n.y,o.y,i.y,f.y,y,b,x),c.initNonuniformCatmullRom(n.z,o.z,i.z,f.z,y,b,x)}else"catmullrom"===this.curveType&&(s.initCatmullRom(n.x,o.x,i.x,f.x,this.tension),u.initCatmullRom(n.y,o.y,i.y,f.y,this.tension),c.initCatmullRom(n.z,o.z,i.z,f.z,this.tension));return l.set(s.calc(g),u.calc(g),c.calc(g)),l},f.prototype.copy=function(t){o.a.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},f.prototype.toJSON=function(){var t=o.a.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},f.prototype.fromJSON=function(t){o.a.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new r.a).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(357),o=n(409),i=n(12);function a(t,e,n,o){r.a.call(this),this.type="CubicBezierCurve",this.v0=t||new i.a,this.v1=e||new i.a,this.v2=n||new i.a,this.v3=o||new i.a}a.prototype=Object.create(r.a.prototype),a.prototype.constructor=a,a.prototype.isCubicBezierCurve=!0,a.prototype.getPoint=function(t,e){var n=e||new i.a,r=this.v0,a=this.v1,s=this.v2,u=this.v3;return n.set(Object(o.b)(t,r.x,a.x,s.x,u.x),Object(o.b)(t,r.y,a.y,s.y,u.y)),n},a.prototype.copy=function(t){return r.a.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},a.prototype.toJSON=function(){var t=r.a.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},a.prototype.fromJSON=function(t){return r.a.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(12),o=n(357);function i(t,e){o.a.call(this),this.type="LineCurve",this.v1=t||new r.a,this.v2=e||new r.a}i.prototype=Object.create(o.a.prototype),i.prototype.constructor=i,i.prototype.isLineCurve=!0,i.prototype.getPoint=function(t,e){var n=e||new r.a;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},i.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},i.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},i.prototype.copy=function(t){return o.a.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},i.prototype.toJSON=function(){var t=o.a.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},i.prototype.fromJSON=function(t){return o.a.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(357),o=n(409),i=n(12);function a(t,e,n){r.a.call(this),this.type="QuadraticBezierCurve",this.v0=t||new i.a,this.v1=e||new i.a,this.v2=n||new i.a}a.prototype=Object.create(r.a.prototype),a.prototype.constructor=a,a.prototype.isQuadraticBezierCurve=!0,a.prototype.getPoint=function(t,e){var n=e||new i.a,r=this.v0,a=this.v1,s=this.v2;return n.set(Object(o.c)(t,r.x,a.x,s.x),Object(o.c)(t,r.y,a.y,s.y)),n},a.prototype.copy=function(t){return r.a.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},a.prototype.toJSON=function(){var t=r.a.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},a.prototype.fromJSON=function(t){return r.a.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(357),o=n(409),i=n(12);function a(t){r.a.call(this),this.type="SplineCurve",this.points=t||[]}a.prototype=Object.create(r.a.prototype),a.prototype.constructor=a,a.prototype.isSplineCurve=!0,a.prototype.getPoint=function(t,e){var n=e||new i.a,r=this.points,a=(r.length-1)*t,s=Math.floor(a),u=a-s,c=r[0===s?s:s-1],f=r[s],l=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return n.set(Object(o.a)(u,c.x,f.x,l.x,h.x),Object(o.a)(u,c.y,f.y,l.y,h.y)),n},a.prototype.copy=function(t){r.a.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var o=t.points[e];this.points.push(o.clone())}return this},a.prototype.toJSON=function(){var t=r.a.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var o=this.points[e];t.points.push(o.toArray())}return t},a.prototype.fromJSON=function(t){r.a.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var o=t.points[e];this.points.push((new i.a).fromArray(o))}return this}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(12),o=n(380),i=n(24);function a(t){o.a.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new r.a(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(t)}a.prototype=Object.create(o.a.prototype),a.prototype.constructor=a,a.prototype.isMeshPhysicalMaterial=!0,a.prototype.copy=function(t){return o.a.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new i.a).copy(t.sheen):this.sheen=null,this.transparency=t.transparency,this}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(4),o=n(330),i=n(12),a=n(24);function s(t){o.a.call(this),this.type="MeshPhongMaterial",this.color=new a.a(16777215),this.specular=new a.a(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a.a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=r.Qc,this.normalScale=new i.a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=r.jb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}s.prototype=Object.create(o.a.prototype),s.prototype.constructor=s,s.prototype.isMeshPhongMaterial=!0,s.prototype.copy=function(t){return o.a.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(328);function o(t,e,n,o){"number"==typeof n&&(o=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),r.a.call(this,t,e,n),this.meshPerAttribute=o||1}o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,isInstancedBufferAttribute:!0,copy:function(t){return r.a.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=r.a.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}})},function(t,e){var n=/^\[object .+?Constructor\]$/;function r(t){return!!t&&"object"==typeof t}var o,i,a,s=Object.prototype,u=Function.prototype.toString,c=s.hasOwnProperty,f=s.toString,l=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=(i="isArray",function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&"[object Function]"==f.call(t)}(t)?l.test(u.call(t)):r(t)&&n.test(t))}(a=null==(o=Array)?void 0:o[i])?a:void 0);var p=h||function(t){return r(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&"[object Array]"==f.call(t)};t.exports=p},function(t,e,n){"use strict";var r=n(485),o=n(559);t.exports={convert:function(t,e,n){if(e=void 0===e?r.TYPED_ARRAY:e,-1===[r.FLAT_ARRAY,r.ARRAY_OF_ARRAYS,r.TYPED_ARRAY,r.ARRAY_OF_TYPED_ARRAYS,r.NDARRAY].indexOf(e))throw new Error("geo-convert-position-format: Unknown target format "+e);var i,a=r.identify(t);if(a===r.FLAT_ARRAY)i=new Float32Array(t);else if(a===r.TYPED_ARRAY)i=new Float32Array(t);else if(a===r.ARRAY_OF_ARRAYS){i=[];for(var s=0;s<t.length;s++)i.push.apply(i,t[s]);i=new Float32Array(i)}else if(a===r.ARRAY_OF_TYPED_ARRAYS){i=[];for(s=0;s<t.length;s++)i.push.apply(i,t[s]);i=new Float32Array(i)}else{if(a!==r.NDARRAY)throw new Error("geo-convert-position-format: Could not convert from incoming format "+a);i=new Float32Array(t.data)}void 0===n&&(n=i.length%3==0?3:i.length%2==0?2:1);if(-1===[1,2,3].indexOf(n))throw new Error("geo-convert-position-format: Stride "+n+" not a valid stride - must be 1, 2, or 3");if(i.length%n!=0)throw new Error("geo-convert-position-format: Stride "+n+" incompatible with element count "+i.length);if(e===r.TYPED_ARRAY)return i;if(e===r.FLAT_ARRAY)return Array.prototype.slice.call(i);if(e===r.ARRAY_OF_ARRAYS){for(var u=[],c=(s=0,0),f=i.length/n;c<f;c++){for(var l=[],h=0;h<n;h++)l.push(i[s++]);u.push(l)}return u}if(e===r.ARRAY_OF_TYPED_ARRAYS){for(u=[],s=0,c=0,f=i.length/n;c<f;c++){for(l=[],h=0;h<n;h++)l.push(i[s++]);u.push(new Float32Array(l))}return u}if(e===r.NDARRAY)return o(i);throw new Error("geo-convert-position-format: Could not convert to target format "+e)},FLAT_ARRAY:r.FLAT_ARRAY,ARRAY_OF_ARRAYS:r.ARRAY_OF_ARRAYS,TYPED_ARRAY:r.TYPED_ARRAY,ARRAY_OF_TYPED_ARRAYS:r.ARRAY_OF_TYPED_ARRAYS,NDARRAY:r.NDARRAY}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(472),o=n(382),i=n(4);function a(t,e,n){o.a.call(this,t,e,n)}function s(t,e,n,r){o.a.call(this,t,e,n,r)}a.prototype=Object.assign(Object.create(o.a.prototype),{constructor:a,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:i.K,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),s.prototype=Object.assign(Object.create(o.a.prototype),{constructor:s,ValueTypeName:"color"});var u=n(473),c=n(505);function f(t,e,n,r){o.a.call(this,t,e,n,r)}f.prototype=Object.assign(Object.create(o.a.prototype),{constructor:f,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:i.K,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});var l=n(474),h=n(10);function p(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=h.a.generateUUID(),this.duration<0&&this.resetDuration()}function d(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return u.a;case"vector":case"vector2":case"vector3":case"vector4":return l.a;case"color":return s;case"quaternion":return c.a;case"bool":case"boolean":return a;case"string":return f}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],o=[];r.a.flattenJSON(t.keys,n,o,"value"),t.times=n,t.values=o}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(p,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),o=0,i=n.length;o!==i;++o)e.push(d(n[o]).scale(r));return new p(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},i=0,a=n.length;i!==a;++i)e.push(o.a.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,o){for(var i=e.length,a=[],s=0;s<i;s++){var c=[],f=[];c.push((s+i-1)%i,s,(s+1)%i),f.push(0,1,0);var l=r.a.getKeyframeOrder(c);c=r.a.sortedArray(c,1,l),f=r.a.sortedArray(f,1,l),o||0!==c[0]||(c.push(i),f.push(f[0])),a.push(new u.a(".morphTargetInfluences["+e[s].name+"]",c,f).scale(1/n))}return new p(t,-1,a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var o=0;o<n.length;o++)if(n[o].name===e)return n[o];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},o=/^([\w-]*?)([\d]+)$/,i=0,a=t.length;i<a;i++){var s=t[i],u=s.name.match(o);if(u&&u.length>1){var c=r[l=u[1]];c||(r[l]=c=[]),c.push(s)}}var f=[];for(var l in r)f.push(p.CreateFromMorphTargetSequence(l,r[l],e,n));return f},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,o,i){if(0!==n.length){var a=[],s=[];r.a.flattenJSON(n,a,s,o),0!==a.length&&i.push(new t(e,a,s))}},o=[],i=t.name||"default",a=t.length||-1,s=t.fps||30,f=t.hierarchy||[],h=0;h<f.length;h++){var d=f[h].keys;if(d&&0!==d.length)if(d[0].morphTargets){for(var m={},g=0;g<d.length;g++)if(d[g].morphTargets)for(var v=0;v<d[g].morphTargets.length;v++)m[d[g].morphTargets[v]]=-1;for(var y in m){var b=[],x=[];for(v=0;v!==d[g].morphTargets.length;++v){var w=d[g];b.push(w.time),x.push(w.morphTarget===y?1:0)}o.push(new u.a(".morphTargetInfluence["+y+"]",b,x))}a=m.length*(s||1)}else{var S=".bones["+e[h].name+"]";n(l.a,S+".position",d,"pos",o),n(c.a,S+".quaternion",d,"rot",o),n(l.a,S+".scale",d,"scl",o)}}return 0===o.length?null:new p(i,a,o)}}),Object.assign(p.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new p(this.name,this.duration,t)}})},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(12),o=n(357),i=n(504);function a(){o.a.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}a.prototype=Object.assign(Object.create(o.a.prototype),{constructor:a,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new i.LineCurve(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var o=n[r]-e,i=this.curves[r],a=i.getLength(),s=0===a?0:1-o/a;return i.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,o=this.curves;r<o.length;r++)for(var i=o[r],a=i&&i.isEllipseCurve?2*t:i&&(i.isLineCurve||i.isLineCurve3)?1:i&&i.isSplineCurve?t*i.points.length:t,s=i.getPoints(a),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){o.a.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=o.a.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){o.a.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new i[r.type]).fromJSON(r))}return this}});var s=n(419),u=n(444),c=n(441),f=n(443),l=n(442);function h(t){a.call(this),this.type="Path",this.currentPoint=new r.a,t&&this.setFromPoints(t)}h.prototype=Object.assign(Object.create(a.prototype),{constructor:h,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new l.a(this.currentPoint.clone(),new r.a(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,o){var i=new f.a(this.currentPoint.clone(),new r.a(t,e),new r.a(n,o));return this.curves.push(i),this.currentPoint.set(n,o),this},bezierCurveTo:function(t,e,n,o,i,a){var s=new c.a(this.currentPoint.clone(),new r.a(t,e),new r.a(n,o),new r.a(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new u.a(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,o,i){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,o,i),this},absarc:function(t,e,n,r,o,i){return this.absellipse(t,e,n,n,r,o,i),this},ellipse:function(t,e,n,r,o,i,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+u,e+c,n,r,o,i,a,s),this},absellipse:function(t,e,n,r,o,i,a,u){var c=new s.a(t,e,n,r,o,i,a,u);if(this.curves.length>0){var f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);var l=c.getPoint(1);return this.currentPoint.copy(l),this},copy:function(t){return a.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=a.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return a.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var r=function(t,e,n){n=n||2;var r,s,u,c,f,p,m,g=e&&e.length,v=g?e[0]*n:t.length,y=o(t,0,v,n,!0),b=[];if(!y||y.next===y.prev)return b;if(g&&(y=function(t,e,n,r){var a,s,u,c,f,p=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,c=a<s-1?e[a+1]*r:t.length,(f=o(t,u,c,r,!1))===f.next&&(f.steiner=!0),p.push(d(f));for(p.sort(l),a=0;a<p.length;a++)h(p[a],n),n=i(n,n.next);return n}(t,e,y,n)),t.length>80*n){r=u=t[0],s=c=t[1];for(var x=n;x<v;x+=n)(f=t[x])<r&&(r=f),(p=t[x+1])<s&&(s=p),f>u&&(u=f),p>c&&(c=p);m=0!==(m=Math.max(u-r,c-s))?1/m:0}return a(y,b,n,r,s,m),b};function o(t,e,n,r,o){var i,a;if(o===function(t,e,n,r){for(var o=0,i=e,a=n-r;i<n;i+=r)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}(t,e,n,r)>0)for(i=e;i<n;i+=r)a=S(i,t[i],t[i+1],a);else for(i=n-r;i>=e;i-=r)a=S(i,t[i],t[i+1],a);return a&&y(a,a.next)&&(M(a),a=a.next),a}function i(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(M(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,o,l,h){if(t){!h&&l&&function(t,e,n,r){var o=t;do{null===o.z&&(o.z=p(o.x,o.y,e,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,n,r,o,i,a,s,u,c=1;do{for(n=t,t=null,i=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;n=r}i.nextZ=null,c*=2}while(a>1)}(o)}(t,r,o,l);for(var d,m,g=t;t.prev!==t.next;)if(d=t.prev,m=t.next,l?u(t,r,o,l):s(t))e.push(d.i/n),e.push(t.i/n),e.push(m.i/n),M(t),t=m.next,g=m.next;else if((t=m)===g){h?1===h?a(t=c(t,e,n),e,n,r,o,l,2):2===h&&f(t,e,n,r,o,l):a(i(t),e,n,r,o,l,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(m(e.x,e.y,n.x,n.y,r.x,r.y,o.x,o.y)&&v(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function u(t,e,n,r){var o=t.prev,i=t,a=t.next;if(v(o,i,a)>=0)return!1;for(var s=o.x<i.x?o.x<a.x?o.x:a.x:i.x<a.x?i.x:a.x,u=o.y<i.y?o.y<a.y?o.y:a.y:i.y<a.y?i.y:a.y,c=o.x>i.x?o.x>a.x?o.x:a.x:i.x>a.x?i.x:a.x,f=o.y>i.y?o.y>a.y?o.y:a.y:i.y>a.y?i.y:a.y,l=p(s,u,e,n,r),h=p(c,f,e,n,r),d=t.prevZ,g=t.nextZ;d&&d.z>=l&&g&&g.z<=h;){if(d!==t.prev&&d!==t.next&&m(o.x,o.y,i.x,i.y,a.x,a.y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,g!==t.prev&&g!==t.next&&m(o.x,o.y,i.x,i.y,a.x,a.y,g.x,g.y)&&v(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&m(o.x,o.y,i.x,i.y,a.x,a.y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=h;){if(g!==t.prev&&g!==t.next&&m(o.x,o.y,i.x,i.y,a.x,a.y,g.x,g.y)&&v(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function c(t,e,n){var r=t;do{var o=r.prev,i=r.next.next;!y(o,i)&&b(o,r,r.next,i)&&x(o,i)&&x(i,o)&&(e.push(o.i/n),e.push(r.i/n),e.push(i.i/n),M(r),M(r.next),r=t=i),r=r.next}while(r!==t);return r}function f(t,e,n,r,o,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&g(u,c)){var f=w(u,c);return u=i(u,u.next),f=i(f,f.next),a(u,e,n,r,o,s),void a(f,e,n,r,o,s)}c=c.next}u=u.next}while(u!==t)}function l(t,e){return t.x-e.x}function h(t,e){if(e=function(t,e){var n,r=e,o=t.x,i=t.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a){if(a=s,s===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(o===a)return n.prev;var u,c=n,f=n.x,l=n.y,h=1/0;r=n.next;for(;r!==c;)o>=r.x&&r.x>=f&&o!==r.x&&m(i<l?o:a,i,f,l,i<l?a:o,i,r.x,r.y)&&((u=Math.abs(i-r.y)/(o-r.x))<h||u===h&&r.x>n.x)&&x(r,t)&&(n=r,h=u),r=r.next;return n}(t,e)){var n=w(e,t);i(n,n.next)}}function p(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function m(t,e,n,r,o,i,a,s){return(o-a)*(e-s)-(t-a)*(i-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(i-s)-(o-a)*(r-s)>=0}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){return!!(y(t,n)&&y(e,r)||y(t,r)&&y(n,e))||v(t,e,n)>0!=v(t,e,r)>0&&v(n,r,t)>0!=v(n,r,e)>0}function x(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function w(t,e){var n=new A(t.i,t.x,t.y),r=new A(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function S(t,e,n,r){var o=new A(t,e,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var T={area:function(t){for(var e=t.length,n=0,r=e-1,o=0;o<e;r=o++)n+=t[r].x*t[o].y-t[o].x*t[r].y;return.5*n},isClockWise:function(t){return T.area(t)<0},triangulateShape:function(t,e){var n=[],o=[],i=[];O(t),k(n,t);var a=t.length;e.forEach(O);for(var s=0;s<e.length;s++)o.push(a),a+=e[s].length,k(n,e[s]);var u=r(n,o);for(s=0;s<u.length;s+=3)i.push(u.slice(s,s+3));return i}};function O(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function k(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}},,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(340),o=n(29),i=n(36);function a(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),r.a.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o.a,this.bindMatrixInverse=new o.a}a.prototype=Object.assign(Object.create(r.a.prototype),{constructor:a,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new i.a,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){r.a.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(25);function o(){r.a.call(this),this.type="Bone"}o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,isBone:!0})},function(t,e,n){var r=n(192),o=n(128),i=n(136),a=Math.ceil,s=Math.max;t.exports=function(t,e,n){e=(n?o(t,e,n):void 0===e)?1:s(i(e),0);var u=null==t?0:t.length;if(!u||e<1)return[];for(var c=0,f=0,l=Array(a(u/e));c<u;)l[f++]=r(t,c,c+=e);return l}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(90);function o(t,e,n,o){r.a.call(this,t,e,n,o)}o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,interpolate_:function(t,e,n,r){for(var o=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=(n-e)/(r-e),f=1-c,l=0;l!==a;++l)o[l]=i[u+l]*f+i[s+l]*c;return o}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=new RegExp("[\\[\\]\\.:\\/]","g"),o="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",i=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),a=/(WCOD+)?/.source.replace("WCOD",o),s=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),u=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),c=new RegExp("^"+i+a+s+u+"$"),f=["material","materials","bones"];function l(t,e,n){var r=n||h.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function h(t,e,n){this.path=e,this.parsedPath=n||h.parseTrackName(e),this.node=h.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}Object.assign(l.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(h,{Composite:l,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new h.Composite(t,e,n):new h(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(r,"")},parseTrackName:function(t){var e=c.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var o=n.nodeName.substring(r+1);-1!==f.indexOf(o)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=o)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var o=t[n];if(o.name===e||o.uuid===e)return o;var i=r(o.children);if(i)return i}return null},o=r(t.children);if(o)return o}return null}}),Object.assign(h.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,o=n.length;r!==o;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,o=n.length;r!==o;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,o=n.length;r!==o;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,o=n.length;r!==o;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,o=e.propertyIndex;if(t||(t=h.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===i){i=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===o){o=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===o){o=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(h.prototype,{_getValue_unbound:h.prototype.getValue,_setValue_unbound:h.prototype.setValue})},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={arraySlice:function(t,e,n){return r.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,o=new t.constructor(r),i=0,a=0;a!==r;++i)for(var s=n[i]*e,u=0;u!==e;++u)o[a++]=t[s+u];return o},flattenJSON:function(t,e,n,r){for(var o=1,i=t[0];void 0!==i&&void 0===i[r];)i=t[o++];if(void 0!==i){var a=i[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=i[r])&&(e.push(i.time),n.push.apply(n,a)),i=t[o++]}while(void 0!==i);else if(void 0!==a.toArray)do{void 0!==(a=i[r])&&(e.push(i.time),a.toArray(n,n.length)),i=t[o++]}while(void 0!==i);else do{void 0!==(a=i[r])&&(e.push(i.time),n.push(a)),i=t[o++]}while(void 0!==i)}},subclip:function(t,e,n,o,i){i=i||30;var a=t.clone();a.name=e;for(var s=[],u=0;u<a.tracks.length;++u){for(var c=a.tracks[u],f=c.getValueSize(),l=[],h=[],p=0;p<c.times.length;++p){var d=c.times[p]*i;if(!(d<n||d>=o)){l.push(c.times[p]);for(var m=0;m<f;++m)h.push(c.values[p*f+m])}}0!==l.length&&(c.times=r.convertArray(l,c.times.constructor),c.values=r.convertArray(h,c.values.constructor),s.push(c))}a.tracks=s;var g=1/0;for(u=0;u<a.tracks.length;++u)g>a.tracks[u].times[0]&&(g=a.tracks[u].times[0]);for(u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*g);return a.resetDuration(),a}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(382);function o(t,e,n,o){r.a.call(this,t,e,n,o)}o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,ValueTypeName:"number"})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(382);function o(t,e,n,o){r.a.call(this,t,e,n,o)}o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,ValueTypeName:"vector"})},function(t,e,n){var r=n(51);t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],s=e(a);if(null!=s&&(void 0===u?s==s&&!r(s):n(s,u)))var u=s,c=a}return c}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(405);function o(t,e){r.a.call(this,t,e),this.type="LineLoop"}o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,isLineLoop:!0})},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(457),o=n(10);function i(t){r.a.call(this,t),this.uuid=o.a.generateUUID(),this.type="Shape",this.holes=[]}i.prototype=Object.assign(Object.create(r.a.prototype),{constructor:i,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){r.a.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var o=t.holes[e];this.holes.push(o.clone())}return this},toJSON:function(){var t=r.a.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var o=this.holes[e];t.holes.push(o.toJSON())}return t},fromJSON:function(t){r.a.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var o=t.holes[e];this.holes.push((new r.a).fromJSON(o))}return this}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(329);function o(){r.a.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,isInstancedBufferGeometry:!0,copy:function(t){return r.a.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=r.a.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}})},function(t,e){var n=Math.max;t.exports=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=n(void 0===e?t.length-1:+e||0,0),function(){for(var r=arguments,o=-1,i=n(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var s=Array(e+1);for(o=-1;++o<e;)s[o]=r[o];return s[e]=a,t.apply(this,s)}}},function(t,e,n){var r=n(428),o=n(448),i=/^\d+$/,a=Object.prototype.hasOwnProperty;function s(t,e){return e=null==e?9007199254740991:e,(t="number"==typeof t||i.test(t)?+t:-1)>-1&&t%1==0&&t<e}t.exports=function(t){if(null==t)return[];var e,n;n=typeof(e=t),(!e||"object"!=n&&"function"!=n)&&(t=Object(t));var i=t.length;i=i&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(i)&&(o(t)||r(t))&&i||0;for(var u=t.constructor,c=-1,f="function"==typeof u&&u.prototype===t,l=Array(i),h=i>0;++c<i;)l[c]=c+"";for(var p in t)h&&s(p,i)||"constructor"==p&&(f||!a.call(t,p))||l.push(p);return l}},function(t,e){t.exports=function(t){if(0===t.length)return null;for(var e=t[0].length,n=new Array(e),r=new Array(e),o=0;o<e;o++)n[o]=1/0,r[o]=-1/0;return t.forEach((function(t){for(var o=0;o<e;o++)r[o]=t[o]>r[o]?t[o]:r[o],n[o]=t[o]<n[o]?t[o]:n[o]})),[n,r]}},function(t,e){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e,n){"use strict";var r=n(485),o=n(449),i=n(562);t.exports=function(t,e){for(var n=r.identify(t),a=o.convert(t,r.ARRAY_OF_ARRAYS,3),s=0;s<a.length;s++)i.transformMat4(a[s],a[s],e);return a=o.convert(a,n,3)}},function(t,e,n){"use strict";var r=n(557),o=n(558);t.exports={identify:function(t){if(Array.isArray(t)&&Array.isArray(t[0]))return"array of arrays";if(Array.isArray(t)&&r(t[0]))return"array of typed arrays";if(Array.isArray(t))return"flat array";if(o(t))return"ndarray";if(r(t))return"typed array";throw new Error("geo-identify-position-format: Could not identify position format.")},ARRAY_OF_ARRAYS:"array of arrays",ARRAY_OF_TYPED_ARRAYS:"array of typed arrays",FLAT_ARRAY:"flat array",TYPED_ARRAY:"typed array",NDARRAY:"ndarray"}},function(t,e){t.exports=1e-6},function(t,e){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},function(t,e){t.exports=function(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}},function(t,e,n){"use strict";(function(t){var r=n(600),o=n(601),i=n(602);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),o=(t=s(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(r)return j(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,o);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,o){var i,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var f=-1;for(i=n;i<s;i++)if(c(t,i)===c(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var l=!0,h=0;h<u;h++)if(c(t,i+h)!==c(e,h)){l=!1;break}if(l)return i}return-1}function b(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function x(t,e,n,r){return z(j(e,t.length-n),t,n,r)}function w(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function S(t,e,n,r){return w(t,e,n,r)}function M(t,e,n,r){return z(G(e),t,n,r)}function A(t,e,n,r){return z(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,s,u,c=t[o],f=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&c)<<6|63&i)>127&&(f=u);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,o){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(i,a),c=this.slice(r,o),f=t.slice(e,n),l=0;l<s;++l)if(c[l]!==f[l]){i=c[l],a=f[l];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=F(t[i]);return o}function C(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function U(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,n,r,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function D(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(t,e,n,r,i){return i||D(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,i){return i||D(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var o=e-t;n=new u(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},u.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||_(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||_(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);_(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);_(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return P(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return P(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=u.isBuffer(t)?t:j(new u(t,r).toString()),s=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(188))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(24),o=n(457),i=n(477),a=n(458);function s(){this.type="ShapePath",this.color=new r.a,this.subPaths=[],this.currentPath=null}Object.assign(s.prototype,{moveTo:function(t,e){return this.currentPath=new o.a,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,o,i){return this.currentPath.bezierCurveTo(t,e,n,r,o,i),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n],a=new i.a;a.curves=o.curves,e.push(a)}return e}function r(t,e){for(var n=e.length,r=!1,o=n-1,i=0;i<n;o=i++){var a=e[o],s=e[i],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[i],u=-u,s=e[o],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var f=c*(t.x-a.x)-u*(t.y-a.y);if(0===f)return!0;if(f<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var o=a.a.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return n(s);var u,c,f,l=[];if(1===s.length)return c=s[0],(f=new i.a).curves=c.curves,l.push(f),l;var h=!o(s[0].getPoints());h=t?!h:h;var p,d,m=[],g=[],v=[],y=0;g[y]=void 0,v[y]=[];for(var b=0,x=s.length;b<x;b++)u=o(p=(c=s[b]).getPoints()),(u=t?!u:u)?(!h&&g[y]&&y++,g[y]={s:new i.a,p:p},g[y].s.curves=c.curves,h&&y++,v[y]=[]):v[y].push({h:c,p:p[0]});if(!g[0])return n(s);if(g.length>1){for(var w=!1,S=[],M=0,A=g.length;M<A;M++)m[M]=[];for(M=0,A=g.length;M<A;M++)for(var T=v[M],O=0;O<T.length;O++){for(var k=T[O],E=!0,R=0;R<g.length;R++)r(k.p,g[R].p)&&(M!==R&&S.push({froms:M,tos:R,hole:O}),E?(E=!1,m[R].push(k)):w=!0);E&&m[M].push(k)}S.length>0&&(w||(v=m))}b=0;for(var C=g.length;b<C;b++){f=g[b].s,l.push(f);for(var U=0,_=(d=v[b]).length;U<_;U++)f.holes.push(d[U].h)}return l}})},function(t,e,n){"use strict";(function(t){function r(){return"undefined"!=typeof window}function o(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let e=0;e<t.length;++e)n[e]=t[e];return e}function i(e){const n=new t(e.byteLength),r=new Uint8Array(e);for(let t=0;t<n.length;++t)n[t]=r[t];return n}function a(t,e){if(!t)throw e}n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}))}).call(this,n(498).Buffer)},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return de}));var r={};n.r(r),n.d(r,"ShadowMaterial",(function(){return dt})),n.d(r,"SpriteMaterial",(function(){return T})),n.d(r,"RawShaderMaterial",(function(){return mt.a})),n.d(r,"ShaderMaterial",(function(){return gt.a})),n.d(r,"PointsMaterial",(function(){return vt.a})),n.d(r,"MeshPhysicalMaterial",(function(){return yt.a})),n.d(r,"MeshStandardMaterial",(function(){return bt.a})),n.d(r,"MeshPhongMaterial",(function(){return xt.a})),n.d(r,"MeshToonMaterial",(function(){return wt})),n.d(r,"MeshNormalMaterial",(function(){return St})),n.d(r,"MeshLambertMaterial",(function(){return Mt.a})),n.d(r,"MeshDepthMaterial",(function(){return At.a})),n.d(r,"MeshDistanceMaterial",(function(){return Tt.a})),n.d(r,"MeshBasicMaterial",(function(){return Ot.a})),n.d(r,"MeshMatcapMaterial",(function(){return kt})),n.d(r,"LineDashedMaterial",(function(){return Rt})),n.d(r,"LineBasicMaterial",(function(){return Et.a})),n.d(r,"Material",(function(){return A.a}));var o={};n.r(o),n.d(o,"WireframeGeometry",(function(){return Bt})),n.d(o,"ParametricGeometry",(function(){return Ft})),n.d(o,"ParametricBufferGeometry",(function(){return jt})),n.d(o,"TetrahedronGeometry",(function(){return zt})),n.d(o,"TetrahedronBufferGeometry",(function(){return Ht})),n.d(o,"OctahedronGeometry",(function(){return qt.b})),n.d(o,"OctahedronBufferGeometry",(function(){return qt.a})),n.d(o,"IcosahedronGeometry",(function(){return Wt.b})),n.d(o,"IcosahedronBufferGeometry",(function(){return Wt.a})),n.d(o,"DodecahedronGeometry",(function(){return Vt})),n.d(o,"DodecahedronBufferGeometry",(function(){return Yt})),n.d(o,"PolyhedronGeometry",(function(){return Gt.b})),n.d(o,"PolyhedronBufferGeometry",(function(){return Gt.a})),n.d(o,"TubeGeometry",(function(){return Xt})),n.d(o,"TubeBufferGeometry",(function(){return Jt})),n.d(o,"TorusKnotGeometry",(function(){return Zt.b})),n.d(o,"TorusKnotBufferGeometry",(function(){return Zt.a})),n.d(o,"TorusGeometry",(function(){return Qt.b})),n.d(o,"TorusBufferGeometry",(function(){return Qt.a})),n.d(o,"TextGeometry",(function(){return Kt.b})),n.d(o,"TextBufferGeometry",(function(){return Kt.a})),n.d(o,"SphereGeometry",(function(){return $t.b})),n.d(o,"SphereBufferGeometry",(function(){return $t.a})),n.d(o,"RingGeometry",(function(){return te})),n.d(o,"RingBufferGeometry",(function(){return ee})),n.d(o,"PlaneGeometry",(function(){return ne.b})),n.d(o,"PlaneBufferGeometry",(function(){return ne.a})),n.d(o,"LatheGeometry",(function(){return oe})),n.d(o,"LatheBufferGeometry",(function(){return ie})),n.d(o,"ShapeGeometry",(function(){return ae.b})),n.d(o,"ShapeBufferGeometry",(function(){return ae.a})),n.d(o,"ExtrudeGeometry",(function(){return se.b})),n.d(o,"ExtrudeBufferGeometry",(function(){return se.a})),n.d(o,"EdgesGeometry",(function(){return ue})),n.d(o,"ConeGeometry",(function(){return ce.b})),n.d(o,"ConeBufferGeometry",(function(){return ce.a})),n.d(o,"CylinderGeometry",(function(){return fe.b})),n.d(o,"CylinderBufferGeometry",(function(){return fe.a})),n.d(o,"CircleGeometry",(function(){return le.b})),n.d(o,"CircleBufferGeometry",(function(){return le.a})),n.d(o,"BoxGeometry",(function(){return he.b})),n.d(o,"BoxBufferGeometry",(function(){return he.a}));var i=n(4),a=n(328),s=n(24),u=n(25),c=n(120),f=n(340),l=n(29),h=new l.a,p=new l.a,d=[],m=new f.a;function g(t,e,n){f.a.call(this,t,e),this.instanceMatrix=new a.a(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}g.prototype=Object.assign(Object.create(f.a.prototype),{constructor:g,isInstancedMesh:!0,getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,r=this.count;if(m.geometry=this.geometry,m.material=this.material,void 0!==m.material)for(var o=0;o<r;o++)this.getMatrixAt(o,h),p.multiplyMatrices(n,h),m.matrixWorld=p,m.raycast(t,d),d.length>0&&(d[0].instanceId=o,d[0].object=this,e.push(d[0]),d.length=0)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}});var v,y=n(12),b=n(2),x=n(138),w=n(329),S=n(438),M=n(408),A=n(330);function T(t){A.a.call(this),this.type="SpriteMaterial",this.color=new s.a(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}T.prototype=Object.create(A.a.prototype),T.prototype.constructor=T,T.prototype.isSpriteMaterial=!0,T.prototype.copy=function(t){return A.a.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var O=new b.a,k=new b.a,E=new b.a,R=new y.a,C=new y.a,U=new l.a,_=new b.a,I=new b.a,L=new b.a,D=new y.a,P=new y.a,B=new y.a;function N(t){if(u.a.call(this),this.type="Sprite",void 0===v){v=new w.a;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new S.a(e,5);v.setIndex([0,1,2,0,2,3]),v.setAttribute("position",new M.a(n,3,0,!1)),v.setAttribute("uv",new M.a(n,2,3,!1))}this.geometry=v,this.material=void 0!==t?t:new T,this.center=new y.a(.5,.5)}function F(t,e,n,r,o,i){R.subVectors(t,n).addScalar(.5).multiply(r),void 0!==o?(C.x=i*R.x-o*R.y,C.y=o*R.x+i*R.y):C.copy(R),t.copy(e),t.x+=C.x,t.y+=C.y,t.applyMatrix4(U)}N.prototype=Object.assign(Object.create(u.a.prototype),{constructor:N,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),k.setFromMatrixScale(this.matrixWorld),U.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),E.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&k.multiplyScalar(-E.z);var n,r,o=this.material.rotation;0!==o&&(r=Math.cos(o),n=Math.sin(o));var i=this.center;F(_.set(-.5,-.5,0),E,i,k,n,r),F(I.set(.5,-.5,0),E,i,k,n,r),F(L.set(.5,.5,0),E,i,k,n,r),D.set(0,0),P.set(1,0),B.set(1,1);var a=t.ray.intersectTriangle(_,I,L,!1,O);if(null!==a||(F(I.set(-.5,.5,0),E,i,k,n,r),P.set(0,1),null!==(a=t.ray.intersectTriangle(_,L,I,!1,O)))){var s=t.ray.origin.distanceTo(O);s<t.near||s>t.far||e.push({distance:s,point:O.clone(),uv:x.a.getUV(O,_,I,L,D,P,B,new y.a),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return u.a.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var j=n(407),G=n(405),z=n(476),H=n(375),q=new b.a,W=new b.a;function V(){u.a.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}V.prototype=Object.assign(Object.create(u.a.prototype),{constructor:V,isLOD:!0,copy:function(t){u.a.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var o=e[n];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){for(var n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){q.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(q);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){q.setFromMatrixPosition(t.matrixWorld),W.setFromMatrixPosition(this.matrixWorld);var n=q.distanceTo(W)/t.zoom;e[0].object.visible=!0;for(var r=1,o=e.length;r<o&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<o;r++)e[r].object.visible=!1}},toJSON:function(t){var e=u.a.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,r=0,o=n.length;r<o;r++){var i=n[r];e.object.levels.push({object:i.object.uuid,distance:i.distance})}return e}});var Y=n(477),X=n(466),J=n(465),Z=n(464),Q=n(456),K=n(455),$=n(454),tt=n(462),et=n(463),nt=n(378),rt=n(368),ot=n(126),it=n(461),at=n(83),st=n(372),ut=n(373),ct=n(453),ft=n(36),lt=n(38),ht=n(341),pt=n(335);function dt(t){A.a.call(this),this.type="ShadowMaterial",this.color=new s.a(0),this.transparent=!0,this.setValues(t)}dt.prototype=Object.create(A.a.prototype),dt.prototype.constructor=dt,dt.prototype.isShadowMaterial=!0,dt.prototype.copy=function(t){return A.a.prototype.copy.call(this,t),this.color.copy(t.color),this};var mt=n(411),gt=n(336),vt=n(374),yt=n(445),bt=n(380),xt=n(446);function wt(t){A.a.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new s.a(16777215),this.specular=new s.a(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new s.a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i.Qc,this.normalScale=new y.a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function St(t){A.a.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i.Qc,this.normalScale=new y.a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}wt.prototype=Object.create(A.a.prototype),wt.prototype.constructor=wt,wt.prototype.isMeshToonMaterial=!0,wt.prototype.copy=function(t){return A.a.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},St.prototype=Object.create(A.a.prototype),St.prototype.constructor=St,St.prototype.isMeshNormalMaterial=!0,St.prototype.copy=function(t){return A.a.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};var Mt=n(392),At=n(432),Tt=n(433),Ot=n(367);function kt(t){A.a.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new s.a(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i.Qc,this.normalScale=new y.a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}kt.prototype=Object.create(A.a.prototype),kt.prototype.constructor=kt,kt.prototype.isMeshMatcapMaterial=!0,kt.prototype.copy=function(t){return A.a.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};var Et=n(356);function Rt(t){Et.a.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Ct(t){pt.a.call(this,t),this.textures={}}Rt.prototype=Object.create(Et.a.prototype),Rt.prototype.constructor=Rt,Rt.prototype.isLineDashedMaterial=!0,Rt.prototype.copy=function(t){return Et.a.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this},Ct.prototype=Object.assign(Object.create(pt.a.prototype),{constructor:Ct,load:function(t,e,n,r){var o=this,i=new ht.a(o.manager);i.setPath(o.path),i.load(t,(function(t){e(o.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var o=new r[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.sheen&&(o.sheen=(new s.a).setHex(t.sheen)),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearcoat&&(o.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(o.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(o.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(o.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(o.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(o.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(o.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(o.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(o.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(o.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(o.morphNormals=t.morphNormals),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.vertexTangents&&(o.vertexTangents=t.vertexTangents),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.toneMapped&&(o.toneMapped=t.toneMapped),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?o.vertexColors=t.vertexColors>0:o.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var i in t.uniforms){var a=t.uniforms[i];switch(o.uniforms[i]={},a.type){case"t":o.uniforms[i].value=n(a.value);break;case"c":o.uniforms[i].value=(new s.a).setHex(a.value);break;case"v2":o.uniforms[i].value=(new y.a).fromArray(a.value);break;case"v3":o.uniforms[i].value=(new b.a).fromArray(a.value);break;case"v4":o.uniforms[i].value=(new ft.a).fromArray(a.value);break;case"m3":o.uniforms[i].value=(new lt.a).fromArray(a.value);case"m4":o.uniforms[i].value=(new l.a).fromArray(a.value);break;default:o.uniforms[i].value=a.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var u in t.extensions)o.extensions[u]=t.extensions[u];if(void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=n(t.map)),void 0!==t.matcap&&(o.matcap=n(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(o.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale){var c=t.normalScale;!1===Array.isArray(c)&&(c=[c,c]),o.normalScale=(new y.a).fromArray(c)}return void 0!==t.displacementMap&&(o.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=n(t.specularMap)),void 0!==t.envMap&&(o.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(o.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(o.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(o.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(o.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(o.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(o.clearcoatNormalScale=(new y.a).fromArray(t.clearcoatNormalScale)),o},setTextures:function(t){return this.textures=t,this}});var Ut=n(478),_t=n(358),It=n(479),Lt=n(447);function Dt(t){pt.a.call(this,t)}Dt.prototype=Object.assign(Object.create(pt.a.prototype),{constructor:Dt,load:function(t,e,n,r){var o=this,i=new ht.a(o.manager);i.setPath(o.path),i.load(t,(function(t){e(o.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=t.isInstancedBufferGeometry?new It.a:new w.a,n=t.data.index;if(void 0!==n){var r=new Pt[n.type](n.array);e.setIndex(new a.a(r,1))}var o=t.data.attributes;for(var i in o){var s=o[i],u=(r=new Pt[s.type](s.array),new(s.isInstancedBufferAttribute?Lt.a:a.a)(r,s.itemSize,s.normalized));void 0!==s.name&&(u.name=s.name),e.setAttribute(i,u)}var c=t.data.morphAttributes;if(c)for(var i in c){for(var f=c[i],l=[],h=0,p=f.length;h<p;h++){s=f[h],r=new Pt[s.type](s.array),u=new a.a(r,s.itemSize,s.normalized);void 0!==s.name&&(u.name=s.name),l.push(u)}e.morphAttributes[i]=l}t.data.morphTargetsRelative&&(e.morphTargetsRelative=!0);var d=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==d){h=0;for(var m=d.length;h!==m;++h){var g=d[h];e.addGroup(g.start,g.count,g.materialIndex)}}var v=t.data.boundingSphere;if(void 0!==v){var y=new b.a;void 0!==v.center&&y.fromArray(v.center),e.boundingSphere=new _t.a(y,v.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var Pt={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Bt(t){w.a.call(this),this.type="WireframeGeometry";var e,n,r,o,i,s,u,c,f,l,h=[],p=[0,0],d={},m=["a","b","c"];if(t&&t.isGeometry){var g=t.faces;for(e=0,r=g.length;e<r;e++){var v=g[e];for(n=0;n<3;n++)u=v[m[n]],c=v[m[(n+1)%3]],p[0]=Math.min(u,c),p[1]=Math.max(u,c),void 0===d[f=p[0]+","+p[1]]&&(d[f]={index1:p[0],index2:p[1]})}for(f in d)s=d[f],l=t.vertices[s.index1],h.push(l.x,l.y,l.z),l=t.vertices[s.index2],h.push(l.x,l.y,l.z)}else if(t&&t.isBufferGeometry){var y,x,S,M,A,T,O;if(l=new b.a,null!==t.index){for(y=t.attributes.position,x=t.index,0===(S=t.groups).length&&(S=[{start:0,count:x.count,materialIndex:0}]),o=0,i=S.length;o<i;++o)for(e=A=(M=S[o]).start,r=A+M.count;e<r;e+=3)for(n=0;n<3;n++)u=x.getX(e+n),c=x.getX(e+(n+1)%3),p[0]=Math.min(u,c),p[1]=Math.max(u,c),void 0===d[f=p[0]+","+p[1]]&&(d[f]={index1:p[0],index2:p[1]});for(f in d)s=d[f],l.fromBufferAttribute(y,s.index1),h.push(l.x,l.y,l.z),l.fromBufferAttribute(y,s.index2),h.push(l.x,l.y,l.z)}else for(e=0,r=(y=t.attributes.position).count/3;e<r;e++)for(n=0;n<3;n++)T=3*e+n,l.fromBufferAttribute(y,T),h.push(l.x,l.y,l.z),O=3*e+(n+1)%3,l.fromBufferAttribute(y,O),h.push(l.x,l.y,l.z)}this.setAttribute("position",new a.b(h,3))}Bt.prototype=Object.create(w.a.prototype),Bt.prototype.constructor=Bt;var Nt=n(337);function Ft(t,e,n){Nt.a.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new jt(t,e,n)),this.mergeVertices()}function jt(t,e,n){w.a.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,o,i=[],s=[],u=[],c=[],f=new b.a,l=new b.a,h=new b.a,p=new b.a,d=new b.a;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(r=0;r<=n;r++){var g=r/n;for(o=0;o<=e;o++){var v=o/e;t(v,g,l),s.push(l.x,l.y,l.z),v-1e-5>=0?(t(v-1e-5,g,h),p.subVectors(l,h)):(t(v+1e-5,g,h),p.subVectors(h,l)),g-1e-5>=0?(t(v,g-1e-5,h),d.subVectors(l,h)):(t(v,g+1e-5,h),d.subVectors(h,l)),f.crossVectors(p,d).normalize(),u.push(f.x,f.y,f.z),c.push(v,g)}}for(r=0;r<n;r++)for(o=0;o<e;o++){var y=r*m+o,x=r*m+o+1,S=(r+1)*m+o+1,M=(r+1)*m+o;i.push(y,x,M),i.push(x,S,M)}this.setIndex(i),this.setAttribute("position",new a.b(s,3)),this.setAttribute("normal",new a.b(u,3)),this.setAttribute("uv",new a.b(c,2))}Ft.prototype=Object.create(Nt.a.prototype),Ft.prototype.constructor=Ft,jt.prototype=Object.create(w.a.prototype),jt.prototype.constructor=jt;var Gt=n(381);function zt(t,e){Nt.a.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ht(t,e)),this.mergeVertices()}function Ht(t,e){Gt.a.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}zt.prototype=Object.create(Nt.a.prototype),zt.prototype.constructor=zt,Ht.prototype=Object.create(Gt.a.prototype),Ht.prototype.constructor=Ht;var qt=n(415),Wt=n(420);function Vt(t,e){Nt.a.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Yt(t,e)),this.mergeVertices()}function Yt(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Gt.a.call(this,o,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Xt(t,e,n,r,o,i){Nt.a.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:o},void 0!==i&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Jt(t,e,n,r,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Jt(t,e,n,r,o){w.a.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:o},e=e||64,n=n||1,r=r||8,o=o||!1;var i=t.computeFrenetFrames(e,o);this.tangents=i.tangents,this.normals=i.normals,this.binormals=i.binormals;var s,u,c=new b.a,f=new b.a,l=new y.a,h=new b.a,p=[],d=[],m=[],g=[];function v(o){h=t.getPointAt(o/e,h);var a=i.normals[o],s=i.binormals[o];for(u=0;u<=r;u++){var l=u/r*Math.PI*2,m=Math.sin(l),g=-Math.cos(l);f.x=g*a.x+m*s.x,f.y=g*a.y+m*s.y,f.z=g*a.z+m*s.z,f.normalize(),d.push(f.x,f.y,f.z),c.x=h.x+n*f.x,c.y=h.y+n*f.y,c.z=h.z+n*f.z,p.push(c.x,c.y,c.z)}}!function(){for(s=0;s<e;s++)v(s);v(!1===o?e:0),function(){for(s=0;s<=e;s++)for(u=0;u<=r;u++)l.x=s/e,l.y=u/r,m.push(l.x,l.y)}(),function(){for(u=1;u<=e;u++)for(s=1;s<=r;s++){var t=(r+1)*(u-1)+(s-1),n=(r+1)*u+(s-1),o=(r+1)*u+s,i=(r+1)*(u-1)+s;g.push(t,n,i),g.push(n,o,i)}}()}(),this.setIndex(g),this.setAttribute("position",new a.b(p,3)),this.setAttribute("normal",new a.b(d,3)),this.setAttribute("uv",new a.b(m,2))}Vt.prototype=Object.create(Nt.a.prototype),Vt.prototype.constructor=Vt,Yt.prototype=Object.create(Gt.a.prototype),Yt.prototype.constructor=Yt,Xt.prototype=Object.create(Nt.a.prototype),Xt.prototype.constructor=Xt,Jt.prototype=Object.create(w.a.prototype),Jt.prototype.constructor=Jt,Jt.prototype.toJSON=function(){var t=w.a.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t};var Zt=n(421),Qt=n(422),Kt=n(423),$t=n(406);function te(t,e,n,r,o,i){Nt.a.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:i},this.fromBufferGeometry(new ee(t,e,n,r,o,i)),this.mergeVertices()}function ee(t,e,n,r,o,i){w.a.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:i},t=t||.5,e=e||1,o=void 0!==o?o:0,i=void 0!==i?i:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var s,u,c,f=[],l=[],h=[],p=[],d=t,m=(e-t)/(r=void 0!==r?Math.max(1,r):1),g=new b.a,v=new y.a;for(u=0;u<=r;u++){for(c=0;c<=n;c++)s=o+c/n*i,g.x=d*Math.cos(s),g.y=d*Math.sin(s),l.push(g.x,g.y,g.z),h.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,p.push(v.x,v.y);d+=m}for(u=0;u<r;u++){var x=u*(n+1);for(c=0;c<n;c++){var S=s=c+x,M=s+n+1,A=s+n+2,T=s+1;f.push(S,M,T),f.push(M,A,T)}}this.setIndex(f),this.setAttribute("position",new a.b(l,3)),this.setAttribute("normal",new a.b(h,3)),this.setAttribute("uv",new a.b(p,2))}te.prototype=Object.create(Nt.a.prototype),te.prototype.constructor=te,ee.prototype=Object.create(w.a.prototype),ee.prototype.constructor=ee;var ne=n(353),re=n(10);function oe(t,e,n,r){Nt.a.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new ie(t,e,n,r)),this.mergeVertices()}function ie(t,e,n,r){w.a.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=re.a.clamp(r,0,2*Math.PI);var o,i,s,u=[],c=[],f=[],l=1/e,h=new b.a,p=new y.a;for(i=0;i<=e;i++){var d=n+i*l*r,m=Math.sin(d),g=Math.cos(d);for(s=0;s<=t.length-1;s++)h.x=t[s].x*m,h.y=t[s].y,h.z=t[s].x*g,c.push(h.x,h.y,h.z),p.x=i/e,p.y=s/(t.length-1),f.push(p.x,p.y)}for(i=0;i<e;i++)for(s=0;s<t.length-1;s++){var v=o=s+i*t.length,x=o+t.length,S=o+t.length+1,M=o+1;u.push(v,x,M),u.push(x,S,M)}if(this.setIndex(u),this.setAttribute("position",new a.b(c,3)),this.setAttribute("uv",new a.b(f,2)),this.computeVertexNormals(),r===2*Math.PI){var A=this.attributes.normal.array,T=new b.a,O=new b.a,k=new b.a;for(o=e*t.length*3,i=0,s=0;i<t.length;i++,s+=3)T.x=A[s+0],T.y=A[s+1],T.z=A[s+2],O.x=A[o+s+0],O.y=A[o+s+1],O.z=A[o+s+2],k.addVectors(T,O).normalize(),A[s+0]=A[o+s+0]=k.x,A[s+1]=A[o+s+1]=k.y,A[s+2]=A[o+s+2]=k.z}}oe.prototype=Object.create(Nt.a.prototype),oe.prototype.constructor=oe,ie.prototype=Object.create(w.a.prototype),ie.prototype.constructor=ie;var ae=n(425),se=n(424);function ue(t,e){w.a.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,o,i,s=[],u=Math.cos(re.a.DEG2RAD*e),c=[0,0],f={},l=["a","b","c"];t.isBufferGeometry?(i=new Nt.a).fromBufferGeometry(t):i=t.clone(),i.mergeVertices(),i.computeFaceNormals();for(var h=i.vertices,p=i.faces,d=0,m=p.length;d<m;d++)for(var g=p[d],v=0;v<3;v++)n=g[l[v]],r=g[l[(v+1)%3]],c[0]=Math.min(n,r),c[1]=Math.max(n,r),void 0===f[o=c[0]+","+c[1]]?f[o]={index1:c[0],index2:c[1],face1:d,face2:void 0}:f[o].face2=d;for(o in f){var y=f[o];if(void 0===y.face2||p[y.face1].normal.dot(p[y.face2].normal)<=u){var b=h[y.index1];s.push(b.x,b.y,b.z),b=h[y.index2],s.push(b.x,b.y,b.z)}}this.setAttribute("position",new a.b(s,3))}ue.prototype=Object.create(w.a.prototype),ue.prototype.constructor=ue;var ce=n(426),fe=n(394),le=n(427),he=n(395),pe=n(504);function de(t){pt.a.call(this,t)}de.prototype=Object.assign(Object.create(pt.a.prototype),{constructor:de,load:function(t,e,n,r){var o=this,i=""===this.path?Ut.a.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||i;var a=new ht.a(o.manager);a.setPath(this.path),a.load(t,(function(n){var i=null;try{i=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=i.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?o.parse(i,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),o=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),i=this.parseTextures(t.textures,o),a=this.parseMaterials(t.materials,i),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var o=(new Y.a).fromJSON(t[n]);e[o.uuid]=o}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new Dt,i=0,a=t.length;i<a;i++){var s,u=t[i];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new o[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new o[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new o[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new o[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new o[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new o[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new o[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new o[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new o[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new o[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new o[u.type]((new pe[u.path.type]).fromJSON(u.path),u.tubularSegments,u.radius,u.radialSegments,u.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new o[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new o[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],f=0,l=u.shapes.length;f<l;f++){var h=e[u.shapes[f]];c.push(h)}s=new o[u.type](c,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],f=0,l=u.shapes.length;f<l;f++){h=e[u.shapes[f]];c.push(h)}var p=u.options.extrudePath;void 0!==p&&(u.options.extrudePath=(new pe[p.type]).fromJSON(p)),s=new o[u.type](c,u.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(u);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),n[u.uuid]=s}return n},parseMaterials:function(t,e){var n={},r={};if(void 0!==t){var o=new Ct;o.setTextures(e);for(var i=0,a=t.length;i<a;i++){var s=t[i];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var f=s.materials[c];void 0===n[f.uuid]&&(n[f.uuid]=o.parse(f)),u.push(n[f.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=o.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],o=ct.a.parse(r);void 0!==r.uuid&&(o.uuid=r.uuid),e.push(o)}return e},parseImages:function(t,e){var n=this,r={};function o(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var i=new ut.b(e),a=new st.a(i);a.setCrossOrigin(this.crossOrigin);for(var s=0,u=t.length;s<u;s++){var c=t[s],f=c.url;if(Array.isArray(f)){r[c.uuid]=[];for(var l=0,h=f.length;l<h;l++){var p=f[l],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;r[c.uuid].push(o(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;r[c.uuid]=o(d)}}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var o=0,i=t.length;o<i;o++){var a,s=t[o];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(e[s.image])?new it.a(e[s.image]):new at.a(e[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,me)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],ge),a.wrapT=n(s.wrap[1],ge)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,ve)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,ve)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(t,e,n){var r;function o(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function i(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(n[i])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new ot.a,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new s.a(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new X.a(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new J.a(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new rt.a(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new nt.a(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new tt.a(t.color,t.intensity);break;case"DirectionalLight":r=new $.a(t.color,t.intensity);break;case"PointLight":r=new K.a(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new et.a(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new Q.a(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new Z.a(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var l=o(t.geometry),h=i(t.material);r=new f.a(l,h);break;case"InstancedMesh":l=o(t.geometry),h=i(t.material);var p=t.count,d=t.instanceMatrix;(r=new g(l,h,p)).instanceMatrix=new a.a(new Float32Array(d.array),16);break;case"LOD":r=new V;break;case"Line":r=new G.a(o(t.geometry),i(t.material),t.mode);break;case"LineLoop":r=new z.a(o(t.geometry),i(t.material));break;case"LineSegments":r=new H.a(o(t.geometry),i(t.material));break;case"PointCloud":case"Points":r=new j.a(o(t.geometry),i(t.material));break;case"Sprite":r=new N(i(t.material));break;case"Group":r=new c.a;break;default:r=new u.a}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(var m=t.children,v=0;v<m.length;v++)r.add(this.parseObject(m[v],e,n));if("LOD"===t.type){void 0!==t.autoUpdate&&(r.autoUpdate=t.autoUpdate);for(var y=t.levels,b=0;b<y.length;b++){var x=y[b],w=r.getObjectByProperty("uuid",x.object);void 0!==w&&r.addLevel(w,x.distance)}}return r}});var me={UVMapping:i.Uc,CubeReflectionMapping:i.m,CubeRefractionMapping:i.n,EquirectangularReflectionMapping:i.A,EquirectangularRefractionMapping:i.B,SphericalReflectionMapping:i.Ic,CubeUVReflectionMapping:i.o,CubeUVRefractionMapping:i.p},ge={RepeatWrapping:i.rc,ClampToEdgeWrapping:i.l,MirroredRepeatWrapping:i.gb},ve={NearestFilter:i.kb,NearestMipmapNearestFilter:i.ob,NearestMipmapLinearFilter:i.nb,LinearFilter:i.R,LinearMipmapNearestFilter:i.V,LinearMipmapLinearFilter:i.U}},function(t,e,n){"use strict";n.r(e),n.d(e,"ArcCurve",(function(){return o})),n.d(e,"CatmullRomCurve3",(function(){return i.a})),n.d(e,"CubicBezierCurve",(function(){return a.a})),n.d(e,"CubicBezierCurve3",(function(){return f})),n.d(e,"EllipseCurve",(function(){return r.a})),n.d(e,"LineCurve",(function(){return l.a})),n.d(e,"LineCurve3",(function(){return h})),n.d(e,"QuadraticBezierCurve",(function(){return p.a})),n.d(e,"QuadraticBezierCurve3",(function(){return d})),n.d(e,"SplineCurve",(function(){return m.a}));var r=n(419);function o(t,e,n,o,i,a){r.a.call(this,t,e,n,n,o,i,a),this.type="ArcCurve"}o.prototype=Object.create(r.a.prototype),o.prototype.constructor=o,o.prototype.isArcCurve=!0;var i=n(440),a=n(441),s=n(357),u=n(409),c=n(2);function f(t,e,n,r){s.a.call(this),this.type="CubicBezierCurve3",this.v0=t||new c.a,this.v1=e||new c.a,this.v2=n||new c.a,this.v3=r||new c.a}f.prototype=Object.create(s.a.prototype),f.prototype.constructor=f,f.prototype.isCubicBezierCurve3=!0,f.prototype.getPoint=function(t,e){var n=e||new c.a,r=this.v0,o=this.v1,i=this.v2,a=this.v3;return n.set(Object(u.b)(t,r.x,o.x,i.x,a.x),Object(u.b)(t,r.y,o.y,i.y,a.y),Object(u.b)(t,r.z,o.z,i.z,a.z)),n},f.prototype.copy=function(t){return s.a.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},f.prototype.toJSON=function(){var t=s.a.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},f.prototype.fromJSON=function(t){return s.a.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};var l=n(442);function h(t,e){s.a.call(this),this.type="LineCurve3",this.v1=t||new c.a,this.v2=e||new c.a}h.prototype=Object.create(s.a.prototype),h.prototype.constructor=h,h.prototype.isLineCurve3=!0,h.prototype.getPoint=function(t,e){var n=e||new c.a;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},h.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},h.prototype.copy=function(t){return s.a.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},h.prototype.toJSON=function(){var t=s.a.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},h.prototype.fromJSON=function(t){return s.a.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};var p=n(443);function d(t,e,n){s.a.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new c.a,this.v1=e||new c.a,this.v2=n||new c.a}d.prototype=Object.create(s.a.prototype),d.prototype.constructor=d,d.prototype.isQuadraticBezierCurve3=!0,d.prototype.getPoint=function(t,e){var n=e||new c.a,r=this.v0,o=this.v1,i=this.v2;return n.set(Object(u.c)(t,r.x,o.x,i.x),Object(u.c)(t,r.y,o.y,i.y),Object(u.c)(t,r.z,o.z,i.z)),n},d.prototype.copy=function(t){return s.a.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},d.prototype.toJSON=function(){var t=s.a.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},d.prototype.fromJSON=function(t){return s.a.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};var m=n(444)},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(4),o=n(382),i=n(90),a=n(21);function s(t,e,n,r){i.a.call(this,t,e,n,r)}function u(t,e,n,r){o.a.call(this,t,e,n,r)}s.prototype=Object.assign(Object.create(i.a.prototype),{constructor:s,interpolate_:function(t,e,n,r){for(var o=this.resultBuffer,i=this.sampleValues,s=this.valueSize,u=t*s,c=(n-e)/(r-e),f=u+s;u!==f;u+=4)a.a.slerpFlat(o,0,i,u-s,i,u,c);return o}}),u.prototype=Object.assign(Object.create(o.a.prototype),{constructor:u,ValueTypeName:"quaternion",DefaultInterpolation:r.L,InterpolantFactoryMethodLinear:function(t){return new s(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0})},,,,function(t,e){t.exports=function(t,e){return t>e}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){"use strict";const r=n(512),o=n(607).mat4,i=n(513),a=n(482),s=n(484),u=n(449),c=n(596).vertexNormals,f=n(597),l=n(598);t.exports=function(t,e){e=l(e,{cells:void 0,regl:!1,bias:.01,resolution:512}),t=i(t);const n=a(t),h=[1/(n[1][0]-n[0][0]),1/(n[1][1]-n[0][1]),1/(n[1][2]-n[0][2])],p=o.scale([],o.create(),h);t=s(t,p);const d=u.convert(t,u.TYPED_ARRAY);let m,g={cells:e.cells,positions:t};void 0===g.cells&&(g=f(d)),m=void 0===e.normals?c(g.cells,g.positions,0):e.normals;const v=u.convert(m,u.TYPED_ARRAY);if(d.length%3!=0)throw new Error("geo-ambient-occlusion: Position array not divisible by three.");const y=d.length/3;let b=1;for(;b*b<y;)b*=2;const x=new Float32Array(b*b*3);x.set(d);const w=new Float32Array(b*b*3);w.set(v);const S=["OES_texture_float"];if(y>65535&&void 0!==e.cells&&S.push("OES_element_index_uint"),e.regl)for(let t of S)if(!e.regl.hasExtension(t))throw new Error("geo-ambient-occlusion: Provided regl context needs the "+t+" extension for this mesh.");let M,A;e.regl?(M=e.regl,A=!1):(M=r({canvas:document.createElement("canvas"),extensions:S}),A=!0);const T=P(e.resolution),O={vert:"\n      precision highp float;\n      attribute vec3 position;\n      uniform mat4 model, projection;\n      varying vec3 vPos;\n      void main() {\n        gl_Position = projection * model * vec4(position, 1);\n        vPos = vec3(model * vec4(position, 1));\n      }\n    ",frag:"\n      precision highp float;\n      varying vec3 vPos;\n      void main() {\n        gl_FragColor = vec4(vPos, 1);\n      }\n    ",attributes:{position:t},uniforms:{model:M.prop("model"),projection:M.prop("projection")},viewport:{x:0,y:0,width:e.resolution,height:e.resolution},framebuffer:T};e.cells?O.elements=e.cells:O.count=y;const k=M(O),E=[P(b),P(b)],R=M.texture({width:b,height:b,data:x,format:"rgb",type:"float"}),C=M.texture({width:b,height:b,data:w,format:"rgb",type:"float"}),U=M({vert:"\n      precision highp float;\n      attribute vec2 position;\n      void main() {\n          gl_Position = vec4(position, 0, 1);\n      }\n    ",frag:"\n      precision highp float;\n\n      uniform sampler2D tPosition, tSource, tVertex, tNormal;\n      uniform float count, bias;\n      uniform vec2 resolution;\n      uniform mat4 model;\n\n      const float INVSQRT3 = 0.5773502691896258; // 1/sqrt(3)\n\n      void main() {\n          vec2 texel = gl_FragCoord.xy/resolution;\n          vec3 vert = texture2D(tVertex, texel).rgb;\n          vert = vec3(model * vec4(vert, 1));\n          vec3 norm = texture2D(tNormal, texel).rgb;\n          norm = vec3(model * vec4(norm, 1));\n          float z = texture2D(tPosition, INVSQRT3 * vert.xy + 0.5).z;\n          float o = 0.0;\n          if ((vert.z - z) < -bias) {\n              o = 1.0;\n          }\n          vec4 src = texture2D(tSource, texel);\n          if (dot(norm, vec3(0,0,1)) > 0.0) {\n            gl_FragColor = src + vec4(o, 1, 0, 0);\n          } else {\n            gl_FragColor = src;\n          }\n      }\n    ",attributes:{position:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1]},uniforms:{tPosition:T,tSource:M.prop("source"),tVertex:R,tNormal:C,count:M.prop("count"),bias:M.prop("bias"),resolution:[b,b],model:M.prop("model")},viewport:{x:0,y:0,width:b,height:b},framebuffer:M.prop("destination"),count:6});let _=0,I=0;const L=Math.sqrt(3)/2,D=o.ortho([],-L,L,-L,L,-L,L);function P(t){return M.framebuffer({width:t,height:t,colorFormat:"rgba",colorType:"float"})}return{sample:function(){_=1-_;const t=E[_],n=E[1-_];I++;const r=o.create();o.rotateX(r,r,100*Math.random()),o.rotateY(r,r,100*Math.random()),o.rotateZ(r,r,100*Math.random()),M.clear({color:[0,0,0,1],depth:1,framebuffer:T}),k({model:r,projection:D}),M.clear({color:[0,0,0,1],depth:1,framebuffer:n}),U({source:t,destination:n,count:I,bias:e.bias,model:r})},report:function(){let t;E[1-_].use(()=>{t=M.read()});const e=new Float32Array(y);for(let n=0;n<y;n++){const r=4*n,o=t[r+1];e[n]=0===o?0:t[r+0]/o}return e},dispose:function(){R.destroy(),T.destroy(),E[0].destroy(),E[1].destroy(),A&&M.destroy()}}}},function(t,e,n){t.exports=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t};function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,e){t||n(e)}function o(t){return t?": "+t:""}function i(t,e,r){e.indexOf(t)<0&&n("invalid value"+o(r)+". must be one of: "+e)}var a=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function s(t,e){for(t+="";t.length<e;)t=" "+t;return t}function u(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function c(t,e){this.number=t,this.line=e,this.errors=[]}function f(t,e,n){this.file=t,this.line=e,this.message=n}function l(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function h(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function p(t,e){var n,r=t.split("\n"),o=1,i=0,a={unknown:new u,0:new u};a.unknown.name=a[0].name=e||l(),a.unknown.lines.push(new c(0,""));for(var s=0;s<r.length;++s){var f=r[s],h=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(f);if(h)switch(h[1]){case"line":var p=/(\d+)(\s+\d+)?/.exec(h[2]);p&&(o=0|p[1],p[2]&&((i=0|p[2])in a||(a[i]=new u)));break;case"define":var d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(h[2]);d&&(a[i].name=d[1]?(n=d[2],"undefined"!=typeof atob?atob(n):"base64:"+n):d[2])}a[i].lines.push(new c(o++,f))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function d(t){t._commandRef=l()}function m(t,e){var r=h();n(t+" in command "+(e||l())+("unknown"===r?"":" called from "+r))}function g(t,e,n,r){typeof t!==e&&m("invalid parameter type"+o(n)+". expected "+e+", got "+typeof t,r||l())}var v={};function y(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:v[t]*e}function b(t){return!(t&t-1||!t)}v[5120]=v[5121]=1,v[5122]=v[5123]=v[36193]=v[33635]=v[32819]=v[32820]=2,v[5124]=v[5125]=v[5126]=v[34042]=4;var x=e(r,{optional:function(t){t()},raise:n,commandRaise:m,command:function(t,e,n){t||m(e,n||l())},parameter:function(t,e,r){t in e||n("unknown parameter ("+t+")"+o(r)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||m("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),r||l())},constructor:function(t){Object.keys(t).forEach((function(t){a.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+a)}))},type:function(t,e,r){typeof t!==e&&n("invalid parameter type"+o(r)+". expected "+e+", got "+typeof t)},commandType:g,isTypedArray:function(e,r){t(e)||n("invalid parameter type"+o(r)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:i,shaderError:function(t,e,n,o,i){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),u=o===t.FRAGMENT_SHADER?"fragment":"vertex";g(n,"string",u+" shader source must be a string",i);var c=p(n,i),l=function(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(t);n?e.push(new f(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new f("unknown",0,t))}})),e}(a);!function(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}(c,l),Object.keys(c).forEach((function(t){var e=c[t];if(e.hasErrors){var n=[""],r=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(s(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+"\n","color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(n){var r=n.message,i=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(r);if(i){var a=i[1];switch(r=i[2],a){case"assign":a="="}e=Math.max(t.line.indexOf(a,e),0)}else e=0;o(s("| ",6)),o(s("^^^",e+3)+"\n","font-weight:bold"),o(s("| ",6)),o(r+"\n","font-weight:bold")})),o(s("| ",6)+"\n")}else o(s(t.number,4)+"|  "),o(t.line+"\n","color:red")})),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r))}function o(t,e){n.push(t),r.push(e||"")}})),r.raise("Error compiling "+u+" shader, "+c[0].name)}},linkError:function(t,e,n,o,i){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),s=p(n,i),u='Error linking program with vertex shader, "'+p(o,i)[0].name+'", and fragment shader "'+s[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+"\n"+a),r.raise(u)}},callSite:h,saveCommandRef:d,saveDrawInfo:function(t,e,n,r){function o(t){return t?r.id(t):0}function i(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}d(t),t._fragId=o(t.static.frag),t._vertId=o(t.static.vert);var a=t._uniformSet={};i(a,e.static),i(a,e.dynamic);var s=t._attributeSet={};i(s,n.static),i(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?i(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):i(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:l,texture2D:function(t,e,n){var o,i=e.width,a=e.height,s=e.channels;r(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),33071===t.wrapS&&33071===t.wrapT||r(b(i)&&b(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&r(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(r(b(i)&&b(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(o=0;o<16;++o)if(u[o]){var c=i>>o,f=a>>o;r(e.mipmask&1<<o,"missing mipmap data");var l=u[o];if(r(l.width===c&&l.height===f,"invalid shape for mip images"),r(l.format===e.format&&l.internalformat===e.internalformat&&l.type===e.type,"incompatible type for mip image"),l.compressed);else if(l.data){var h=Math.ceil(y(l.type,s)*c/l.unpackAlignment)*l.unpackAlignment;r(l.data.byteLength===h*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else t.genMipmaps||r(0==(e.mipmask&1<<o),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,o){var i=t.width,a=t.height,s=t.channels;r(i>0&&i<=o.maxTextureSize&&a>0&&a<=o.maxTextureSize,"invalid texture shape"),r(i===a,"cube map must be square"),r(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];r(c.width===i&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var h=f[l];if(h){var p=i>>l,d=a>>l;r(c.mipmask&1<<l,"missing mipmap data"),r(h.width===p&&h.height===d,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===p*d*Math.max(y(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),w=0;function S(t,e){this.id=w++,this.type=t,this.data=e}function M(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function A(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&n===r&&('"'===n||"'"===n))return['"'+M(e.substr(1,e.length-2))+'"'];var o=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(o)return t(e.substr(0,o.index)).concat(t(o[1])).concat(t(e.substr(o.index+o[0].length)));var i=e.split(".");if(1===i.length)return['"'+M(e)+'"'];for(var a=[],s=0;s<i.length;++s)a=a.concat(t(i[s]));return a}(t).join("][")+"]"}var T={DynamicVariable:S,define:function(t,e){return new S(t,A(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof S},unbox:function(t,e){return"function"==typeof t?new S(0,t):t},accessor:A},O={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},k="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function E(t){return"string"==typeof t?t.split():(x(Array.isArray(t),"invalid extension array"),t)}function R(t){return"string"==typeof t?(x("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function C(t){var n,r,o,i,a,s=t||{},u={},c=[],f=[],l="undefined"==typeof window?1:window.devicePixelRatio,h=!1,p=function(t){t&&x.raise(t)},d=function(){};if("string"==typeof s?(x("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),x(n,"invalid query string for element")):"object"==typeof s?"string"==typeof(a=s).nodeName&&"function"==typeof a.appendChild&&"function"==typeof a.getBoundingClientRect?n=s:function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(s)?o=(i=s).canvas:(x.constructor(s),"gl"in s?i=s.gl:"canvas"in s?o=R(s.canvas):"container"in s&&(r=R(s.container)),"attributes"in s&&(u=s.attributes,x.type(u,"object","invalid context attributes")),"extensions"in s&&(c=E(s.extensions)),"optionalExtensions"in s&&(f=E(s.optionalExtensions)),"onDone"in s&&(x.type(s.onDone,"function","invalid or missing onDone callback"),p=s.onDone),"profile"in s&&(h=!!s.profile),"pixelRatio"in s&&(l=+s.pixelRatio,x(l>0,"invalid pixel ratio"))):x.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?o=n:r=n),!i){if(!o){x("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(t,n,r){var o=document.createElement("canvas");function i(){var n=window.innerWidth,i=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,e(o.style,{width:n+"px",height:i+"px"})}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),window.addEventListener("resize",i,!1),i(),{canvas:o,onDestroy:function(){window.removeEventListener("resize",i),t.removeChild(o)}}}(r||document.body,0,l);if(!m)return null;o=m.canvas,d=m.onDestroy}i=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,u)}return i?{gl:i,canvas:o,container:r,extensions:c,optionalExtensions:f,pixelRatio:l,profile:h,onDone:p,onDestroy:d}:(d(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function U(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function _(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function I(){var t=U(8,(function(){return[]}));function e(e){var n=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),r=t[_(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[_(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){n(t.buffer)}}}var L=I();function D(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}L.zero=I();var P=function(t){return Object.keys(t).map((function(e){return t[e]}))},B={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var o=1;if(e.length)for(var i=0;i<e.length;++i)o*=e[i];else o=0;var a=r||L.allocType(n,o);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var o=0,i=0;i<e;++i)for(var a=t[i],s=0;s<n;++s)r[o++]=a[s]}(t,e[0],e[1],a);break;case 3:N(t,e[0],e[1],e[2],a,0);break;default:!function t(e,n,r,o,i){for(var a=1,s=r+1;s<n.length;++s)a*=n[s];var u=n[r];if(n.length-r==4){var c=n[r+1],f=n[r+2],l=n[r+3];for(s=0;s<u;++s)N(e[s],c,f,l,o,i),i+=a}else for(s=0;s<u;++s)t(e[s],n,r+1,o,i),i+=a}(t,e,0,a,0)}return a}};function N(t,e,n,r,o,i){for(var a=i,s=0;s<e;++s)for(var u=t[s],c=0;c<n;++c)for(var f=u[c],l=0;l<r;++l)o[a++]=f[l]}var F={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},j={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},G={dynamic:35048,stream:35040,static:35044},z=B.flatten,H=B.shape,q=[];function W(t){return 0|F[Object.prototype.toString.call(t)]}function V(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function Y(t,e,n,r,o,i,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)t[s++]=e[o*u+i*c+a]}q[5120]=1,q[5122]=2,q[5124]=4,q[5121]=1,q[5123]=2,q[5125]=4,q[5126]=4;var X={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},J=new Float32Array(1),Z=new Uint32Array(J.buffer);function Q(t){for(var e=L.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{J[0]=t[n];var r=Z[0],o=r>>>31<<15,i=(r<<1>>>24)-127,a=r>>13&1023;if(i<-24)e[n]=o;else if(i<-14){var s=-14-i;e[n]=o+(a+1024>>s)}else e[n]=i>15?o+31744:o+(i+15<<10)+a}return e}function K(e){return Array.isArray(e)||t(e)}var $=function(t){return!(t&t-1||!t)},tt=[9984,9986,9985,9987],et=[0,6409,6410,6407,6408],nt={};function rt(t){return"[object "+t+"]"}nt[6409]=nt[6406]=nt[6402]=1,nt[34041]=nt[6410]=2,nt[6407]=nt[35904]=3,nt[6408]=nt[35906]=4;var ot=rt("HTMLCanvasElement"),it=rt("CanvasRenderingContext2D"),at=rt("ImageBitmap"),st=rt("HTMLImageElement"),ut=rt("HTMLVideoElement"),ct=Object.keys(F).concat([ot,it,at,st,ut]),ft=[];ft[5121]=1,ft[5126]=4,ft[36193]=2,ft[5123]=2,ft[5125]=4;var lt=[];function ht(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function pt(t){return!!Array.isArray(t)&&!(0===t.length||!K(t[0]))}function dt(t){return Object.prototype.toString.call(t)}function mt(t){return dt(t)===ot}function gt(t){if(!t)return!1;var e=dt(t);return ct.indexOf(e)>=0||ht(t)||pt(t)||D(t)}function vt(t){return 0|F[Object.prototype.toString.call(t)]}function yt(t,e){return L.allocType(36193===t.type?5126:t.type,e)}function bt(t,e){36193===t.type?(t.data=Q(e),L.freeType(e)):t.data=e}function xt(t,e,n,r,o,i){var a;if(a=void 0!==lt[t]?lt[t]:nt[t]*ft[e],i&&(a*=6),o){for(var s=0,u=n;u>=1;)s+=a*u*u,u/=2;return s}return a*n*r}function wt(n,r,o,i,a,s,u){var c={"don't care":4352,"dont care":4352,nice:4354,fast:4353},f={repeat:10497,clamp:33071,mirror:33648},l={nearest:9728,linear:9729},h=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},l),p={none:0,browser:37444},d={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},g={};r.ext_srgb&&(m.srgb=35904,m.srgba=35906),r.oes_texture_float&&(d.float32=d.float=5126),r.oes_texture_half_float&&(d.float16=d["half float"]=36193),r.webgl_depth_texture&&(e(m,{depth:6402,"depth stencil":34041}),e(d,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(g,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(g,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(g,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(g["rgb etc1"]=36196);var v=Array.prototype.slice.call(n.getParameter(34467));Object.keys(g).forEach((function(t){var e=g[t];v.indexOf(e)>=0&&(m[t]=e)}));var y=Object.keys(m);o.textureFormats=y;var b=[];Object.keys(m).forEach((function(t){var e=m[t];b[e]=t}));var w=[];Object.keys(d).forEach((function(t){var e=d[t];w[e]=t}));var S=[];Object.keys(l).forEach((function(t){S[l[t]]=t}));var M=[];Object.keys(h).forEach((function(t){var e=h[t];M[e]=t}));var A=[];Object.keys(f).forEach((function(t){A[f[t]]=t}));var T=y.reduce((function(t,e){var n=m[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n?t[n]=n:32855===n||e.indexOf("rgba")>=0?t[n]=6408:t[n]=6407,t}),{});function O(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function E(t,e){if("object"==typeof e&&e){if("premultiplyAlpha"in e&&(x.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(x.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(x.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(x.parameter(e.colorSpace,p,"invalid colorSpace"),t.colorSpace=p[e.colorSpace]),"type"in e){var n=e.type;x(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),x(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),x(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(n,d,"invalid texture type"),t.type=d[n]}var i=t.width,a=t.height,s=t.channels,u=!1;"shape"in e?(x(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),i=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],x(s>0&&s<=4,"invalid number of channels"),u=!0),x(i>=0&&i<=o.maxTextureSize,"invalid width"),x(a>=0&&a<=o.maxTextureSize,"invalid height")):("radius"in e&&(i=a=e.radius,x(i>=0&&i<=o.maxTextureSize,"invalid radius")),"width"in e&&(i=e.width,x(i>=0&&i<=o.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,x(a>=0&&a<=o.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,x(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|i,t.height=0|a,t.channels=0|s;var c=!1;if("format"in e){var f=e.format;x(r.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(f,m,"invalid texture format");var l=t.internalformat=m[f];t.format=T[l],f in d&&("type"in e||(t.type=d[f])),f in g&&(t.compressed=!0),c=!0}!u&&c?t.channels=nt[t.format]:u&&!c?t.channels!==et[t.format]&&(t.format=t.internalformat=et[t.channels]):c&&u&&x(t.channels===nt[t.format],"number of channels inconsistent with specified format")}}function R(t){n.pixelStorei(37440,t.flipY),n.pixelStorei(37441,t.premultiplyAlpha),n.pixelStorei(37443,t.colorSpace),n.pixelStorei(3317,t.unpackAlignment)}function C(){O.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function U(e,n){var r=null;if(gt(n)?r=n:n&&(x.type(n,"object","invalid pixel data type"),E(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),gt(n.data)&&(r=n.data)),x(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){x(!r,"can not specify copy and data field for the same texture");var i=a.viewportWidth,s=a.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,x(e.xOffset>=0&&e.xOffset<i&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=i&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||5121!==e.type||(e.type=vt(r));else if(ht(r))e.channels=e.channels||4,function(t,e){var n=e.length;switch(t.type){case 5121:case 5123:case 5125:case 5126:var r=L.allocType(t.type,n);r.set(e),t.data=r;break;case 36193:t.data=Q(e);break;default:x.raise("unsupported texture type, must specify a typed array")}}(e,r),e.alignment=1,e.needsFree=!0;else if(D(r)){var u=r.data;Array.isArray(u)||5121!==e.type||(e.type=vt(u));var c,f,l,h,p,d,m=r.shape,g=r.stride;3===m.length?(l=m[2],d=g[2]):(x(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,d=1),c=m[0],f=m[1],h=g[0],p=g[1],e.alignment=1,e.width=c,e.height=f,e.channels=l,e.format=e.internalformat=et[l],e.needsFree=!0,function(t,e,n,r,o,i){for(var a=t.width,s=t.height,u=t.channels,c=yt(t,a*s*u),f=0,l=0;l<s;++l)for(var h=0;h<a;++h)for(var p=0;p<u;++p)c[f++]=e[n*h+r*l+o*p+i];bt(t,c)}(e,u,h,p,d,r.offset)}else if(mt(r)||dt(r)===it)mt(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return dt(t)===at}(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(function(t){return dt(t)===st}(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(function(t){return dt(t)===ut}(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(pt(r)){var v=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=K(r[0][0])?b||r[0][0].length:b||1;for(var w=B.shape(r),S=1,M=0;M<w.length;++M)S*=w[M];var A=yt(e,S);B.flatten(r,w,"",A),bt(e,A),e.alignment=1,e.width=v,e.height=y,e.channels=b,e.format=e.internalformat=et[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type?x(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===e.type&&x(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function _(t,e,r){var o=t.element,a=t.data,s=t.internalformat,u=t.format,c=t.type,f=t.width,l=t.height,h=t.channels;if(R(t),o)n.texImage2D(e,r,u,u,c,o);else if(t.compressed)n.compressedTexImage2D(e,r,s,f,l,0,a);else if(t.needsCopy)i(),n.copyTexImage2D(e,r,u,t.xOffset,t.yOffset,f,l,0);else{var p=!a;p&&(a=L.zero.allocType(c,f*l*h)),n.texImage2D(e,r,u,f,l,0,u,c,a),p&&a&&L.zero.freeType(a)}}function I(t,e,r,o,a){var s=t.element,u=t.data,c=t.internalformat,f=t.format,l=t.type,h=t.width,p=t.height;R(t),s?n.texSubImage2D(e,a,r,o,f,l,s):t.compressed?n.compressedTexSubImage2D(e,a,r,o,c,h,p,u):t.needsCopy?(i(),n.copyTexSubImage2D(e,a,r,o,t.xOffset,t.yOffset,h,p)):n.texSubImage2D(e,a,r,o,h,p,f,l,u)}var N=[];function F(){return N.pop()||new C}function j(t){t.needsFree&&L.freeType(t.data),C.call(t),N.push(t)}function G(){O.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function z(t,e,n){var r=t.images[0]=F();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function H(t,e){var n=null;if(gt(e))k(n=t.images[0]=F(),t),U(n,e),t.mipmask=1;else if(E(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,o=0;o<r.length;++o)k(n=t.images[o]=F(),t),n.width>>=o,n.height>>=o,U(n,r[o]),t.mipmask|=1<<o;else k(n=t.images[0]=F(),t),U(n,e),t.mipmask=1;k(t,t.images[0]),(t.compressed&&33776===t.internalformat||33777===t.internalformat||33778===t.internalformat||33779===t.internalformat)&&x(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function q(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;_(n[r],e,r)}}var W=[];function V(){var t=W.pop()||new G;O.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function Y(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&j(e[n]),e[n]=null;W.push(t)}function X(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function J(t,e){if("min"in e){var n=e.min;x.parameter(n,h),t.minFilter=h[n],tt.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;x.parameter(r,l),t.magFilter=l[r]}var i=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(x.parameter(s,f),i=a=f[s]):Array.isArray(s)&&(x.parameter(s[0],f),x.parameter(s[1],f),i=f[s[0]],a=f[s[1]])}else{if("wrapS"in e){var u=e.wrapS;x.parameter(u,f),i=f[u]}if("wrapT"in e){var p=e.wrapT;x.parameter(p,f),a=f[p]}}if(t.wrapS=i,t.wrapT=a,"anisotropic"in e){var d=e.anisotropic;x("number"==typeof d&&d>=1&&d<=o.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(typeof e.mipmap){case"string":x.parameter(e.mipmap,c,"invalid mipmap hint"),t.mipmapHint=c[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":x(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:x.raise("invalid mipmap type")}!m||"min"in e||(t.minFilter=9984)}}function Z(t,e){n.texParameteri(e,10241,t.minFilter),n.texParameteri(e,10240,t.magFilter),n.texParameteri(e,10242,t.wrapS),n.texParameteri(e,10243,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(n.hint(33170,t.mipmapHint),n.generateMipmap(e))}var rt=0,ot={},ct=o.maxTextureUnits,ft=Array(ct).map((function(){return null}));function lt(t){O.call(this),this.mipmask=0,this.internalformat=6408,this.id=rt++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new X,u.profile&&(this.stats={size:0})}function wt(t){n.activeTexture(33984),n.bindTexture(t.target,t.texture)}function St(){var t=ft[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(3553,null)}function Mt(t){var e=t.texture;x(e,"must not double destroy texture");var r=t.unit,o=t.target;r>=0&&(n.activeTexture(33984+r),n.bindTexture(o,null),ft[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ot[t.id],s.textureCount--}return e(lt.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<ct;++e){var r=ft[e];if(r){if(r.bindCount>0)continue;r.unit=-1}ft[e]=this,t=e;break}t>=ct&&x.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),this.unit=t,n.activeTexture(33984+t),n.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Mt(this)}}),u.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(ot).forEach((function(e){t+=ot[e].stats.size})),t}),{create2D:function(t,e){var r=new lt(3553);function i(t,e){var n=r.texInfo;X.call(n);var a=V();return"number"==typeof t?z(a,0|t,"number"==typeof e?0|e:0|t):t?(x.type(t,"object","invalid arguments to regl.texture"),J(n,t),H(a,t)):z(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),x.texture2D(n,a,o),r.internalformat=a.internalformat,i.width=a.width,i.height=a.height,wt(r),q(a,3553),Z(n,3553),St(),Y(a),u.profile&&(r.stats.size=xt(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),i.format=b[r.internalformat],i.type=w[r.type],i.mag=S[n.magFilter],i.min=M[n.minFilter],i.wrapS=A[n.wrapS],i.wrapT=A[n.wrapT],i}return ot[r.id]=r,s.textureCount++,i(t,e),i.subimage=function(t,e,n,o){x(!!t,"must specify image data");var a=0|e,s=0|n,u=0|o,c=F();return k(c,r),c.width=0,c.height=0,U(c,t),c.width=c.width||(r.width>>u)-a,c.height=c.height||(r.height>>u)-s,x(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),x(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),x(r.mipmask&1<<u,"missing mipmap data"),x(c.data||c.element||c.needsCopy,"missing image data"),wt(r),I(c,3553,a,s,u),St(),j(c),i},i.resize=function(t,e){var o,a=0|t,s=0|e||a;if(a===r.width&&s===r.height)return i;i.width=r.width=a,i.height=r.height=s,wt(r);for(var c=r.channels,f=r.type,l=0;r.mipmask>>l;++l){var h=a>>l,p=s>>l;if(!h||!p)break;o=L.zero.allocType(f,h*p*c),n.texImage2D(3553,l,r.format,h,p,0,r.format,r.type,o),o&&L.zero.freeType(o)}return St(),u.profile&&(r.stats.size=xt(r.internalformat,r.type,a,s,!1,!1)),i},i._reglType="texture2d",i._texture=r,u.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i},createCube:function(t,e,r,i,a,c){var f=new lt(34067);ot[f.id]=f,s.cubeCount++;var l=new Array(6);function h(t,e,n,r,i,a){var s,c=f.texInfo;for(X.call(c),s=0;s<6;++s)l[s]=V();if("number"!=typeof t&&t)if("object"==typeof t)if(e)H(l[0],t),H(l[1],e),H(l[2],n),H(l[3],r),H(l[4],i),H(l[5],a);else if(J(c,t),E(f,t),"faces"in t){var p=t.faces;for(x(Array.isArray(p)&&6===p.length,"cube faces must be a length 6 array"),s=0;s<6;++s)x("object"==typeof p[s]&&!!p[s],"invalid input for cube map face"),k(l[s],f),H(l[s],p[s])}else for(s=0;s<6;++s)H(l[s],t);else x.raise("invalid arguments to cube map");else{var d=0|t||1;for(s=0;s<6;++s)z(l[s],d,d)}for(k(f,l[0]),o.npotTextureCube||x($(f.width)&&$(f.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?f.mipmask=(l[0].width<<1)-1:f.mipmask=l[0].mipmask,x.textureCube(f,c,l,o),f.internalformat=l[0].internalformat,h.width=l[0].width,h.height=l[0].height,wt(f),s=0;s<6;++s)q(l[s],34069+s);for(Z(c,34067),St(),u.profile&&(f.stats.size=xt(f.internalformat,f.type,h.width,h.height,c.genMipmaps,!0)),h.format=b[f.internalformat],h.type=w[f.type],h.mag=S[c.magFilter],h.min=M[c.minFilter],h.wrapS=A[c.wrapS],h.wrapT=A[c.wrapT],s=0;s<6;++s)Y(l[s]);return h}return h(t,e,r,i,a,c),h.subimage=function(t,e,n,r,o){x(!!e,"must specify image data"),x("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var i=0|n,a=0|r,s=0|o,u=F();return k(u,f),u.width=0,u.height=0,U(u,e),u.width=u.width||(f.width>>s)-i,u.height=u.height||(f.height>>s)-a,x(f.type===u.type&&f.format===u.format&&f.internalformat===u.internalformat,"incompatible format for texture.subimage"),x(i>=0&&a>=0&&i+u.width<=f.width&&a+u.height<=f.height,"texture.subimage write out of bounds"),x(f.mipmask&1<<s,"missing mipmap data"),x(u.data||u.element||u.needsCopy,"missing image data"),wt(f),I(u,34069+t,i,a,s),St(),j(u),h},h.resize=function(t){var e=0|t;if(e!==f.width){h.width=f.width=e,h.height=f.height=e,wt(f);for(var r=0;r<6;++r)for(var o=0;f.mipmask>>o;++o)n.texImage2D(34069+r,o,f.format,e>>o,e>>o,0,f.format,f.type,null);return St(),u.profile&&(f.stats.size=xt(f.internalformat,f.type,h.width,h.height,!1,!0)),h}},h._reglType="textureCube",h._texture=f,u.profile&&(h.stats=f.stats),h.destroy=function(){f.decRef()},h},clear:function(){for(var t=0;t<ct;++t)n.activeTexture(33984+t),n.bindTexture(3553,null),ft[t]=null;P(ot).forEach(Mt),s.cubeCount=0,s.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<ct;++t){var e=ft[t];e&&(e.bindCount=0,e.unit=-1,ft[t]=null)}P(ot).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(3553===t.target)n.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(34069+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);Z(t.texInfo,t.target)}))}}}lt[32854]=2,lt[32855]=2,lt[36194]=2,lt[34041]=4,lt[33776]=.5,lt[33777]=.5,lt[33778]=1,lt[33779]=1,lt[35986]=.5,lt[35987]=1,lt[34798]=1,lt[35840]=.5,lt[35841]=.25,lt[35842]=.5,lt[35843]=.25,lt[36196]=.5;var St=[];function Mt(t,e,n){return St[t]*e*n}St[32854]=2,St[32855]=2,St[36194]=2,St[33189]=2,St[36168]=1,St[34041]=4,St[35907]=4,St[34836]=16,St[34842]=8,St[34843]=6;var At=[6407,6408],Tt=[];Tt[6408]=4,Tt[6407]=3;var Ot=[];Ot[5121]=1,Ot[5126]=4,Ot[36193]=2;var kt=[32854,32855,36194,35907,34842,34843,34836],Et={};function Rt(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Ct(e,n,r,o,i,a,s){function u(u){var c;null===n.next?(x(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=5121):(x(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(x(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&x(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):x(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,l=0,h=o.framebufferWidth,p=o.framebufferHeight,d=null;t(u)?d=u:u&&(x.type(u,"object","invalid arguments to regl.read()"),f=0|u.x,l=0|u.y,x(f>=0&&f<o.framebufferWidth,"invalid x offset for regl.read"),x(l>=0&&l<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(u.width||o.framebufferWidth-f),p=0|(u.height||o.framebufferHeight-l),d=u.data||null),d&&(5121===c?x(d instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&x(d instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),x(h>0&&h+f<=o.framebufferWidth,"invalid width for read pixels"),x(p>0&&p+l<=o.framebufferHeight,"invalid height for read pixels"),r();var m=h*p*4;return d||(5121===c?d=new Uint8Array(m):5126===c&&(d=d||new Float32Array(m))),x.isTypedArray(d,"data buffer for regl.read() must be a typedarray"),x(d.byteLength>=m,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(f,l,h,p,6408,c,d),d}return function(t){return t&&"framebuffer"in t?function(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=u(t)})),e}(t):u(t)}}function Ut(t){return Array.prototype.slice.call(t)}function _t(t){return Ut(t).join("")}Et[36053]="complete",Et[36054]="incomplete attachment",Et[36057]="incomplete dimensions",Et[36055]="incomplete, missing attachment",Et[36061]="unsupported";var It="xyzw".split(""),Lt="profile",Dt="framebuffer",Pt="vert",Bt="frag",Nt="elements",Ft="primitive",jt="count",Gt="offset",zt="instances",Ht=Dt+"Width",qt=Dt+"Height",Wt=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Vt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Yt=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Xt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Jt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Zt={frag:35632,vert:35633},Qt={cw:2304,ccw:2305};function Kt(e){return Array.isArray(e)||t(e)||D(e)}function $t(t){return t.sort((function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1}))}function te(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function ee(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ne(t){return new te(!1,!1,!1,t)}function re(t,e){var n=t.type;if(0===n){var r=t.data.length;return new te(!0,r>=1,r>=2,e)}if(4===n){var o=t.data;return new te(o.thisDep,o.contextDep,o.propDep,e)}return new te(3===n,2===n,1===n,e)}var oe=new te(!1,!1,!1,(function(){}));function ie(t,n,r,o,i,a,s,u,c,f,l,h,p,d,m){var g=f.Record,v={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(v.min=32775,v.max=32776);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,w={dirty:!0,profile:m.profile},S={},M=[],A={},O={};function k(t){return t.replace(".","_")}function E(t,e,n){var r=k(t);M.push(t),S[r]=w[r]=!!n,A[r]=e}function R(t,e,n){var r=k(t);M.push(t),Array.isArray(n)?(w[r]=n.slice(),S[r]=n.slice()):w[r]=S[r]=n,O[r]=e}E("dither",3024),E("blend.enable",3042),R("blend.color","blendColor",[0,0,0,0]),R("blend.equation","blendEquationSeparate",[32774,32774]),R("blend.func","blendFuncSeparate",[1,0,1,0]),E("depth.enable",2929,!0),R("depth.func","depthFunc",513),R("depth.range","depthRange",[0,1]),R("depth.mask","depthMask",!0),R("colorMask","colorMask",[!0,!0,!0,!0]),E("cull.enable",2884),R("cull.face","cullFace",1029),R("frontFace","frontFace",2305),R("lineWidth","lineWidth",1),E("polygonOffset.enable",32823),R("polygonOffset.offset","polygonOffset",[0,0]),E("sample.alpha",32926),E("sample.enable",32928),R("sample.coverage","sampleCoverage",[1,!1]),E("stencil.enable",2960),R("stencil.mask","stencilMask",-1),R("stencil.func","stencilFunc",[519,0,-1]),R("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),R("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),E("scissor.enable",3089),R("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),R("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var C={gl:t,context:p,strings:n,next:S,current:w,draw:h,elements:a,buffer:i,shader:l,attributes:f.state,uniforms:c,framebuffer:u,extensions:r,timer:d,isBufferArgs:Kt},_={primTypes:X,compareFuncs:Xt,blendFuncs:Vt,blendEquations:v,stencilOps:Jt,glTypes:j,orientationType:Qt};x.optional((function(){C.isArrayLike=K})),b&&(_.backBuffer=[1029],_.drawBuffer=U(o.maxDrawbuffers,(function(t){return 0===t?[0]:U(t,(function(t){return 36064+t}))})));var I=0;function L(){var t=function(){var t=0,n=[],r=[];function o(){var n=[],r=[];return e((function(){n.push.apply(n,Ut(arguments))}),{def:function(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Ut(arguments)),n.push(";")),e},toString:function(){return _t([r.length>0?"var "+r.join(",")+";":"",_t(n)])}})}function i(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Ut(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}var a=o(),s={};return{global:a,link:function(e){for(var o=0;o<r.length;++o)if(r[o]===e)return n[o];var i="g"+t++;return n.push(i),r.push(e),i},block:o,proc:function(t,n){var r=[];function o(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var a=0;a<n;++a)o();var u=i(),c=u.toString;return s[t]=e(u,{arg:o,toString:function(){return _t(["function(",r.join(),"){",c(),"}"])}})},scope:i,cond:function(){var t=_t(arguments),n=i(),r=i(),o=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,Ut(arguments)),this},else:function(){return r.apply(r,Ut(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),_t(["if(",t,"){",o(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(s).forEach((function(e){t.push('"',e,'":',s[e].toString(),",")})),t.push("}");var e=_t(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,r)}}}(),r=t.link,o=t.global;t.id=I++,t.batchId="0";var i=r(C),a=t.shared={props:"a0"};Object.keys(C).forEach((function(t){a[t]=o.def(i,".",t)})),x.optional((function(){t.CHECK=r(x),t.commandStr=x.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},_.invalidBlendCombinations=Yt}));var s=t.next={},u=t.current={};Object.keys(O).forEach((function(t){Array.isArray(w[t])&&(s[t]=o.def(a.next,".",t),u[t]=o.def(a.current,".",t))}));var c=t.constants={};Object.keys(_).forEach((function(t){c[t]=o.def(JSON.stringify(_[t]))})),t.invoke=function(e,n){switch(n.type){case 0:var o=["this",a.context,a.props,t.batchId];return e.def(r(n.data),".call(",o.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(a.props,n.data);case 2:return e.def(a.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref}},t.attribCache={};var l={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in l)return l[e];var o=f.scope[e];return o||(o=f.scope[e]=new g),l[e]=r(o)},t}function D(t,e,r,s,c){var f=t.static,h=t.dynamic;x.optional((function(){var t=[Dt,Pt,Bt,Nt,Ft,Gt,jt,zt,Lt].concat(M);function e(e){Object.keys(e).forEach((function(e){x.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',c.commandStr)}))}e(f),e(h)}));var p=function(t,e){var n=t.static,r=t.dynamic;if(Dt in n){var o=n[Dt];return o?(o=u.getFramebuffer(o),x.command(o,"invalid framebuffer object"),ne((function(t,e){var n=t.link(o),r=t.shared;e.set(r.framebuffer,".next",n);var i=r.context;return e.set(i,"."+Ht,n+".width"),e.set(i,"."+qt,n+".height"),n}))):ne((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Ht,r+".drawingBufferWidth"),e.set(r,"."+qt,r+".drawingBufferHeight"),"null"}))}if(Dt in r){var i=r[Dt];return re(i,(function(t,e){var n=t.invoke(e,i),r=t.shared,o=r.framebuffer,a=e.def(o,".getFramebuffer(",n,")");x.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(o,".next",a);var s=r.context;return e.set(s,"."+Ht,a+"?"+a+".width:"+s+".drawingBufferWidth"),e.set(s,"."+qt,a+"?"+a+".height:"+s+".drawingBufferHeight"),a}))}return null}(t),d=function(t,e,n){var r=t.static,o=t.dynamic;function i(t){if(t in r){var i=r[t];x.commandType(i,"object","invalid "+t,n.commandStr);var a,s,u=!0,c=0|i.x,f=0|i.y;return"width"in i?(a=0|i.width,x.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in i?(s=0|i.height,x.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new te(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in i||(r=e.def(n,".",Ht,"-",c));var o=s;return"height"in i||(o=e.def(n,".",qt,"-",f)),[c,f,r,o]}))}if(t in o){var l=o[t],h=re(l,(function(e,n){var r=e.invoke(n,l);x.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var o=e.shared.context,i=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",o,".",Ht,"-",i,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",o,".",qt,"-",a,")");return x.optional((function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)})),[i,a,s,u]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new te(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Ht),e.def(n,".",qt)]})):null}var a=i("viewport");if(a){var s=a;a=new te(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n}))}return{viewport:a,scissor_box:i("scissor.box")}}(t,p,c),m=function(t,e){var n=t.static,r=t.dynamic,o=function(){if(Nt in n){var t=n[Nt];Kt(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),x.command(t,"invalid elements",e.commandStr));var o=ne((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return o.value=t,o}if(Nt in r){var i=r[Nt];return re(i,(function(t,e){var n=t.shared,r=n.isBufferArgs,o=n.elements,a=t.invoke(e,i),s=e.def("null"),u=e.def(r,"(",a,")"),c=t.cond(u).then(s,"=",o,".createStream(",a,");").else(s,"=",o,".getElements(",a,");");return x.optional((function(){t.assert(c.else,"!"+a+"||"+s,"invalid elements")})),e.entry(c),e.exit(t.cond(u).then(o,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}();function i(t,i){if(t in n){var a=0|n[t];return x.command(!i||a>=0,"invalid "+t,e.commandStr),ne((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var s=r[t];return re(s,(function(e,n){var r=e.invoke(n,s);return i&&(e.OFFSET=r,x.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?ne((function(t,e){return t.OFFSET="0",0})):null}var s=i(Gt,!0);return{elements:o,primitive:function(){if(Ft in n){var t=n[Ft];return x.commandParameter(t,X,"invalid primitve",e.commandStr),ne((function(e,n){return X[t]}))}if(Ft in r){var i=r[Ft];return re(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return x.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(X))})),e.def(n,"[",r,"]")}))}return o?ee(o)?o.value?ne((function(t,e){return e.def(t.ELEMENTS,".primType")})):ne((function(){return 4})):new te(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)})):null}(),count:function(){if(jt in n){var t=0|n[jt];return x.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ne((function(){return t}))}if(jt in r){var i=r[jt];return re(i,(function(t,e){var n=t.invoke(e,i);return x.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(ee(o)){if(o)return s?new te(s.thisDep,s.contextDep,s.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return x.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ne((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=ne((function(){return-1}));return x.optional((function(){a.MISSING=!0})),a}var u=new te(o.thisDep||s.thisDep,o.contextDep||s.contextDep,o.propDep||s.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return x.optional((function(){u.DYNAMIC=!0})),u}return null}(),instances:i(zt,!1),offset:s}}(t,c),b=function(t,e){var n=t.static,r=t.dynamic,i={};return M.forEach((function(t){var a=k(t);function s(e,o){if(t in n){var s=e(n[t]);i[a]=ne((function(){return s}))}else if(t in r){var u=r[t];i[a]=re(u,(function(t,e){return o(t,e,t.invoke(e,u))}))}}switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return s((function(n){return x.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return x.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case"depth.func":return s((function(n){return x.commandParameter(n,Xt,"invalid "+t,e.commandStr),Xt[n]}),(function(e,n,r){var o=e.constants.compareFuncs;return x.optional((function(){e.assert(n,r+" in "+o,"invalid "+t+", must be one of "+Object.keys(Xt))})),n.def(o,"[",r,"]")}));case"depth.range":return s((function(t){return x.command(K(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return x.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case"blend.func":return s((function(t){x.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,o="dstRGB"in t?t.dstRGB:t.dst,i="dstAlpha"in t?t.dstAlpha:t.dst;return x.commandParameter(n,Vt,a+".srcRGB",e.commandStr),x.commandParameter(r,Vt,a+".srcAlpha",e.commandStr),x.commandParameter(o,Vt,a+".dstRGB",e.commandStr),x.commandParameter(i,Vt,a+".dstAlpha",e.commandStr),x.command(-1===Yt.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",e.commandStr),[Vt[n],Vt[o],Vt[r],Vt[i]]}),(function(e,n,r){var o=e.constants.blendFuncs;function i(i,a){var s=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return x.optional((function(){e.assert(n,s+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Vt))})),s}x.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=i("src","RGB"),s=i("dst","RGB");x.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(o,"[",a,"]"),c=n.def(o,"[",i("src","Alpha"),"]");return[u,n.def(o,"[",s,"]"),c,n.def(o,"[",i("dst","Alpha"),"]")]}));case"blend.equation":return s((function(n){return"string"==typeof n?(x.commandParameter(n,v,"invalid "+t,e.commandStr),[v[n],v[n]]):"object"==typeof n?(x.commandParameter(n.rgb,v,t+".rgb",e.commandStr),x.commandParameter(n.alpha,v,t+".alpha",e.commandStr),[v[n.rgb],v[n.alpha]]):void x.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var o=e.constants.blendEquations,i=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return x.optional((function(){function n(t,n,r){e.assert(t,r+" in "+o,"invalid "+n+", must be one of "+Object.keys(v))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")})),s.then(i,"=",a,"=",o,"[",r,"];"),s.else(i,"=",o,"[",r,".rgb];",a,"=",o,"[",r,".alpha];"),n(s),[i,a]}));case"blend.color":return s((function(t){return x.command(K(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),U(4,(function(e){return+t[e]}))}),(function(t,e,n){return x.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),U(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case"stencil.mask":return s((function(t){return x.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return x.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case"stencil.func":return s((function(n){x.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",o=n.ref||0,i="mask"in n?n.mask:-1;return x.commandParameter(r,Xt,t+".cmp",e.commandStr),x.commandType(o,"number",t+".ref",e.commandStr),x.commandType(i,"number",t+".mask",e.commandStr),[Xt[r],o,i]}),(function(t,e,n){var r=t.constants.compareFuncs;return x.optional((function(){function o(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return s((function(n){x.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",o=n.zfail||"keep",i=n.zpass||"keep";return x.commandParameter(r,Jt,t+".fail",e.commandStr),x.commandParameter(o,Jt,t+".zfail",e.commandStr),x.commandParameter(i,Jt,t+".zpass",e.commandStr),["stencil.opBack"===t?1029:1028,Jt[r],Jt[o],Jt[i]]}),(function(e,n,r){var o=e.constants.stencilOps;function i(i){return x.optional((function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(Jt))})),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",7680)}return x.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return s((function(t){x.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return x.commandType(n,"number",a+".factor",e.commandStr),x.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){return x.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case"cull.face":return s((function(t){var n=0;return"front"===t?n=1028:"back"===t&&(n=1029),x.command(!!n,a,e.commandStr),n}),(function(t,e,n){return x.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',1028,":",1029)}));case"lineWidth":return s((function(t){return x.command("number"==typeof t&&t>=o.lineWidthDims[0]&&t<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return x.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")})),n}));case"frontFace":return s((function(t){return x.commandParameter(t,Qt,a,e.commandStr),Qt[t]}),(function(t,e,n){return x.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?2304:2305')}));case"colorMask":return s((function(t){return x.command(K(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return x.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),U(4,(function(t){return"!!"+n+"["+t+"]"}))}));case"sample.coverage":return s((function(t){x.command("object"==typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return x.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return x.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),i}(t,c),w=function(t){var e=t.static,r=t.dynamic;function o(t){if(t in e){var o=n.id(e[t]);x.optional((function(){l.shader(Zt[t],o,x.guessCommand())}));var i=ne((function(){return o}));return i.id=o,i}if(t in r){var a=r[t];return re(a,(function(e,n){var r=e.invoke(n,a),o=n.def(e.shared.strings,".id(",r,")");return x.optional((function(){n(e.shared.shader,".shader(",Zt[t],",",o,",",e.command,");")})),o}))}return null}var i,a=o(Bt),s=o(Pt),u=null;return ee(a)&&ee(s)?(u=l.program(s.id,a.id),i=ne((function(t,e){return t.link(u)}))):i=new te(a&&a.thisDep||s&&s.thisDep,a&&a.contextDep||s&&s.contextDep,a&&a.propDep||s&&s.propDep,(function(t,e){var n,r=t.shared.shader;n=a?a.append(t,e):e.def(r,".",Bt);var o=r+".program("+(s?s.append(t,e):e.def(r,".",Pt))+","+n;return x.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:a,vert:s,progVar:i,program:u}}(t);function S(t){var e=d[t];e&&(b[t]=e)}S("viewport"),S(k("scissor.box"));var A=Object.keys(b).length>0,T={framebuffer:p,draw:m,shader:w,state:b,dirty:A};return T.profile=function(t){var e,n=t.static,r=t.dynamic;if(Lt in n){var o=!!n[Lt];(e=ne((function(t,e){return o}))).enable=o}else if(Lt in r){var i=r[Lt];e=re(i,(function(t,e){return t.invoke(e,i)}))}return e}(t),T.uniforms=function(t,e){var n=t.static,r=t.dynamic,o={};return Object.keys(n).forEach((function(t){var r,i=n[t];if("number"==typeof i||"boolean"==typeof i)r=ne((function(){return i}));else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?r=ne((function(t){return t.link(i)})):"framebuffer"===a||"framebufferCube"===a?(x.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ne((function(t){return t.link(i.color[0])}))):x.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else K(i)?r=ne((function(e){return e.global.def("[",U(i.length,(function(n){return x.command("number"==typeof i[n]||"boolean"==typeof i[n],"invalid uniform "+t,e.commandStr),i[n]})),"]")})):x.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=i,o[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];o[t]=re(e,(function(t,n){return t.invoke(n,e)}))})),o}(r,c),T.attributes=function(t,e){var r=t.static,o=t.dynamic,a={};return Object.keys(r).forEach((function(t){var o=r[t],s=n.id(t),u=new g;if(Kt(o))u.state=1,u.buffer=i.getBuffer(i.create(o,34962,!1,!0)),u.type=0;else{var c=i.getBuffer(o);if(c)u.state=1,u.buffer=c,u.type=0;else if(x.command("object"==typeof o&&o,"invalid data for attribute "+t,e.commandStr),"constant"in o){var f=o.constant;u.buffer="null",u.state=2,"number"==typeof f?u.x=f:(x.command(K(f)&&f.length>0&&f.length<=4,"invalid constant for attribute "+t,e.commandStr),It.forEach((function(t,e){e<f.length&&(u[t]=f[e])})))}else{c=Kt(o.buffer)?i.getBuffer(i.create(o.buffer,34962,!1,!0)):i.getBuffer(o.buffer),x.command(!!c,'missing buffer for attribute "'+t+'"',e.commandStr);var l=0|o.offset;x.command(l>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var h=0|o.stride;x.command(h>=0&&h<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var p=0|o.size;x.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var d=!!o.normalized,m=0;"type"in o&&(x.commandParameter(o.type,j,"invalid type for attribute "+t,e.commandStr),m=j[o.type]);var v=0|o.divisor;"divisor"in o&&(x.command(0===v||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),x.command(v>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),x.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach((function(e){x.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),u.buffer=c,u.state=1,u.size=p,u.normalized=d,u.type=m||c.dtype,u.offset=l,u.stride=h,u.divisor=v}}a[t]=ne((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(t){r[t]=u[t]})),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(o).forEach((function(t){var e=o[t];a[t]=re(e,(function(n,r){var o=n.invoke(r,e),i=n.shared,a=n.constants,s=i.isBufferArgs,u=i.buffer;x.optional((function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+s+"("+o+")||"+u+".getBuffer("+o+")||"+u+".getBuffer("+o+".buffer)||"+s+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+i.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},f=new g;f.state=1,Object.keys(f).forEach((function(t){c[t]=r.def(""+f[t])}));var l=c.buffer,h=c.type;function p(t){r(c[t],"=",o,".",t,"|0;")}return r("if(",s,"(",o,")){",c.isStream,"=true;",l,"=",u,".createStream(",34962,",",o,");",h,"=",l,".dtype;","}else{",l,"=",u,".getBuffer(",o,");","if(",l,"){",h,"=",l,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[It[0]],"=",o,".constant;",It.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",It.map((function(t,e){return c[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",o,".buffer)){",l,"=",u,".createStream(",34962,",",o,".buffer);","}else{",l,"=",u,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",l,".dtype;",c.normalized,"=!!",o,".normalized;"),p("size"),p("offset"),p("stride"),p("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",l,");","}"),c}))})),a}(e,c),T.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ne((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=re(e,(function(t,n){return t.invoke(n,e)}))})),r}(s),T}function P(t,e,n){var r=t.shared.context,o=t.scope();Object.keys(n).forEach((function(i){e.save(r,"."+i);var a=n[i];o(r,".",i,"=",a.append(t,e),";")})),e(o)}function B(t,e,n,r){var o,i=t.shared,a=i.gl,s=i.framebuffer;b&&(o=e.def(i.extensions,".webgl_draw_buffers"));var u,c=t.constants,f=c.drawBuffer,l=c.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",36160,",",u,".framebuffer);"),b&&e(o,".drawBuffersWEBGL(",f,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",36160,",null);"),b&&e(o,".drawBuffersWEBGL(",l,");"),e("}",s,".cur=",u,";"),r||e("}")}function N(t,e,n){var r=t.shared,o=r.gl,i=t.current,a=t.next,s=r.current,u=r.next,c=t.cond(s,".dirty");M.forEach((function(e){var r,f,l=k(e);if(!(l in n.state))if(l in a){r=a[l],f=i[l];var h=U(w[l].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(h.map((function(t,e){return t+"!=="+f+"["+e+"]"})).join("||")).then(o,".",O[l],"(",h,");",h.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(u,".",l);var p=t.cond(r,"!==",s,".",l);c(p),l in A?p(t.cond(r).then(o,".enable(",A[l],");").else(o,".disable(",A[l],");"),s,".",l,"=",r,";"):p(o,".",O[l],"(",r,");",s,".",l,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),e(c)}function F(t,e,n,r){var o=t.shared,i=t.current,a=o.current,s=o.gl;$t(Object.keys(n)).forEach((function(o){var u=n[o];if(!r||r(u)){var c=u.append(t,e);if(A[o]){var f=A[o];ee(u)?e(s,c?".enable(":".disable(",f,");"):e(t.cond(c).then(s,".enable(",f,");").else(s,".disable(",f,");")),e(a,".",o,"=",c,";")}else if(K(c)){var l=i[o];e(s,".",O[o],"(",c,");",c.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";")}else e(s,".",O[o],"(",c,");",a,".",o,"=",c,";")}}))}function G(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function z(t,e,n,r,o){var i,a,s,u=t.shared,c=t.stats,f=u.current,l=u.timer,h=n.profile;function p(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(t){t(i=e.def(),"=",p(),";"),"string"==typeof o?t(c,".count+=",o,";"):t(c,".count++;"),d&&(r?t(a=e.def(),"=",l,".getNumPendingQueries();"):t(l,".beginQuery(",c,");"))}function g(t){t(c,".cpuTime+=",p(),"-",i,";"),d&&(r?t(l,".pushScopeStats(",a,",",l,".getNumPendingQueries(),",c,");"):t(l,".endQuery();"))}function v(t){var n=e.def(f,".profile");e(f,".profile=",t,";"),e.exit(f,".profile=",n,";")}if(h){if(ee(h))return void(h.enable?(m(e),g(e.exit),v("true")):v("false"));v(s=h.append(t,e))}else s=e.def(f,".profile");var y=t.block();m(y),e("if(",s,"){",y,"}");var b=t.block();g(b),e.exit("if(",s,"){",b,"}")}function H(t,e,n,r,o){var i=t.shared;r.forEach((function(r){var a,s=r.name,u=n.attributes[s];if(u){if(!o(u))return;a=u.append(t,e)}else{if(!o(oe))return;var c=t.scopeAttrib(s);x.optional((function(){t.assert(e,c+".state","missing attribute "+s)})),a={},Object.keys(new g).forEach((function(t){a[t]=e.def(c,".",t)}))}!function(n,r,o){var a=i.gl,s=e.def(n,".location"),u=e.def(i.attributes,"[",s,"]"),c=o.state,f=o.buffer,l=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function p(){e("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,i=o.type;if(n=o.size?e.def(o.size,"||",r):r,e("if(",u,".type!==",i,"||",u,".size!==",n,"||",h.map((function(t){return u+"."+t+"!=="+o[t]})).join("||"),"){",a,".bindBuffer(",34962,",",f,".buffer);",a,".vertexAttribPointer(",[s,n,i,o.normalized,o.stride,o.offset],");",u,".type=",i,";",u,".size=",n,";",h.map((function(t){return u+"."+t+"="+o[t]+";"})).join(""),"}"),y){var c=o.divisor;e("if(",u,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function d(){e("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",It.map((function(t,e){return u+"."+t+"!=="+l[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",l,");",It.map((function(t,e){return u+"."+t+"="+l[e]+";"})).join(""),"}")}1===c?p():2===c?d():(e("if(",c,"===",1,"){"),p(),e("}else{"),d(),e("}"))}(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)}))}function q(t,e,r,o,i){for(var a,s=t.shared,u=s.gl,c=0;c<o.length;++c){var f,l=o[c],h=l.name,p=l.info.type,d=r.uniforms[h],m=t.link(l)+".location";if(d){if(!i(d))continue;if(ee(d)){var g=d.value;if(x.command(null!=g,'missing uniform "'+h+'"',t.commandStr),35678===p||35680===p){x.command("function"==typeof g&&(35678===p&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||35680===p&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+h,t.commandStr);var v=t.link(g._texture||g.color[0]._texture);e(u,".uniform1i(",m,",",v+".bind());"),e.exit(v,".unbind();")}else if(35674===p||35675===p||35676===p){x.optional((function(){x.command(K(g),"invalid matrix for uniform "+h,t.commandStr),x.command(35674===p&&4===g.length||35675===p&&9===g.length||35676===p&&16===g.length,"invalid length for matrix uniform "+h,t.commandStr)}));var y=t.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),b=2;35675===p?b=3:35676===p&&(b=4),e(u,".uniformMatrix",b,"fv(",m,",false,",y,");")}else{switch(p){case 5126:x.commandType(g,"number","uniform "+h,t.commandStr),a="1f";break;case 35664:x.command(K(g)&&2===g.length,"uniform "+h,t.commandStr),a="2f";break;case 35665:x.command(K(g)&&3===g.length,"uniform "+h,t.commandStr),a="3f";break;case 35666:x.command(K(g)&&4===g.length,"uniform "+h,t.commandStr),a="4f";break;case 35670:x.commandType(g,"boolean","uniform "+h,t.commandStr),a="1i";break;case 5124:x.commandType(g,"number","uniform "+h,t.commandStr),a="1i";break;case 35671:case 35667:x.command(K(g)&&2===g.length,"uniform "+h,t.commandStr),a="2i";break;case 35672:case 35668:x.command(K(g)&&3===g.length,"uniform "+h,t.commandStr),a="3i";break;case 35673:case 35669:x.command(K(g)&&4===g.length,"uniform "+h,t.commandStr),a="4i"}e(u,".uniform",a,"(",m,",",K(g)?Array.prototype.slice.call(g):g,");")}continue}f=d.append(t,e)}else{if(!i(oe))continue;f=e.def(s.uniforms,"[",n.id(h),"]")}35678===p?e("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):35680===p&&e("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),x.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){n("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function o(e,r){n(s.isArrayLike+"("+f+")&&"+f+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function i(e){n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(p){case 5124:r("number");break;case 35667:o(2);break;case 35668:o(3);break;case 35669:o(4);break;case 5126:r("number");break;case 35664:o(2);break;case 35665:o(3);break;case 35666:o(4);break;case 35670:r("boolean");break;case 35671:o(2);break;case 35672:o(3);break;case 35673:case 35674:o(4);break;case 35675:o(9);break;case 35676:o(16);break;case 35678:i(3553);break;case 35680:i(34067)}}));var w=1;switch(p){case 35678:case 35680:var S=e.def(f,"._texture");e(u,".uniform1i(",m,",",S,".bind());"),e.exit(S,".unbind();");continue;case 5124:case 35670:a="1i";break;case 35667:case 35671:a="2i",w=2;break;case 35668:case 35672:a="3i",w=3;break;case 35669:case 35673:a="4i",w=4;break;case 5126:a="1f";break;case 35664:a="2f",w=2;break;case 35665:a="3f",w=3;break;case 35666:a="4f",w=4;break;case 35674:a="Matrix2fv";break;case 35675:a="Matrix3fv";break;case 35676:a="Matrix4fv"}if(e(u,".uniform",a,"(",m,","),"M"===a.charAt(0)){var M=Math.pow(p-35674+2,2),A=t.global.def("new Float32Array(",M,")");e("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",U(M,(function(t){return A+"["+t+"]="+f+"["+t+"]"})),",",A,")")}else e(w>1?U(w,(function(t){return f+"["+t+"]"})):f);e(");")}}function W(t,e,n,r){var o=t.shared,i=o.gl,a=o.draw,s=r.draw,u=function(){var o,u=s.elements,c=e;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(c=n),o=u.append(t,c)):o=c.def(a,".",Nt),o&&c("if("+o+")"+i+".bindBuffer(34963,"+o+".buffer.buffer);"),o}();function c(o){var i=s[o];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(t,n):i.append(t,e):e.def(a,".",o)}var f,l,h=c(Ft),p=c(Gt),d=function(){var o,i=s.count,u=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(u=n),o=i.append(t,u),x.optional((function(){i.MISSING&&t.assert(e,"false","missing vertex count"),i.DYNAMIC&&t.assert(u,o+">=0","missing vertex count")}))):(o=u.def(a,".",jt),x.optional((function(){t.assert(u,o+">=0","missing vertex count")}))),o}();if("number"==typeof d){if(0===d)return}else n("if(",d,"){"),n.exit("}");y&&(f=c(zt),l=t.instancing);var m=u+".type",g=s.elements&&ee(s.elements);function v(){function t(){n(l,".drawElementsInstancedANGLE(",[h,d,m,p+"<<(("+m+"-5121)>>1)",f],");")}function e(){n(l,".drawArraysInstancedANGLE(",[h,p,d,f],");")}u?g?t():(n("if(",u,"){"),t(),n("}else{"),e(),n("}")):e()}function b(){function t(){n(i+".drawElements("+[h,d,m,p+"<<(("+m+"-5121)>>1)"]+");")}function e(){n(i+".drawArrays("+[h,p,d]+");")}u?g?t():(n("if(",u,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),v(),n("}else if(",f,"<0){"),b(),n("}")):v():b()}function V(t,e,n,r,o){var i=L(),a=i.proc("body",o);return x.optional((function(){i.commandStr=e.commandStr,i.command=i.link(e.commandStr)})),y&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),t(i,a,n,r),i.compile().body}function Y(t,e,n,r){G(t,e),H(t,e,n,r.attributes,(function(){return!0})),q(t,e,n,r.uniforms,(function(){return!0})),W(t,e,e,n)}function J(t,e,n,r){function o(){return!0}t.batchId="a1",G(t,e),H(t,e,n,r.attributes,o),q(t,e,n,r.uniforms,o),W(t,e,e,n)}function Z(t,e,n,r){G(t,e);var o=n.contextDep,i=e.def(),a=e.def();t.shared.props=a,t.batchId=i;var s=t.scope(),u=t.scope();function c(t){return t.contextDep&&o||t.propDep}function f(t){return!c(t)}if(e(s.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",u,"}",s.exit),n.needsContext&&P(t,u,n.context),n.needsFramebuffer&&B(t,u,n.framebuffer),F(t,u,n.state,c),n.profile&&c(n.profile)&&z(t,u,n,!1,!0),r)H(t,s,n,r.attributes,f),H(t,u,n,r.attributes,c),q(t,s,n,r.uniforms,f),q(t,u,n,r.uniforms,c),W(t,s,u,n);else{var l=t.global.def("{}"),h=n.shader.progVar.append(t,u),p=u.def(h,".id"),d=u.def(l,"[",p,"]");u(t.shared.gl,".useProgram(",h,".program);","if(!",d,"){",d,"=",l,"[",p,"]=",t.link((function(e){return V(J,t,n,e,2)})),"(",h,");}",d,".call(this,a0[",i,"],",i,");")}}function Q(t,e,n){var r=e.static[n];if(r&&function(t){if("object"==typeof t&&!K(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(T.isDynamic(t[e[n]]))return!0;return!1}}(r)){var o=t.global,i=Object.keys(r),a=!1,s=!1,u=!1,c=t.global.def("{}");i.forEach((function(e){var n=r[e];if(T.isDynamic(n)){"function"==typeof n&&(n=r[e]=T.unbox(n));var i=re(n,null);a=a||i.thisDep,u=u||i.propDep,s=s||i.contextDep}else{switch(o(c,".",e,"="),typeof n){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}})),e.dynamic[n]=new T.DynamicVariable(4,{thisDep:a,contextDep:s,propDep:u,ref:c,append:function(t,e){i.forEach((function(n){var o=r[n];if(T.isDynamic(o)){var i=t.invoke(e,o);e(c,".",n,"=",i,";")}}))}}),delete e.static[n]}}return{next:S,current:w,procs:function(){var t=L(),e=t.proc("poll"),n=t.proc("refresh"),r=t.block();e(r),n(r);var i,a=t.shared,s=a.gl,u=a.next,c=a.current;r(c,".dirty=false;"),B(t,e),B(t,n,null,!0),y&&(i=t.link(y));for(var f=0;f<o.maxAttributes;++f){var l=n.def(a.attributes,"[",f,"]"),h=t.cond(l,".buffer");h.then(s,".enableVertexAttribArray(",f,");",s,".bindBuffer(",34962,",",l,".buffer.buffer);",s,".vertexAttribPointer(",f,",",l,".size,",l,".type,",l,".normalized,",l,".stride,",l,".offset);").else(s,".disableVertexAttribArray(",f,");",s,".vertexAttrib4f(",f,",",l,".x,",l,".y,",l,".z,",l,".w);",l,".buffer=null;"),n(h),y&&n(i,".vertexAttribDivisorANGLE(",f,",",l,".divisor);")}return Object.keys(A).forEach((function(o){var i=A[o],a=r.def(u,".",o),f=t.block();f("if(",a,"){",s,".enable(",i,")}else{",s,".disable(",i,")}",c,".",o,"=",a,";"),n(f),e("if(",a,"!==",c,".",o,"){",f,"}")})),Object.keys(O).forEach((function(o){var i,a,f=O[o],l=w[o],h=t.block();if(h(s,".",f,"("),K(l)){var p=l.length;i=t.global.def(u,".",o),a=t.global.def(c,".",o),h(U(p,(function(t){return i+"["+t+"]"})),");",U(p,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",U(p,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else i=r.def(u,".",o),a=r.def(c,".",o),h(i,");",c,".",o,"=",i,";"),e("if(",i,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:function(t,e,r,o,i){var a=L();a.stats=a.link(i),Object.keys(e.static).forEach((function(t){Q(a,e,t)})),Wt.forEach((function(e){Q(a,t,e)}));var s=D(t,e,r,o,a);return function(t,e){var n=t.proc("draw",1);G(t,n),P(t,n,e.context),B(t,n,e.framebuffer),N(t,n,e),F(t,n,e.state),z(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)Y(t,n,e,e.shader.program);else{var o=t.global.def("{}"),i=n.def(r,".id"),a=n.def(o,"[",i,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",t.link((function(n){return V(Y,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(a,s),function(t,e){var r=t.proc("scope",3);t.batchId="a2";var o=t.shared,i=o.current;function a(n){var i=e.shader[n];i&&r.set(o.shader,"."+n,i.append(t,r))}P(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),$t(Object.keys(e.state)).forEach((function(n){var i=e.state[n].append(t,r);K(i)?i.forEach((function(e,o){r.set(t.next[n],"["+o+"]",e)})):r.set(o.next,"."+n,i)})),z(t,r,e,!0,!0),[Nt,Gt,jt,zt,Ft].forEach((function(n){var i=e.draw[n];i&&r.set(o.draw,"."+n,""+i.append(t,r))})),Object.keys(e.uniforms).forEach((function(i){r.set(o.uniforms,"["+n.id(i)+"]",e.uniforms[i].append(t,r))})),Object.keys(e.attributes).forEach((function(n){var o=e.attributes[n].append(t,r),i=t.scopeAttrib(n);Object.keys(new g).forEach((function(t){r.set(i,"."+t,o[t])}))})),a(Pt),a(Bt),Object.keys(e.state).length>0&&(r(i,".dirty=true;"),r.exit(i,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}(a,s),function(t,e){var n=t.proc("batch",2);t.batchId="0",G(t,n);var r=!1,o=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(P(t,n,e.context),o=!1);var i=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}i?(i.propDep?r=a=!0:i.contextDep&&r&&(a=!0),a||B(t,n,i)):B(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),N(t,n,e),F(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||z(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=o,e.needsFramebuffer=a;var u=e.shader.progVar;if(u.contextDep&&r||u.propDep)Z(t,n,e,null);else{var c=u.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)Z(t,n,e,e.shader.program);else{var f=t.global.def("{}"),l=n.def(c,".id"),h=n.def(f,"[",l,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",f,"[",l,"]=",t.link((function(n){return V(Z,t,e,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(a,s),a.compile()}}}var ae=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(t){n.push(t)}var o=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function s(t){a.push(t)}var u=[];function c(t,e,n){var r=a.pop()||new i;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,u.push(r)}var f=[],l=[];return{beginQuery:function(t){var r=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,r),o.push(r),c(o.length-1,o.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var t,n,i=o.length;if(0!==i){l.length=Math.max(l.length,i+1),f.length=Math.max(f.length,i+1),f[0]=0,l[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var c=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r(c)):o[t++]=c,f[n+1]=a,l[n+1]=t}for(o.length=t,t=0,n=0;n<u.length;++n){var h=u[n],p=h.startQueryIndex,d=h.endQueryIndex;h.sum+=f[d]-f[p];var m=l[p],g=l[d];g===m?(h.stats.gpuTime+=h.sum/1e6,s(h)):(h.startQueryIndex=m,h.endQueryIndex=g,u[t++]=h)}u.length=t}},getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}};function se(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}return function(n){var r=C(n);if(!r)return null;var o=r.gl,i=o.getContextAttributes(),a=o.isContextLost(),s=function(t,e){var n={};function r(e){x.type(e,"string","extension name must be string");var r,o=e.toLowerCase();try{r=n[o]=t.getExtension(o)}catch(t){}return!!r}for(var o=0;o<e.extensions.length;++o){var i=e.extensions[o];if(!r(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}(o,r);if(!s)return null;var u,c,f=(u={"":0},c=[""],{id:function(t){var e=u[t];return e||(e=u[t]=c.length,c.push(t),e)},str:function(t){return c[t]}}),l={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},h=s.extensions,p=ae(0,h),d=k(),m=o.drawingBufferWidth,g=o.drawingBufferHeight,v={tick:0,time:0,viewportWidth:m,viewportHeight:g,framebufferWidth:m,framebufferHeight:g,drawingBufferWidth:m,drawingBufferHeight:g,pixelRatio:r.pixelRatio},y=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,o=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),o=t.getParameter(36063));var i=!!e.oes_texture_float;if(i){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var s=t.createFramebuffer();if(t.bindFramebuffer(36160,s),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))i=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var u=L.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,u),t.getError()?i=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),i=1===u[0]),L.freeType(u)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var f=t.createTexture(),l=L.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,f),t.texImage2D(34069,0,6408,3,3,0,6408,5121,l),L.freeType(l),t.bindTexture(34067,null),t.deleteTexture(f),c=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:o,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:i,npotTextureCube:c}}(o,h),b=function(t,e,n,r){for(var o=n.maxAttributes,i=new Array(o),a=0;a<o;++a)i[a]=new Rt;return{Record:Rt,scope:{},state:i}}(0,0,y),w=function(e,n,r,o){var i=0,a={};function s(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){l(this)};var u=[];function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,n,r,o,i,a){var s,u;if(e.usage=r,Array.isArray(n)){if(e.dtype=o||5126,n.length>0)if(Array.isArray(n[0])){s=H(n);for(var f=1,l=1;l<s.length;++l)f*=s[l];e.dimension=f,c(e,u=z(n,s,e.dtype),r),a?e.persistentData=u:L.freeType(u)}else if("number"==typeof n[0]){e.dimension=i;var h=L.allocType(e.dtype,n.length);V(h,n),c(e,h,r),a?e.persistentData=h:L.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=o||W(n[0])||5126,c(e,u=z(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=u:L.freeType(u)):x.raise("invalid buffer data")}else if(t(n))e.dtype=o||W(n),e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(D(n)){s=n.shape;var p=n.stride,d=n.offset,m=0,g=0,v=0,y=0;1===s.length?(m=s[0],g=1,v=p[0],y=0):2===s.length?(m=s[0],g=s[1],v=p[0],y=p[1]):x.raise("invalid shape"),e.dtype=o||W(n.data)||5126,e.dimension=g;var b=L.allocType(e.dtype,m*g);Y(b,n.data,m,g,v,y,d),c(e,b,r),a?e.persistentData=b:L.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=5121,e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):x.raise("invalid buffer data")}function l(t){n.bufferCount--;for(var r=0;r<o.state.length;++r){var i=o.state[r];i.buffer===t&&(e.disableVertexAttribArray(r),i.buffer=null)}var s=t.buffer;x(s,"buffer must not be deleted already"),e.deleteBuffer(s),t.buffer=null,delete a[t.id]}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:function(o,i,u,c){n.bufferCount++;var h=new s(i);function p(n){var o=35044,i=null,a=0,s=0,u=1;return Array.isArray(n)||t(n)||D(n)||n instanceof ArrayBuffer?i=n:"number"==typeof n?a=0|n:n&&(x.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(x(null===i||Array.isArray(i)||t(i)||D(i),"invalid data for buffer"),i=n.data),"usage"in n&&(x.parameter(n.usage,G,"invalid buffer usage"),o=G[n.usage]),"type"in n&&(x.parameter(n.type,j,"invalid buffer type"),s=j[n.type]),"dimension"in n&&(x.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(x.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),h.bind(),i?f(h,i,o,s,u,c):(a&&e.bufferData(h.type,a,o),h.dtype=s||5121,h.usage=o,h.dimension=u,h.byteLength=a),r.profile&&(h.stats.size=h.byteLength*q[h.dtype]),p}function d(t,n){x(n+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,n,t)}return a[h.id]=h,u||p(o),p._reglType="buffer",p._buffer=h,p.subdata=function(e,n){var r,o=0|(n||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)d(e,o);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=L.allocType(h.dtype,e.length);V(i,e),d(i,o),L.freeType(i)}else if(Array.isArray(e[0])||t(e[0])){r=H(e);var a=z(e,r,h.dtype);d(a,o),L.freeType(a)}else x.raise("invalid buffer data")}else if(D(e)){r=e.shape;var s=e.stride,u=0,c=0,f=0,l=0;1===r.length?(u=r[0],c=1,f=s[0],l=0):2===r.length?(u=r[0],c=r[1],f=s[0],l=s[1]):x.raise("invalid shape");var m=Array.isArray(e.data)?h.dtype:W(e.data),g=L.allocType(m,u*c);Y(g,e.data,u,c,f,l,e.offset),d(g,o),L.freeType(g)}else x.raise("invalid data for buffer subdata");return p},r.profile&&(p.stats=h.stats),p.destroy=function(){l(h)},p},createStream:function(t,e){var n=u.pop();return n||(n=new s(t)),n.bind(),f(n,e,35040,0,1,!1),n},destroyStream:function(t){u.push(t)},clear:function(){P(a).forEach(l),u.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:function(){P(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:f}}(o,l,r,b),S=function(e,n,r,o){var i={},a=0,s={uint8:5121,uint16:5123};function u(t){this.id=a++,i[this.id]=this,this.buffer=t,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=5125),u.prototype.bind=function(){this.buffer.bind()};var c=[];function f(o,i,a,s,u,c,f){if(o.buffer.bind(),i){var l=f;f||t(i)&&(!D(i)||t(i.data))||(l=n.oes_element_index_uint?5125:5123),r._initBuffer(o.buffer,i,a,l,3)}else e.bufferData(34963,c,a),o.buffer.dtype=h||5121,o.buffer.usage=a,o.buffer.dimension=3,o.buffer.byteLength=c;var h=f;if(!f){switch(o.buffer.dtype){case 5121:case 5120:h=5121;break;case 5123:case 5122:h=5123;break;case 5125:case 5124:h=5125;break;default:x.raise("unsupported type for element array")}o.buffer.dtype=h}o.type=h,x(5125!==h||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var p=u;p<0&&(p=o.buffer.byteLength,5123===h?p>>=1:5125===h&&(p>>=2)),o.vertCount=p;var d=s;if(s<0){d=4;var m=o.buffer.dimension;1===m&&(d=0),2===m&&(d=1),3===m&&(d=4)}o.primType=d}function l(t){o.elementsCount--,x(null!==t.buffer,"must not double destroy elements"),delete i[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var i=r.create(null,34963,!0),a=new u(i._buffer);function c(e){if(e)if("number"==typeof e)i(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var n=null,r=35044,o=-1,u=-1,l=0,h=0;Array.isArray(e)||t(e)||D(e)?n=e:(x.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,x(Array.isArray(n)||t(n)||D(n),"invalid data for element buffer")),"usage"in e&&(x.parameter(e.usage,G,"invalid element buffer usage"),r=G[e.usage]),"primitive"in e&&(x.parameter(e.primitive,X,"invalid element buffer primitive"),o=X[e.primitive]),"count"in e&&(x("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(x.parameter(e.type,s,"invalid buffer type"),h=s[e.type]),"length"in e?l=0|e.length:(l=u,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),f(a,n,r,o,u,l,h)}else i(),a.primType=4,a.vertCount=0,a.type=5121;return c}return o.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return i.subdata(t,e),c},c.destroy=function(){l(a)},c},createStream:function(t){var e=c.pop();return e||(e=new u(r.create(null,34963,!0,!1)._buffer)),f(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof u?t._elements:null},clear:function(){P(i).forEach(l)}}}(o,h,w,l),M=function(t,e,n,r){var o={},i={};function a(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function s(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function u(n,r,a){var s=35632===n?o:i,u=s[r];if(!u){var c=e.str(r);u=t.createShader(n),t.shaderSource(u,c),t.compileShader(u),x.shaderError(t,u,c,n,a),s[r]=u}return u}var c={},f=[],l=0;function h(t,e){this.id=l++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(n,o){var i,c,f=u(35632,n.fragId),l=u(35633,n.vertId),h=n.program=t.createProgram();t.attachShader(h,f),t.attachShader(h,l),t.linkProgram(h),x.linkError(t,h,e.str(n.fragId),e.str(n.vertId),o);var p=t.getProgramParameter(h,35718);r.profile&&(n.stats.uniformsCount=p);var d=n.uniforms;for(i=0;i<p;++i)if(c=t.getActiveUniform(h,i))if(c.size>1)for(var m=0;m<c.size;++m){var g=c.name.replace("[0]","["+m+"]");s(d,new a(g,e.id(g),t.getUniformLocation(h,g),c))}else s(d,new a(c.name,e.id(c.name),t.getUniformLocation(h,c.name),c));var v=t.getProgramParameter(h,35721);r.profile&&(n.stats.attributesCount=v);var y=n.attributes;for(i=0;i<v;++i)(c=t.getActiveAttrib(h,i))&&s(y,new a(c.name,e.id(c.name),t.getAttribLocation(h,c.name),c))}return r.profile&&(n.getMaxUniformsCount=function(){var t=0;return f.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},n.getMaxAttributesCount=function(){var t=0;return f.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);P(o).forEach(e),o={},P(i).forEach(e),i={},f.forEach((function(e){t.deleteProgram(e.program)})),f.length=0,c={},n.shaderCount=0},program:function(t,e,r){x.command(t>=0,"missing vertex shader",r),x.command(e>=0,"missing fragment shader",r);var o=c[e];o||(o=c[e]={});var i=o[t];return i||(i=new h(e,t),n.shaderCount++,p(i,r),o[t]=i,f.push(i)),i},restore:function(){o={},i={};for(var t=0;t<f.length;++t)p(f[t])},shader:u,frag:-1,vert:-1}}(o,f,l,r),A=wt(o,h,y,(function(){U.procs.poll()}),v,l,r),E=function(t,e,n,r,o){var i={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(i.srgba=35907),e.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),e.webgl_color_buffer_float&&(i.rgba32f=34836);var a=[];Object.keys(i).forEach((function(t){var e=i[t];a[e]=t}));var s=0,u={};function c(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function f(e){var n=e.renderbuffer;x(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete u[e.id],r.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&f(this)},o.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(u).forEach((function(e){t+=u[e].stats.size})),t}),{create:function(e,s){var f=new c(t.createRenderbuffer());function l(e,r){var s=0,u=0,c=32854;if("object"==typeof e&&e){var h=e;if("shape"in h){var p=h.shape;x(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),s=0|p[0],u=0|p[1]}else"radius"in h&&(s=u=0|h.radius),"width"in h&&(s=0|h.width),"height"in h&&(u=0|h.height);"format"in h&&(x.parameter(h.format,i,"invalid renderbuffer format"),c=i[h.format])}else"number"==typeof e?(s=0|e,u="number"==typeof r?0|r:s):e?x.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(x(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==f.width||u!==f.height||c!==f.format)return l.width=f.width=s,l.height=f.height=u,f.format=c,t.bindRenderbuffer(36161,f.renderbuffer),t.renderbufferStorage(36161,c,s,u),x(0===t.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=Mt(f.format,f.width,f.height)),l.format=a[f.format],l}return u[f.id]=f,r.renderbufferCount++,l(e,s),l.resize=function(e,r){var i=0|e,a=0|r||i;return i===f.width&&a===f.height||(x(i>0&&a>0&&i<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),l.width=f.width=i,l.height=f.height=a,t.bindRenderbuffer(36161,f.renderbuffer),t.renderbufferStorage(36161,f.format,i,a),x(0===t.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=Mt(f.format,f.width,f.height))),l},l._reglType="renderbuffer",l._renderbuffer=f,o.profile&&(l.stats=f.stats),l.destroy=function(){f.decRef()},l},clear:function(){P(u).forEach(f)},restore:function(){P(u).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)})),t.bindRenderbuffer(36161,null)}}}(o,h,y,l,r),R=function(t,n,r,o,i,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var f=["uint8"];function l(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,o=0;e?(r=e.width,o=e.height):n&&(r=n.width,o=n.height),this.width=r,this.height=o}function h(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function p(t,e,n){if(t)if(t.texture){var r=t.texture._texture,o=Math.max(1,r.width),i=Math.max(1,r.height);x(o===e&&i===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;x(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function d(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=3553,n=null,r=null,o=t;"object"==typeof t&&(o=t.data,"target"in t&&(e=0|t.target)),x.type(o,"function","invalid attachment data");var i=o._reglType;return"texture2d"===i?(n=o,x(3553===e)):"textureCube"===i?(n=o,x(e>=34069&&e<34075,"invalid cube map target")):"renderbuffer"===i?(r=o,e=36161):x.raise("invalid regl object for attachment"),new l(e,n,r)}function g(t,e,n,r,a){if(n){var s=o.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new l(3553,s,null)}var u=i.create({width:t,height:e,format:r});return u._renderbuffer.refCount=0,new l(36161,null,u)}function v(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&f.push("half float","float16"),n.oes_texture_float&&f.push("float","float32");var b=0,w={};function S(){this.id=b++,w[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function M(t){t.colorAttachments.forEach(h),h(t.depthAttachment),h(t.stencilAttachment),h(t.depthStencilAttachment)}function A(e){var n=e.framebuffer;x(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete w[e.id]}function T(e){var n;t.bindFramebuffer(36160,e.framebuffer);var o=e.colorAttachments;for(n=0;n<o.length;++n)d(36064+n,o[n]);for(n=o.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),d(36096,e.depthAttachment),d(36128,e.stencilAttachment),d(33306,e.depthStencilAttachment);var i=t.checkFramebufferStatus(36160);t.isContextLost()||36053===i||x.raise("framebuffer configuration not supported, status = "+Et[i]),t.bindFramebuffer(36160,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function O(t,o){var i=new S;function l(t,e){var o;x(s.next!==i,"can not update framebuffer which is currently in use");var a=0,h=0,d=!0,y=!0,b=null,w=!0,S="rgba",A="uint8",O=1,k=null,E=null,R=null,C=!1;if("number"==typeof t)a=0|t,h=0|e||a;else if(t){x.type(t,"object","invalid arguments for framebuffer");var U=t;if("shape"in U){var _=U.shape;x(Array.isArray(_)&&_.length>=2,"invalid shape for framebuffer"),a=_[0],h=_[1]}else"radius"in U&&(a=h=U.radius),"width"in U&&(a=U.width),"height"in U&&(h=U.height);("color"in U||"colors"in U)&&(b=U.color||U.colors,Array.isArray(b)&&x(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in U&&(O=0|U.colorCount,x(O>0,"invalid color buffer count")),"colorTexture"in U&&(w=!!U.colorTexture,S="rgba4"),"colorType"in U&&(A=U.colorType,w?(x(n.oes_texture_float||!("float"===A||"float32"===A),"you must enable OES_texture_float in order to use floating point framebuffer objects"),x(n.oes_texture_half_float||!("half float"===A||"float16"===A),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===A||"float16"===A?(x(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),S="rgba16f"):"float"!==A&&"float32"!==A||(x(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),S="rgba32f"),x.oneOf(A,f,"invalid color type")),"colorFormat"in U&&(S=U.colorFormat,u.indexOf(S)>=0?w=!0:c.indexOf(S)>=0?w=!1:w?x.oneOf(U.colorFormat,u,"invalid color format for texture"):x.oneOf(U.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in U||"depthStencilTexture"in U)&&(C=!(!U.depthTexture&&!U.depthStencilTexture),x(!C||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in U&&("boolean"==typeof U.depth?d=U.depth:(k=U.depth,y=!1)),"stencil"in U&&("boolean"==typeof U.stencil?y=U.stencil:(E=U.stencil,d=!1)),"depthStencil"in U&&("boolean"==typeof U.depthStencil?d=y=U.depthStencil:(R=U.depthStencil,d=!1,y=!1))}else a=h=1;var I=null,L=null,D=null,P=null;if(Array.isArray(b))I=b.map(m);else if(b)I=[m(b)];else for(I=new Array(O),o=0;o<O;++o)I[o]=g(a,h,w,S,A);x(n.webgl_draw_buffers||I.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),x(I.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||I[0].width,h=h||I[0].height,k?L=m(k):d&&!y&&(L=g(a,h,C,"depth","uint32")),E?D=m(E):y&&!d&&(D=g(a,h,!1,"stencil","uint8")),R?P=m(R):!k&&!E&&y&&d&&(P=g(a,h,C,"depth stencil","depth stencil")),x(!!k+!!E+!!R<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var B=null;for(o=0;o<I.length;++o)if(p(I[o],a,h),x(!I[o]||I[o].texture&&At.indexOf(I[o].texture._texture.format)>=0||I[o].renderbuffer&&kt.indexOf(I[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),I[o]&&I[o].texture){var N=Tt[I[o].texture._texture.format]*Ot[I[o].texture._texture.type];null===B?B=N:x(B===N,"all color attachments much have the same number of bits per pixel.")}return p(L,a,h),x(!L||L.texture&&6402===L.texture._texture.format||L.renderbuffer&&33189===L.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),p(D,a,h),x(!D||D.renderbuffer&&36168===D.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),p(P,a,h),x(!P||P.texture&&34041===P.texture._texture.format||P.renderbuffer&&34041===P.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),M(i),i.width=a,i.height=h,i.colorAttachments=I,i.depthAttachment=L,i.stencilAttachment=D,i.depthStencilAttachment=P,l.color=I.map(v),l.depth=v(L),l.stencil=v(D),l.depthStencil=v(P),l.width=i.width,l.height=i.height,T(i),l}return a.framebufferCount++,l(t,o),e(l,{resize:function(t,e){x(s.next!==i,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===i.width&&r===i.height)return l;for(var o=i.colorAttachments,a=0;a<o.length;++a)y(o[a],n,r);return y(i.depthAttachment,n,r),y(i.stencilAttachment,n,r),y(i.depthStencilAttachment,n,r),i.width=l.width=n,i.height=l.height=r,T(i),l},_reglType:"framebuffer",_framebuffer:i,destroy:function(){A(i),M(i)},use:function(t){s.setFBO({framebuffer:l},t)}})}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof S)return e}return null},create:O,createCube:function(t){var i=Array(6);function a(t){var r;x(i.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,l={color:null},h=0,p=null,d="rgba",m="uint8",g=1;if("number"==typeof t)h=0|t;else if(t){x.type(t,"object","invalid arguments for framebuffer");var v=t;if("shape"in v){var y=v.shape;x(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),x(y[0]===y[1],"cube framebuffer must be square"),h=y[0]}else"radius"in v&&(h=0|v.radius),"width"in v?(h=0|v.width,"height"in v&&x(v.height===h,"must be square")):"height"in v&&(h=0|v.height);("color"in v||"colors"in v)&&(p=v.color||v.colors,Array.isArray(p)&&x(1===p.length||n.webgl_draw_buffers,"multiple render targets not supported")),p||("colorCount"in v&&(g=0|v.colorCount,x(g>0,"invalid color buffer count")),"colorType"in v&&(x.oneOf(v.colorType,f,"invalid color type"),m=v.colorType),"colorFormat"in v&&(d=v.colorFormat,x.oneOf(v.colorFormat,u,"invalid color format for texture"))),"depth"in v&&(l.depth=v.depth),"stencil"in v&&(l.stencil=v.stencil),"depthStencil"in v&&(l.depthStencil=v.depthStencil)}else h=1;if(p)if(Array.isArray(p))for(c=[],r=0;r<p.length;++r)c[r]=p[r];else c=[p];else{c=Array(g);var b={radius:h,format:d,type:m};for(r=0;r<g;++r)c[r]=o.createCube(b)}for(l.color=Array(c.length),r=0;r<c.length;++r){var w=c[r];x("function"==typeof w&&"textureCube"===w._reglType,"invalid cube map"),h=h||w.width,x(w.width===h&&w.height===h,"invalid cube map shape"),l.color[r]={target:34069,data:c[r]}}for(r=0;r<6;++r){for(var S=0;S<c.length;++S)l.color[S].target=34069+r;r>0&&(l.depth=i[0].depth,l.stencil=i[0].stencil,l.depthStencil=i[0].depthStencil),i[r]?i[r](l):i[r]=O(l)}return e(a,{width:h,height:h,color:c})}return a(t),e(a,{faces:i,resize:function(t){var e,n=0|t;if(x(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var o=a.color;for(e=0;e<o.length;++e)o[e].resize(n);for(e=0;e<6;++e)i[e].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){i.forEach((function(t){t.destroy()}))}})},clear:function(){P(w).forEach(A)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,P(w).forEach((function(e){e.framebuffer=t.createFramebuffer(),T(e)}))}})}(o,h,y,A,E,l),U=ie(o,f,h,y,w,S,0,R,{},b,M,{elements:null,primitive:4,count:-1,offset:0,instances:-1},v,p,r),_=Ct(o,R,U.procs.poll,v,i,h,y),I=U.next,B=o.canvas,N=[],F=[],J=[],Z=[r.onDestroy],Q=null;function K(){if(0===N.length)return p&&p.update(),void(Q=null);Q=O.next(K),ut();for(var t=N.length-1;t>=0;--t){var e=N[t];e&&e(v,null,0)}o.flush(),p&&p.update()}function $(){!Q&&N.length>0&&(Q=O.next(K))}function tt(){Q&&(O.cancel(K),Q=null)}function et(t){t.preventDefault(),a=!0,tt(),F.forEach((function(t){t()}))}function nt(t){o.getError(),a=!1,s.restore(),M.restore(),w.restore(),A.restore(),E.restore(),R.restore(),p&&p.restore(),U.procs.refresh(),$(),J.forEach((function(t){t()}))}function rt(t){function n(t){var e={},n={};return Object.keys(t).forEach((function(r){var o=t[r];T.isDynamic(o)?n[r]=T.unbox(o,r):e[r]=o})),{dynamic:n,static:e}}x(!!t,"invalid args to regl({...})"),x.type(t,"object","invalid args to regl({...})");var r=n(t.context||{}),o=n(t.uniforms||{}),i=n(t.attributes||{}),s=n(function(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),n}(t)),u={gpuTime:0,cpuTime:0,count:0},c=U.compile(s,i,o,r,u),f=c.draw,l=c.batch,h=c.scope,p=[];return e((function(t,e){var n;if(a&&x.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e){if("number"==typeof t){for(n=0;n<t;++n)h.call(this,null,e,n);return}if(Array.isArray(t)){for(n=0;n<t.length;++n)h.call(this,t[n],e,n);return}return h.call(this,t,e,0)}if("number"==typeof t){if(t>0)return l.call(this,function(t){for(;p.length<t;)p.push(null);return p}(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return l.call(this,t,t.length)}}),{stats:u})}B&&(B.addEventListener("webglcontextlost",et,!1),B.addEventListener("webglcontextrestored",nt,!1));var ot=R.setFBO=rt({framebuffer:T.define.call(null,1,"framebuffer")});function it(t,e){var n=0;U.procs.poll();var r=e.color;r&&(o.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(o.clearDepth(+e.depth),n|=256),"stencil"in e&&(o.clearStencil(0|e.stencil),n|=1024),x(!!n,"called regl.clear with no buffer specified"),o.clear(n)}function at(t){return x.type(t,"function","regl.frame() callback must be a function"),N.push(t),$(),{cancel:function(){var e=se(N,t);x(e>=0,"cannot cancel a frame twice"),N[e]=function t(){var e=se(N,t);N[e]=N[N.length-1],N.length-=1,N.length<=0&&tt()}}}}function st(){var t=I.viewport,e=I.scissor_box;t[0]=t[1]=e[0]=e[1]=0,v.viewportWidth=v.framebufferWidth=v.drawingBufferWidth=t[2]=e[2]=o.drawingBufferWidth,v.viewportHeight=v.framebufferHeight=v.drawingBufferHeight=t[3]=e[3]=o.drawingBufferHeight}function ut(){v.tick+=1,v.time=ft(),st(),U.procs.poll()}function ct(){st(),U.procs.refresh(),p&&p.update()}function ft(){return(k()-d)/1e3}ct();var lt=e(rt,{clear:function(t){if(x("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)ot(e({framebuffer:t.framebuffer.faces[n]},t),it);else ot(t,it);else it(0,t)},prop:T.define.bind(null,1),context:T.define.bind(null,2),this:T.define.bind(null,3),draw:rt({}),buffer:function(t){return w.create(t,34962,!1,!1)},elements:function(t){return S.create(t,!1)},texture:A.create2D,cube:A.createCube,renderbuffer:E.create,framebuffer:R.create,framebufferCube:R.createCube,attributes:i,frame:at,on:function(t,e){var n;switch(x.type(e,"function","listener callback must be a function"),t){case"frame":return at(e);case"lost":n=F;break;case"restore":n=J;break;case"destroy":n=Z;break;default:x.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:y,hasExtension:function(t){return y.extensions.indexOf(t.toLowerCase())>=0},read:_,destroy:function(){N.length=0,tt(),B&&(B.removeEventListener("webglcontextlost",et),B.removeEventListener("webglcontextrestored",nt)),M.clear(),R.clear(),E.clear(),A.clear(),S.clear(),w.clear(),p&&p.clear(),Z.forEach((function(t){t()}))},_gl:o,_refresh:ct,poll:function(){ut(),p&&p.update()},now:ft,stats:l});return r.onDone(null,lt),lt}}()},function(t,e,n){"use strict";var r=n(514),o=n(482),i=n(528),a=n(484),s=n(449);t.exports=function(t,e){e=r(e=e||{},{center:[0,0,0]}),t=s.convert(t,s.ARRAY_OF_ARRAYS);var n=o(t),u=[-.5*(n[0][0]+n[1][0])+e.center[0],-.5*(n[0][1]+n[1][1])+e.center[1],-.5*(n[0][2]+n[1][2])+e.center[2]],c=i.create();return i.translate(c,c,u),a(t,c)}},function(t,e,n){var r=n(515),o=n(480);var i,a,s=(i=r,a=function t(e,n){return void 0===e?n:r(e,n,t)},o((function(t){var e=t[0];return null==e?e:(t.push(a),i.apply(void 0,t))})));t.exports=s},function(t,e,n){var r=n(516),o=n(517),i=n(518),a=n(428),s=n(448),u=n(521),c=n(523),f=n(524),l=n(526);var h,p=(h="length",function(t){return null==t?void 0:t[h]});function d(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(p(t))}var m=i((function t(e,n,i,h,p){if(g=typeof(m=e),!m||"object"!=g&&"function"!=g)return e;var m,g,v=d(n)&&(s(n)||c(n)),y=v?void 0:f(n);return o(y||n,(function(o,f){if(y&&(o=n[f=o]),function(t){return!!t&&"object"==typeof t}(o))h||(h=[]),p||(p=[]),function(t,e,n,o,i,f,h){var p=f.length,m=e[n];for(;p--;)if(f[p]==m)return void(t[n]=h[p]);var g=t[n],v=i?i(g,m,n,t,e):void 0,y=void 0===v;y&&(v=m,d(m)&&(s(m)||c(m))?v=s(g)?g:d(g)?r(g):[]:u(m)||a(m)?v=a(g)?l(g):u(g)?g:{}:y=!1);f.push(m),h.push(v),y?t[n]=o(v,m,i,f,h):(v==v?v!==g:g==g)&&(t[n]=v)}(e,n,f,t,i,h,p);else{var m=e[f],g=i?i(m,o,f,e,n):void 0,b=void 0===g;b&&(g=o),void 0===g&&(!v||f in e)||!b&&(g==g?g===m:m!=m)||(e[f]=g)}})),e}));t.exports=m},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(519),o=n(520),i=n(480);t.exports=function(t){return i((function(e,n){var i=-1,a=null==e?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,c=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,c,5),a-=2):a-=(s="function"==typeof c?c:void 0)?1:0,u&&o(n[0],n[1],u)&&(s=a<3?void 0:s,a=1);++i<a;){var f=n[i];f&&t(e,f,s)}return e}))}},function(t,e){function n(t){return t}t.exports=function(t,e,r){if("function"!=typeof t)return n;if(void 0===e)return t;switch(r){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,a){return t.call(e,n,r,o,i,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n=/^\d+$/;var r,o=(r="length",function(t){return null==t?void 0:t[r]});function i(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(o(t))}t.exports=function(t,e,r){if(!function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(r))return!1;var o=typeof e;if("number"==o?i(r)&&function(t,e){return e=null==e?9007199254740991:e,(t="number"==typeof t||n.test(t)?+t:-1)>-1&&t%1==0&&t<e}(e,r.length):"string"==o&&e in r){var a=r[e];return t==t?t===a:a!=a}return!1}},function(t,e,n){var r=n(522),o=n(428),i=n(481);var a=Object.prototype,s=a.hasOwnProperty,u=a.toString;t.exports=function(t){var e,n;return!(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=u.call(t)||o(t)||!(s.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&&(r(t,(function(t,e){n=e}),i),void 0===n||s.call(t,n))}},function(t,e){var n,r=function(t,e,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var u=a[n?s:++o];if(!1===e(i[u],u,i))break}return t};t.exports=r},function(t,e){var n={};n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object DataView]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1;var r=Object.prototype.toString;t.exports=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!!n[r.call(t)]}},function(t,e,n){var r=n(525),o=n(428),i=n(448),a=/^\d+$/,s=Object.prototype.hasOwnProperty,u=r(Object,"keys");var c,f=(c="length",function(t){return null==t?void 0:t[c]});function l(t,e){return e=null==e?9007199254740991:e,(t="number"==typeof t||a.test(t)?+t:-1)>-1&&t%1==0&&t<e}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function p(t){for(var e=function(t){if(null==t)return[];d(t)||(t=Object(t));var e=t.length;e=e&&h(e)&&(i(t)||o(t))&&e||0;var n=t.constructor,r=-1,a="function"==typeof n&&n.prototype===t,u=Array(e),c=e>0;for(;++r<e;)u[r]=r+"";for(var f in t)c&&l(f,e)||"constructor"==f&&(a||!s.call(t,f))||u.push(f);return u}(t),n=e.length,r=n&&t.length,a=!!r&&h(r)&&(i(t)||o(t)),u=-1,c=[];++u<n;){var f=e[u];(a&&l(f,r)||s.call(t,f))&&c.push(f)}return c}function d(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var m=u?function(t){var e,n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&(null!=(e=t)&&h(f(e)))?p(t):d(t)?u(t):[]}:p;t.exports=m},function(t,e){var n=/^\[object .+?Constructor\]$/;var r=Object.prototype,o=Function.prototype.toString,i=r.hasOwnProperty,a=r.toString,s=RegExp("^"+o.call(i).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t,e){var r=null==t?void 0:t[e];return function(t){if(null==t)return!1;if(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&"[object Function]"==a.call(t)}(t))return s.test(o.call(t));return function(t){return!!t&&"object"==typeof t}(t)&&n.test(t)}(r)?r:void 0}},function(t,e,n){var r=n(527),o=n(481);t.exports=function(t){return r(t,o(t))}},function(t,e){t.exports=function(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}},function(t,e,n){t.exports={create:n(529),clone:n(530),copy:n(531),identity:n(483),transpose:n(532),invert:n(533),adjoint:n(534),determinant:n(535),multiply:n(536),translate:n(537),scale:n(538),rotate:n(539),rotateX:n(540),rotateY:n(541),rotateZ:n(542),fromRotation:n(543),fromRotationTranslation:n(544),fromScaling:n(545),fromTranslation:n(546),fromXRotation:n(547),fromYRotation:n(548),fromZRotation:n(549),fromQuat:n(550),frustum:n(551),perspective:n(552),perspectiveFromFieldOfView:n(553),ortho:n(554),lookAt:n(555),str:n(556)}},function(t,e){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(t,e){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,b=n*u-o*a,x=n*c-i*a,w=r*u-o*s,S=r*c-i*s,M=o*c-i*u,A=f*m-l*d,T=f*g-h*d,O=f*v-p*d,k=l*g-h*m,E=l*v-p*m,R=h*v-p*g,C=y*R-b*E+x*k+w*O-S*T+M*A;if(!C)return null;return C=1/C,t[0]=(s*R-u*E+c*k)*C,t[1]=(o*E-r*R-i*k)*C,t[2]=(m*M-g*S+v*w)*C,t[3]=(h*S-l*M-p*w)*C,t[4]=(u*O-a*R-c*T)*C,t[5]=(n*R-o*O+i*T)*C,t[6]=(g*x-d*M-v*b)*C,t[7]=(f*M-h*x+p*b)*C,t[8]=(a*E-s*O+c*A)*C,t[9]=(r*O-n*E-i*A)*C,t[10]=(d*S-m*x+v*y)*C,t[11]=(l*x-f*S-p*y)*C,t[12]=(s*T-a*k-u*A)*C,t[13]=(n*k-r*T+o*A)*C,t[14]=(m*b-d*w-g*y)*C,t[15]=(f*w-l*b+h*y)*C,t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],g=e[14],v=e[15];return t[0]=s*(h*v-p*g)-l*(u*v-c*g)+m*(u*p-c*h),t[1]=-(r*(h*v-p*g)-l*(o*v-i*g)+m*(o*p-i*h)),t[2]=r*(u*v-c*g)-s*(o*v-i*g)+m*(o*c-i*u),t[3]=-(r*(u*p-c*h)-s*(o*p-i*h)+l*(o*c-i*u)),t[4]=-(a*(h*v-p*g)-f*(u*v-c*g)+d*(u*p-c*h)),t[5]=n*(h*v-p*g)-f*(o*v-i*g)+d*(o*p-i*h),t[6]=-(n*(u*v-c*g)-a*(o*v-i*g)+d*(o*c-i*u)),t[7]=n*(u*p-c*h)-a*(o*p-i*h)+f*(o*c-i*u),t[8]=a*(l*v-p*m)-f*(s*v-c*m)+d*(s*p-c*l),t[9]=-(n*(l*v-p*m)-f*(r*v-i*m)+d*(r*p-i*l)),t[10]=n*(s*v-c*m)-a*(r*v-i*m)+d*(r*c-i*s),t[11]=-(n*(s*p-c*l)-a*(r*p-i*l)+f*(r*c-i*s)),t[12]=-(a*(l*g-h*m)-f*(s*g-u*m)+d*(s*h-u*l)),t[13]=n*(l*g-h*m)-f*(r*g-o*m)+d*(r*h-o*l),t[14]=-(n*(s*g-u*m)-a*(r*g-o*m)+d*(r*u-o*s)),t[15]=n*(s*h-u*l)-a*(r*h-o*l)+f*(r*u-o*s),t}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],h=t[11],p=t[12],d=t[13],m=t[14],g=t[15];return(e*a-n*i)*(l*g-h*m)-(e*s-r*i)*(f*g-h*d)+(e*u-o*i)*(f*m-l*d)+(n*s-r*a)*(c*g-h*p)-(n*u-o*a)*(c*m-l*p)+(r*u-o*s)*(c*d-f*p)}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=n[0],x=n[1],w=n[2],S=n[3];return t[0]=b*r+x*s+w*l+S*m,t[1]=b*o+x*u+w*h+S*g,t[2]=b*i+x*c+w*p+S*v,t[3]=b*a+x*f+w*d+S*y,b=n[4],x=n[5],w=n[6],S=n[7],t[4]=b*r+x*s+w*l+S*m,t[5]=b*o+x*u+w*h+S*g,t[6]=b*i+x*c+w*p+S*v,t[7]=b*a+x*f+w*d+S*y,b=n[8],x=n[9],w=n[10],S=n[11],t[8]=b*r+x*s+w*l+S*m,t[9]=b*o+x*u+w*h+S*g,t[10]=b*i+x*c+w*p+S*v,t[11]=b*a+x*f+w*d+S*y,b=n[12],x=n[13],w=n[14],S=n[15],t[12]=b*r+x*s+w*l+S*m,t[13]=b*o+x*u+w*h+S*g,t[14]=b*i+x*c+w*p+S*v,t[15]=b*a+x*f+w*d+S*y,t}},function(t,e){t.exports=function(t,e,n){var r,o,i,a,s,u,c,f,l,h,p,d,m=n[0],g=n[1],v=n[2];e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=p,t[11]=d,t[12]=r*m+s*g+l*v+e[12],t[13]=o*m+u*g+h*v+e[13],t[14]=i*m+c*g+p*v+e[14],t[15]=a*m+f*g+d*v+e[15]);return t}},function(t,e){t.exports=function(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(t,e){t.exports=function(t,e,n,r){var o,i,a,s,u,c,f,l,h,p,d,m,g,v,y,b,x,w,S,M,A,T,O,k,E=r[0],R=r[1],C=r[2],U=Math.sqrt(E*E+R*R+C*C);if(Math.abs(U)<1e-6)return null;E*=U=1/U,R*=U,C*=U,o=Math.sin(n),i=Math.cos(n),a=1-i,s=e[0],u=e[1],c=e[2],f=e[3],l=e[4],h=e[5],p=e[6],d=e[7],m=e[8],g=e[9],v=e[10],y=e[11],b=E*E*a+i,x=R*E*a+C*o,w=C*E*a-R*o,S=E*R*a-C*o,M=R*R*a+i,A=C*R*a+E*o,T=E*C*a+R*o,O=R*C*a-E*o,k=C*C*a+i,t[0]=s*b+l*x+m*w,t[1]=u*b+h*x+g*w,t[2]=c*b+p*x+v*w,t[3]=f*b+d*x+y*w,t[4]=s*S+l*M+m*A,t[5]=u*S+h*M+g*A,t[6]=c*S+p*M+v*A,t[7]=f*S+d*M+y*A,t[8]=s*T+l*O+m*k,t[9]=u*T+h*O+g*k,t[10]=c*T+p*O+v*k,t[11]=f*T+d*O+y*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=i*o+c*r,t[5]=a*o+f*r,t[6]=s*o+l*r,t[7]=u*o+h*r,t[8]=c*o-i*r,t[9]=f*o-a*r,t[10]=l*o-s*r,t[11]=h*o-u*r,t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],l=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=i*o-c*r,t[1]=a*o-f*r,t[2]=s*o-l*r,t[3]=u*o-h*r,t[8]=i*r+c*o,t[9]=a*r+f*o,t[10]=s*r+l*o,t[11]=u*r+h*o,t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],l=e[6],h=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=i*o+c*r,t[1]=a*o+f*r,t[2]=s*o+l*r,t[3]=u*o+h*r,t[4]=c*o-i*r,t[5]=f*o-a*r,t[6]=l*o-s*r,t[7]=h*o-u*r,t}},function(t,e){t.exports=function(t,e,n){var r,o,i,a=n[0],s=n[1],u=n[2],c=Math.sqrt(a*a+s*s+u*u);if(Math.abs(c)<1e-6)return null;return a*=c=1/c,s*=c,u*=c,r=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=a*a*i+o,t[1]=s*a*i+u*r,t[2]=u*a*i-s*r,t[3]=0,t[4]=a*s*i-u*r,t[5]=s*s*i+o,t[6]=u*s*i+a*r,t[7]=0,t[8]=a*u*i+s*r,t[9]=s*u*i-a*r,t[10]=u*u*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=r+r,u=o+o,c=i+i,f=r*s,l=r*u,h=r*c,p=o*u,d=o*c,m=i*c,g=a*s,v=a*u,y=a*c;return t[0]=1-(p+m),t[1]=l+y,t[2]=h-v,t[3]=0,t[4]=l-y,t[5]=1-(f+m),t[6]=d+g,t[7]=0,t[8]=h+v,t[9]=d-g,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},function(t,e){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,u=o+o,c=n*a,f=r*a,l=r*s,h=o*a,p=o*s,d=o*u,m=i*a,g=i*s,v=i*u;return t[0]=1-l-d,t[1]=f+v,t[2]=h-g,t[3]=0,t[4]=f-v,t[5]=1-c-d,t[6]=p+m,t[7]=0,t[8]=h+g,t[9]=p-m,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e,n,r,o,i,a){var s=1/(n-e),u=1/(o-r),c=1/(i-a);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}},function(t,e){t.exports=function(t,e,n,r,o){var i=1/Math.tan(e/2),a=1/(r-o);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*r*a,t[15]=0,t}},function(t,e){t.exports=function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(o+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}},function(t,e){t.exports=function(t,e,n,r,o,i,a){var s=1/(e-n),u=1/(r-o),c=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(a+i)*c,t[15]=1,t}},function(t,e,n){var r=n(483);t.exports=function(t,e,n,o){var i,a,s,u,c,f,l,h,p,d,m=e[0],g=e[1],v=e[2],y=o[0],b=o[1],x=o[2],w=n[0],S=n[1],M=n[2];if(Math.abs(m-w)<1e-6&&Math.abs(g-S)<1e-6&&Math.abs(v-M)<1e-6)return r(t);l=m-w,h=g-S,p=v-M,d=1/Math.sqrt(l*l+h*h+p*p),i=b*(p*=d)-x*(h*=d),a=x*(l*=d)-y*p,s=y*h-b*l,(d=Math.sqrt(i*i+a*a+s*s))?(i*=d=1/d,a*=d,s*=d):(i=0,a=0,s=0);u=h*s-p*a,c=p*i-l*s,f=l*a-h*i,(d=Math.sqrt(u*u+c*c+f*f))?(u*=d=1/d,c*=d,f*=d):(u=0,c=0,f=0);return t[0]=i,t[1]=u,t[2]=l,t[3]=0,t[4]=a,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=f,t[10]=p,t[11]=0,t[12]=-(i*m+a*g+s*v),t[13]=-(u*m+c*g+f*v),t[14]=-(l*m+h*g+p*v),t[15]=1,t}},function(t,e){t.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},function(t,e){t.exports=o,o.strict=i,o.loose=a;var n=Object.prototype.toString,r={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function o(t){return i(t)||a(t)}function i(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function a(t){return r[n.call(t)]}},function(t,e){t.exports=function(t){return!!t&&(!!t.dtype&&new RegExp("function View[0-9]+d(:?"+t.dtype+")+").test(String(t.constructor)))}},function(t,e,n){var r=n(560),o=n(561),i="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(a);var r=new Array(n.length);for(t=0;t<r.length;++t)r[t]=n[t][1];return r}function u(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var o="generic"===t;if(-1===e){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(i)()}if(0===e){i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(o?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(o?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",i)(c[t][0])}i=["'use strict'"];var a=r(e),u=a.map((function(t){return"i"+t})),f="this.offset+"+a.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),l=a.map((function(t){return"b"+t})).join(","),h=a.map((function(t){return"c"+t})).join(",");i.push("function "+n+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+n+"_order(){"),2===e?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),o?i.push("return this.data.set("+f+",v)}"):i.push("return this.data["+f+"]=v}"),i.push("proto.get=function "+n+"_get("+u.join(",")+"){"),o?i.push("return this.data.get("+f+")}"):i.push("return this.data["+f+"]}"),i.push("proto.index=function "+n+"_index(",u.join(),"){return "+f+"}"),i.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+a.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+a.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var p=a.map((function(t){return"a"+t+"=this.shape["+t+"]"})),d=a.map((function(t){return"c"+t+"=this.stride["+t+"]"}));i.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(var m=0;m<e;++m)i.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");i.push("return new "+n+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"c"+t})).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+a.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+a.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<e;++m)i.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");i.push("return new "+n+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"b"+t})).join(",")+",c)}");var g=new Array(e),v=new Array(e);for(m=0;m<e;++m)g[m]="a[i"+m+"]",v[m]="b[i"+m+"]";i.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+v.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;m<e;++m)i.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map((function(t){return"shape["+t+"]"})).join(",")+","+a.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(c[t],s)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function(t,e,n,r){if(void 0===t)return(0,c.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===n){n=new Array(a);for(var s=a-1,f=1;s>=0;--s)n[s]=f,f*=e[s]}if(void 0===r){r=0;for(s=0;s<a;++s)n[s]<0&&(r-=(e[s]-1)*n[s])}for(var l=function(t){if(o(t))return"buffer";if(i)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),h=c[l];h.length<=a+1;)h.push(u(l,h.length-1));return(0,h[a+1])(t,e,n,r)}},function(t,e,n){"use strict";t.exports=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){t.exports={EPSILON:n(486),create:n(487),clone:n(563),angle:n(564),fromValues:n(488),copy:n(565),set:n(566),equals:n(567),exactEquals:n(568),add:n(569),subtract:n(491),sub:n(570),multiply:n(492),mul:n(571),divide:n(493),div:n(572),min:n(573),max:n(574),floor:n(575),ceil:n(576),round:n(577),scale:n(578),scaleAndAdd:n(579),distance:n(494),dist:n(580),squaredDistance:n(495),sqrDist:n(581),length:n(496),len:n(582),squaredLength:n(497),sqrLen:n(583),negate:n(584),inverse:n(585),normalize:n(489),dot:n(490),cross:n(586),lerp:n(587),random:n(588),transformMat4:n(589),transformMat3:n(590),transformQuat:n(591),rotateX:n(592),rotateY:n(593),rotateZ:n(594),forEach:n(595)}},function(t,e){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},function(t,e,n){t.exports=function(t,e){var n=r(t[0],t[1],t[2]),a=r(e[0],e[1],e[2]);o(n,n),o(a,a);var s=i(n,a);return s>1?0:Math.acos(s)};var r=n(488),o=n(489),i=n(490)},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}},function(t,e,n){t.exports=function(t,e){var n=t[0],o=t[1],i=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-u)<=r*Math.max(1,Math.abs(i),Math.abs(u))};var r=n(486)},function(t,e){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}},function(t,e,n){t.exports=n(491)},function(t,e,n){t.exports=n(492)},function(t,e,n){t.exports=n(493)},function(t,e){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}},function(t,e,n){t.exports=n(494)},function(t,e,n){t.exports=n(495)},function(t,e,n){t.exports=n(496)},function(t,e,n){t.exports=n(497)},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2];return t[0]=o*u-i*s,t[1]=i*a-r*u,t[2]=r*s-o*a,t}},function(t,e){t.exports=function(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}},function(t,e){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*i-u*o,l=c*o+u*r-a*i,h=c*i+a*o-s*r,p=-a*r-s*o-u*i;return t[0]=f*c+p*-a+l*-u-h*-s,t[1]=l*c+p*-s+h*-a-f*-u,t[2]=h*c+p*-u+f*-s-l*-a,t}},function(t,e){t.exports=function(t,e,n,r){var o=n[1],i=n[2],a=e[1]-o,s=e[2]-i,u=Math.sin(r),c=Math.cos(r);return t[0]=e[0],t[1]=o+a*c-s*u,t[2]=i+a*u+s*c,t}},function(t,e){t.exports=function(t,e,n,r){var o=n[0],i=n[2],a=e[0]-o,s=e[2]-i,u=Math.sin(r),c=Math.cos(r);return t[0]=o+s*u+a*c,t[1]=e[1],t[2]=i+s*c-a*u,t}},function(t,e){t.exports=function(t,e,n,r){var o=n[0],i=n[1],a=e[0]-o,s=e[1]-i,u=Math.sin(r),c=Math.cos(r);return t[0]=o+a*c-s*u,t[1]=i+a*u+s*c,t[2]=e[2],t}},function(t,e,n){t.exports=function(t,e,n,o,i,a){var s,u;e||(e=3);n||(n=0);u=o?Math.min(o*e+n,t.length):t.length;for(s=n;s<u;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],i(r,r,a),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t};var r=n(487)()},function(t,e){e.vertexNormals=function(t,e,n){for(var r=e.length,o=new Array(r),i=void 0===n?1e-6:n,a=0;a<r;++a)o[a]=[0,0,0];for(a=0;a<t.length;++a)for(var s=t[a],u=0,c=s[s.length-1],f=s[0],l=0;l<s.length;++l){u=c,c=f,f=s[(l+1)%s.length];for(var h=e[u],p=e[c],d=e[f],m=new Array(3),g=0,v=new Array(3),y=0,b=0;b<3;++b)m[b]=h[b]-p[b],g+=m[b]*m[b],v[b]=d[b]-p[b],y+=v[b]*v[b];if(g*y>i){var x=o[c],w=1/Math.sqrt(g*y);for(b=0;b<3;++b){var S=(b+1)%3,M=(b+2)%3;x[b]+=w*(v[S]*m[M]-v[M]*m[S])}}}for(a=0;a<r;++a){x=o[a];var A=0;for(b=0;b<3;++b)A+=x[b]*x[b];if(A>i)for(w=1/Math.sqrt(A),b=0;b<3;++b)x[b]*=w;else for(b=0;b<3;++b)x[b]=0}return o},e.faceNormals=function(t,e,n){for(var r=t.length,o=new Array(r),i=void 0===n?1e-6:n,a=0;a<r;++a){for(var s=t[a],u=new Array(3),c=0;c<3;++c)u[c]=e[s[c]];var f=new Array(3),l=new Array(3);for(c=0;c<3;++c)f[c]=u[1][c]-u[0][c],l[c]=u[2][c]-u[0][c];var h=new Array(3),p=0;for(c=0;c<3;++c){var d=(c+1)%3,m=(c+2)%3;h[c]=f[d]*l[m]-f[m]*l[d],p+=h[c]*h[c]}p=p>i?1/Math.sqrt(p):0;for(c=0;c<3;++c)h[c]*=p;o[a]=h}return o}},function(t,e){t.exports=function(t){var e=[],n=[],r=0,o=0;for(;r<t.length;)n.push([o++,o++,o++]),e.push([t[r++],t[r++],t[r++]],[t[r++],t[r++],t[r++]],[t[r++],t[r++],t[r++]]);return{positions:e,cells:n}}},function(t,e,n){var r=n(599);t.exports=function(t,e){return t=t||{},Object.keys(e).forEach((function(n){void 0===t[n]&&(t[n]=r(e[n]))})),t}},function(t,e,n){(function(e){var n=function(){"use strict";function t(n,o,i,a){"object"==typeof o&&(i=o.depth,a=o.prototype,o.filter,o=o.circular);var s=[],u=[],c=void 0!==e;return void 0===o&&(o=!0),void 0===i&&(i=1/0),function n(i,f){if(null===i)return null;if(0==f)return i;var l,h;if("object"!=typeof i)return i;if(t.__isArray(i))l=[];else if(t.__isRegExp(i))l=new RegExp(i.source,r(i)),i.lastIndex&&(l.lastIndex=i.lastIndex);else if(t.__isDate(i))l=new Date(i.getTime());else{if(c&&e.isBuffer(i))return l=e.allocUnsafe?e.allocUnsafe(i.length):new e(i.length),i.copy(l),l;void 0===a?(h=Object.getPrototypeOf(i),l=Object.create(h)):(l=Object.create(a),h=a)}if(o){var p=s.indexOf(i);if(-1!=p)return u[p];s.push(i),u.push(l)}for(var d in i){var m;h&&(m=Object.getOwnPropertyDescriptor(h,d)),m&&null==m.set||(l[d]=n(i[d],f-1))}return l}(n,i)}function n(t){return Object.prototype.toString.call(t)}function r(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=n,t.__isDate=function(t){return"object"==typeof t&&"[object Date]"===n(t)},t.__isArray=function(t){return"object"==typeof t&&"[object Array]"===n(t)},t.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===n(t)},t.__getRegExpFlags=r,t}();t.exports&&(t.exports=n)}).call(this,n(498).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),f=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=255&e;2===s&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,u[f++]=255&e);1===s&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,u[f++]=e>>8&255,u[f++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(f(t,a,a+16383>s?s:a+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?o-1:0,h=n?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-f)-1,p>>=-f,f+=s;f>0;i=256*i+t[e+l],l+=h,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*m}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){var n=Array.prototype.reverse;t.exports=function(t){return null==t?t:n.call(t)}},function(t,e){String.prototype.codePointAt||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),e=function(t){if(null==this)throw TypeError();var e=String(this),n=e.length,r=t?Number(t):0;if(r!=r&&(r=0),!(r<0||r>=n)){var o,i=e.charCodeAt(r);return i>=55296&&i<=56319&&n>r+1&&(o=e.charCodeAt(r+1))>=56320&&o<=57343?1024*(i-55296)+o-56320+65536:i}};t?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}()},function(t,e){function n(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(t,e){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new n,this.dtree=new n}var o=new n,i=new n,a=new Uint8Array(30),s=new Uint16Array(30),u=new Uint8Array(30),c=new Uint16Array(30),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new n,h=new Uint8Array(320);function p(t,e,n,r){var o,i;for(o=0;o<n;++o)t[o]=0;for(o=0;o<30-n;++o)t[o+n]=o/n|0;for(i=r,o=0;o<30;++o)e[o]=i,i+=1<<t[o]}var d=new Uint16Array(16);function m(t,e,n,r){var o,i;for(o=0;o<16;++o)t.table[o]=0;for(o=0;o<r;++o)t.table[e[n+o]]++;for(t.table[0]=0,i=0,o=0;o<16;++o)d[o]=i,i+=t.table[o];for(o=0;o<r;++o)e[n+o]&&(t.trans[d[e[n+o]]++]=o)}function g(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=1&t.tag;return t.tag>>>=1,e}function v(t,e,n){if(!e)return n;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,r+n}function y(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var n=0,r=0,o=0,i=t.tag;do{r=2*r+(1&i),i>>>=1,++o,n+=e.table[o],r-=e.table[o]}while(r>=0);return t.tag=i,t.bitcount-=o,e.trans[n+r]}function b(t,e,n){var r,o,i,a,s,u;for(r=v(t,5,257),o=v(t,5,1),i=v(t,4,4),a=0;a<19;++a)h[a]=0;for(a=0;a<i;++a){var c=v(t,3,0);h[f[a]]=c}for(m(l,h,0,19),s=0;s<r+o;){var p=y(t,l);switch(p){case 16:var d=h[s-1];for(u=v(t,2,3);u;--u)h[s++]=d;break;case 17:for(u=v(t,3,3);u;--u)h[s++]=0;break;case 18:for(u=v(t,7,11);u;--u)h[s++]=0;break;default:h[s++]=p}}m(e,h,0,r),m(n,h,r,o)}function x(t,e,n){for(;;){var r,o,i,f,l=y(t,e);if(256===l)return 0;if(l<256)t.dest[t.destLen++]=l;else for(r=v(t,a[l-=257],s[l]),o=y(t,n),f=i=t.destLen-v(t,u[o],c[o]);f<i+r;++f)t.dest[t.destLen++]=t.dest[f]}}function w(t){for(var e,n;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if((e=256*(e=t.source[t.sourceIndex+1])+t.source[t.sourceIndex])!==(65535&~(256*t.source[t.sourceIndex+3]+t.source[t.sourceIndex+2])))return-3;for(t.sourceIndex+=4,n=e;n;--n)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,0}!function(t,e){var n;for(n=0;n<7;++n)t.table[n]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,n=0;n<24;++n)t.trans[n]=256+n;for(n=0;n<144;++n)t.trans[24+n]=n;for(n=0;n<8;++n)t.trans[168+n]=280+n;for(n=0;n<112;++n)t.trans[176+n]=144+n;for(n=0;n<5;++n)e.table[n]=0;for(e.table[5]=32,n=0;n<32;++n)e.trans[n]=n}(o,i),p(a,s,4,3),p(u,c,2,1),a[28]=0,s[28]=258,t.exports=function(t,e){var n,a,s=new r(t,e);do{switch(n=g(s),v(s,2,0)){case 0:a=w(s);break;case 1:a=x(s,o,i);break;case 2:b(s,s.ltree,s.dtree),a=x(s,s.ltree,s.dtree);break;default:a=-3}if(0!==a)throw new Error("Data error")}while(!n);return s.destLen<s.dest.length?"function"==typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest}},function(t,e,n){"use strict";n.r(e),n.d(e,"Font",(function(){return tr})),n.d(e,"Glyph",(function(){return et})),n.d(e,"Path",(function(){return c})),n.d(e,"BoundingBox",(function(){return s})),n.d(e,"_parse",(function(){return G})),n.d(e,"parse",(function(){return gr})),n.d(e,"load",(function(){return vr})),n.d(e,"loadSync",(function(){return yr}));n(604);var r=n(605),o=n.n(r);function i(t,e,n,r,o){return Math.pow(1-o,3)*t+3*Math.pow(1-o,2)*o*e+3*(1-o)*Math.pow(o,2)*n+Math.pow(o,3)*r}function a(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}a.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},a.prototype.addPoint=function(t,e){"number"==typeof t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),"number"==typeof e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},a.prototype.addX=function(t){this.addPoint(t,null)},a.prototype.addY=function(t){this.addPoint(null,t)},a.prototype.addBezier=function(t,e,n,r,o,a,s,u){const c=[t,e],f=[n,r],l=[o,a],h=[s,u];this.addPoint(t,e),this.addPoint(s,u);for(let t=0;t<=1;t++){const e=6*c[t]-12*f[t]+6*l[t],n=-3*c[t]+9*f[t]-9*l[t]+3*h[t],r=3*f[t]-3*c[t];if(0===n){if(0===e)continue;const n=-r/e;0<n&&n<1&&(0===t&&this.addX(i(c[t],f[t],l[t],h[t],n)),1===t&&this.addY(i(c[t],f[t],l[t],h[t],n)));continue}const o=Math.pow(e,2)-4*r*n;if(o<0)continue;const a=(-e+Math.sqrt(o))/(2*n);0<a&&a<1&&(0===t&&this.addX(i(c[t],f[t],l[t],h[t],a)),1===t&&this.addY(i(c[t],f[t],l[t],h[t],a)));const s=(-e-Math.sqrt(o))/(2*n);0<s&&s<1&&(0===t&&this.addX(i(c[t],f[t],l[t],h[t],s)),1===t&&this.addY(i(c[t],f[t],l[t],h[t],s)))}},a.prototype.addQuad=function(t,e,n,r,o,i){const a=t+2/3*(n-t),s=e+2/3*(r-e),u=a+1/3*(o-t),c=s+1/3*(i-e);this.addBezier(t,e,a,s,u,c,o,i)};var s=a;function u(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}u.prototype.moveTo=function(t,e){this.commands.push({type:"M",x:t,y:e})},u.prototype.lineTo=function(t,e){this.commands.push({type:"L",x:t,y:e})},u.prototype.curveTo=u.prototype.bezierCurveTo=function(t,e,n,r,o,i){this.commands.push({type:"C",x1:t,y1:e,x2:n,y2:r,x:o,y:i})},u.prototype.quadTo=u.prototype.quadraticCurveTo=function(t,e,n,r){this.commands.push({type:"Q",x1:t,y1:e,x:n,y:r})},u.prototype.close=u.prototype.closePath=function(){this.commands.push({type:"Z"})},u.prototype.extend=function(t){if(t.commands)t=t.commands;else if(t instanceof s){const e=t;return this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),void this.close()}Array.prototype.push.apply(this.commands,t)},u.prototype.getBoundingBox=function(){const t=new s;let e=0,n=0,r=0,o=0;for(let i=0;i<this.commands.length;i++){const a=this.commands[i];switch(a.type){case"M":t.addPoint(a.x,a.y),e=r=a.x,n=o=a.y;break;case"L":t.addPoint(a.x,a.y),r=a.x,o=a.y;break;case"Q":t.addQuad(r,o,a.x1,a.y1,a.x,a.y),r=a.x,o=a.y;break;case"C":t.addBezier(r,o,a.x1,a.y1,a.x2,a.y2,a.x,a.y),r=a.x,o=a.y;break;case"Z":r=e,o=n;break;default:throw new Error("Unexpected path command "+a.type)}}return t.isEmpty()&&t.addPoint(0,0),t},u.prototype.draw=function(t){t.beginPath();for(let e=0;e<this.commands.length;e+=1){const n=this.commands[e];"M"===n.type?t.moveTo(n.x,n.y):"L"===n.type?t.lineTo(n.x,n.y):"C"===n.type?t.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?t.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())},u.prototype.toPathData=function(t){function e(e){return Math.round(e)===e?""+Math.round(e):e.toFixed(t)}function n(){let t="";for(let n=0;n<arguments.length;n+=1){const r=arguments[n];r>=0&&n>0&&(t+=" "),t+=e(r)}return t}t=void 0!==t?t:2;let r="";for(let t=0;t<this.commands.length;t+=1){const e=this.commands[t];"M"===e.type?r+="M"+n(e.x,e.y):"L"===e.type?r+="L"+n(e.x,e.y):"C"===e.type?r+="C"+n(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type?r+="Q"+n(e.x1,e.y1,e.x,e.y):"Z"===e.type&&(r+="Z")}return r},u.prototype.toSVG=function(t){let e='<path d="';return e+=this.toPathData(t),e+='"',this.fill&&"black"!==this.fill&&(null===this.fill?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e},u.prototype.toDOMElement=function(t){const e=this.toPathData(t),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n};var c=u;function f(t){throw new Error(t)}function l(t,e){t||f(e)}var h={fail:f,argument:l,assert:l};const p={},d={},m={};function g(t){return function(){return t}}d.BYTE=function(t){return h.argument(t>=0&&t<=255,"Byte value should be between 0 and 255."),[t]},m.BYTE=g(1),d.CHAR=function(t){return[t.charCodeAt(0)]},m.CHAR=g(1),d.CHARARRAY=function(t){const e=[];for(let n=0;n<t.length;n+=1)e[n]=t.charCodeAt(n);return e},m.CHARARRAY=function(t){return t.length},d.USHORT=function(t){return[t>>8&255,255&t]},m.USHORT=g(2),d.SHORT=function(t){return t>=32768&&(t=-(65536-t)),[t>>8&255,255&t]},m.SHORT=g(2),d.UINT24=function(t){return[t>>16&255,t>>8&255,255&t]},m.UINT24=g(3),d.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},m.ULONG=g(4),d.LONG=function(t){return t>=2147483648&&(t=-(4294967296-t)),[t>>24&255,t>>16&255,t>>8&255,255&t]},m.LONG=g(4),d.FIXED=d.ULONG,m.FIXED=m.ULONG,d.FWORD=d.SHORT,m.FWORD=m.SHORT,d.UFWORD=d.USHORT,m.UFWORD=m.USHORT,d.LONGDATETIME=function(t){return[0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t]},m.LONGDATETIME=g(8),d.TAG=function(t){return h.argument(4===t.length,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]},m.TAG=g(4),d.Card8=d.BYTE,m.Card8=m.BYTE,d.Card16=d.USHORT,m.Card16=m.USHORT,d.OffSize=d.BYTE,m.OffSize=m.BYTE,d.SID=d.USHORT,m.SID=m.USHORT,d.NUMBER=function(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?[247+((t-=108)>>8),255&t]:t>=-1131&&t<=-108?[251+((t=-t-108)>>8),255&t]:t>=-32768&&t<=32767?d.NUMBER16(t):d.NUMBER32(t)},m.NUMBER=function(t){return d.NUMBER(t).length},d.NUMBER16=function(t){return[28,t>>8&255,255&t]},m.NUMBER16=g(3),d.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,255&t]},m.NUMBER32=g(5),d.REAL=function(t){let e=t.toString();const n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(n){const r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));e=(Math.round(t*r)/r).toString()}let r="";for(let t=0,n=e.length;t<n;t+=1){const n=e[t];r+="e"===n?"-"===e[++t]?"c":"b":"."===n?"a":"-"===n?"e":n}r+=1&r.length?"f":"ff";const o=[30];for(let t=0,e=r.length;t<e;t+=2)o.push(parseInt(r.substr(t,2),16));return o},m.REAL=function(t){return d.REAL(t).length},d.NAME=d.CHARARRAY,m.NAME=m.CHARARRAY,d.STRING=d.CHARARRAY,m.STRING=m.CHARARRAY,p.UTF8=function(t,e,n){const r=[],o=n;for(let n=0;n<o;n++,e+=1)r[n]=t.getUint8(e);return String.fromCharCode.apply(null,r)},p.UTF16=function(t,e,n){const r=[],o=n/2;for(let n=0;n<o;n++,e+=2)r[n]=t.getUint16(e);return String.fromCharCode.apply(null,r)},d.UTF16=function(t){const e=[];for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e[e.length]=r>>8&255,e[e.length]=255&r}return e},m.UTF16=function(t){return 2*t.length};const v={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};p.MACSTRING=function(t,e,n,r){const o=v[r];if(void 0===o)return;let i="";for(let r=0;r<n;r++){const n=t.getUint8(e+r);i+=n<=127?String.fromCharCode(n):o[127&n]}return i};const y="function"==typeof WeakMap&&new WeakMap;let b;function x(t){return t>=-128&&t<=127}function w(t,e,n){let r=0;const o=t.length;for(;e<o&&r<64&&0===t[e];)++e,++r;return n.push(128|r-1),e}function S(t,e,n){let r=0;const o=t.length;let i=e;for(;i<o&&r<64;){const e=t[i];if(!x(e))break;if(0===e&&i+1<o&&0===t[i+1])break;++i,++r}n.push(r-1);for(let r=e;r<i;++r)n.push(t[r]+256&255);return i}function M(t,e,n){let r=0;const o=t.length;let i=e;for(;i<o&&r<64;){const e=t[i];if(0===e)break;if(x(e)&&i+1<o&&x(t[i+1]))break;++i,++r}n.push(64|r-1);for(let r=e;r<i;++r){const e=t[r];n.push(e+65536>>8&255,e+256&255)}return i}d.MACSTRING=function(t,e){const n=function(t){if(!b){b={};for(let t in v)b[t]=new String(t)}const e=b[t];if(void 0===e)return;if(y){const t=y.get(e);if(void 0!==t)return t}const n=v[t];if(void 0===n)return;const r={};for(let t=0;t<n.length;t++)r[n.charCodeAt(t)]=t+128;return y&&y.set(e,r),r}(e);if(void 0===n)return;const r=[];for(let e=0;e<t.length;e++){let o=t.charCodeAt(e);if(o>=128&&(o=n[o],void 0===o))return;r[e]=o}return r},m.MACSTRING=function(t,e){const n=d.MACSTRING(t,e);return void 0!==n?n.length:0},d.VARDELTAS=function(t){let e=0;const n=[];for(;e<t.length;){const r=t[e];e=0===r?w(t,e,n):r>=-128&&r<=127?S(t,e,n):M(t,e,n)}return n},d.INDEX=function(t){let e=1;const n=[e],r=[];for(let o=0;o<t.length;o+=1){const i=d.OBJECT(t[o]);Array.prototype.push.apply(r,i),e+=i.length,n.push(e)}if(0===r.length)return[0,0];const o=[],i=1+Math.floor(Math.log(e)/Math.log(2))/8|0,a=[void 0,d.BYTE,d.USHORT,d.UINT24,d.ULONG][i];for(let t=0;t<n.length;t+=1){const e=a(n[t]);Array.prototype.push.apply(o,e)}return Array.prototype.concat(d.Card16(t.length),d.OffSize(i),o,r)},m.INDEX=function(t){return d.INDEX(t).length},d.DICT=function(t){let e=[];const n=Object.keys(t),r=n.length;for(let o=0;o<r;o+=1){const r=parseInt(n[o],0),i=t[r];e=e.concat(d.OPERAND(i.value,i.type)),e=e.concat(d.OPERATOR(r))}return e},m.DICT=function(t){return d.DICT(t).length},d.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]},d.OPERAND=function(t,e){let n=[];if(Array.isArray(e))for(let r=0;r<e.length;r+=1)h.argument(t.length===e.length,"Not enough arguments given for type"+e),n=n.concat(d.OPERAND(t[r],e[r]));else if("SID"===e)n=n.concat(d.NUMBER(t));else if("offset"===e)n=n.concat(d.NUMBER32(t));else if("number"===e)n=n.concat(d.NUMBER(t));else{if("real"!==e)throw new Error("Unknown operand type "+e);n=n.concat(d.REAL(t))}return n},d.OP=d.BYTE,m.OP=m.BYTE;const A="function"==typeof WeakMap&&new WeakMap;function T(t,e,n){for(let t=0;t<e.length;t+=1){const n=e[t];this[n.name]=n.value}if(this.tableName=t,this.fields=e,n){const t=Object.keys(n);for(let e=0;e<t.length;e+=1){const r=t[e],o=n[r];void 0!==this[r]&&(this[r]=o)}}}function O(t,e,n){void 0===n&&(n=e.length);const r=new Array(e.length+1);r[0]={name:t+"Count",type:"USHORT",value:n};for(let n=0;n<e.length;n++)r[n+1]={name:t+n,type:"USHORT",value:e[n]};return r}function k(t,e,n){const r=e.length,o=new Array(r+1);o[0]={name:t+"Count",type:"USHORT",value:r};for(let i=0;i<r;i++)o[i+1]={name:t+i,type:"TABLE",value:n(e[i],i)};return o}function E(t,e,n){const r=e.length;let o=[];o[0]={name:t+"Count",type:"USHORT",value:r};for(let t=0;t<r;t++)o=o.concat(n(e[t],t));return o}function R(t){1===t.format?T.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(O("glyph",t.glyphs))):h.assert(!1,"Can't create coverage table format 2 yet.")}function C(t){T.call(this,"scriptListTable",E("scriptRecord",t,(function(t,e){const n=t.script;let r=n.defaultLangSys;return h.assert(!!r,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+e,type:"TAG",value:t.tag},{name:"script"+e,type:"TABLE",value:new T("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new T("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(O("featureIndex",r.featureIndexes)))}].concat(E("langSys",n.langSysRecords,(function(t,e){const n=t.langSys;return[{name:"langSysTag"+e,type:"TAG",value:t.tag},{name:"langSys"+e,type:"TABLE",value:new T("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(O("featureIndex",n.featureIndexes)))}]}))))}]})))}function U(t){T.call(this,"featureListTable",E("featureRecord",t,(function(t,e){const n=t.feature;return[{name:"featureTag"+e,type:"TAG",value:t.tag},{name:"feature"+e,type:"TABLE",value:new T("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(O("lookupListIndex",n.lookupListIndexes)))}]})))}function _(t,e){T.call(this,"lookupListTable",k("lookup",t,(function(t){let n=e[t.lookupType];return h.assert(!!n,"Unable to write GSUB lookup type "+t.lookupType+" tables."),new T("lookupTable",[{name:"lookupType",type:"USHORT",value:t.lookupType},{name:"lookupFlag",type:"USHORT",value:t.lookupFlag}].concat(k("subtable",t.subtables,n)))})))}d.CHARSTRING=function(t){if(A){const e=A.get(t);if(void 0!==e)return e}let e=[];const n=t.length;for(let r=0;r<n;r+=1){const n=t[r];e=e.concat(d[n.type](n.value))}return A&&A.set(t,e),e},m.CHARSTRING=function(t){return d.CHARSTRING(t).length},d.OBJECT=function(t){const e=d[t.type];return h.argument(void 0!==e,"No encoding function for type "+t.type),e(t.value)},m.OBJECT=function(t){const e=m[t.type];return h.argument(void 0!==e,"No sizeOf function for type "+t.type),e(t.value)},d.TABLE=function(t){let e=[];const n=t.fields.length,r=[],o=[];for(let i=0;i<n;i+=1){const n=t.fields[i],a=d[n.type];h.argument(void 0!==a,"No encoding function for field type "+n.type+" ("+n.name+")");let s=t[n.name];void 0===s&&(s=n.value);const u=a(s);"TABLE"===n.type?(o.push(e.length),e=e.concat([0,0]),r.push(u)):e=e.concat(u)}for(let n=0;n<r.length;n+=1){const i=o[n],a=e.length;h.argument(a<65536,"Table "+t.tableName+" too big."),e[i]=a>>8,e[i+1]=255&a,e=e.concat(r[n])}return e},m.TABLE=function(t){let e=0;const n=t.fields.length;for(let r=0;r<n;r+=1){const n=t.fields[r],o=m[n.type];h.argument(void 0!==o,"No sizeOf function for field type "+n.type+" ("+n.name+")");let i=t[n.name];void 0===i&&(i=n.value),e+=o(i),"TABLE"===n.type&&(e+=2)}return e},d.RECORD=d.TABLE,m.RECORD=m.TABLE,d.LITERAL=function(t){return t},m.LITERAL=function(t){return t.length},T.prototype.encode=function(){return d.TABLE(this)},T.prototype.sizeOf=function(){return m.TABLE(this)},R.prototype=Object.create(T.prototype),R.prototype.constructor=R,C.prototype=Object.create(T.prototype),C.prototype.constructor=C,U.prototype=Object.create(T.prototype),U.prototype.constructor=U,_.prototype=Object.create(T.prototype),_.prototype.constructor=_;var I={Table:T,Record:T,Coverage:R,ScriptList:C,FeatureList:U,LookupList:_,ushortList:O,tableList:k,recordList:E};function L(t,e){return t.getUint8(e)}function D(t,e){return t.getUint16(e,!1)}function P(t,e){return t.getUint32(e,!1)}function B(t,e){return t.getInt16(e,!1)+t.getUint16(e+2,!1)/65535}const N={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function F(t,e){this.data=t,this.offset=e,this.relativeOffset=0}F.prototype.parseByte=function(){const t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},F.prototype.parseChar=function(){const t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},F.prototype.parseCard8=F.prototype.parseByte,F.prototype.parseUShort=function(){const t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},F.prototype.parseCard16=F.prototype.parseUShort,F.prototype.parseSID=F.prototype.parseUShort,F.prototype.parseOffset16=F.prototype.parseUShort,F.prototype.parseShort=function(){const t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},F.prototype.parseF2Dot14=function(){const t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t},F.prototype.parseULong=function(){const t=P(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},F.prototype.parseOffset32=F.prototype.parseULong,F.prototype.parseFixed=function(){const t=B(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},F.prototype.parseString=function(t){const e=this.data,n=this.offset+this.relativeOffset;let r="";this.relativeOffset+=t;for(let o=0;o<t;o++)r+=String.fromCharCode(e.getUint8(n+o));return r},F.prototype.parseTag=function(){return this.parseString(4)},F.prototype.parseLongDateTime=function(){let t=P(this.data,this.offset+this.relativeOffset+4);return t-=2082844800,this.relativeOffset+=8,t},F.prototype.parseVersion=function(t){const e=D(this.data,this.offset+this.relativeOffset),n=D(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===t&&(t=4096),e+n/t/10},F.prototype.skip=function(t,e){void 0===e&&(e=1),this.relativeOffset+=N[t]*e},F.prototype.parseULongList=function(t){void 0===t&&(t=this.parseULong());const e=new Array(t),n=this.data;let r=this.offset+this.relativeOffset;for(let o=0;o<t;o++)e[o]=n.getUint32(r),r+=4;return this.relativeOffset+=4*t,e},F.prototype.parseOffset16List=F.prototype.parseUShortList=function(t){void 0===t&&(t=this.parseUShort());const e=new Array(t),n=this.data;let r=this.offset+this.relativeOffset;for(let o=0;o<t;o++)e[o]=n.getUint16(r),r+=2;return this.relativeOffset+=2*t,e},F.prototype.parseShortList=function(t){const e=new Array(t),n=this.data;let r=this.offset+this.relativeOffset;for(let o=0;o<t;o++)e[o]=n.getInt16(r),r+=2;return this.relativeOffset+=2*t,e},F.prototype.parseByteList=function(t){const e=new Array(t),n=this.data;let r=this.offset+this.relativeOffset;for(let o=0;o<t;o++)e[o]=n.getUint8(r++);return this.relativeOffset+=t,e},F.prototype.parseList=function(t,e){e||(e=t,t=this.parseUShort());const n=new Array(t);for(let r=0;r<t;r++)n[r]=e.call(this);return n},F.prototype.parseList32=function(t,e){e||(e=t,t=this.parseULong());const n=new Array(t);for(let r=0;r<t;r++)n[r]=e.call(this);return n},F.prototype.parseRecordList=function(t,e){e||(e=t,t=this.parseUShort());const n=new Array(t),r=Object.keys(e);for(let o=0;o<t;o++){const t={};for(let n=0;n<r.length;n++){const o=r[n],i=e[o];t[o]=i.call(this)}n[o]=t}return n},F.prototype.parseRecordList32=function(t,e){e||(e=t,t=this.parseULong());const n=new Array(t),r=Object.keys(e);for(let o=0;o<t;o++){const t={};for(let n=0;n<r.length;n++){const o=r[n],i=e[o];t[o]=i.call(this)}n[o]=t}return n},F.prototype.parseStruct=function(t){if("function"==typeof t)return t.call(this);{const e=Object.keys(t),n={};for(let r=0;r<e.length;r++){const o=e[r],i=t[o];n[o]=i.call(this)}return n}},F.prototype.parseValueRecord=function(t){if(void 0===t&&(t=this.parseUShort()),0===t)return;const e={};return 1&t&&(e.xPlacement=this.parseShort()),2&t&&(e.yPlacement=this.parseShort()),4&t&&(e.xAdvance=this.parseShort()),8&t&&(e.yAdvance=this.parseShort()),16&t&&(e.xPlaDevice=void 0,this.parseShort()),32&t&&(e.yPlaDevice=void 0,this.parseShort()),64&t&&(e.xAdvDevice=void 0,this.parseShort()),128&t&&(e.yAdvDevice=void 0,this.parseShort()),e},F.prototype.parseValueRecordList=function(){const t=this.parseUShort(),e=this.parseUShort(),n=new Array(e);for(let r=0;r<e;r++)n[r]=this.parseValueRecord(t);return n},F.prototype.parsePointer=function(t){const e=this.parseOffset16();if(e>0)return new F(this.data,this.offset+e).parseStruct(t)},F.prototype.parsePointer32=function(t){const e=this.parseOffset32();if(e>0)return new F(this.data,this.offset+e).parseStruct(t)},F.prototype.parseListOfLists=function(t){const e=this.parseOffset16List(),n=e.length,r=this.relativeOffset,o=new Array(n);for(let r=0;r<n;r++){const n=e[r];if(0!==n)if(this.relativeOffset=n,t){const e=this.parseOffset16List(),i=new Array(e.length);for(let r=0;r<e.length;r++)this.relativeOffset=n+e[r],i[r]=t.call(this);o[r]=i}else o[r]=this.parseUShortList();else o[r]=void 0}return this.relativeOffset=r,o},F.prototype.parseCoverage=function(){const t=this.offset+this.relativeOffset,e=this.parseUShort(),n=this.parseUShort();if(1===e)return{format:1,glyphs:this.parseUShortList(n)};if(2===e){const t=new Array(n);for(let e=0;e<n;e++)t[e]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:t}}throw new Error("0x"+t.toString(16)+": Coverage format must be 1 or 2.")},F.prototype.parseClassDef=function(){const t=this.offset+this.relativeOffset,e=this.parseUShort();if(1===e)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===e)return{format:2,ranges:this.parseRecordList({start:F.uShort,end:F.uShort,classId:F.uShort})};throw new Error("0x"+t.toString(16)+": ClassDef format must be 1 or 2.")},F.list=function(t,e){return function(){return this.parseList(t,e)}},F.list32=function(t,e){return function(){return this.parseList32(t,e)}},F.recordList=function(t,e){return function(){return this.parseRecordList(t,e)}},F.recordList32=function(t,e){return function(){return this.parseRecordList32(t,e)}},F.pointer=function(t){return function(){return this.parsePointer(t)}},F.pointer32=function(t){return function(){return this.parsePointer32(t)}},F.tag=F.prototype.parseTag,F.byte=F.prototype.parseByte,F.uShort=F.offset16=F.prototype.parseUShort,F.uShortList=F.prototype.parseUShortList,F.uLong=F.offset32=F.prototype.parseULong,F.uLongList=F.prototype.parseULongList,F.struct=F.prototype.parseStruct,F.coverage=F.prototype.parseCoverage,F.classDef=F.prototype.parseClassDef;const j={reserved:F.uShort,reqFeatureIndex:F.uShort,featureIndexes:F.uShortList};F.prototype.parseScriptList=function(){return this.parsePointer(F.recordList({tag:F.tag,script:F.pointer({defaultLangSys:F.pointer(j),langSysRecords:F.recordList({tag:F.tag,langSys:F.pointer(j)})})}))||[]},F.prototype.parseFeatureList=function(){return this.parsePointer(F.recordList({tag:F.tag,feature:F.pointer({featureParams:F.offset16,lookupListIndexes:F.uShortList})}))||[]},F.prototype.parseLookupList=function(t){return this.parsePointer(F.list(F.pointer((function(){const e=this.parseUShort();h.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");const n=this.parseUShort(),r=16&n;return{lookupType:e,lookupFlag:n,subtables:this.parseList(F.pointer(t[e])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},F.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){const t=this.parseUShort(),e=this.parseUShort();return h.argument(1===t&&e<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:F.offset32,featureTableSubstitutionOffset:F.offset32})}))||[]};var G={getByte:L,getCard8:L,getUShort:D,getCard16:D,getShort:function(t,e){return t.getInt16(e,!1)},getULong:P,getFixed:B,getTag:function(t,e){let n="";for(let r=e;r<e+4;r+=1)n+=String.fromCharCode(t.getInt8(r));return n},getOffset:function(t,e,n){let r=0;for(let o=0;o<n;o+=1)r<<=8,r+=t.getUint8(e+o);return r},getBytes:function(t,e,n){const r=[];for(let o=e;o<n;o+=1)r.push(t.getUint8(o));return r},bytesToString:function(t){let e="";for(let n=0;n<t.length;n+=1)e+=String.fromCharCode(t[n]);return e},Parser:F};function z(t,e,n){t.segments.push({end:e,start:e,delta:-(e-n),offset:0,glyphIndex:n})}var H={parse:function(t,e){const n={};n.version=G.getUShort(t,e),h.argument(0===n.version,"cmap table version should be 0."),n.numTables=G.getUShort(t,e+2);let r=-1;for(let o=n.numTables-1;o>=0;o-=1){const n=G.getUShort(t,e+4+8*o),i=G.getUShort(t,e+4+8*o+2);if(3===n&&(0===i||1===i||10===i)||0===n&&(0===i||1===i||2===i||3===i||4===i)){r=G.getULong(t,e+4+8*o+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");const o=new G.Parser(t,e+r);if(n.format=o.parseUShort(),12===n.format)!function(t,e){let n;e.parseUShort(),t.length=e.parseULong(),t.language=e.parseULong(),t.groupCount=n=e.parseULong(),t.glyphIndexMap={};for(let r=0;r<n;r+=1){const n=e.parseULong(),r=e.parseULong();let o=e.parseULong();for(let e=n;e<=r;e+=1)t.glyphIndexMap[e]=o,o++}}(n,o);else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");!function(t,e,n,r,o){let i;t.length=e.parseUShort(),t.language=e.parseUShort(),t.segCount=i=e.parseUShort()>>1,e.skip("uShort",3),t.glyphIndexMap={};const a=new G.Parser(n,r+o+14),s=new G.Parser(n,r+o+16+2*i),u=new G.Parser(n,r+o+16+4*i),c=new G.Parser(n,r+o+16+6*i);let f=r+o+16+8*i;for(let e=0;e<i-1;e+=1){let e;const r=a.parseUShort(),o=s.parseUShort(),i=u.parseShort(),l=c.parseUShort();for(let a=o;a<=r;a+=1)0!==l?(f=c.offset+c.relativeOffset-2,f+=l,f+=2*(a-o),e=G.getUShort(n,f),0!==e&&(e=e+i&65535)):e=a+i&65535,t.glyphIndexMap[a]=e}}(n,o,t,e,r)}return n},make:function(t){let e,n=!0;for(e=t.length-1;e>0;e-=1){if(t.get(e).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),n=!1;break}}let r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:n?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:n?12:20}];n||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);const o=new I.Table("cmap",r);for(o.segments=[],e=0;e<t.length;e+=1){const n=t.get(e);for(let t=0;t<n.unicodes.length;t+=1)z(o,n.unicodes[t],e);o.segments=o.segments.sort((function(t,e){return t.start-e.start}))}!function(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}(o);const i=o.segments.length;let a=0,s=[],u=[],c=[],f=[],l=[],h=[];for(e=0;e<i;e+=1){const t=o.segments[e];t.end<=65535&&t.start<=65535?(s=s.concat({name:"end_"+e,type:"USHORT",value:t.end}),u=u.concat({name:"start_"+e,type:"USHORT",value:t.start}),c=c.concat({name:"idDelta_"+e,type:"SHORT",value:t.delta}),f=f.concat({name:"idRangeOffset_"+e,type:"USHORT",value:t.offset}),void 0!==t.glyphId&&(l=l.concat({name:"glyph_"+e,type:"USHORT",value:t.glyphId}))):a+=1,n||void 0===t.glyphIndex||(h=h.concat({name:"cmap12Start_"+e,type:"ULONG",value:t.start}),h=h.concat({name:"cmap12End_"+e,type:"ULONG",value:t.end}),h=h.concat({name:"cmap12Glyph_"+e,type:"ULONG",value:t.glyphIndex}))}if(o.segCountX2=2*(i-a),o.searchRange=2*Math.pow(2,Math.floor(Math.log(i-a)/Math.log(2))),o.entrySelector=Math.log(o.searchRange/2)/Math.log(2),o.rangeShift=o.segCountX2-o.searchRange,o.fields=o.fields.concat(s),o.fields.push({name:"reservedPad",type:"USHORT",value:0}),o.fields=o.fields.concat(u),o.fields=o.fields.concat(c),o.fields=o.fields.concat(f),o.fields=o.fields.concat(l),o.cmap4Length=14+2*s.length+2+2*u.length+2*c.length+2*f.length+2*l.length,!n){const t=16+4*h.length;o.cmap12Offset=20+o.cmap4Length,o.fields=o.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:t},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:h.length/3}]),o.fields=o.fields.concat(h)}return o}};const q=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],W=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],V=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Y=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function X(t){this.font=t}function J(t){this.cmap=t}function Z(t,e){this.encoding=t,this.charset=e}function Q(t){switch(t.version){case 1:this.names=Y.slice();break;case 2:this.names=new Array(t.numberOfGlyphs);for(let e=0;e<t.numberOfGlyphs;e++)t.glyphNameIndex[e]<Y.length?this.names[e]=Y[t.glyphNameIndex[e]]:this.names[e]=t.names[t.glyphNameIndex[e]-Y.length];break;case 2.5:this.names=new Array(t.numberOfGlyphs);for(let e=0;e<t.numberOfGlyphs;e++)this.names[e]=Y[e+t.glyphNameIndex[e]];break;case 3:default:this.names=[]}}function K(t,e){e.lowMemory?function(t){t._IndexToUnicodeMap={};const e=t.tables.cmap.glyphIndexMap,n=Object.keys(e);for(let r=0;r<n.length;r+=1){const o=n[r];let i=e[o];void 0===t._IndexToUnicodeMap[i]?t._IndexToUnicodeMap[i]={unicodes:[parseInt(o)]}:t._IndexToUnicodeMap[i].unicodes.push(parseInt(o))}}(t):function(t){let e;const n=t.tables.cmap.glyphIndexMap,r=Object.keys(n);for(let o=0;o<r.length;o+=1){const i=r[o],a=n[i];e=t.glyphs.get(a),e.addUnicode(parseInt(i))}for(let n=0;n<t.glyphs.length;n+=1)e=t.glyphs.get(n),t.cffEncoding?t.isCIDFont?e.name="gid"+n:e.name=t.cffEncoding.charset[n]:t.glyphNames.names&&(e.name=t.glyphNames.glyphIndexToName(n))}(t)}X.prototype.charToGlyphIndex=function(t){const e=t.codePointAt(0),n=this.font.glyphs;if(n)for(let t=0;t<n.length;t+=1){const r=n.get(t);for(let n=0;n<r.unicodes.length;n+=1)if(r.unicodes[n]===e)return t}return null},J.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.codePointAt(0)]||0},Z.prototype.charToGlyphIndex=function(t){const e=t.codePointAt(0),n=this.encoding[e];return this.charset.indexOf(n)},Q.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)},Q.prototype.glyphIndexToName=function(t){return this.names[t]};var $={line:function(t,e,n,r,o){t.beginPath(),t.moveTo(e,n),t.lineTo(r,o),t.stroke()}};function tt(t){this.bindConstructorValues(t)}tt.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||void 0!==t.unicode?[t.unicode]:[],t.xMin&&(this.xMin=t.xMin),t.yMin&&(this.yMin=t.yMin),t.xMax&&(this.xMax=t.xMax),t.yMax&&(this.yMax=t.yMax),t.advanceWidth&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",function(t,e){let n=e||new c;return{configurable:!0,get:function(){return"function"==typeof n&&(n=n()),n},set:function(t){n=t}}}(0,t.path))},tt.prototype.addUnicode=function(t){0===this.unicodes.length&&(this.unicode=t),this.unicodes.push(t)},tt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},tt.prototype.getPath=function(t,e,n,r,o){let i,a;t=void 0!==t?t:0,e=void 0!==e?e:0,n=void 0!==n?n:72,r||(r={});let s=r.xScale,u=r.yScale;if(r.hinting&&o&&o.hinting&&(a=this.path&&o.hinting.exec(this,n)),a)i=o.hinting.getCommands(a),t=Math.round(t),e=Math.round(e),s=u=1;else{i=this.path.commands;const t=1/(this.path.unitsPerEm||1e3)*n;void 0===s&&(s=t),void 0===u&&(u=t)}const f=new c;for(let n=0;n<i.length;n+=1){const r=i[n];"M"===r.type?f.moveTo(t+r.x*s,e+-r.y*u):"L"===r.type?f.lineTo(t+r.x*s,e+-r.y*u):"Q"===r.type?f.quadraticCurveTo(t+r.x1*s,e+-r.y1*u,t+r.x*s,e+-r.y*u):"C"===r.type?f.curveTo(t+r.x1*s,e+-r.y1*u,t+r.x2*s,e+-r.y2*u,t+r.x*s,e+-r.y*u):"Z"===r.type&&f.closePath()}return f},tt.prototype.getContours=function(){if(void 0===this.points)return[];const t=[];let e=[];for(let n=0;n<this.points.length;n+=1){const r=this.points[n];e.push(r),r.lastPointOfContour&&(t.push(e),e=[])}return h.argument(0===e.length,"There are still points left in the current contour."),t},tt.prototype.getMetrics=function(){const t=this.path.commands,e=[],n=[];for(let r=0;r<t.length;r+=1){const o=t[r];"Z"!==o.type&&(e.push(o.x),n.push(o.y)),"Q"!==o.type&&"C"!==o.type||(e.push(o.x1),n.push(o.y1)),"C"===o.type&&(e.push(o.x2),n.push(o.y2))}const r={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(r.xMin)||(r.xMin=0),isFinite(r.xMax)||(r.xMax=this.advanceWidth),isFinite(r.yMin)||(r.yMin=0),isFinite(r.yMax)||(r.yMax=0),r.rightSideBearing=this.advanceWidth-r.leftSideBearing-(r.xMax-r.xMin),r},tt.prototype.draw=function(t,e,n,r,o){this.getPath(e,n,r,o).draw(t)},tt.prototype.drawPoints=function(t,e,n,r){function o(e,n,r,o){const i=2*Math.PI;t.beginPath();for(let a=0;a<e.length;a+=1)t.moveTo(n+e[a].x*o,r+e[a].y*o),t.arc(n+e[a].x*o,r+e[a].y*o,2,0,i,!1);t.closePath(),t.fill()}e=void 0!==e?e:0,n=void 0!==n?n:0,r=void 0!==r?r:24;const i=1/this.path.unitsPerEm*r,a=[],s=[],u=this.path;for(let t=0;t<u.commands.length;t+=1){const e=u.commands[t];void 0!==e.x&&a.push({x:e.x,y:-e.y}),void 0!==e.x1&&s.push({x:e.x1,y:-e.y1}),void 0!==e.x2&&s.push({x:e.x2,y:-e.y2})}t.fillStyle="blue",o(a,e,n,i),t.fillStyle="red",o(s,e,n,i)},tt.prototype.drawMetrics=function(t,e,n,r){let o;e=void 0!==e?e:0,n=void 0!==n?n:0,r=void 0!==r?r:24,o=1/this.path.unitsPerEm*r,t.lineWidth=1,t.strokeStyle="black",$.line(t,e,-1e4,e,1e4),$.line(t,-1e4,n,1e4,n);const i=this.xMin||0;let a=this.yMin||0;const s=this.xMax||0;let u=this.yMax||0;const c=this.advanceWidth||0;t.strokeStyle="blue",$.line(t,e+i*o,-1e4,e+i*o,1e4),$.line(t,e+s*o,-1e4,e+s*o,1e4),$.line(t,-1e4,n+-a*o,1e4,n+-a*o),$.line(t,-1e4,n+-u*o,1e4,n+-u*o),t.strokeStyle="green",$.line(t,e+c*o,-1e4,e+c*o,1e4)};var et=tt;function nt(t,e,n){Object.defineProperty(t,e,{get:function(){return t.path,t[n]},set:function(e){t[n]=e},enumerable:!0,configurable:!0})}function rt(t,e){if(this.font=t,this.glyphs={},Array.isArray(e))for(let n=0;n<e.length;n++){const r=e[n];r.path.unitsPerEm=t.unitsPerEm,this.glyphs[n]=r}this.length=e&&e.length||0}rt.prototype.get=function(t){if(void 0===this.glyphs[t]){this.font._push(t),"function"==typeof this.glyphs[t]&&(this.glyphs[t]=this.glyphs[t]());let e=this.glyphs[t],n=this.font._IndexToUnicodeMap[t];if(n)for(let t=0;t<n.unicodes.length;t++)e.addUnicode(n.unicodes[t]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+t:e.name=this.font.cffEncoding.charset[t]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(t)),this.glyphs[t].advanceWidth=this.font._hmtxTableData[t].advanceWidth,this.glyphs[t].leftSideBearing=this.font._hmtxTableData[t].leftSideBearing}else"function"==typeof this.glyphs[t]&&(this.glyphs[t]=this.glyphs[t]());return this.glyphs[t]},rt.prototype.push=function(t,e){this.glyphs[t]=e,this.length++};var ot={GlyphSet:rt,glyphLoader:function(t,e){return new et({index:e,font:t})},ttfGlyphLoader:function(t,e,n,r,o,i){return function(){const a=new et({index:e,font:t});return a.path=function(){n(a,r,o);const e=i(t.glyphs,a);return e.unitsPerEm=t.unitsPerEm,e},nt(a,"xMin","_xMin"),nt(a,"xMax","_xMax"),nt(a,"yMin","_yMin"),nt(a,"yMax","_yMax"),a}},cffGlyphLoader:function(t,e,n,r){return function(){const o=new et({index:e,font:t});return o.path=function(){const e=n(t,o,r);return e.unitsPerEm=t.unitsPerEm,e},o}}};function it(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n+=1)if(!it(t[n],e[n]))return!1;return!0}return!1}function at(t){let e;return e=t.length<1240?107:t.length<33900?1131:32768,e}function st(t,e,n){const r=[],o=[],i=G.getCard16(t,e);let a,s;if(0!==i){const n=G.getByte(t,e+2);a=e+(i+1)*n+2;let o=e+3;for(let e=0;e<i+1;e+=1)r.push(G.getOffset(t,o,n)),o+=n;s=a+r[i]}else s=e+2;for(let e=0;e<r.length-1;e+=1){let i=G.getBytes(t,a+r[e],a+r[e+1]);n&&(i=n(i)),o.push(i)}return{objects:o,startOffset:e,endOffset:s}}function ut(t,e){let n,r,o,i;if(28===e)return n=t.parseByte(),r=t.parseByte(),n<<8|r;if(29===e)return n=t.parseByte(),r=t.parseByte(),o=t.parseByte(),i=t.parseByte(),n<<24|r<<16|o<<8|i;if(30===e)return function(t){let e="";const n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){const r=t.parseByte(),o=r>>4,i=15&r;if(15===o)break;if(e+=n[o],15===i)break;e+=n[i]}return parseFloat(e)}(t);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return n=t.parseByte(),256*(e-247)+n+108;if(e>=251&&e<=254)return n=t.parseByte(),256*-(e-251)-n-108;throw new Error("Invalid b0 "+e)}function ct(t,e,n){e=void 0!==e?e:0;const r=new G.Parser(t,e),o=[];let i=[];for(n=void 0!==n?n:t.length;r.relativeOffset<n;){let t=r.parseByte();t<=21?(12===t&&(t=1200+r.parseByte()),o.push([t,i]),i=[]):i.push(ut(r,t))}return function(t){const e={};for(let n=0;n<t.length;n+=1){const r=t[n][0],o=t[n][1];let i;if(i=1===o.length?o[0]:o,e.hasOwnProperty(r)&&!isNaN(e[r]))throw new Error("Object "+e+" already has key "+r);e[r]=i}return e}(o)}function ft(t,e){return e=e<=390?q[e]:t[e-391]}function lt(t,e,n){const r={};let o;for(let i=0;i<e.length;i+=1){const a=e[i];if(Array.isArray(a.type)){const e=[];e.length=a.type.length;for(let r=0;r<a.type.length;r++)o=void 0!==t[a.op]?t[a.op][r]:void 0,void 0===o&&(o=void 0!==a.value&&void 0!==a.value[r]?a.value[r]:null),"SID"===a.type[r]&&(o=ft(n,o)),e[r]=o;r[a.name]=e}else o=t[a.op],void 0===o&&(o=void 0!==a.value?a.value:null),"SID"===a.type&&(o=ft(n,o)),r[a.name]=o}return r}const ht=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],pt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function dt(t,e){return lt(ct(t,0,t.byteLength),ht,e)}function mt(t,e,n,r){return lt(ct(t,e,n),pt,r)}function gt(t,e,n,r){const o=[];for(let i=0;i<n.length;i+=1){const a=dt(new DataView(new Uint8Array(n[i]).buffer),r);a._subrs=[],a._subrsBias=0;const s=a.private[0],u=a.private[1];if(0!==s&&0!==u){const n=mt(t,u+e,s,r);if(a._defaultWidthX=n.defaultWidthX,a._nominalWidthX=n.nominalWidthX,0!==n.subrs){const r=st(t,u+n.subrs+e);a._subrs=r.objects,a._subrsBias=at(a._subrs)}a._privateDict=n}o.push(a)}return o}function vt(t,e,n){let r,o,i,a;const s=new c,u=[];let f,l,h,p,d=0,m=!1,g=!1,v=0,y=0;if(t.isCIDFont){const n=t.tables.cff.topDict._fdSelect[e.index],r=t.tables.cff.topDict._fdArray[n];f=r._subrs,l=r._subrsBias,h=r._defaultWidthX,p=r._nominalWidthX}else f=t.tables.cff.topDict._subrs,l=t.tables.cff.topDict._subrsBias,h=t.tables.cff.topDict._defaultWidthX,p=t.tables.cff.topDict._nominalWidthX;let b=h;function x(t,e){g&&s.closePath(),s.moveTo(t,e),g=!0}function w(){let t;t=u.length%2!=0,t&&!m&&(b=u.shift()+p),d+=u.length>>1,u.length=0,m=!0}return function n(c){let h,S,M,A,T,O,k,E,R,C,U,_,I=0;for(;I<c.length;){let L=c[I];switch(I+=1,L){case 1:case 3:w();break;case 4:u.length>1&&!m&&(b=u.shift()+p,m=!0),y+=u.pop(),x(v,y);break;case 5:for(;u.length>0;)v+=u.shift(),y+=u.shift(),s.lineTo(v,y);break;case 6:for(;u.length>0&&(v+=u.shift(),s.lineTo(v,y),0!==u.length);)y+=u.shift(),s.lineTo(v,y);break;case 7:for(;u.length>0&&(y+=u.shift(),s.lineTo(v,y),0!==u.length);)v+=u.shift(),s.lineTo(v,y);break;case 8:for(;u.length>0;)r=v+u.shift(),o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),v=i+u.shift(),y=a+u.shift(),s.curveTo(r,o,i,a,v,y);break;case 10:T=u.pop()+l,O=f[T],O&&n(O);break;case 11:return;case 12:switch(L=c[I],I+=1,L){case 35:r=v+u.shift(),o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),k=i+u.shift(),E=a+u.shift(),R=k+u.shift(),C=E+u.shift(),U=R+u.shift(),_=C+u.shift(),v=U+u.shift(),y=_+u.shift(),u.shift(),s.curveTo(r,o,i,a,k,E),s.curveTo(R,C,U,_,v,y);break;case 34:r=v+u.shift(),o=y,i=r+u.shift(),a=o+u.shift(),k=i+u.shift(),E=a,R=k+u.shift(),C=a,U=R+u.shift(),_=y,v=U+u.shift(),s.curveTo(r,o,i,a,k,E),s.curveTo(R,C,U,_,v,y);break;case 36:r=v+u.shift(),o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),k=i+u.shift(),E=a,R=k+u.shift(),C=a,U=R+u.shift(),_=C+u.shift(),v=U+u.shift(),s.curveTo(r,o,i,a,k,E),s.curveTo(R,C,U,_,v,y);break;case 37:r=v+u.shift(),o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),k=i+u.shift(),E=a+u.shift(),R=k+u.shift(),C=E+u.shift(),U=R+u.shift(),_=C+u.shift(),Math.abs(U-v)>Math.abs(_-y)?v=U+u.shift():y=_+u.shift(),s.curveTo(r,o,i,a,k,E),s.curveTo(R,C,U,_,v,y);break;default:console.log("Glyph "+e.index+": unknown operator 1200"+L),u.length=0}break;case 14:u.length>0&&!m&&(b=u.shift()+p,m=!0),g&&(s.closePath(),g=!1);break;case 18:w();break;case 19:case 20:w(),I+=d+7>>3;break;case 21:u.length>2&&!m&&(b=u.shift()+p,m=!0),y+=u.pop(),v+=u.pop(),x(v,y);break;case 22:u.length>1&&!m&&(b=u.shift()+p,m=!0),v+=u.pop(),x(v,y);break;case 23:w();break;case 24:for(;u.length>2;)r=v+u.shift(),o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),v=i+u.shift(),y=a+u.shift(),s.curveTo(r,o,i,a,v,y);v+=u.shift(),y+=u.shift(),s.lineTo(v,y);break;case 25:for(;u.length>6;)v+=u.shift(),y+=u.shift(),s.lineTo(v,y);r=v+u.shift(),o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),v=i+u.shift(),y=a+u.shift(),s.curveTo(r,o,i,a,v,y);break;case 26:for(u.length%2&&(v+=u.shift());u.length>0;)r=v,o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),v=i,y=a+u.shift(),s.curveTo(r,o,i,a,v,y);break;case 27:for(u.length%2&&(y+=u.shift());u.length>0;)r=v+u.shift(),o=y,i=r+u.shift(),a=o+u.shift(),v=i+u.shift(),y=a,s.curveTo(r,o,i,a,v,y);break;case 28:h=c[I],S=c[I+1],u.push((h<<24|S<<16)>>16),I+=2;break;case 29:T=u.pop()+t.gsubrsBias,O=t.gsubrs[T],O&&n(O);break;case 30:for(;u.length>0&&(r=v,o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),v=i+u.shift(),y=a+(1===u.length?u.shift():0),s.curveTo(r,o,i,a,v,y),0!==u.length);)r=v+u.shift(),o=y,i=r+u.shift(),a=o+u.shift(),y=a+u.shift(),v=i+(1===u.length?u.shift():0),s.curveTo(r,o,i,a,v,y);break;case 31:for(;u.length>0&&(r=v+u.shift(),o=y,i=r+u.shift(),a=o+u.shift(),y=a+u.shift(),v=i+(1===u.length?u.shift():0),s.curveTo(r,o,i,a,v,y),0!==u.length);)r=v,o=y+u.shift(),i=r+u.shift(),a=o+u.shift(),v=i+u.shift(),y=a+(1===u.length?u.shift():0),s.curveTo(r,o,i,a,v,y);break;default:L<32?console.log("Glyph "+e.index+": unknown operator "+L):L<247?u.push(L-139):L<251?(h=c[I],I+=1,u.push(256*(L-247)+h+108)):L<255?(h=c[I],I+=1,u.push(256*-(L-251)-h-108)):(h=c[I],S=c[I+1],M=c[I+2],A=c[I+3],I+=4,u.push((h<<24|S<<16|M<<8|A)/65536))}}}(n),e.advanceWidth=b,s}function yt(t,e){let n,r=q.indexOf(t);return r>=0&&(n=r),r=e.indexOf(t),r>=0?n=r+q.length:(n=q.length+e.length,e.push(t)),n}function bt(t,e,n){const r={};for(let o=0;o<t.length;o+=1){const i=t[o];let a=e[i.name];void 0===a||it(a,i.value)||("SID"===i.type&&(a=yt(a,n)),r[i.op]={name:i.name,type:i.type,value:a})}return r}function xt(t,e){const n=new I.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=bt(ht,t,e),n}function wt(t){const e=new I.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],e}function St(t){const e=[],n=t.path;e.push({name:"width",type:"NUMBER",value:t.advanceWidth});let r=0,o=0;for(let t=0;t<n.commands.length;t+=1){let i,a,s=n.commands[t];if("Q"===s.type){const t=1/3,e=2/3;s={type:"C",x:s.x,y:s.y,x1:t*r+e*s.x1,y1:t*o+e*s.y1,x2:t*s.x+e*s.x1,y2:t*s.y+e*s.y1}}if("M"===s.type)i=Math.round(s.x-r),a=Math.round(s.y-o),e.push({name:"dx",type:"NUMBER",value:i}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(s.x),o=Math.round(s.y);else if("L"===s.type)i=Math.round(s.x-r),a=Math.round(s.y-o),e.push({name:"dx",type:"NUMBER",value:i}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),r=Math.round(s.x),o=Math.round(s.y);else if("C"===s.type){const t=Math.round(s.x1-r),n=Math.round(s.y1-o),u=Math.round(s.x2-s.x1),c=Math.round(s.y2-s.y1);i=Math.round(s.x-s.x2),a=Math.round(s.y-s.y2),e.push({name:"dx1",type:"NUMBER",value:t}),e.push({name:"dy1",type:"NUMBER",value:n}),e.push({name:"dx2",type:"NUMBER",value:u}),e.push({name:"dy2",type:"NUMBER",value:c}),e.push({name:"dx",type:"NUMBER",value:i}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(s.x),o=Math.round(s.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}var Mt={parse:function(t,e,n,r){n.tables.cff={};const o=function(t,e){const n={};return n.formatMajor=G.getCard8(t,e),n.formatMinor=G.getCard8(t,e+1),n.size=G.getCard8(t,e+2),n.offsetSize=G.getCard8(t,e+3),n.startOffset=e,n.endOffset=e+4,n}(t,e),i=st(t,o.endOffset,G.bytesToString),a=st(t,i.endOffset),s=st(t,a.endOffset,G.bytesToString),u=st(t,s.endOffset);n.gsubrs=u.objects,n.gsubrsBias=at(n.gsubrs);const c=gt(t,e,a.objects,s.objects);if(1!==c.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+c.length);const f=c[0];if(n.tables.cff.topDict=f,f._privateDict&&(n.defaultWidthX=f._privateDict.defaultWidthX,n.nominalWidthX=f._privateDict.nominalWidthX),void 0!==f.ros[0]&&void 0!==f.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){let r=f.fdArray,o=f.fdSelect;if(0===r||0===o)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");r+=e;const i=st(t,r),a=gt(t,e,i.objects,s.objects);f._fdArray=a,o+=e,f._fdSelect=function(t,e,n,r){const o=[];let i;const a=new G.Parser(t,e),s=a.parseCard8();if(0===s)for(let t=0;t<n;t++){if(i=a.parseCard8(),i>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");o.push(i)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);{const t=a.parseCard16();let e,s=a.parseCard16();if(0!==s)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+s);for(let u=0;u<t;u++){if(i=a.parseCard8(),e=a.parseCard16(),i>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");if(e>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+e);for(;s<e;s++)o.push(i);s=e}if(e!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+e)}}return o}(t,o,n.numGlyphs,a.length)}const l=e+f.private[1],h=mt(t,l,f.private[0],s.objects);if(n.defaultWidthX=h.defaultWidthX,n.nominalWidthX=h.nominalWidthX,0!==h.subrs){const e=l+h.subrs,r=st(t,e);n.subrs=r.objects,n.subrsBias=at(n.subrs)}else n.subrs=[],n.subrsBias=0;let p;r.lowMemory?(p=function(t,e){const n=[],r=G.getCard16(t,e);let o,i;if(0!==r){const a=G.getByte(t,e+2);o=e+(r+1)*a+2;let s=e+3;for(let e=0;e<r+1;e+=1)n.push(G.getOffset(t,s,a)),s+=a;i=o+n[r]}else i=e+2;return{offsets:n,startOffset:e,endOffset:i}}(t,e+f.charStrings),n.nGlyphs=p.offsets.length):(p=st(t,e+f.charStrings),n.nGlyphs=p.objects.length);const d=function(t,e,n,r){let o,i;const a=new G.Parser(t,e);n-=1;const s=[".notdef"],u=a.parseCard8();if(0===u)for(let t=0;t<n;t+=1)o=a.parseSID(),s.push(ft(r,o));else if(1===u)for(;s.length<=n;){o=a.parseSID(),i=a.parseCard8();for(let t=0;t<=i;t+=1)s.push(ft(r,o)),o+=1}else{if(2!==u)throw new Error("Unknown charset format "+u);for(;s.length<=n;){o=a.parseSID(),i=a.parseCard16();for(let t=0;t<=i;t+=1)s.push(ft(r,o)),o+=1}}return s}(t,e+f.charset,n.nGlyphs,s.objects);if(0===f.encoding?n.cffEncoding=new Z(W,d):1===f.encoding?n.cffEncoding=new Z(V,d):n.cffEncoding=function(t,e,n){let r;const o={},i=new G.Parser(t,e),a=i.parseCard8();if(0===a){const t=i.parseCard8();for(let e=0;e<t;e+=1)r=i.parseCard8(),o[r]=e}else{if(1!==a)throw new Error("Unknown encoding format "+a);{const t=i.parseCard8();r=1;for(let e=0;e<t;e+=1){const t=i.parseCard8(),e=i.parseCard8();for(let n=t;n<=t+e;n+=1)o[n]=r,r+=1}}}return new Z(o,n)}(t,e+f.encoding,d),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new ot.GlyphSet(n),r.lowMemory)n._push=function(r){const o=function(t,e,n,r,o){const i=G.getCard16(n,r);let a=0;if(0!==i){a=r+(i+1)*G.getByte(n,r+2)+2}let s=G.getBytes(n,a+e[t],a+e[t+1]);return o&&(s=o(s)),s}(r,p.offsets,t,e+f.charStrings);n.glyphs.push(r,ot.cffGlyphLoader(n,r,vt,o))};else for(let t=0;t<n.nGlyphs;t+=1){const e=p.objects[t];n.glyphs.push(t,ot.cffGlyphLoader(n,t,vt,e))}},make:function(t,e){const n=new I.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/e.unitsPerEm,o={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},i=[];let a;for(let e=1;e<t.length;e+=1)a=t.get(e),i.push(a.name);const s=[];n.header=new I.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),n.nameIndex=function(t){const e=new I.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(let n=0;n<t.length;n+=1)e.names.push({name:"name_"+n,type:"NAME",value:t[n]});return e}([e.postScriptName]);let u=xt(o,s);n.topDictIndex=wt(u),n.globalSubrIndex=new I.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),n.charsets=function(t,e){const n=new I.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let r=0;r<t.length;r+=1){const o=yt(t[r],e);n.fields.push({name:"glyph_"+r,type:"SID",value:o})}return n}(i,s),n.charStringsIndex=function(t){const e=new I.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let n=0;n<t.length;n+=1){const r=t.get(n),o=St(r);e.charStrings.push({name:r.name,type:"CHARSTRING",value:o})}return e}(t),n.privateDict=function(t,e){const n=new I.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=bt(pt,t,e),n}({},s),n.stringIndex=function(t){const e=new I.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(let n=0;n<t.length;n+=1)e.strings.push({name:"string_"+n,type:"STRING",value:t[n]});return e}(s);const c=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return o.charset=c,o.encoding=0,o.charStrings=o.charset+n.charsets.sizeOf(),o.private[1]=o.charStrings+n.charStringsIndex.sizeOf(),u=xt(o,s),n.topDictIndex=wt(u),n}};var At={parse:function(t,e){const n={},r=new G.Parser(t,e);return n.version=r.parseVersion(),n.fontRevision=Math.round(1e3*r.parseFixed())/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),h.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n},make:function(t){const e=Math.round((new Date).getTime()/1e3)+2082844800;let n=e;return t.createdTimestamp&&(n=t.createdTimestamp+2082844800),new I.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}};var Tt={parse:function(t,e){const n={},r=new G.Parser(t,e);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n},make:function(t){return new I.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}};var Ot={parse:function(t,e,n,r,o,i,a){a.lowMemory?function(t,e,n,r,o){let i,a;t._hmtxTableData={};const s=new G.Parser(e,n);for(let e=0;e<o;e+=1)e<r&&(i=s.parseUShort(),a=s.parseShort()),t._hmtxTableData[e]={advanceWidth:i,leftSideBearing:a}}(t,e,n,r,o):function(t,e,n,r,o){let i,a;const s=new G.Parser(t,e);for(let t=0;t<r;t+=1){t<n&&(i=s.parseUShort(),a=s.parseShort());const e=o.get(t);e.advanceWidth=i,e.leftSideBearing=a}}(e,n,r,o,i)},make:function(t){const e=new I.Table("hmtx",[]);for(let n=0;n<t.length;n+=1){const r=t.get(n),o=r.advanceWidth||0,i=r.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:o}),e.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:i})}return e}};var kt={make:function(t){const e=new I.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]);let n="";const r=12+4*t.length;for(let o=0;o<t.length;++o){let i=n.indexOf(t[o]);i<0&&(i=n.length,n+=t[o]),e.fields.push({name:"offset "+o,type:"USHORT",value:r+i}),e.fields.push({name:"length "+o,type:"USHORT",value:t[o].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),e},parse:function(t,e){const n=new G.Parser(t,e),r=n.parseULong();h.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1);const o=n.parseULong(),i=[];for(let r=0;r<o;r++){let r="";const o=e+n.parseUShort(),a=n.parseUShort();for(let e=o;e<o+a;++e)r+=String.fromCharCode(t.getInt8(e));i.push(r)}return i}};var Et={parse:function(t,e){const n={},r=new G.Parser(t,e);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),1===n.version&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n},make:function(t){return new I.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}};const Rt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ct={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ut={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},_t={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function It(t,e,n){switch(t){case 0:if(65535===e)return"und";if(n)return n[e];break;case 1:return Ct[e];case 3:return _t[e]}}const Lt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Dt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Pt(t,e,n){switch(t){case 0:return"utf-16";case 1:return Dt[n]||Lt[e];case 3:if(1===e||10===e)return"utf-16"}}function Bt(t){const e={};for(let n in t)e[t[n]]=parseInt(n);return e}function Nt(t,e,n,r,o,i){return new I.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:o},{name:"offset",type:"USHORT",value:i}])}function Ft(t,e){let n=function(t,e){const n=t.length,r=e.length-n+1;t:for(let o=0;o<r;o++)for(;o<r;o++){for(let r=0;r<n;r++)if(e[o+r]!==t[r])continue t;return o}return-1}(t,e);if(n<0){n=e.length;let r=0;const o=t.length;for(;r<o;++r)e.push(t[r])}return n}var jt={parse:function(t,e,n){const r={},o=new G.Parser(t,e),i=o.parseUShort(),a=o.parseUShort(),s=o.offset+o.parseUShort();for(let e=0;e<a;e++){const e=o.parseUShort(),i=o.parseUShort(),a=o.parseUShort(),u=o.parseUShort(),c=Rt[u]||u,f=o.parseUShort(),l=o.parseUShort(),h=It(e,a,n),d=Pt(e,i,a);if(void 0!==d&&void 0!==h){let e;if(e="utf-16"===d?p.UTF16(t,s+l,f):p.MACSTRING(t,s+l,f,d),e){let t=r[c];void 0===t&&(t=r[c]={}),t[h]=e}}}let u=0;return 1===i&&(u=o.parseUShort()),r},make:function(t,e){let n;const r=[],o={},i=Bt(Rt);for(let e in t){let a=i[e];if(void 0===a&&(a=e),n=parseInt(a),isNaN(n))throw new Error('Name table entry "'+e+'" does not exist, see nameTableNames for complete list.');o[n]=t[e],r.push(n)}const a=Bt(Ct),s=Bt(_t),u=[],c=[];for(let t=0;t<r.length;t++){n=r[t];const i=o[n];for(let t in i){const r=i[t];let o=1,f=a[t],l=Ut[f];const h=Pt(o,l,f);let p=d.MACSTRING(r,h);void 0===p&&(o=0,f=e.indexOf(t),f<0&&(f=e.length,e.push(t)),l=4,p=d.UTF16(r));const m=Ft(p,c);u.push(Nt(o,l,f,n,p.length,m));const g=s[t];if(void 0!==g){const t=d.UTF16(r),e=Ft(t,c);u.push(Nt(3,1,g,n,t.length,e))}}}u.sort((function(t,e){return t.platformID-e.platformID||t.encodingID-e.encodingID||t.languageID-e.languageID||t.nameID-e.nameID}));const f=new I.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:u.length},{name:"stringOffset",type:"USHORT",value:6+12*u.length}]);for(let t=0;t<u.length;t++)f.fields.push({name:"record_"+t,type:"RECORD",value:u[t]});return f.fields.push({name:"strings",type:"LITERAL",value:c}),f}};const Gt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var zt={parse:function(t,e){const n={},r=new G.Parser(t,e);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(let t=0;t<10;t++)n.panose[t]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},make:function(t){return new I.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)},unicodeRanges:Gt,getUnicodeRange:function(t){for(let e=0;e<Gt.length;e+=1){const n=Gt[e];if(t>=n.begin&&t<n.end)return e}return-1}};var Ht={parse:function(t,e){const n={},r=new G.Parser(t,e);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=Y.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(let t=0;t<n.numberOfGlyphs;t++)n.glyphNameIndex[t]=r.parseUShort();n.names=[];for(let t=0;t<n.numberOfGlyphs;t++)if(n.glyphNameIndex[t]>=Y.length){const t=r.parseChar();n.names.push(r.parseString(t))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(let t=0;t<n.numberOfGlyphs;t++)n.offset[t]=r.parseChar()}return n},make:function(){return new I.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}};const qt=new Array(9);qt[1]=function(){const t=this.offset+this.relativeOffset,e=this.parseUShort();return 1===e?{substFormat:1,coverage:this.parsePointer(F.coverage),deltaGlyphId:this.parseUShort()}:2===e?{substFormat:2,coverage:this.parsePointer(F.coverage),substitute:this.parseOffset16List()}:void h.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")},qt[2]=function(){const t=this.parseUShort();return h.argument(1===t,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(F.coverage),sequences:this.parseListOfLists()}},qt[3]=function(){const t=this.parseUShort();return h.argument(1===t,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(F.coverage),alternateSets:this.parseListOfLists()}},qt[4]=function(){const t=this.parseUShort();return h.argument(1===t,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(F.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};const Wt={sequenceIndex:F.uShort,lookupListIndex:F.uShort};qt[5]=function(){const t=this.offset+this.relativeOffset,e=this.parseUShort();if(1===e)return{substFormat:e,coverage:this.parsePointer(F.coverage),ruleSets:this.parseListOfLists((function(){const t=this.parseUShort(),e=this.parseUShort();return{input:this.parseUShortList(t-1),lookupRecords:this.parseRecordList(e,Wt)}}))};if(2===e)return{substFormat:e,coverage:this.parsePointer(F.coverage),classDef:this.parsePointer(F.classDef),classSets:this.parseListOfLists((function(){const t=this.parseUShort(),e=this.parseUShort();return{classes:this.parseUShortList(t-1),lookupRecords:this.parseRecordList(e,Wt)}}))};if(3===e){const t=this.parseUShort(),n=this.parseUShort();return{substFormat:e,coverages:this.parseList(t,F.pointer(F.coverage)),lookupRecords:this.parseRecordList(n,Wt)}}h.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},qt[6]=function(){const t=this.offset+this.relativeOffset,e=this.parseUShort();return 1===e?{substFormat:1,coverage:this.parsePointer(F.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Wt)}}))}:2===e?{substFormat:2,coverage:this.parsePointer(F.coverage),backtrackClassDef:this.parsePointer(F.classDef),inputClassDef:this.parsePointer(F.classDef),lookaheadClassDef:this.parsePointer(F.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Wt)}}))}:3===e?{substFormat:3,backtrackCoverage:this.parseList(F.pointer(F.coverage)),inputCoverage:this.parseList(F.pointer(F.coverage)),lookaheadCoverage:this.parseList(F.pointer(F.coverage)),lookupRecords:this.parseRecordList(Wt)}:void h.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},qt[7]=function(){const t=this.parseUShort();h.argument(1===t,"GSUB Extension Substitution subtable identifier-format must be 1");const e=this.parseUShort(),n=new F(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:e,extension:qt[e].call(n)}},qt[8]=function(){const t=this.parseUShort();return h.argument(1===t,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(F.coverage),backtrackCoverage:this.parseList(F.pointer(F.coverage)),lookaheadCoverage:this.parseList(F.pointer(F.coverage)),substitutes:this.parseUShortList()}};const Vt=new Array(9);Vt[1]=function(t){return 1===t.substFormat?new I.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new I.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new I.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new I.Coverage(t.coverage)}].concat(I.ushortList("substitute",t.substitute)))},Vt[3]=function(t){return h.assert(1===t.substFormat,"Lookup type 3 substFormat must be 1."),new I.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new I.Coverage(t.coverage)}].concat(I.tableList("altSet",t.alternateSets,(function(t){return new I.Table("alternateSetTable",I.ushortList("alternate",t))}))))},Vt[4]=function(t){return h.assert(1===t.substFormat,"Lookup type 4 substFormat must be 1."),new I.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new I.Coverage(t.coverage)}].concat(I.tableList("ligSet",t.ligatureSets,(function(t){return new I.Table("ligatureSetTable",I.tableList("ligature",t,(function(t){return new I.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:t.ligGlyph}].concat(I.ushortList("component",t.components,t.components.length+1)))})))}))))};var Yt={parse:function(t,e){const n=new F(t,e=e||0),r=n.parseVersion(1);return h.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(qt)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(qt),variations:n.parseFeatureVariationsList()}},make:function(t){return new I.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new I.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new I.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new I.LookupList(t.lookups,Vt)}])}};var Xt={parse:function(t,e){const n=new G.Parser(t,e),r=n.parseULong();h.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong();const o=n.parseULong(),i={};for(let r=0;r<o;r++){const r=n.parseTag(),o=n.parseULong(),a=n.parseULong(),s=p.UTF8(t,e+o,a);i[r]=s}return i},make:function(t){const e=Object.keys(t).length;let n="";const r=16+12*e,o=new I.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:e}]);for(let e in t){const i=n.length;n+=t[e],o.fields.push({name:"tag "+e,type:"TAG",value:e}),o.fields.push({name:"offset "+e,type:"ULONG",value:r+i}),o.fields.push({name:"length "+e,type:"ULONG",value:t[e].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),o}};function Jt(t){return Math.log(t)/Math.log(2)|0}function Zt(t){for(;t.length%4!=0;)t.push(0);let e=0;for(let n=0;n<t.length;n+=4)e+=(t[n]<<24)+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3];return e%=Math.pow(2,32),e}function Qt(t,e,n,r){return new I.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==t?t:""},{name:"checkSum",type:"ULONG",value:void 0!==e?e:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function Kt(t){const e=new I.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=t,e.numTables=t.length;const n=Math.pow(2,Jt(e.numTables));e.searchRange=16*n,e.entrySelector=Jt(n),e.rangeShift=16*e.numTables-e.searchRange;const r=[],o=[];let i=e.sizeOf()+Qt().sizeOf()*e.numTables;for(;i%4!=0;)i+=1,o.push({name:"padding",type:"BYTE",value:0});for(let e=0;e<t.length;e+=1){const n=t[e];h.argument(4===n.tableName.length,"Table name"+n.tableName+" is invalid.");const a=n.sizeOf(),s=Qt(n.tableName,Zt(n.encode()),i,a);for(r.push({name:s.tag+" Table Record",type:"RECORD",value:s}),o.push({name:n.tableName+" table",type:"RECORD",value:n}),i+=a,h.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!=0;)i+=1,o.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(t,e){return t.value.tag>e.value.tag?1:-1})),e.fields=e.fields.concat(r),e.fields=e.fields.concat(o),e}function $t(t,e,n){for(let n=0;n<e.length;n+=1){const r=t.charToGlyphIndex(e[n]);if(r>0){return t.glyphs.get(r).getMetrics()}}return n}function te(t){let e=0;for(let n=0;n<t.length;n+=1)e+=t[n];return e/t.length}var ee={make:Kt,fontToTable:function(t){const e=[],n=[],r=[],o=[],i=[],a=[],s=[];let u,c=0,f=0,l=0,h=0,p=0;for(let d=0;d<t.glyphs.length;d+=1){const m=t.glyphs.get(d),g=0|m.unicode;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+d+"): advanceWidth is not a number.");(u>g||void 0===u)&&g>0&&(u=g),c<g&&(c=g);const v=zt.getUnicodeRange(g);if(v<32)f|=1<<v;else if(v<64)l|=1<<v-32;else if(v<96)h|=1<<v-64;else{if(!(v<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<v-96}if(".notdef"===m.name)continue;const y=m.getMetrics();e.push(y.xMin),n.push(y.yMin),r.push(y.xMax),o.push(y.yMax),a.push(y.leftSideBearing),s.push(y.rightSideBearing),i.push(m.advanceWidth)}const d={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,i),advanceWidthAvg:te(i),minLeftSideBearing:Math.min.apply(null,a),maxLeftSideBearing:Math.max.apply(null,a),minRightSideBearing:Math.min.apply(null,s)};d.ascender=t.ascender,d.descender=t.descender;const m=At.make({flags:3,unitsPerEm:t.unitsPerEm,xMin:d.xMin,yMin:d.yMin,xMax:d.xMax,yMax:d.yMax,lowestRecPPEM:3,createdTimestamp:t.createdTimestamp}),g=Tt.make({ascender:d.ascender,descender:d.descender,advanceWidthMax:d.advanceWidthMax,minLeftSideBearing:d.minLeftSideBearing,minRightSideBearing:d.minRightSideBearing,xMaxExtent:d.maxLeftSideBearing+(d.xMax-d.xMin),numberOfHMetrics:t.glyphs.length}),v=Et.make(t.glyphs.length),y=zt.make({xAvgCharWidth:Math.round(d.advanceWidthAvg),usWeightClass:t.tables.os2.usWeightClass,usWidthClass:t.tables.os2.usWidthClass,usFirstCharIndex:u,usLastCharIndex:c,ulUnicodeRange1:f,ulUnicodeRange2:l,ulUnicodeRange3:h,ulUnicodeRange4:p,fsSelection:t.tables.os2.fsSelection,sTypoAscender:d.ascender,sTypoDescender:d.descender,sTypoLineGap:0,usWinAscent:d.yMax,usWinDescent:Math.abs(d.yMin),ulCodePageRange1:1,sxHeight:$t(t,"xyvw",{yMax:Math.round(d.ascender/2)}).yMax,sCapHeight:$t(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",d).yMax,usDefaultChar:t.hasChar(" ")?32:0,usBreakChar:t.hasChar(" ")?32:0}),b=Ot.make(t.glyphs),x=H.make(t.glyphs),w=t.getEnglishName("fontFamily"),S=t.getEnglishName("fontSubfamily"),M=w+" "+S;let A=t.getEnglishName("postScriptName");A||(A=w.replace(/\s/g,"")+"-"+S);const T={};for(let e in t.names)T[e]=t.names[e];T.uniqueID||(T.uniqueID={en:t.getEnglishName("manufacturer")+":"+M}),T.postScriptName||(T.postScriptName={en:A}),T.preferredFamily||(T.preferredFamily=t.names.fontFamily),T.preferredSubfamily||(T.preferredSubfamily=t.names.fontSubfamily);const O=[],k=jt.make(T,O),E=O.length>0?kt.make(O):void 0,R=Ht.make(),C=Mt.make(t.glyphs,{version:t.getEnglishName("version"),fullName:M,familyName:w,weightName:S,postScriptName:A,unitsPerEm:t.unitsPerEm,fontBBox:[0,d.yMin,d.ascender,d.advanceWidthMax]}),U=t.metas&&Object.keys(t.metas).length>0?Xt.make(t.metas):void 0,_=[m,g,v,y,k,x,R,C,b];E&&_.push(E),t.tables.gsub&&_.push(Yt.make(t.tables.gsub)),U&&_.push(U);const I=Kt(_),L=Zt(I.encode()),D=I.fields;let P=!1;for(let t=0;t<D.length;t+=1)if("head table"===D[t].name){D[t].value.checkSumAdjustment=2981146554-L,P=!0;break}if(!P)throw new Error("Could not find head table with checkSum to adjust.");return I},computeCheckSum:Zt};function ne(t,e){let n=0,r=t.length-1;for(;n<=r;){const o=n+r>>>1,i=t[o].tag;if(i===e)return o;i<e?n=o+1:r=o-1}return-n-1}function re(t,e){let n=0,r=t.length-1;for(;n<=r;){const o=n+r>>>1,i=t[o];if(i===e)return o;i<e?n=o+1:r=o-1}return-n-1}function oe(t,e){let n,r=0,o=t.length-1;for(;r<=o;){const i=r+o>>>1;n=t[i];const a=n.start;if(a===e)return n;a<e?r=i+1:o=i-1}if(r>0)return n=t[r-1],e>n.end?0:n}function ie(t,e){this.font=t,this.tableName=e}ie.prototype={searchTag:ne,binSearch:re,getTable:function(t){let e=this.font.tables[this.tableName];return!e&&t&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){let t=this.getTable();return t?t.scripts.map((function(t){return t.tag})):[]},getDefaultScriptName:function(){let t=this.getTable();if(!t)return;let e=!1;for(let n=0;n<t.scripts.length;n++){const r=t.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(e=!0)}return e?"latn":void 0},getScriptTable:function(t,e){const n=this.getTable(e);if(n){t=t||"DFLT";const r=n.scripts,o=ne(n.scripts,t);if(o>=0)return r[o].script;if(e){const e={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-o,0,e),e.script}}},getLangSysTable:function(t,e,n){const r=this.getScriptTable(t,n);if(r){if(!e||"dflt"===e||"DFLT"===e)return r.defaultLangSys;const t=ne(r.langSysRecords,e);if(t>=0)return r.langSysRecords[t].langSys;if(n){const n={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-t,0,n),n.langSys}}},getFeatureTable:function(t,e,n,r){const o=this.getLangSysTable(t,e,r);if(o){let t;const e=o.featureIndexes,i=this.font.tables[this.tableName].features;for(let r=0;r<e.length;r++)if(t=i[e[r]],t.tag===n)return t.feature;if(r){const r=i.length;return h.assert(0===r||n>=i[r-1].tag,"Features must be added in alphabetical order."),t={tag:n,feature:{params:0,lookupListIndexes:[]}},i.push(t),e.push(r),t.feature}}},getLookupTables:function(t,e,n,r,o){const i=this.getFeatureTable(t,e,n,o),a=[];if(i){let t;const e=i.lookupListIndexes,n=this.font.tables[this.tableName].lookups;for(let o=0;o<e.length;o++)t=n[e[o]],t.lookupType===r&&a.push(t);if(0===a.length&&o){t={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};const o=n.length;return n.push(t),e.push(o),[t]}}return a},getGlyphClass:function(t,e){switch(t.format){case 1:return t.startGlyph<=e&&e<t.startGlyph+t.classes.length?t.classes[e-t.startGlyph]:0;case 2:const n=oe(t.ranges,e);return n?n.classId:0}},getCoverageIndex:function(t,e){switch(t.format){case 1:const n=re(t.glyphs,e);return n>=0?n:-1;case 2:const r=oe(t.ranges,e);return r?r.index+e-r.start:-1}},expandCoverage:function(t){if(1===t.format)return t.glyphs;{const e=[],n=t.ranges;for(let t=0;t<n.length;t++){const r=n[t],o=r.start,i=r.end;for(let t=o;t<=i;t++)e.push(t)}return e}}};var ae=ie;function se(t){ae.call(this,t,"gpos")}se.prototype=ae.prototype,se.prototype.init=function(){const t=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(t)},se.prototype.getKerningValue=function(t,e,n){for(let r=0;r<t.length;r++){const o=t[r].subtables;for(let t=0;t<o.length;t++){const r=o[t],i=this.getCoverageIndex(r.coverage,e);if(!(i<0))switch(r.posFormat){case 1:let t=r.pairSets[i];for(let e=0;e<t.length;e++){let r=t[e];if(r.secondGlyph===n)return r.value1&&r.value1.xAdvance||0}break;case 2:const o=this.getGlyphClass(r.classDef1,e),a=this.getGlyphClass(r.classDef2,n),s=r.classRecords[o][a];return s.value1&&s.value1.xAdvance||0}}}return 0},se.prototype.getKerningTables=function(t,e){if(this.font.tables.gpos)return this.getLookupTables(t,e,"kern",2)};var ue=se;function ce(t){ae.call(this,t,"gsub")}function fe(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function le(t,e,n){const r=t.subtables;for(let t=0;t<r.length;t++){const n=r[t];if(n.substFormat===e)return n}if(n)return r.push(n),n}ce.prototype=ae.prototype,ce.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},ce.prototype.getSingle=function(t,e,n){const r=[],o=this.getLookupTables(e,n,t,1);for(let t=0;t<o.length;t++){const e=o[t].subtables;for(let t=0;t<e.length;t++){const n=e[t],o=this.expandCoverage(n.coverage);let i;if(1===n.substFormat){const t=n.deltaGlyphId;for(i=0;i<o.length;i++){const e=o[i];r.push({sub:e,by:e+t})}}else{const t=n.substitute;for(i=0;i<o.length;i++)r.push({sub:o[i],by:t[i]})}}}return r},ce.prototype.getAlternates=function(t,e,n){const r=[],o=this.getLookupTables(e,n,t,3);for(let t=0;t<o.length;t++){const e=o[t].subtables;for(let t=0;t<e.length;t++){const n=e[t],o=this.expandCoverage(n.coverage),i=n.alternateSets;for(let t=0;t<o.length;t++)r.push({sub:o[t],by:i[t]})}}return r},ce.prototype.getLigatures=function(t,e,n){const r=[],o=this.getLookupTables(e,n,t,4);for(let t=0;t<o.length;t++){const e=o[t].subtables;for(let t=0;t<e.length;t++){const n=e[t],o=this.expandCoverage(n.coverage),i=n.ligatureSets;for(let t=0;t<o.length;t++){const e=o[t],n=i[t];for(let t=0;t<n.length;t++){const o=n[t];r.push({sub:[e].concat(o.components),by:o.ligGlyph})}}}}return r},ce.prototype.addSingle=function(t,e,n,r){const o=le(this.getLookupTables(n,r,t,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});h.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);const i=e.sub;let a=this.binSearch(o.coverage.glyphs,i);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,i),o.substitute.splice(a,0,0)),o.substitute[a]=e.by},ce.prototype.addAlternate=function(t,e,n,r){const o=le(this.getLookupTables(n,r,t,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});h.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);const i=e.sub;let a=this.binSearch(o.coverage.glyphs,i);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,i),o.alternateSets.splice(a,0,0)),o.alternateSets[a]=e.by},ce.prototype.addLigature=function(t,e,n,r){const o=this.getLookupTables(n,r,t,4,!0)[0];let i=o.subtables[0];i||(i={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},o.subtables[0]=i),h.assert(1===i.coverage.format,"Ligature: unable to modify coverage table format "+i.coverage.format);const a=e.sub[0],s=e.sub.slice(1),u={ligGlyph:e.by,components:s};let c=this.binSearch(i.coverage.glyphs,a);if(c>=0){const t=i.ligatureSets[c];for(let e=0;e<t.length;e++)if(fe(t[e].components,s))return;t.push(u)}else c=-1-c,i.coverage.glyphs.splice(c,0,a),i.ligatureSets.splice(c,0,[u])},ce.prototype.getFeature=function(t,e,n){if(/ss\d\d/.test(t))return this.getSingle(t,e,n);switch(t){case"aalt":case"salt":return this.getSingle(t,e,n).concat(this.getAlternates(t,e,n));case"dlig":case"liga":case"rlig":return this.getLigatures(t,e,n)}},ce.prototype.add=function(t,e,n,r){if(/ss\d\d/.test(t))return this.addSingle(t,e,n,r);switch(t){case"aalt":case"salt":return"number"==typeof e.by?this.addSingle(t,e,n,r):this.addAlternate(t,e,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(t,e,n,r)}};var he=ce,pe=n(500);function de(t,e,n,r,o){let i;return(e&r)>0?(i=t.parseByte(),0==(e&o)&&(i=-i),i=n+i):i=(e&o)>0?n:n+t.parseShort(),i}function me(t,e,n){const r=new G.Parser(e,n);let o,i;if(t.numberOfContours=r.parseShort(),t._xMin=r.parseShort(),t._yMin=r.parseShort(),t._xMax=r.parseShort(),t._yMax=r.parseShort(),t.numberOfContours>0){const e=t.endPointIndices=[];for(let n=0;n<t.numberOfContours;n+=1)e.push(r.parseUShort());t.instructionLength=r.parseUShort(),t.instructions=[];for(let e=0;e<t.instructionLength;e+=1)t.instructions.push(r.parseByte());const n=e[e.length-1]+1;o=[];for(let t=0;t<n;t+=1)if(i=r.parseByte(),o.push(i),(8&i)>0){const e=r.parseByte();for(let n=0;n<e;n+=1)o.push(i),t+=1}if(h.argument(o.length===n,"Bad flags."),e.length>0){const a=[];let s;if(n>0){for(let t=0;t<n;t+=1)i=o[t],s={},s.onCurve=!!(1&i),s.lastPointOfContour=e.indexOf(t)>=0,a.push(s);let t=0;for(let e=0;e<n;e+=1)i=o[e],s=a[e],s.x=de(r,i,t,2,16),t=s.x;let u=0;for(let t=0;t<n;t+=1)i=o[t],s=a[t],s.y=de(r,i,u,4,32),u=s.y}t.points=a}else t.points=[]}else if(0===t.numberOfContours)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];let e=!0;for(;e;){o=r.parseUShort();const n={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&o)>0?(2&o)>0?(n.dx=r.parseShort(),n.dy=r.parseShort()):n.matchedPoints=[r.parseUShort(),r.parseUShort()]:(2&o)>0?(n.dx=r.parseChar(),n.dy=r.parseChar()):n.matchedPoints=[r.parseByte(),r.parseByte()],(8&o)>0?n.xScale=n.yScale=r.parseF2Dot14():(64&o)>0?(n.xScale=r.parseF2Dot14(),n.yScale=r.parseF2Dot14()):(128&o)>0&&(n.xScale=r.parseF2Dot14(),n.scale01=r.parseF2Dot14(),n.scale10=r.parseF2Dot14(),n.yScale=r.parseF2Dot14()),t.components.push(n),e=!!(32&o)}if(256&o){t.instructionLength=r.parseUShort(),t.instructions=[];for(let e=0;e<t.instructionLength;e+=1)t.instructions.push(r.parseByte())}}}function ge(t,e){const n=[];for(let r=0;r<t.length;r+=1){const o=t[r],i={x:e.xScale*o.x+e.scale01*o.y+e.dx,y:e.scale10*o.x+e.yScale*o.y+e.dy,onCurve:o.onCurve,lastPointOfContour:o.lastPointOfContour};n.push(i)}return n}function ve(t){const e=new c;if(!t)return e;const n=function(t){const e=[];let n=[];for(let r=0;r<t.length;r+=1){const o=t[r];n.push(o),o.lastPointOfContour&&(e.push(n),n=[])}return h.argument(0===n.length,"There are still points left in the current contour."),e}(t);for(let t=0;t<n.length;++t){const r=n[t];let o=null,i=r[r.length-1],a=r[0];if(i.onCurve)e.moveTo(i.x,i.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{const t={x:.5*(i.x+a.x),y:.5*(i.y+a.y)};e.moveTo(t.x,t.y)}for(let t=0;t<r.length;++t)if(o=i,i=a,a=r[(t+1)%r.length],i.onCurve)e.lineTo(i.x,i.y);else{let t=o,n=a;o.onCurve||(t={x:.5*(i.x+o.x),y:.5*(i.y+o.y)}),a.onCurve||(n={x:.5*(i.x+a.x),y:.5*(i.y+a.y)}),e.quadraticCurveTo(i.x,i.y,n.x,n.y)}e.closePath()}return e}function ye(t,e){if(e.isComposite)for(let n=0;n<e.components.length;n+=1){const r=e.components[n],o=t.get(r.glyphIndex);if(o.getPath(),o.points){let t;if(void 0===r.matchedPoints)t=ge(o.points,r);else{if(r.matchedPoints[0]>e.points.length-1||r.matchedPoints[1]>o.points.length-1)throw Error("Matched points out of range in "+e.name);const n=e.points[r.matchedPoints[0]];let i=o.points[r.matchedPoints[1]];const a={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};i=ge([i],a)[0],a.dx=n.x-i.x,a.dy=n.y-i.y,t=ge(o.points,a)}e.points=e.points.concat(t)}}return ve(e.points)}var be={getPath:ve,parse:function(t,e,n,r,o){return o.lowMemory?function(t,e,n,r){const o=new ot.GlyphSet(r);return r._push=function(i){const a=n[i];a!==n[i+1]?o.push(i,ot.ttfGlyphLoader(r,i,me,t,e+a,ye)):o.push(i,ot.glyphLoader(r,i))},o}(t,e,n,r):function(t,e,n,r){const o=new ot.GlyphSet(r);for(let i=0;i<n.length-1;i+=1){const a=n[i];a!==n[i+1]?o.push(i,ot.ttfGlyphLoader(r,i,me,t,e+a,ye)):o.push(i,ot.glyphLoader(r,i))}return o}(t,e,n,r)}};let xe,we,Se,Me;function Ae(t){this.font=t,this.getCommands=function(t){return be.getPath(t).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Te(t){return t}function Oe(t){return Math.sign(t)*Math.round(Math.abs(t))}function ke(t){return Math.sign(t)*Math.round(Math.abs(2*t))/2}function Ee(t){return Math.sign(t)*(Math.round(Math.abs(t)+.5)-.5)}function Re(t){return Math.sign(t)*Math.ceil(Math.abs(t))}function Ce(t){return Math.sign(t)*Math.floor(Math.abs(t))}const Ue=function(t){const e=this.srPeriod;let n=this.srPhase;let r=1;return t<0&&(t=-t,r=-1),t+=this.srThreshold-n,t=Math.trunc(t/e)*e,(t+=n)<0?n*r:t*r},_e={x:1,y:0,axis:"x",distance:function(t,e,n,r){return(n?t.xo:t.x)-(r?e.xo:e.x)},interpolate:function(t,e,n,r){let o,i,a,s,u,c,f;if(!r||r===this)return o=t.xo-e.xo,i=t.xo-n.xo,u=e.x-e.xo,c=n.x-n.xo,a=Math.abs(o),s=Math.abs(i),f=a+s,0===f?void(t.x=t.xo+(u+c)/2):void(t.x=t.xo+(u*s+c*a)/f);o=r.distance(t,e,!0,!0),i=r.distance(t,n,!0,!0),u=r.distance(e,e,!1,!0),c=r.distance(n,n,!1,!0),a=Math.abs(o),s=Math.abs(i),f=a+s,0!==f?_e.setRelative(t,t,(u*s+c*a)/f,r,!0):_e.setRelative(t,t,(u+c)/2,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,e,n,r,o){if(!r||r===this)return void(t.x=(o?e.xo:e.x)+n);const i=o?e.xo:e.x,a=o?e.yo:e.y,s=i+n*r.x,u=a+n*r.y;t.x=s+(t.y-u)/r.normalSlope},slope:0,touch:function(t){t.xTouched=!0},touched:function(t){return t.xTouched},untouch:function(t){t.xTouched=!1}},Ie={x:0,y:1,axis:"y",distance:function(t,e,n,r){return(n?t.yo:t.y)-(r?e.yo:e.y)},interpolate:function(t,e,n,r){let o,i,a,s,u,c,f;if(!r||r===this)return o=t.yo-e.yo,i=t.yo-n.yo,u=e.y-e.yo,c=n.y-n.yo,a=Math.abs(o),s=Math.abs(i),f=a+s,0===f?void(t.y=t.yo+(u+c)/2):void(t.y=t.yo+(u*s+c*a)/f);o=r.distance(t,e,!0,!0),i=r.distance(t,n,!0,!0),u=r.distance(e,e,!1,!0),c=r.distance(n,n,!1,!0),a=Math.abs(o),s=Math.abs(i),f=a+s,0!==f?Ie.setRelative(t,t,(u*s+c*a)/f,r,!0):Ie.setRelative(t,t,(u+c)/2,r,!0)},normalSlope:0,setRelative:function(t,e,n,r,o){if(!r||r===this)return void(t.y=(o?e.yo:e.y)+n);const i=o?e.xo:e.x,a=o?e.yo:e.y,s=i+n*r.x,u=a+n*r.y;t.y=u+r.normalSlope*(t.x-s)},slope:Number.POSITIVE_INFINITY,touch:function(t){t.yTouched=!0},touched:function(t){return t.yTouched},untouch:function(t){t.yTouched=!1}};function Le(t,e){this.x=t,this.y=e,this.axis=void 0,this.slope=e/t,this.normalSlope=-t/e,Object.freeze(this)}function De(t,e){const n=Math.sqrt(t*t+e*e);return e/=n,1===(t/=n)&&0===e?_e:0===t&&1===e?Ie:new Le(t,e)}function Pe(t,e,n,r){this.x=this.xo=Math.round(64*t)/64,this.y=this.yo=Math.round(64*e)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(_e),Object.freeze(Ie),Le.prototype.distance=function(t,e,n,r){return this.x*_e.distance(t,e,n,r)+this.y*Ie.distance(t,e,n,r)},Le.prototype.interpolate=function(t,e,n,r){let o,i,a,s,u,c,f;a=r.distance(t,e,!0,!0),s=r.distance(t,n,!0,!0),o=r.distance(e,e,!1,!0),i=r.distance(n,n,!1,!0),u=Math.abs(a),c=Math.abs(s),f=u+c,0!==f?this.setRelative(t,t,(o*c+i*u)/f,r,!0):this.setRelative(t,t,(o+i)/2,r,!0)},Le.prototype.setRelative=function(t,e,n,r,o){r=r||this;const i=o?e.xo:e.x,a=o?e.yo:e.y,s=i+n*r.x,u=a+n*r.y,c=r.normalSlope,f=this.slope,l=t.x,h=t.y;t.x=(f*l-c*s+u-h)/(f-c),t.y=f*(t.x-l)+h},Le.prototype.touch=function(t){t.xTouched=!0,t.yTouched=!0},Pe.prototype.nextTouched=function(t){let e=this.nextPointOnContour;for(;!t.touched(e)&&e!==this;)e=e.nextPointOnContour;return e},Pe.prototype.prevTouched=function(t){let e=this.prevPointOnContour;for(;!t.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};const Be=Object.freeze(new Pe(0,0)),Ne={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Fe(t,e){switch(this.env=t,this.stack=[],this.prog=e,t){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=_e,this.round=Oe}}function je(t){const e=t.tZone=new Array(t.gZone.length);for(let t=0;t<e.length;t++)e[t]=new Pe(0,0)}function Ge(t,e){const n=t.prog;let r,o=t.ip,i=1;do{if(r=n[++o],88===r)i++;else if(89===r)i--;else if(64===r)o+=n[o+1]+1;else if(65===r)o+=2*n[o+1]+1;else if(r>=176&&r<=183)o+=r-176+1;else if(r>=184&&r<=191)o+=2*(r-184+1);else if(e&&1===i&&27===r)break}while(i>0);t.ip=o}function ze(t,e){exports.DEBUG&&console.log(e.step,"SVTCA["+t.axis+"]"),e.fv=e.pv=e.dpv=t}function He(t,e){exports.DEBUG&&console.log(e.step,"SPVTCA["+t.axis+"]"),e.pv=e.dpv=t}function qe(t,e){exports.DEBUG&&console.log(e.step,"SFVTCA["+t.axis+"]"),e.fv=t}function We(t,e){const n=e.stack,r=n.pop(),o=n.pop(),i=e.z2[r],a=e.z1[o];let s,u;exports.DEBUG&&console.log("SPVTL["+t+"]",r,o),t?(s=i.y-a.y,u=a.x-i.x):(s=a.x-i.x,u=a.y-i.y),e.pv=e.dpv=De(s,u)}function Ve(t,e){const n=e.stack,r=n.pop(),o=n.pop(),i=e.z2[r],a=e.z1[o];let s,u;exports.DEBUG&&console.log("SFVTL["+t+"]",r,o),t?(s=i.y-a.y,u=a.x-i.x):(s=a.x-i.x,u=a.y-i.y),e.fv=De(s,u)}function Ye(t){exports.DEBUG&&console.log(t.step,"POP[]"),t.stack.pop()}function Xe(t,e){const n=e.stack.pop(),r=e.z0[n],o=e.fv,i=e.pv;exports.DEBUG&&console.log(e.step,"MDAP["+t+"]",n);let a=i.distance(r,Be);t&&(a=e.round(a)),o.setRelative(r,Be,a,i),o.touch(r),e.rp0=e.rp1=n}function Je(t,e){const n=e.z2,r=n.length-2;let o,i,a;exports.DEBUG&&console.log(e.step,"IUP["+t.axis+"]");for(let e=0;e<r;e++)o=n[e],t.touched(o)||(i=o.prevTouched(t),i!==o&&(a=o.nextTouched(t),i===a&&t.setRelative(o,o,t.distance(i,i,!1,!0),t,!0),t.interpolate(o,i,a,t)))}function Ze(t,e){const n=e.stack,r=t?e.rp1:e.rp2,o=(t?e.z0:e.z1)[r],i=e.fv,a=e.pv;let s=e.loop;const u=e.z2;for(;s--;){const r=n.pop(),c=u[r],f=a.distance(o,o,!1,!0);i.setRelative(c,c,f,a),i.touch(c),exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-s)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",r)}e.loop=1}function Qe(t,e){const n=e.stack,r=t?e.rp1:e.rp2,o=(t?e.z0:e.z1)[r],i=e.fv,a=e.pv,s=n.pop(),u=e.z2[e.contours[s]];let c=u;exports.DEBUG&&console.log(e.step,"SHC["+t+"]",s);const f=a.distance(o,o,!1,!0);do{c!==o&&i.setRelative(c,c,f,a),c=c.nextPointOnContour}while(c!==u)}function Ke(t,e){const n=e.stack,r=t?e.rp1:e.rp2,o=(t?e.z0:e.z1)[r],i=e.fv,a=e.pv,s=n.pop();let u,c;switch(exports.DEBUG&&console.log(e.step,"SHZ["+t+"]",s),s){case 0:u=e.tZone;break;case 1:u=e.gZone;break;default:throw new Error("Invalid zone")}const f=a.distance(o,o,!1,!0),l=u.length-2;for(let t=0;t<l;t++)c=u[t],i.setRelative(c,c,f,a)}function $e(t,e){const n=e.stack,r=n.pop()/64,o=n.pop(),i=e.z1[o],a=e.z0[e.rp0],s=e.fv,u=e.pv;s.setRelative(i,a,r,u),s.touch(i),exports.DEBUG&&console.log(e.step,"MSIRP["+t+"]",r,o),e.rp1=e.rp0,e.rp2=o,t&&(e.rp0=o)}function tn(t,e){const n=e.stack,r=n.pop(),o=n.pop(),i=e.z0[o],a=e.fv,s=e.pv;let u=e.cvt[r];exports.DEBUG&&console.log(e.step,"MIAP["+t+"]",r,"(",u,")",o);let c=s.distance(i,Be);t&&(Math.abs(c-u)<e.cvCutIn&&(c=u),c=e.round(c)),a.setRelative(i,Be,c,s),0===e.zp0&&(i.xo=i.x,i.yo=i.y),a.touch(i),e.rp0=e.rp1=o}function en(t,e){const n=e.stack,r=n.pop(),o=e.z2[r];exports.DEBUG&&console.log(e.step,"GC["+t+"]",r),n.push(64*e.dpv.distance(o,Be,t,!1))}function nn(t,e){const n=e.stack,r=n.pop(),o=n.pop(),i=e.z1[r],a=e.z0[o],s=e.dpv.distance(a,i,t,t);exports.DEBUG&&console.log(e.step,"MD["+t+"]",r,o,"->",s),e.stack.push(Math.round(64*s))}function rn(t,e){const n=e.stack,r=n.pop(),o=e.fv,i=e.pv,a=e.ppem,s=e.deltaBase+16*(t-1),u=e.deltaShift,c=e.z0;exports.DEBUG&&console.log(e.step,"DELTAP["+t+"]",r,n);for(let t=0;t<r;t++){const t=n.pop(),r=n.pop();if(s+((240&r)>>4)!==a)continue;let f=(15&r)-8;f>=0&&f++,exports.DEBUG&&console.log(e.step,"DELTAPFIX",t,"by",f*u);const l=c[t];o.setRelative(l,l,f*u,i)}}function on(t,e){const n=e.stack,r=n.pop();exports.DEBUG&&console.log(e.step,"ROUND[]"),n.push(64*e.round(r/64))}function an(t,e){const n=e.stack,r=n.pop(),o=e.ppem,i=e.deltaBase+16*(t-1),a=e.deltaShift;exports.DEBUG&&console.log(e.step,"DELTAC["+t+"]",r,n);for(let t=0;t<r;t++){const t=n.pop(),r=n.pop();if(i+((240&r)>>4)!==o)continue;let s=(15&r)-8;s>=0&&s++;const u=s*a;exports.DEBUG&&console.log(e.step,"DELTACFIX",t,"by",u),e.cvt[t]+=u}}function sn(t,e){const n=e.stack,r=n.pop(),o=n.pop(),i=e.z2[r],a=e.z1[o];let s,u;exports.DEBUG&&console.log(e.step,"SDPVTL["+t+"]",r,o),t?(s=i.y-a.y,u=a.x-i.x):(s=a.x-i.x,u=a.y-i.y),e.dpv=De(s,u)}function un(t,e){const n=e.stack,r=e.prog;let o=e.ip;exports.DEBUG&&console.log(e.step,"PUSHB["+t+"]");for(let e=0;e<t;e++)n.push(r[++o]);e.ip=o}function cn(t,e){let n=e.ip;const r=e.prog,o=e.stack;exports.DEBUG&&console.log(e.ip,"PUSHW["+t+"]");for(let e=0;e<t;e++){let t=r[++n]<<8|r[++n];32768&t&&(t=-(1+(65535^t))),o.push(t)}e.ip=n}function fn(t,e,n,r,o,i){const a=i.stack,s=t&&a.pop(),u=a.pop(),c=i.rp0,f=i.z0[c],l=i.z1[u],h=i.minDis,p=i.fv,d=i.dpv;let m,g,v,y;g=m=d.distance(l,f,!0,!0),v=g>=0?1:-1,g=Math.abs(g),t&&(y=i.cvt[s],r&&Math.abs(g-y)<i.cvCutIn&&(g=y)),n&&g<h&&(g=h),r&&(g=i.round(g)),p.setRelative(l,f,v*g,d),p.touch(l),exports.DEBUG&&console.log(i.step,(t?"MIRP[":"MDRP[")+(e?"M":"m")+(n?">":"_")+(r?"R":"_")+(0===o?"Gr":1===o?"Bl":2===o?"Wh":"")+"]",t?s+"("+i.cvt[s]+","+y+")":"",u,"(d =",m,"->",v*g,")"),i.rp1=i.rp0,i.rp2=u,e&&(i.rp0=u)}Ae.prototype.exec=function(t,e){if("number"!=typeof e)throw new Error("Point size is not a number!");if(this._errorState>2)return;const n=this.font;let r=this._prepState;if(!r||r.ppem!==e){let t=this._fpgmState;if(!t){Fe.prototype=Ne,t=this._fpgmState=new Fe("fpgm",n.tables.fpgm),t.funcs=[],t.font=n,exports.DEBUG&&(console.log("---EXEC FPGM---"),t.step=-1);try{we(t)}catch(t){return console.log("Hinting error in FPGM:"+t),void(this._errorState=3)}}Fe.prototype=t,r=this._prepState=new Fe("prep",n.tables.prep),r.ppem=e;const o=n.tables.cvt;if(o){const t=r.cvt=new Array(o.length),i=e/n.unitsPerEm;for(let e=0;e<o.length;e++)t[e]=o[e]*i}else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{we(r)}catch(t){this._errorState<2&&console.log("Hinting error in PREP:"+t),this._errorState=2}}if(!(this._errorState>1))try{return Se(t,r)}catch(t){return this._errorState<1&&(console.log("Hinting error:"+t),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}},Se=function(t,e){const n=e.ppem/e.font.unitsPerEm,r=n;let o,i,a,s=t.components;if(Fe.prototype=e,s){const u=e.font;i=[],o=[];for(let t=0;t<s.length;t++){const e=s[t],c=u.glyphs.get(e.glyphIndex);a=new Fe("glyf",c.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+t+"---"),a.step=-1),Me(c,a,n,r);const f=Math.round(e.dx*n),l=Math.round(e.dy*r),h=a.gZone,p=a.contours;for(let t=0;t<h.length;t++){const e=h[t];e.xTouched=e.yTouched=!1,e.xo=e.x=e.x+f,e.yo=e.y=e.y+l}const d=i.length;i.push.apply(i,h);for(let t=0;t<p.length;t++)o.push(p[t]+d)}t.instructions&&!a.inhibitGridFit&&(a=new Fe("glyf",t.instructions),a.gZone=a.z0=a.z1=a.z2=i,a.contours=o,i.push(new Pe(0,0),new Pe(Math.round(t.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),we(a),i.length-=2)}else a=new Fe("glyf",t.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),Me(t,a,n,r),i=a.gZone;return i},Me=function(t,e,n,r){const o=t.points||[],i=o.length,a=e.gZone=e.z0=e.z1=e.z2=[],s=e.contours=[];let u,c,f;for(let t=0;t<i;t++)u=o[t],a[t]=new Pe(u.x*n,u.y*r,u.lastPointOfContour,u.onCurve);for(let t=0;t<i;t++)u=a[t],c||(c=u,s.push(t)),u.lastPointOfContour?(u.nextPointOnContour=c,c.prevPointOnContour=u,c=void 0):(f=a[t+1],u.nextPointOnContour=f,f.prevPointOnContour=u);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(let t=0;t<i;t++)console.log(t,a[t].x,a[t].y)}if(a.push(new Pe(0,0),new Pe(Math.round(t.advanceWidth*n),0)),we(e),a.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(let t=0;t<i;t++)console.log(t,a[t].x,a[t].y)}}},we=function(t){let e=t.prog;if(!e)return;const n=e.length;let r;for(t.ip=0;t.ip<n;t.ip++){if(exports.DEBUG&&t.step++,r=xe[e[t.ip]],!r)throw new Error("unknown instruction: 0x"+Number(e[t.ip]).toString(16));r(t)}},xe=[ze.bind(void 0,Ie),ze.bind(void 0,_e),He.bind(void 0,Ie),He.bind(void 0,_e),qe.bind(void 0,Ie),qe.bind(void 0,_e),We.bind(void 0,0),We.bind(void 0,1),Ve.bind(void 0,0),Ve.bind(void 0,1),function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",n,r),t.pv=t.dpv=De(r,n)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",n,r),t.fv=De(r,n)},function(t){const e=t.stack,n=t.pv;exports.DEBUG&&console.log(t.step,"GPV[]"),e.push(16384*n.x),e.push(16384*n.y)},function(t){const e=t.stack,n=t.fv;exports.DEBUG&&console.log(t.step,"GFV[]"),e.push(16384*n.x),e.push(16384*n.y)},function(t){t.fv=t.pv,exports.DEBUG&&console.log(t.step,"SFVTPV[]")},function(t){const e=t.stack,n=e.pop(),r=e.pop(),o=e.pop(),i=e.pop(),a=e.pop(),s=t.z0,u=t.z1,c=s[n],f=s[r],l=u[o],h=u[i],p=t.z2[a];exports.DEBUG&&console.log("ISECT[], ",n,r,o,i,a);const d=c.x,m=c.y,g=f.x,v=f.y,y=l.x,b=l.y,x=h.x,w=h.y,S=(d-g)*(b-w)-(m-v)*(y-x),M=d*v-m*g,A=y*w-b*x;p.x=(M*(y-x)-A*(d-g))/S,p.y=(M*(b-w)-A*(m-v))/S},function(t){t.rp0=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP0[]",t.rp0)},function(t){t.rp1=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP1[]",t.rp1)},function(t){t.rp2=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP2[]",t.rp2)},function(t){const e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP0[]",e),t.zp0=e,e){case 0:t.tZone||je(t),t.z0=t.tZone;break;case 1:t.z0=t.gZone;break;default:throw new Error("Invalid zone pointer")}},function(t){const e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP1[]",e),t.zp1=e,e){case 0:t.tZone||je(t),t.z1=t.tZone;break;case 1:t.z1=t.gZone;break;default:throw new Error("Invalid zone pointer")}},function(t){const e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP2[]",e),t.zp2=e,e){case 0:t.tZone||je(t),t.z2=t.tZone;break;case 1:t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}},function(t){const e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZPS[]",e),t.zp0=t.zp1=t.zp2=e,e){case 0:t.tZone||je(t),t.z0=t.z1=t.z2=t.tZone;break;case 1:t.z0=t.z1=t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}},function(t){t.loop=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SLOOP[]",t.loop)},function(t){exports.DEBUG&&console.log(t.step,"RTG[]"),t.round=Oe},function(t){exports.DEBUG&&console.log(t.step,"RTHG[]"),t.round=Ee},function(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SMD[]",e),t.minDis=e/64},function(t){exports.DEBUG&&console.log(t.step,"ELSE[]"),Ge(t,!1)},function(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"JMPR[]",e),t.ip+=e-1},function(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCVTCI[]",e),t.cvCutIn=e/64},void 0,void 0,function(t){const e=t.stack;exports.DEBUG&&console.log(t.step,"DUP[]"),e.push(e[e.length-1])},Ye,function(t){exports.DEBUG&&console.log(t.step,"CLEAR[]"),t.stack.length=0},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SWAP[]"),e.push(n),e.push(r)},function(t){const e=t.stack;exports.DEBUG&&console.log(t.step,"DEPTH[]"),e.push(e.length)},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"CINDEX[]",n),e.push(e[e.length-n])},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"MINDEX[]",n),e.push(e.splice(e.length-n,1)[0])},void 0,void 0,void 0,function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LOOPCALL[]",n,r);const o=t.ip,i=t.prog;t.prog=t.funcs[n];for(let e=0;e<r;e++)we(t),exports.DEBUG&&console.log(++t.step,e+1<r?"next loopcall":"done loopcall",e);t.ip=o,t.prog=i},function(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"CALL[]",e);const n=t.ip,r=t.prog;t.prog=t.funcs[e],we(t),t.ip=n,t.prog=r,exports.DEBUG&&console.log(++t.step,"returning from",e)},function(t){if("fpgm"!==t.env)throw new Error("FDEF not allowed here");const e=t.stack,n=t.prog;let r=t.ip;const o=e.pop(),i=r;for(exports.DEBUG&&console.log(t.step,"FDEF[]",o);45!==n[++r];);t.ip=r,t.funcs[o]=n.slice(i+1,r)},void 0,Xe.bind(void 0,0),Xe.bind(void 0,1),Je.bind(void 0,Ie),Je.bind(void 0,_e),Ze.bind(void 0,0),Ze.bind(void 0,1),Qe.bind(void 0,0),Qe.bind(void 0,1),Ke.bind(void 0,0),Ke.bind(void 0,1),function(t){const e=t.stack;let n=t.loop;const r=t.fv,o=e.pop()/64,i=t.z2;for(;n--;){const a=e.pop(),s=i[a];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-n)+": ":"")+"SHPIX[]",a,o),r.setRelative(s,s,o),r.touch(s)}t.loop=1},function(t){const e=t.stack,n=t.rp1,r=t.rp2;let o=t.loop;const i=t.z0[n],a=t.z1[r],s=t.fv,u=t.dpv,c=t.z2;for(;o--;){const f=e.pop(),l=c[f];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-o)+": ":"")+"IP[]",f,n,"<->",r),s.interpolate(l,i,a,u),s.touch(l)}t.loop=1},$e.bind(void 0,0),$e.bind(void 0,1),function(t){const e=t.stack,n=t.rp0,r=t.z0[n];let o=t.loop;const i=t.fv,a=t.pv,s=t.z1;for(;o--;){const n=e.pop(),u=s[n];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-o)+": ":"")+"ALIGNRP[]",n),i.setRelative(u,r,0,a),i.touch(u)}t.loop=1},function(t){exports.DEBUG&&console.log(t.step,"RTDG[]"),t.round=ke},tn.bind(void 0,0),tn.bind(void 0,1),function(t){const e=t.prog;let n=t.ip;const r=t.stack,o=e[++n];exports.DEBUG&&console.log(t.step,"NPUSHB[]",o);for(let t=0;t<o;t++)r.push(e[++n]);t.ip=n},function(t){let e=t.ip;const n=t.prog,r=t.stack,o=n[++e];exports.DEBUG&&console.log(t.step,"NPUSHW[]",o);for(let t=0;t<o;t++){let t=n[++e]<<8|n[++e];32768&t&&(t=-(1+(65535^t))),r.push(t)}t.ip=e},function(t){const e=t.stack;let n=t.store;n||(n=t.store=[]);const r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"WS",r,o),n[o]=r},function(t){const e=t.stack,n=t.store,r=e.pop();exports.DEBUG&&console.log(t.step,"RS",r);const o=n&&n[r]||0;e.push(o)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"WCVTP",n,r),t.cvt[r]=n/64},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"RCVT",n),e.push(64*t.cvt[n])},en.bind(void 0,0),en.bind(void 0,1),void 0,nn.bind(void 0,0),nn.bind(void 0,1),function(t){exports.DEBUG&&console.log(t.step,"MPPEM[]"),t.stack.push(t.ppem)},void 0,function(t){exports.DEBUG&&console.log(t.step,"FLIPON[]"),t.autoFlip=!0},void 0,void 0,function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LT[]",n,r),e.push(r<n?1:0)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LTEQ[]",n,r),e.push(r<=n?1:0)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"GT[]",n,r),e.push(r>n?1:0)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"GTEQ[]",n,r),e.push(r>=n?1:0)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"EQ[]",n,r),e.push(n===r?1:0)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"NEQ[]",n,r),e.push(n!==r?1:0)},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"ODD[]",n),e.push(Math.trunc(n)%2?1:0)},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"EVEN[]",n),e.push(Math.trunc(n)%2?0:1)},function(t){let e=t.stack.pop();exports.DEBUG&&console.log(t.step,"IF[]",e),e||(Ge(t,!0),exports.DEBUG&&console.log(t.step,"EIF[]"))},function(t){exports.DEBUG&&console.log(t.step,"EIF[]")},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"AND[]",n,r),e.push(n&&r?1:0)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"OR[]",n,r),e.push(n||r?1:0)},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"NOT[]",n),e.push(n?0:1)},rn.bind(void 0,1),function(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SDB[]",e),t.deltaBase=e},function(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SDS[]",e),t.deltaShift=Math.pow(.5,e)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"ADD[]",n,r),e.push(r+n)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SUB[]",n,r),e.push(r-n)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"DIV[]",n,r),e.push(64*r/n)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MUL[]",n,r),e.push(r*n/64)},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"ABS[]",n),e.push(Math.abs(n))},function(t){const e=t.stack;let n=e.pop();exports.DEBUG&&console.log(t.step,"NEG[]",n),e.push(-n)},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"FLOOR[]",n),e.push(64*Math.floor(n/64))},function(t){const e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"CEILING[]",n),e.push(64*Math.ceil(n/64))},on.bind(void 0,0),on.bind(void 0,1),on.bind(void 0,2),on.bind(void 0,3),void 0,void 0,void 0,void 0,function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"WCVTF[]",n,r),t.cvt[r]=n*t.ppem/t.font.unitsPerEm},rn.bind(void 0,2),rn.bind(void 0,3),an.bind(void 0,1),an.bind(void 0,2),an.bind(void 0,3),function(t){let e,n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SROUND[]",n),t.round=Ue,192&n){case 0:e=.5;break;case 64:e=1;break;case 128:e=2;break;default:throw new Error("invalid SROUND value")}switch(t.srPeriod=e,48&n){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*e;break;case 32:t.srPhase=.5*e;break;case 48:t.srPhase=.75*e;break;default:throw new Error("invalid SROUND value")}n&=15,t.srThreshold=0===n?0:(n/8-.5)*e},function(t){let e,n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"S45ROUND[]",n),t.round=Ue,192&n){case 0:e=Math.sqrt(2)/2;break;case 64:e=Math.sqrt(2);break;case 128:e=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(t.srPeriod=e,48&n){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*e;break;case 32:t.srPhase=.5*e;break;case 48:t.srPhase=.75*e;break;default:throw new Error("invalid S45ROUND value")}n&=15,t.srThreshold=0===n?0:(n/8-.5)*e},void 0,void 0,function(t){exports.DEBUG&&console.log(t.step,"ROFF[]"),t.round=Te},void 0,function(t){exports.DEBUG&&console.log(t.step,"RUTG[]"),t.round=Re},function(t){exports.DEBUG&&console.log(t.step,"RDTG[]"),t.round=Ce},Ye,Ye,void 0,void 0,void 0,void 0,void 0,function(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANCTRL[]",e)},sn.bind(void 0,0),sn.bind(void 0,1),function(t){const e=t.stack,n=e.pop();let r=0;exports.DEBUG&&console.log(t.step,"GETINFO[]",n),1&n&&(r=35),32&n&&(r|=4096),e.push(r)},void 0,function(t){const e=t.stack,n=e.pop(),r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"ROLL[]"),e.push(r),e.push(n),e.push(o)},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MAX[]",n,r),e.push(Math.max(r,n))},function(t){const e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MIN[]",n,r),e.push(Math.min(r,n))},function(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANTYPE[]",e)},function(t){const e=t.stack.pop();let n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"INSTCTRL[]",e,n),e){case 1:return void(t.inhibitGridFit=!!n);case 2:return void(t.ignoreCvt=!!n);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,un.bind(void 0,1),un.bind(void 0,2),un.bind(void 0,3),un.bind(void 0,4),un.bind(void 0,5),un.bind(void 0,6),un.bind(void 0,7),un.bind(void 0,8),cn.bind(void 0,1),cn.bind(void 0,2),cn.bind(void 0,3),cn.bind(void 0,4),cn.bind(void 0,5),cn.bind(void 0,6),cn.bind(void 0,7),cn.bind(void 0,8),fn.bind(void 0,0,0,0,0,0),fn.bind(void 0,0,0,0,0,1),fn.bind(void 0,0,0,0,0,2),fn.bind(void 0,0,0,0,0,3),fn.bind(void 0,0,0,0,1,0),fn.bind(void 0,0,0,0,1,1),fn.bind(void 0,0,0,0,1,2),fn.bind(void 0,0,0,0,1,3),fn.bind(void 0,0,0,1,0,0),fn.bind(void 0,0,0,1,0,1),fn.bind(void 0,0,0,1,0,2),fn.bind(void 0,0,0,1,0,3),fn.bind(void 0,0,0,1,1,0),fn.bind(void 0,0,0,1,1,1),fn.bind(void 0,0,0,1,1,2),fn.bind(void 0,0,0,1,1,3),fn.bind(void 0,0,1,0,0,0),fn.bind(void 0,0,1,0,0,1),fn.bind(void 0,0,1,0,0,2),fn.bind(void 0,0,1,0,0,3),fn.bind(void 0,0,1,0,1,0),fn.bind(void 0,0,1,0,1,1),fn.bind(void 0,0,1,0,1,2),fn.bind(void 0,0,1,0,1,3),fn.bind(void 0,0,1,1,0,0),fn.bind(void 0,0,1,1,0,1),fn.bind(void 0,0,1,1,0,2),fn.bind(void 0,0,1,1,0,3),fn.bind(void 0,0,1,1,1,0),fn.bind(void 0,0,1,1,1,1),fn.bind(void 0,0,1,1,1,2),fn.bind(void 0,0,1,1,1,3),fn.bind(void 0,1,0,0,0,0),fn.bind(void 0,1,0,0,0,1),fn.bind(void 0,1,0,0,0,2),fn.bind(void 0,1,0,0,0,3),fn.bind(void 0,1,0,0,1,0),fn.bind(void 0,1,0,0,1,1),fn.bind(void 0,1,0,0,1,2),fn.bind(void 0,1,0,0,1,3),fn.bind(void 0,1,0,1,0,0),fn.bind(void 0,1,0,1,0,1),fn.bind(void 0,1,0,1,0,2),fn.bind(void 0,1,0,1,0,3),fn.bind(void 0,1,0,1,1,0),fn.bind(void 0,1,0,1,1,1),fn.bind(void 0,1,0,1,1,2),fn.bind(void 0,1,0,1,1,3),fn.bind(void 0,1,1,0,0,0),fn.bind(void 0,1,1,0,0,1),fn.bind(void 0,1,1,0,0,2),fn.bind(void 0,1,1,0,0,3),fn.bind(void 0,1,1,0,1,0),fn.bind(void 0,1,1,0,1,1),fn.bind(void 0,1,1,0,1,2),fn.bind(void 0,1,1,0,1,3),fn.bind(void 0,1,1,1,0,0),fn.bind(void 0,1,1,1,0,1),fn.bind(void 0,1,1,1,0,2),fn.bind(void 0,1,1,1,0,3),fn.bind(void 0,1,1,1,1,0),fn.bind(void 0,1,1,1,1,1),fn.bind(void 0,1,1,1,1,2),fn.bind(void 0,1,1,1,1,3)];var ln=Ae;function hn(t){this.char=t,this.state={},this.activeState=null}function pn(t,e,n){this.contextName=n,this.startIndex=t,this.endOffset=e}function dn(t,e,n){this.contextName=t,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=n}function mn(t,e){this.context=t,this.index=e,this.length=t.length,this.current=t[e],this.backtrack=t.slice(0,e),this.lookahead=t.slice(e+1)}function gn(t){this.eventId=t,this.subscribers=[]}function vn(t){const e=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];e.forEach(t=>{Object.defineProperty(this.events,t,{value:new gn(t)})}),t&&e.forEach(e=>{const n=t[e];"function"==typeof n&&this.events[e].subscribe(n)});["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach(t=>{this.events[t].subscribe(this.updateContextsRanges)})}function yn(t){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],vn.call(this,t)}hn.prototype.setState=function(t,e){return this.state[t]=e,this.activeState={key:t,value:this.state[t]},this.activeState},hn.prototype.getState=function(t){return this.state[t]||null},yn.prototype.inboundIndex=function(t){return t>=0&&t<this.tokens.length},yn.prototype.composeRUD=function(t){const e=t.map(t=>this[t[0]].apply(this,t.slice(1).concat(!0))),n=t=>"object"==typeof t&&t.hasOwnProperty("FAIL");if(e.every(n))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:e.filter(n)};this.dispatch("composeRUD",[e.filter(t=>!n(t))])},yn.prototype.replaceRange=function(t,e,n,r){e=null!==e?e:this.tokens.length;const o=n.every(t=>t instanceof hn);if(!isNaN(t)&&this.inboundIndex(t)&&o){const o=this.tokens.splice.apply(this.tokens,[t,e].concat(n));return r||this.dispatch("replaceToken",[t,e,n]),[o,n]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},yn.prototype.replaceToken=function(t,e,n){if(!isNaN(t)&&this.inboundIndex(t)&&e instanceof hn){const r=this.tokens.splice(t,1,e);return n||this.dispatch("replaceToken",[t,e]),[r[0],e]}return{FAIL:"replaceToken: invalid token or index."}},yn.prototype.removeRange=function(t,e,n){e=isNaN(e)?this.tokens.length:e;const r=this.tokens.splice(t,e);return n||this.dispatch("removeRange",[r,t,e]),r},yn.prototype.removeToken=function(t,e){if(!isNaN(t)&&this.inboundIndex(t)){const n=this.tokens.splice(t,1);return e||this.dispatch("removeToken",[n,t]),n}return{FAIL:"removeToken: invalid token index."}},yn.prototype.insertToken=function(t,e,n){return t.every(t=>t instanceof hn)?(this.tokens.splice.apply(this.tokens,[e,0].concat(t)),n||this.dispatch("insertToken",[t,e]),t):{FAIL:"insertToken: invalid token(s)."}},yn.prototype.registerModifier=function(t,e,n){this.events.newToken.subscribe((function(r,o){const i=[r,o],a=[r,o];if(null===e||!0===e.apply(this,i)){let e=n.apply(this,a);r.setState(t,e)}})),this.registeredModifiers.push(t)},gn.prototype.subscribe=function(t){return"function"==typeof t?this.subscribers.push(t)-1:{FAIL:`invalid '${this.eventId}' event handler`}},gn.prototype.unsubscribe=function(t){this.subscribers.splice(t,1)},mn.prototype.setCurrentIndex=function(t){this.index=t,this.current=this.context[t],this.backtrack=this.context.slice(0,t),this.lookahead=this.context.slice(t+1)},mn.prototype.get=function(t){switch(!0){case 0===t:return this.current;case t<0&&Math.abs(t)<=this.backtrack.length:return this.backtrack.slice(t)[0];case t>0&&t<=this.lookahead.length:return this.lookahead[t-1];default:return null}},yn.prototype.rangeToText=function(t){if(t instanceof pn)return this.getRangeTokens(t).map(t=>t.char).join("")},yn.prototype.getText=function(){return this.tokens.map(t=>t.char).join("")},yn.prototype.getContext=function(t){let e=this.registeredContexts[t];return e||null},yn.prototype.on=function(t,e){const n=this.events[t];return n?n.subscribe(e):null},yn.prototype.dispatch=function(t,e){const n=this.events[t];n instanceof gn&&n.subscribers.forEach(t=>{t.apply(this,e||[])})},yn.prototype.registerContextChecker=function(t,e,n){if(this.getContext(t))return{FAIL:`context name '${t}' is already registered.`};if("function"!=typeof e)return{FAIL:"missing context start check."};if("function"!=typeof n)return{FAIL:"missing context end check."};const r=new dn(t,e,n);return this.registeredContexts[t]=r,this.contextCheckers.push(r),r},yn.prototype.getRangeTokens=function(t){const e=t.startIndex+t.endOffset;return[].concat(this.tokens.slice(t.startIndex,e))},yn.prototype.getContextRanges=function(t){const e=this.getContext(t);return e?e.ranges:{FAIL:`context checker '${t}' is not registered.`}},yn.prototype.resetContextsRanges=function(){const t=this.registeredContexts;for(const e in t)if(t.hasOwnProperty(e)){t[e].ranges=[]}},yn.prototype.updateContextsRanges=function(){this.resetContextsRanges();const t=this.tokens.map(t=>t.char);for(let e=0;e<t.length;e++){const n=new mn(t,e);this.runContextCheck(n)}this.dispatch("updateContextsRanges",[this.registeredContexts])},yn.prototype.setEndOffset=function(t,e){let n=new pn(this.getContext(e).openRange.startIndex,t,e);const r=this.getContext(e).ranges;return n.rangeId=`${e}.${r.length}`,r.push(n),this.getContext(e).openRange=null,n},yn.prototype.runContextCheck=function(t){const e=t.index;this.contextCheckers.forEach(n=>{let r=n.contextName,o=this.getContext(r).openRange;if(!o&&n.checkStart(t)&&(o=new pn(e,null,r),this.getContext(r).openRange=o,this.dispatch("contextStart",[r,e])),o&&n.checkEnd(t)){const t=e-o.startIndex+1,n=this.setEndOffset(t,r);this.dispatch("contextEnd",[r,n])}})},yn.prototype.tokenize=function(t){this.tokens=[],this.resetContextsRanges();let e=Array.from(t);this.dispatch("start");for(let t=0;t<e.length;t++){const n=e[t],r=new mn(e,t);this.dispatch("next",[r]),this.runContextCheck(r);let o=new hn(n);this.tokens.push(o),this.dispatch("newToken",[o,r])}return this.dispatch("end",[this.tokens]),this.tokens};var bn=yn;function xn(t){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(t)}function wn(t){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(t)}function Sn(t){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(t)}function Mn(t){return/[A-z]/.test(t)}function An(t){this.font=t,this.features={}}function Tn(t){this.id=t.id,this.tag=t.tag,this.substitution=t.substitution}function On(t,e){if(!t)return-1;switch(e.format){case 1:return e.glyphs.indexOf(t);case 2:let n=e.ranges;for(let e=0;e<n.length;e++){const r=n[e];if(t>=r.start&&t<=r.end){let e=t-r.start;return r.index+e}}break;default:return-1}return-1}function kn(t,e){return-1===On(t,e.coverage)?null:t+e.deltaGlyphId}function En(t,e){let n=On(t,e.coverage);return-1===n?null:e.substitute[n]}function Rn(t,e){let n=[];for(let r=0;r<t.length;r++){const o=t[r];let i=e.current;i=Array.isArray(i)?i[0]:i;const a=On(i,o);-1!==a&&n.push(a)}return n.length!==t.length?-1:n}function Cn(t,e){const n=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(t.context.length<n)return[];let r=Rn(e.inputCoverage,t);if(-1===r)return[];const o=e.inputCoverage.length-1;if(t.lookahead.length<e.lookaheadCoverage.length)return[];let i=t.lookahead.slice(o);for(;i.length&&Sn(i[0].char);)i.shift();const a=new mn(i,0);let s=Rn(e.lookaheadCoverage,a),u=[].concat(t.backtrack);for(u.reverse();u.length&&Sn(u[0].char);)u.shift();if(u.length<e.backtrackCoverage.length)return[];const c=new mn(u,0);let f=Rn(e.backtrackCoverage,c);let l=[];if(r.length===e.inputCoverage.length&&s.length===e.lookaheadCoverage.length&&f.length===e.backtrackCoverage.length)for(let n=0;n<e.lookupRecords.length;n++){const o=e.lookupRecords[n].lookupListIndex,i=this.getLookupByIndex(o);for(let e=0;e<i.subtables.length;e++){const n=i.subtables[e],o=this.getLookupMethod(i,n);if("12"===this.getSubstitutionType(i,n))for(let e=0;e<r.length;e++){const n=o(t.get(e));n&&l.push(n)}}}return l}function Un(t,e){let n,r=On(t.current,e.coverage);if(-1===r)return null;let o=e.ligatureSets[r];for(let e=0;e<o.length;e++){n=o[e];for(let e=0;e<n.components.length;e++){if(t.lookahead[e]!==n.components[e])break;if(e===n.components.length-1)return n}}return null}function _n(t,e){let n=On(t,e.coverage);return-1===n?null:e.sequences[n]}An.prototype.getDefaultScriptFeaturesIndexes=function(){const t=this.font.tables.gsub.scripts;for(let e=0;e<t.length;e++){const n=t[e];if("DFLT"===n.tag)return n.script.defaultLangSys.featureIndexes}return[]},An.prototype.getScriptFeaturesIndexes=function(t){if(!this.font.tables.gsub)return[];if(!t)return this.getDefaultScriptFeaturesIndexes();const e=this.font.tables.gsub.scripts;for(let n=0;n<e.length;n++){const r=e[n];if(r.tag===t&&r.script.defaultLangSys)return r.script.defaultLangSys.featureIndexes;{let e=r.langSysRecords;if(e)for(let n=0;n<e.length;n++){const r=e[n];if(r.tag===t){return r.langSys.featureIndexes}}}}return this.getDefaultScriptFeaturesIndexes()},An.prototype.mapTagsToFeatures=function(t,e){let n={};for(let e=0;e<t.length;e++){const r=t[e].tag,o=t[e].feature;n[r]=o}this.features[e].tags=n},An.prototype.getScriptFeatures=function(t){let e=this.features[t];if(this.features.hasOwnProperty(t))return e;const n=this.getScriptFeaturesIndexes(t);if(!n)return null;const r=this.font.tables.gsub;return e=n.map(t=>r.features[t]),this.features[t]=e,this.mapTagsToFeatures(e,t),e},An.prototype.getSubstitutionType=function(t,e){return t.lookupType.toString()+e.substFormat.toString()},An.prototype.getLookupMethod=function(t,e){switch(this.getSubstitutionType(t,e)){case"11":return t=>kn.apply(this,[t,e]);case"12":return t=>En.apply(this,[t,e]);case"63":return t=>Cn.apply(this,[t,e]);case"41":return t=>Un.apply(this,[t,e]);case"21":return t=>_n.apply(this,[t,e]);default:throw new Error(`lookupType: ${t.lookupType} - `+`substFormat: ${e.substFormat} `+"is not yet supported")}},An.prototype.lookupFeature=function(t){let e=t.contextParams,n=e.index;const r=this.getFeature({tag:t.tag,script:t.script});if(!r)return new Error(`font '${this.font.names.fullName.en}' `+`doesn't support feature '${t.tag}' `+`for script '${t.script}'.`);const o=this.getFeatureLookups(r),i=[].concat(e.context);for(let r=0;r<o.length;r++){const a=o[r],s=this.getLookupSubtables(a);for(let r=0;r<s.length;r++){const o=s[r],u=this.getSubstitutionType(a,o),c=this.getLookupMethod(a,o);let f;switch(u){case"11":f=c(e.current),f&&i.splice(n,1,new Tn({id:11,tag:t.tag,substitution:f}));break;case"12":f=c(e.current),f&&i.splice(n,1,new Tn({id:12,tag:t.tag,substitution:f}));break;case"63":f=c(e),Array.isArray(f)&&f.length&&i.splice(n,1,new Tn({id:63,tag:t.tag,substitution:f}));break;case"41":f=c(e),f&&i.splice(n,1,new Tn({id:41,tag:t.tag,substitution:f}));break;case"21":f=c(e.current),f&&i.splice(n,1,new Tn({id:21,tag:t.tag,substitution:f}))}e=new mn(i,n),Array.isArray(f)&&!f.length||(f=null)}}return i.length?i:null},An.prototype.supports=function(t){if(!t.script)return!1;this.getScriptFeatures(t.script);const e=this.features.hasOwnProperty(t.script);if(!t.tag)return e;const n=this.features[t.script].some(e=>e.tag===t.tag);return e&&n},An.prototype.getLookupSubtables=function(t){return t.subtables||null},An.prototype.getLookupByIndex=function(t){return this.font.tables.gsub.lookups[t]||null},An.prototype.getFeatureLookups=function(t){return t.lookupListIndexes.map(this.getLookupByIndex.bind(this))},An.prototype.getFeature=function(t){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(t.script)||this.getScriptFeatures(t.script);const e=this.features[t.script];return e?e.tags[t.tag]?this.features[t.script].tags[t.tag]:null:{FAIL:`No feature for script ${t.script}`}};var In=An;var Ln={startCheck:function(t){const e=t.current,n=t.get(-1);return null===n&&xn(e)||!xn(n)&&xn(e)},endCheck:function(t){const e=t.get(1);return(null===e||!xn(e))}};var Dn={startCheck:function(t){const e=t.current,n=t.get(-1);return(xn(e)||Sn(e))&&!xn(n)},endCheck:function(t){const e=t.get(1);switch(!0){case null===e:return!0;case!xn(e)&&!Sn(e):const n=/\s/.test(e);if(!n)return!0;if(n){let e=!1;if(e=t.lookahead.some(t=>xn(t)||Sn(t)),!e)return!0}break;default:return!1}}};const Pn={11:function(t,e,n){e[n].setState(t.tag,t.substitution)},12:function(t,e,n){e[n].setState(t.tag,t.substitution)},63:function(t,e,n){t.substitution.forEach((r,o)=>{e[n+o].setState(t.tag,r)})},41:function(t,e,n){let r=e[n];r.setState(t.tag,t.substitution.ligGlyph);const o=t.substitution.components.length;for(let t=0;t<o;t++)r=e[n+t+1],r.setState("deleted",!0)}};var Bn=function(t,e,n){t instanceof Tn&&Pn[t.id](t,e,n)};var Nn=function(t){const e=this.featuresTags.arab,n=this.tokenizer.getRangeTokens(t);if(1===n.length)return;let r=new mn(n.map(t=>t.getState("glyphIndex")),0);const o=new mn(n.map(t=>t.char),0);n.forEach((t,i)=>{if(Sn(t.char))return;r.setCurrentIndex(i),o.setCurrentIndex(i);let a,s=0;switch(function(t){let e=[].concat(t.backtrack);for(let t=e.length-1;t>=0;t--){const n=e[t],r=wn(n),o=Sn(n);if(!r&&!o)return!0;if(r)return!1}return!1}(o)&&(s|=1),function(t){if(wn(t.current))return!1;for(let e=0;e<t.lookahead.length;e++){if(!Sn(t.lookahead[e]))return!0}return!1}(o)&&(s|=2),s){case 1:a="fina";break;case 2:a="init";break;case 3:a="medi"}if(-1===e.indexOf(a))return;let u=this.query.lookupFeature({tag:a,script:"arab",contextParams:r});if(u instanceof Error)return console.info(u.message);u.forEach((t,e)=>{t instanceof Tn&&(Bn(t,n,e),r.context[e]=t.substitution)})})};function Fn(t,e){return new mn(t.map(t=>t.activeState.value),e||0)}var jn=function(t){let e=this.tokenizer.getRangeTokens(t),n=Fn(e);n.context.forEach((t,r)=>{n.setCurrentIndex(r);let o=this.query.lookupFeature({tag:"rlig",script:"arab",contextParams:n});o.length&&(o.forEach(t=>Bn(t,e,r)),n=Fn(e))})};var Gn={startCheck:function(t){const e=t.current,n=t.get(-1);return null===n&&Mn(e)||!Mn(n)&&Mn(e)},endCheck:function(t){const e=t.get(1);return(null===e||!Mn(e))}};function zn(t,e){return new mn(t.map(t=>t.activeState.value),e||0)}var Hn=function(t){let e=this.tokenizer.getRangeTokens(t),n=zn(e);n.context.forEach((t,r)=>{n.setCurrentIndex(r);let o=this.query.lookupFeature({tag:"liga",script:"latn",contextParams:n});o.length&&(o.forEach(t=>Bn(t,e,r)),n=zn(e))})};function qn(t){this.baseDir=t||"ltr",this.tokenizer=new bn,this.featuresTags={}}function Wn(t){const e=this.contextChecks[`${t}Check`];return this.tokenizer.registerContextChecker(t,e.startCheck,e.endCheck)}function Vn(){return Wn.call(this,"latinWord"),Wn.call(this,"arabicWord"),Wn.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Yn(){this.tokenizer.getContextRanges("arabicSentence").forEach(t=>{let e=this.tokenizer.getRangeTokens(t);this.tokenizer.replaceRange(t.startIndex,t.endOffset,e.reverse())})}function Xn(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function Jn(){this.featuresTags.hasOwnProperty("arab")&&(Xn.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(t=>{Nn.call(this,t)}))}function Zn(){this.featuresTags.hasOwnProperty("arab")&&-1!==this.featuresTags.arab.indexOf("rlig")&&(Xn.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(t=>{jn.call(this,t)}))}function Qn(){this.featuresTags.hasOwnProperty("latn")&&-1!==this.featuresTags.latn.indexOf("liga")&&(Xn.call(this),this.tokenizer.getContextRanges("latinWord").forEach(t=>{Hn.call(this,t)}))}qn.prototype.setText=function(t){this.text=t},qn.prototype.contextChecks={latinWordCheck:Gn,arabicWordCheck:Ln,arabicSentenceCheck:Dn},qn.prototype.registerFeatures=function(t,e){const n=e.filter(e=>this.query.supports({script:t,tag:e}));this.featuresTags.hasOwnProperty(t)?this.featuresTags[t]=this.featuresTags[t].concat(n):this.featuresTags[t]=n},qn.prototype.applyFeatures=function(t,e){if(!t)throw new Error("No valid font was provided to apply features");this.query||(this.query=new In(t));for(let t=0;t<e.length;t++){const n=e[t];this.query.supports({script:n.script})&&this.registerFeatures(n.script,n.tags)}},qn.prototype.registerModifier=function(t,e,n){this.tokenizer.registerModifier(t,e,n)},qn.prototype.checkContextReady=function(t){return!!this.tokenizer.getContext(t)},qn.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(Jn.call(this),Zn.call(this)),this.checkContextReady("latinWord")&&Qn.call(this),this.checkContextReady("arabicSentence")&&Yn.call(this)},qn.prototype.processText=function(t){this.text&&this.text===t||(this.setText(t),Vn.call(this),this.applyFeaturesToContexts())},qn.prototype.getBidiText=function(t){return this.processText(t),this.tokenizer.getText()},qn.prototype.getTextGlyphs=function(t){this.processText(t);let e=[];for(let t=0;t<this.tokenizer.tokens.length;t++){const n=this.tokenizer.tokens[t];if(n.state.deleted)continue;const r=n.activeState.value;e.push(Array.isArray(r)?r[0]:r)}return e};var Kn=qn;function $n(t){(t=t||{}).empty||(Object(pe.b)(t.familyName,"When creating a new Font object, familyName is required."),Object(pe.b)(t.styleName,"When creating a new Font object, styleName is required."),Object(pe.b)(t.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Object(pe.b)(t.ascender,"When creating a new Font object, ascender is required."),Object(pe.b)(t.descender,"When creating a new Font object, descender is required."),Object(pe.b)(t.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},fullName:{en:t.fullName||t.familyName+" "+t.styleName},postScriptName:{en:t.postScriptName||(t.familyName+t.styleName).replace(/\s/g,"")},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.createdTimestamp=t.createdTimestamp,this.tables={os2:{usWeightClass:t.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:t.widthClass||this.usWidthClasses.MEDIUM,fsSelection:t.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ot.GlyphSet(this,t.glyphs||[]),this.encoding=new X(this),this.position=new ue(this),this.substitution=new he(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new ln(this):void 0}})}$n.prototype.hasChar=function(t){return null!==this.encoding.charToGlyphIndex(t)},$n.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)},$n.prototype.charToGlyph=function(t){const e=this.charToGlyphIndex(t);let n=this.glyphs.get(e);return n||(n=this.glyphs.get(0)),n},$n.prototype.updateFeatures=function(t){return this.defaultRenderOptions.features.map(e=>"latn"===e.script?{script:"latn",tags:e.tags.filter(e=>t[e])}:e)},$n.prototype.stringToGlyphs=function(t,e){const n=new Kn;n.registerModifier("glyphIndex",null,t=>this.charToGlyphIndex(t.char));let r=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;n.applyFeatures(this,r);const o=n.getTextGlyphs(t);let i=o.length;const a=new Array(i),s=this.glyphs.get(0);for(let t=0;t<i;t+=1)a[t]=this.glyphs.get(o[t])||s;return a},$n.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)},$n.prototype.nameToGlyph=function(t){const e=this.nameToGlyphIndex(t);let n=this.glyphs.get(e);return n||(n=this.glyphs.get(0)),n},$n.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""},$n.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;const n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,t,e):this.kerningPairs[t+","+e]||0},$n.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},$n.prototype.forEachGlyph=function(t,e,n,r,o,i){e=void 0!==e?e:0,n=void 0!==n?n:0,r=void 0!==r?r:72,o=o||this.defaultRenderOptions;const a=1/this.unitsPerEm*r,s=this.stringToGlyphs(t,o);let u;if(o.kerning){const t=o.script||this.position.getDefaultScriptName();u=this.position.getKerningTables(t,o.language)}for(let t=0;t<s.length;t+=1){const c=s[t];if(i.call(this,c,e,n,r,o),c.advanceWidth&&(e+=c.advanceWidth*a),o.kerning&&t<s.length-1){e+=(u?this.position.getKerningValue(u,c.index,s[t+1].index):this.getKerningValue(c,s[t+1]))*a}o.letterSpacing?e+=o.letterSpacing*r:o.tracking&&(e+=o.tracking/1e3*r)}return e},$n.prototype.getPath=function(t,e,n,r,o){const i=new c;return this.forEachGlyph(t,e,n,r,o,(function(t,e,n,r){const a=t.getPath(e,n,r,o,this);i.extend(a)})),i},$n.prototype.getPaths=function(t,e,n,r,o){const i=[];return this.forEachGlyph(t,e,n,r,o,(function(t,e,n,r){const a=t.getPath(e,n,r,o,this);i.push(a)})),i},$n.prototype.getAdvanceWidth=function(t,e,n){return this.forEachGlyph(t,0,0,e,n,(function(){}))},$n.prototype.draw=function(t,e,n,r,o,i){this.getPath(e,n,r,o,i).draw(t)},$n.prototype.drawPoints=function(t,e,n,r,o,i){this.forEachGlyph(e,n,r,o,i,(function(e,n,r,o){e.drawPoints(t,n,r,o)}))},$n.prototype.drawMetrics=function(t,e,n,r,o,i){this.forEachGlyph(e,n,r,o,i,(function(e,n,r,o){e.drawMetrics(t,n,r,o)}))},$n.prototype.getEnglishName=function(t){const e=this.names[t];if(e)return e.en},$n.prototype.validate=function(){const t=[],e=this;function n(e,n){e||t.push(n)}function r(t){const r=e.getEnglishName(t);n(r&&r.trim().length>0,"No English "+t+" specified.")}r("fontFamily"),r("weightName"),r("manufacturer"),r("copyright"),r("version"),n(this.unitsPerEm>0,"No unitsPerEm specified.")},$n.prototype.toTables=function(){return ee.fontToTable(this)},$n.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},$n.prototype.toArrayBuffer=function(){const t=this.toTables().encode(),e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let e=0;e<t.length;e++)n[e]=t[e];return e},$n.prototype.download=function(t){const e=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");t=t||e.replace(/\s/g,"")+"-"+r+".otf";const o=this.toArrayBuffer();if(Object(pe.c)())if(window.URL=window.URL||window.webkitURL,window.URL){const e=new DataView(o),n=new Blob([e],{type:"font/opentype"});let r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=t;let i=document.createEvent("MouseEvents");i.initEvent("click",!0,!1),r.dispatchEvent(i)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{const e=n(450),r=Object(pe.a)(o);e.writeFileSync(t,r)}},$n.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},$n.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},$n.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var tr=$n;function er(t,e){const n=JSON.stringify(t);let r=256;for(let t in e){let o=parseInt(t);if(o&&!(o<256)){if(JSON.stringify(e[t])===n)return o;r<=o&&(r=o+1)}}return e[r]=t,r}function nr(t,e,n){const r=er(e.name,n);return[{name:"tag_"+t,type:"TAG",value:e.tag},{name:"minValue_"+t,type:"FIXED",value:e.minValue<<16},{name:"defaultValue_"+t,type:"FIXED",value:e.defaultValue<<16},{name:"maxValue_"+t,type:"FIXED",value:e.maxValue<<16},{name:"flags_"+t,type:"USHORT",value:0},{name:"nameID_"+t,type:"USHORT",value:r}]}function rr(t,e,n){const r={},o=new G.Parser(t,e);return r.tag=o.parseTag(),r.minValue=o.parseFixed(),r.defaultValue=o.parseFixed(),r.maxValue=o.parseFixed(),o.skip("uShort",1),r.name=n[o.parseUShort()]||{},r}function or(t,e,n,r){const o=[{name:"nameID_"+t,type:"USHORT",value:er(e.name,r)},{name:"flags_"+t,type:"USHORT",value:0}];for(let r=0;r<n.length;++r){const i=n[r].tag;o.push({name:"axis_"+t+" "+i,type:"FIXED",value:e.coordinates[i]<<16})}return o}function ir(t,e,n,r){const o={},i=new G.Parser(t,e);o.name=r[i.parseUShort()]||{},i.skip("uShort",1),o.coordinates={};for(let t=0;t<n.length;++t)o.coordinates[n[t].tag]=i.parseFixed();return o}var ar={make:function(t,e){const n=new I.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:t.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:t.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*t.axes.length}]);n.offsetToData=n.sizeOf();for(let r=0;r<t.axes.length;r++)n.fields=n.fields.concat(nr(r,t.axes[r],e));for(let r=0;r<t.instances.length;r++)n.fields=n.fields.concat(or(r,t.instances[r],t.axes,e));return n},parse:function(t,e,n){const r=new G.Parser(t,e),o=r.parseULong();h.argument(65536===o,"Unsupported fvar table version.");const i=r.parseOffset16();r.skip("uShort",1);const a=r.parseUShort(),s=r.parseUShort(),u=r.parseUShort(),c=r.parseUShort(),f=[];for(let r=0;r<a;r++)f.push(rr(t,e+i+r*s,n));const l=[],p=e+i+a*s;for(let e=0;e<u;e++)l.push(ir(t,p+e*c,f,n));return{axes:f,instances:l}}};const sr=new Array(10);sr[1]=function(){const t=this.offset+this.relativeOffset,e=this.parseUShort();return 1===e?{posFormat:1,coverage:this.parsePointer(F.coverage),value:this.parseValueRecord()}:2===e?{posFormat:2,coverage:this.parsePointer(F.coverage),values:this.parseValueRecordList()}:void h.assert(!1,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},sr[2]=function(){const t=this.offset+this.relativeOffset,e=this.parseUShort();h.assert(1===e||2===e,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");const n=this.parsePointer(F.coverage),r=this.parseUShort(),o=this.parseUShort();if(1===e)return{posFormat:e,coverage:n,valueFormat1:r,valueFormat2:o,pairSets:this.parseList(F.pointer(F.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(o)}}))))};if(2===e){const t=this.parsePointer(F.classDef),i=this.parsePointer(F.classDef),a=this.parseUShort(),s=this.parseUShort();return{posFormat:e,coverage:n,valueFormat1:r,valueFormat2:o,classDef1:t,classDef2:i,class1Count:a,class2Count:s,classRecords:this.parseList(a,F.list(s,(function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(o)}})))}}},sr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},sr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},sr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},sr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},sr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},sr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},sr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};const ur=new Array(10);var cr={parse:function(t,e){const n=new F(t,e=e||0),r=n.parseVersion(1);return h.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(sr)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(sr),variations:n.parseFeatureVariationsList()}},make:function(t){return new I.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new I.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new I.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new I.LookupList(t.lookups,ur)}])}};var fr={parse:function(t,e){const n=new G.Parser(t,e),r=n.parseUShort();if(0===r)return function(t){const e={};t.skip("uShort");const n=t.parseUShort();h.argument(0===n,"Unsupported kern sub-table version."),t.skip("uShort",2);const r=t.parseUShort();t.skip("uShort",3);for(let n=0;n<r;n+=1){const n=t.parseUShort(),r=t.parseUShort(),o=t.parseShort();e[n+","+r]=o}return e}(n);if(1===r)return function(t){const e={};t.skip("uShort"),t.parseULong()>1&&console.warn("Only the first kern subtable is supported."),t.skip("uLong");const n=255&t.parseUShort();if(t.skip("uShort"),0===n){const n=t.parseUShort();t.skip("uShort",3);for(let r=0;r<n;r+=1){const n=t.parseUShort(),r=t.parseUShort(),o=t.parseShort();e[n+","+r]=o}}return e}(n);throw new Error("Unsupported kern table version ("+r+").")}};var lr={parse:function(t,e,n,r){const o=new G.Parser(t,e),i=r?o.parseUShort:o.parseULong,a=[];for(let t=0;t<n+1;t+=1){let t=i.call(o);r&&(t*=2),a.push(t)}return a}};function hr(t,e){n(450).readFile(t,(function(t,n){if(t)return e(t.message);e(null,Object(pe.d)(n))}))}function pr(t,e){const n=new XMLHttpRequest;n.open("get",t,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?e(null,n.response):e("Font could not be loaded: "+n.statusText)},n.onerror=function(){e("Font could not be loaded")},n.send()}function dr(t,e){const n=[];let r=12;for(let o=0;o<e;o+=1){const e=G.getTag(t,r),o=G.getULong(t,r+4),i=G.getULong(t,r+8),a=G.getULong(t,r+12);n.push({tag:e,checksum:o,offset:i,length:a,compression:!1}),r+=16}return n}function mr(t,e){if("WOFF"===e.compression){const n=new Uint8Array(t.buffer,e.offset+2,e.compressedLength-2),r=new Uint8Array(e.length);if(o()(n,r),r.byteLength!==e.length)throw new Error("Decompression error: "+e.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}return{data:t,offset:e.offset}}function gr(t,e){let n,r;e=null==e?{}:e;const o=new tr({empty:!0}),i=new DataView(t,0);let a,s=[];const u=G.getTag(i,0);if(u===String.fromCharCode(0,1,0,0)||"true"===u||"typ1"===u)o.outlinesFormat="truetype",a=G.getUShort(i,4),s=dr(i,a);else if("OTTO"===u)o.outlinesFormat="cff",a=G.getUShort(i,4),s=dr(i,a);else{if("wOFF"!==u)throw new Error("Unsupported OpenType signature "+u);{const t=G.getTag(i,4);if(t===String.fromCharCode(0,1,0,0))o.outlinesFormat="truetype";else{if("OTTO"!==t)throw new Error("Unsupported OpenType flavor "+u);o.outlinesFormat="cff"}a=G.getUShort(i,12),s=function(t,e){const n=[];let r=44;for(let o=0;o<e;o+=1){const e=G.getTag(t,r),o=G.getULong(t,r+4),i=G.getULong(t,r+8),a=G.getULong(t,r+12);let s;s=i<a&&"WOFF",n.push({tag:e,offset:o,compression:s,compressedLength:i,length:a}),r+=20}return n}(i,a)}}let c,f,l,h,p,d,m,g,v,y,b;for(let t=0;t<a;t+=1){const e=s[t];let a;switch(e.tag){case"cmap":a=mr(i,e),o.tables.cmap=H.parse(a.data,a.offset),o.encoding=new J(o.tables.cmap);break;case"cvt ":a=mr(i,e),b=new G.Parser(a.data,a.offset),o.tables.cvt=b.parseShortList(e.length/2);break;case"fvar":f=e;break;case"fpgm":a=mr(i,e),b=new G.Parser(a.data,a.offset),o.tables.fpgm=b.parseByteList(e.length);break;case"head":a=mr(i,e),o.tables.head=At.parse(a.data,a.offset),o.unitsPerEm=o.tables.head.unitsPerEm,n=o.tables.head.indexToLocFormat;break;case"hhea":a=mr(i,e),o.tables.hhea=Tt.parse(a.data,a.offset),o.ascender=o.tables.hhea.ascender,o.descender=o.tables.hhea.descender,o.numberOfHMetrics=o.tables.hhea.numberOfHMetrics;break;case"hmtx":d=e;break;case"ltag":a=mr(i,e),r=kt.parse(a.data,a.offset);break;case"maxp":a=mr(i,e),o.tables.maxp=Et.parse(a.data,a.offset),o.numGlyphs=o.tables.maxp.numGlyphs;break;case"name":v=e;break;case"OS/2":a=mr(i,e),o.tables.os2=zt.parse(a.data,a.offset);break;case"post":a=mr(i,e),o.tables.post=Ht.parse(a.data,a.offset),o.glyphNames=new Q(o.tables.post);break;case"prep":a=mr(i,e),b=new G.Parser(a.data,a.offset),o.tables.prep=b.parseByteList(e.length);break;case"glyf":l=e;break;case"loca":g=e;break;case"CFF ":c=e;break;case"kern":m=e;break;case"GPOS":h=e;break;case"GSUB":p=e;break;case"meta":y=e}}const x=mr(i,v);if(o.tables.name=jt.parse(x.data,x.offset,r),o.names=o.tables.name,l&&g){const t=0===n,r=mr(i,g),a=lr.parse(r.data,r.offset,o.numGlyphs,t),s=mr(i,l);o.glyphs=be.parse(s.data,s.offset,a,o,e)}else{if(!c)throw new Error("Font doesn't contain TrueType or CFF outlines.");{const t=mr(i,c);Mt.parse(t.data,t.offset,o,e)}}const w=mr(i,d);if(Ot.parse(o,w.data,w.offset,o.numberOfHMetrics,o.numGlyphs,o.glyphs,e),K(o,e),m){const t=mr(i,m);o.kerningPairs=fr.parse(t.data,t.offset)}else o.kerningPairs={};if(h){const t=mr(i,h);o.tables.gpos=cr.parse(t.data,t.offset),o.position.init()}if(p){const t=mr(i,p);o.tables.gsub=Yt.parse(t.data,t.offset)}if(f){const t=mr(i,f);o.tables.fvar=ar.parse(t.data,t.offset,o.names)}if(y){const t=mr(i,y);o.tables.meta=Xt.parse(t.data,t.offset),o.metas=o.tables.meta}return o}function vr(t,e,n){("undefined"==typeof window?hr:pr)(t,(function(t,r){if(t)return e(t);let o;try{o=gr(r,n)}catch(t){return e(t,null)}return e(null,o)}))}function yr(t,e){const r=n(450).readFileSync(t);return gr(Object(pe.d)(r),e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return r})),n.d(e,"mat2",(function(){return o})),n.d(e,"mat2d",(function(){return i})),n.d(e,"mat3",(function(){return a})),n.d(e,"mat4",(function(){return s})),n.d(e,"quat",(function(){return f})),n.d(e,"quat2",(function(){return l})),n.d(e,"vec2",(function(){return h})),n.d(e,"vec3",(function(){return u})),n.d(e,"vec4",(function(){return c}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return p})),n.d(r,"ARRAY_TYPE",(function(){return d})),n.d(r,"RANDOM",(function(){return m})),n.d(r,"setMatrixArrayType",(function(){return g})),n.d(r,"toRadian",(function(){return y})),n.d(r,"equals",(function(){return b}));var o={};n.r(o),n.d(o,"create",(function(){return x})),n.d(o,"clone",(function(){return w})),n.d(o,"copy",(function(){return S})),n.d(o,"identity",(function(){return M})),n.d(o,"fromValues",(function(){return A})),n.d(o,"set",(function(){return T})),n.d(o,"transpose",(function(){return O})),n.d(o,"invert",(function(){return k})),n.d(o,"adjoint",(function(){return E})),n.d(o,"determinant",(function(){return R})),n.d(o,"multiply",(function(){return C})),n.d(o,"rotate",(function(){return U})),n.d(o,"scale",(function(){return _})),n.d(o,"fromRotation",(function(){return I})),n.d(o,"fromScaling",(function(){return L})),n.d(o,"str",(function(){return D})),n.d(o,"frob",(function(){return P})),n.d(o,"LDU",(function(){return B})),n.d(o,"add",(function(){return N})),n.d(o,"subtract",(function(){return F})),n.d(o,"exactEquals",(function(){return j})),n.d(o,"equals",(function(){return G})),n.d(o,"multiplyScalar",(function(){return z})),n.d(o,"multiplyScalarAndAdd",(function(){return H})),n.d(o,"mul",(function(){return q})),n.d(o,"sub",(function(){return W}));var i={};n.r(i),n.d(i,"create",(function(){return V})),n.d(i,"clone",(function(){return Y})),n.d(i,"copy",(function(){return X})),n.d(i,"identity",(function(){return J})),n.d(i,"fromValues",(function(){return Z})),n.d(i,"set",(function(){return Q})),n.d(i,"invert",(function(){return K})),n.d(i,"determinant",(function(){return $})),n.d(i,"multiply",(function(){return tt})),n.d(i,"rotate",(function(){return et})),n.d(i,"scale",(function(){return nt})),n.d(i,"translate",(function(){return rt})),n.d(i,"fromRotation",(function(){return ot})),n.d(i,"fromScaling",(function(){return it})),n.d(i,"fromTranslation",(function(){return at})),n.d(i,"str",(function(){return st})),n.d(i,"frob",(function(){return ut})),n.d(i,"add",(function(){return ct})),n.d(i,"subtract",(function(){return ft})),n.d(i,"multiplyScalar",(function(){return lt})),n.d(i,"multiplyScalarAndAdd",(function(){return ht})),n.d(i,"exactEquals",(function(){return pt})),n.d(i,"equals",(function(){return dt})),n.d(i,"mul",(function(){return mt})),n.d(i,"sub",(function(){return gt}));var a={};n.r(a),n.d(a,"create",(function(){return vt})),n.d(a,"fromMat4",(function(){return yt})),n.d(a,"clone",(function(){return bt})),n.d(a,"copy",(function(){return xt})),n.d(a,"fromValues",(function(){return wt})),n.d(a,"set",(function(){return St})),n.d(a,"identity",(function(){return Mt})),n.d(a,"transpose",(function(){return At})),n.d(a,"invert",(function(){return Tt})),n.d(a,"adjoint",(function(){return Ot})),n.d(a,"determinant",(function(){return kt})),n.d(a,"multiply",(function(){return Et})),n.d(a,"translate",(function(){return Rt})),n.d(a,"rotate",(function(){return Ct})),n.d(a,"scale",(function(){return Ut})),n.d(a,"fromTranslation",(function(){return _t})),n.d(a,"fromRotation",(function(){return It})),n.d(a,"fromScaling",(function(){return Lt})),n.d(a,"fromMat2d",(function(){return Dt})),n.d(a,"fromQuat",(function(){return Pt})),n.d(a,"normalFromMat4",(function(){return Bt})),n.d(a,"projection",(function(){return Nt})),n.d(a,"str",(function(){return Ft})),n.d(a,"frob",(function(){return jt})),n.d(a,"add",(function(){return Gt})),n.d(a,"subtract",(function(){return zt})),n.d(a,"multiplyScalar",(function(){return Ht})),n.d(a,"multiplyScalarAndAdd",(function(){return qt})),n.d(a,"exactEquals",(function(){return Wt})),n.d(a,"equals",(function(){return Vt})),n.d(a,"mul",(function(){return Yt})),n.d(a,"sub",(function(){return Xt}));var s={};n.r(s),n.d(s,"create",(function(){return Jt})),n.d(s,"clone",(function(){return Zt})),n.d(s,"copy",(function(){return Qt})),n.d(s,"fromValues",(function(){return Kt})),n.d(s,"set",(function(){return $t})),n.d(s,"identity",(function(){return te})),n.d(s,"transpose",(function(){return ee})),n.d(s,"invert",(function(){return ne})),n.d(s,"adjoint",(function(){return re})),n.d(s,"determinant",(function(){return oe})),n.d(s,"multiply",(function(){return ie})),n.d(s,"translate",(function(){return ae})),n.d(s,"scale",(function(){return se})),n.d(s,"rotate",(function(){return ue})),n.d(s,"rotateX",(function(){return ce})),n.d(s,"rotateY",(function(){return fe})),n.d(s,"rotateZ",(function(){return le})),n.d(s,"fromTranslation",(function(){return he})),n.d(s,"fromScaling",(function(){return pe})),n.d(s,"fromRotation",(function(){return de})),n.d(s,"fromXRotation",(function(){return me})),n.d(s,"fromYRotation",(function(){return ge})),n.d(s,"fromZRotation",(function(){return ve})),n.d(s,"fromRotationTranslation",(function(){return ye})),n.d(s,"fromQuat2",(function(){return be})),n.d(s,"getTranslation",(function(){return xe})),n.d(s,"getScaling",(function(){return we})),n.d(s,"getRotation",(function(){return Se})),n.d(s,"fromRotationTranslationScale",(function(){return Me})),n.d(s,"fromRotationTranslationScaleOrigin",(function(){return Ae})),n.d(s,"fromQuat",(function(){return Te})),n.d(s,"frustum",(function(){return Oe})),n.d(s,"perspective",(function(){return ke})),n.d(s,"perspectiveFromFieldOfView",(function(){return Ee})),n.d(s,"ortho",(function(){return Re})),n.d(s,"lookAt",(function(){return Ce})),n.d(s,"targetTo",(function(){return Ue})),n.d(s,"str",(function(){return _e})),n.d(s,"frob",(function(){return Ie})),n.d(s,"add",(function(){return Le})),n.d(s,"subtract",(function(){return De})),n.d(s,"multiplyScalar",(function(){return Pe})),n.d(s,"multiplyScalarAndAdd",(function(){return Be})),n.d(s,"exactEquals",(function(){return Ne})),n.d(s,"equals",(function(){return Fe})),n.d(s,"mul",(function(){return je})),n.d(s,"sub",(function(){return Ge}));var u={};n.r(u),n.d(u,"create",(function(){return ze})),n.d(u,"clone",(function(){return He})),n.d(u,"length",(function(){return qe})),n.d(u,"fromValues",(function(){return We})),n.d(u,"copy",(function(){return Ve})),n.d(u,"set",(function(){return Ye})),n.d(u,"add",(function(){return Xe})),n.d(u,"subtract",(function(){return Je})),n.d(u,"multiply",(function(){return Ze})),n.d(u,"divide",(function(){return Qe})),n.d(u,"ceil",(function(){return Ke})),n.d(u,"floor",(function(){return $e})),n.d(u,"min",(function(){return tn})),n.d(u,"max",(function(){return en})),n.d(u,"round",(function(){return nn})),n.d(u,"scale",(function(){return rn})),n.d(u,"scaleAndAdd",(function(){return on})),n.d(u,"distance",(function(){return an})),n.d(u,"squaredDistance",(function(){return sn})),n.d(u,"squaredLength",(function(){return un})),n.d(u,"negate",(function(){return cn})),n.d(u,"inverse",(function(){return fn})),n.d(u,"normalize",(function(){return ln})),n.d(u,"dot",(function(){return hn})),n.d(u,"cross",(function(){return pn})),n.d(u,"lerp",(function(){return dn})),n.d(u,"hermite",(function(){return mn})),n.d(u,"bezier",(function(){return gn})),n.d(u,"random",(function(){return vn})),n.d(u,"transformMat4",(function(){return yn})),n.d(u,"transformMat3",(function(){return bn})),n.d(u,"transformQuat",(function(){return xn})),n.d(u,"rotateX",(function(){return wn})),n.d(u,"rotateY",(function(){return Sn})),n.d(u,"rotateZ",(function(){return Mn})),n.d(u,"angle",(function(){return An})),n.d(u,"str",(function(){return Tn})),n.d(u,"exactEquals",(function(){return On})),n.d(u,"equals",(function(){return kn})),n.d(u,"sub",(function(){return Rn})),n.d(u,"mul",(function(){return Cn})),n.d(u,"div",(function(){return Un})),n.d(u,"dist",(function(){return _n})),n.d(u,"sqrDist",(function(){return In})),n.d(u,"len",(function(){return Ln})),n.d(u,"sqrLen",(function(){return Dn})),n.d(u,"forEach",(function(){return Pn}));var c={};n.r(c),n.d(c,"create",(function(){return Bn})),n.d(c,"clone",(function(){return Nn})),n.d(c,"fromValues",(function(){return Fn})),n.d(c,"copy",(function(){return jn})),n.d(c,"set",(function(){return Gn})),n.d(c,"add",(function(){return zn})),n.d(c,"subtract",(function(){return Hn})),n.d(c,"multiply",(function(){return qn})),n.d(c,"divide",(function(){return Wn})),n.d(c,"ceil",(function(){return Vn})),n.d(c,"floor",(function(){return Yn})),n.d(c,"min",(function(){return Xn})),n.d(c,"max",(function(){return Jn})),n.d(c,"round",(function(){return Zn})),n.d(c,"scale",(function(){return Qn})),n.d(c,"scaleAndAdd",(function(){return Kn})),n.d(c,"distance",(function(){return $n})),n.d(c,"squaredDistance",(function(){return tr})),n.d(c,"length",(function(){return er})),n.d(c,"squaredLength",(function(){return nr})),n.d(c,"negate",(function(){return rr})),n.d(c,"inverse",(function(){return or})),n.d(c,"normalize",(function(){return ir})),n.d(c,"dot",(function(){return ar})),n.d(c,"lerp",(function(){return sr})),n.d(c,"random",(function(){return ur})),n.d(c,"transformMat4",(function(){return cr})),n.d(c,"transformQuat",(function(){return fr})),n.d(c,"str",(function(){return lr})),n.d(c,"exactEquals",(function(){return hr})),n.d(c,"equals",(function(){return pr})),n.d(c,"sub",(function(){return dr})),n.d(c,"mul",(function(){return mr})),n.d(c,"div",(function(){return gr})),n.d(c,"dist",(function(){return vr})),n.d(c,"sqrDist",(function(){return yr})),n.d(c,"len",(function(){return br})),n.d(c,"sqrLen",(function(){return xr})),n.d(c,"forEach",(function(){return wr}));var f={};n.r(f),n.d(f,"create",(function(){return Sr})),n.d(f,"identity",(function(){return Mr})),n.d(f,"setAxisAngle",(function(){return Ar})),n.d(f,"getAxisAngle",(function(){return Tr})),n.d(f,"multiply",(function(){return Or})),n.d(f,"rotateX",(function(){return kr})),n.d(f,"rotateY",(function(){return Er})),n.d(f,"rotateZ",(function(){return Rr})),n.d(f,"calculateW",(function(){return Cr})),n.d(f,"slerp",(function(){return Ur})),n.d(f,"random",(function(){return _r})),n.d(f,"invert",(function(){return Ir})),n.d(f,"conjugate",(function(){return Lr})),n.d(f,"fromMat3",(function(){return Dr})),n.d(f,"fromEuler",(function(){return Pr})),n.d(f,"str",(function(){return Br})),n.d(f,"clone",(function(){return qr})),n.d(f,"fromValues",(function(){return Wr})),n.d(f,"copy",(function(){return Vr})),n.d(f,"set",(function(){return Yr})),n.d(f,"add",(function(){return Xr})),n.d(f,"mul",(function(){return Jr})),n.d(f,"scale",(function(){return Zr})),n.d(f,"dot",(function(){return Qr})),n.d(f,"lerp",(function(){return Kr})),n.d(f,"length",(function(){return $r})),n.d(f,"len",(function(){return to})),n.d(f,"squaredLength",(function(){return eo})),n.d(f,"sqrLen",(function(){return no})),n.d(f,"normalize",(function(){return ro})),n.d(f,"exactEquals",(function(){return oo})),n.d(f,"equals",(function(){return io})),n.d(f,"rotationTo",(function(){return ao})),n.d(f,"sqlerp",(function(){return so})),n.d(f,"setAxes",(function(){return uo}));var l={};n.r(l),n.d(l,"create",(function(){return co})),n.d(l,"clone",(function(){return fo})),n.d(l,"fromValues",(function(){return lo})),n.d(l,"fromRotationTranslationValues",(function(){return ho})),n.d(l,"fromRotationTranslation",(function(){return po})),n.d(l,"fromTranslation",(function(){return mo})),n.d(l,"fromRotation",(function(){return go})),n.d(l,"fromMat4",(function(){return vo})),n.d(l,"copy",(function(){return yo})),n.d(l,"identity",(function(){return bo})),n.d(l,"set",(function(){return xo})),n.d(l,"getReal",(function(){return wo})),n.d(l,"getDual",(function(){return So})),n.d(l,"setReal",(function(){return Mo})),n.d(l,"setDual",(function(){return Ao})),n.d(l,"getTranslation",(function(){return To})),n.d(l,"translate",(function(){return Oo})),n.d(l,"rotateX",(function(){return ko})),n.d(l,"rotateY",(function(){return Eo})),n.d(l,"rotateZ",(function(){return Ro})),n.d(l,"rotateByQuatAppend",(function(){return Co})),n.d(l,"rotateByQuatPrepend",(function(){return Uo})),n.d(l,"rotateAroundAxis",(function(){return _o})),n.d(l,"add",(function(){return Io})),n.d(l,"multiply",(function(){return Lo})),n.d(l,"mul",(function(){return Do})),n.d(l,"scale",(function(){return Po})),n.d(l,"dot",(function(){return Bo})),n.d(l,"lerp",(function(){return No})),n.d(l,"invert",(function(){return Fo})),n.d(l,"conjugate",(function(){return jo})),n.d(l,"length",(function(){return Go})),n.d(l,"len",(function(){return zo})),n.d(l,"squaredLength",(function(){return Ho})),n.d(l,"sqrLen",(function(){return qo})),n.d(l,"normalize",(function(){return Wo})),n.d(l,"str",(function(){return Vo})),n.d(l,"exactEquals",(function(){return Yo})),n.d(l,"equals",(function(){return Xo}));var h={};n.r(h),n.d(h,"create",(function(){return Jo})),n.d(h,"clone",(function(){return Zo})),n.d(h,"fromValues",(function(){return Qo})),n.d(h,"copy",(function(){return Ko})),n.d(h,"set",(function(){return $o})),n.d(h,"add",(function(){return ti})),n.d(h,"subtract",(function(){return ei})),n.d(h,"multiply",(function(){return ni})),n.d(h,"divide",(function(){return ri})),n.d(h,"ceil",(function(){return oi})),n.d(h,"floor",(function(){return ii})),n.d(h,"min",(function(){return ai})),n.d(h,"max",(function(){return si})),n.d(h,"round",(function(){return ui})),n.d(h,"scale",(function(){return ci})),n.d(h,"scaleAndAdd",(function(){return fi})),n.d(h,"distance",(function(){return li})),n.d(h,"squaredDistance",(function(){return hi})),n.d(h,"length",(function(){return pi})),n.d(h,"squaredLength",(function(){return di})),n.d(h,"negate",(function(){return mi})),n.d(h,"inverse",(function(){return gi})),n.d(h,"normalize",(function(){return vi})),n.d(h,"dot",(function(){return yi})),n.d(h,"cross",(function(){return bi})),n.d(h,"lerp",(function(){return xi})),n.d(h,"random",(function(){return wi})),n.d(h,"transformMat2",(function(){return Si})),n.d(h,"transformMat2d",(function(){return Mi})),n.d(h,"transformMat3",(function(){return Ai})),n.d(h,"transformMat4",(function(){return Ti})),n.d(h,"rotate",(function(){return Oi})),n.d(h,"angle",(function(){return ki})),n.d(h,"str",(function(){return Ei})),n.d(h,"exactEquals",(function(){return Ri})),n.d(h,"equals",(function(){return Ci})),n.d(h,"len",(function(){return Ui})),n.d(h,"sub",(function(){return _i})),n.d(h,"mul",(function(){return Ii})),n.d(h,"div",(function(){return Li})),n.d(h,"dist",(function(){return Di})),n.d(h,"sqrDist",(function(){return Pi})),n.d(h,"sqrLen",(function(){return Bi})),n.d(h,"forEach",(function(){return Ni}));var p=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function g(t){d=t}var v=Math.PI/180;function y(t){return t*v}function b(t,e){return Math.abs(t-e)<=p*Math.max(1,Math.abs(t),Math.abs(e))}function x(){var t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function w(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function S(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function M(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,n,r){var o=new d(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function T(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function O(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function k(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*i-o*r;return a?(a=1/a,t[0]=i*a,t[1]=-r*a,t[2]=-o*a,t[3]=n*a,t):null}function E(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function R(t){return t[0]*t[3]-t[2]*t[1]}function C(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*s+i*u,t[1]=o*s+a*u,t[2]=r*c+i*f,t[3]=o*c+a*f,t}function U(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=r*-s+i*u,t[3]=o*-s+a*u,t}function _(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=o*s,t[2]=i*u,t[3]=a*u,t}function I(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function L(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function D(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function P(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function B(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function N(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function F(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function j(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function G(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=p*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=p*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=p*Math.max(1,Math.abs(i),Math.abs(c))}function z(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function H(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var q=C,W=F;function V(){var t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Y(t){var e=new d(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function X(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function J(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,e,n,r,o,i){var a=new d(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=o,a[5]=i,a}function Q(t,e,n,r,o,i,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t}function K(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=n*i-r*o;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-i*a)*u,t[5]=(r*a-n*s)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1],l=n[2],h=n[3],p=n[4],d=n[5];return t[0]=r*c+i*f,t[1]=o*c+a*f,t[2]=r*l+i*h,t[3]=o*l+a*h,t[4]=r*p+i*d+s,t[5]=o*p+a*d+u,t}function et(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+i*c,t[1]=o*f+a*c,t[2]=r*-c+i*f,t[3]=o*-c+a*f,t[4]=s,t[5]=u,t}function nt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=o*c,t[2]=i*f,t[3]=a*f,t[4]=s,t[5]=u,t}function rt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=r*c+i*f+s,t[5]=o*c+a*f+u,t}function ot(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function it(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ft(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function lt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function pt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function dt(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=e[0],c=e[1],f=e[2],l=e[3],h=e[4],d=e[5];return Math.abs(n-u)<=p*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=p*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-f)<=p*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-l)<=p*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-h)<=p*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=p*Math.max(1,Math.abs(s),Math.abs(d))}var mt=tt,gt=ft;function vt(){var t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function bt(t){var e=new d(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wt(t,e,n,r,o,i,a,s,u){var c=new d(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=s,c[8]=u,c}function St(t,e,n,r,o,i,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function Mt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Tt(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=f*a-s*c,h=-f*i+s*u,p=c*i-a*u,d=n*l+r*h+o*p;return d?(d=1/d,t[0]=l*d,t[1]=(-f*r+o*c)*d,t[2]=(s*r-o*a)*d,t[3]=h*d,t[4]=(f*n-o*u)*d,t[5]=(-s*n+o*i)*d,t[6]=p*d,t[7]=(-c*n+r*u)*d,t[8]=(a*n-r*i)*d,t):null}function Ot(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=a*f-s*c,t[1]=o*c-r*f,t[2]=r*s-o*a,t[3]=s*u-i*f,t[4]=n*f-o*u,t[5]=o*i-n*s,t[6]=i*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*i,t}function kt(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*i-a*u)+n*(-c*o+a*s)+r*(u*o-i*s)}function Et(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=n[0],p=n[1],d=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],x=n[8];return t[0]=h*r+p*a+d*c,t[1]=h*o+p*s+d*f,t[2]=h*i+p*u+d*l,t[3]=m*r+g*a+v*c,t[4]=m*o+g*s+v*f,t[5]=m*i+g*u+v*l,t[6]=y*r+b*a+x*c,t[7]=y*o+b*s+x*f,t[8]=y*i+b*u+x*l,t}function Rt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+p*a+c,t[7]=h*o+p*s+f,t[8]=h*i+p*u+l,t}function Ct(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*o+h*s,t[2]=p*i+h*u,t[3]=p*a-h*r,t[4]=p*s-h*o,t[5]=p*u-h*i,t[6]=c,t[7]=f,t[8]=l,t}function Ut(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _t(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function It(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Lt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Dt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Pt(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,u=o+o,c=n*a,f=r*a,l=r*s,h=o*a,p=o*s,d=o*u,m=i*a,g=i*s,v=i*u;return t[0]=1-l-d,t[3]=f-v,t[6]=h+g,t[1]=f+v,t[4]=1-c-d,t[7]=p-m,t[2]=h-g,t[5]=p+m,t[8]=1-c-l,t}function Bt(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,b=n*u-o*a,x=n*c-i*a,w=r*u-o*s,S=r*c-i*s,M=o*c-i*u,A=f*m-l*d,T=f*g-h*d,O=f*v-p*d,k=l*g-h*m,E=l*v-p*m,R=h*v-p*g,C=y*R-b*E+x*k+w*O-S*T+M*A;return C?(C=1/C,t[0]=(s*R-u*E+c*k)*C,t[1]=(u*O-a*R-c*T)*C,t[2]=(a*E-s*O+c*A)*C,t[3]=(o*E-r*R-i*k)*C,t[4]=(n*R-o*O+i*T)*C,t[5]=(r*O-n*E-i*A)*C,t[6]=(m*M-g*S+v*w)*C,t[7]=(g*x-d*M-v*b)*C,t[8]=(d*S-m*x+v*y)*C,t):null}function Nt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ft(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function jt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Gt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function zt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Ht(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function qt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Wt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Vt(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],m=e[3],g=e[4],v=e[5],y=e[6],b=e[7],x=e[8];return Math.abs(n-l)<=p*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=p*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-d)<=p*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-m)<=p*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(a-g)<=p*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=p*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=p*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=p*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-x)<=p*Math.max(1,Math.abs(f),Math.abs(x))}var Yt=Et,Xt=zt;function Jt(){var t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var e=new d(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kt(t,e,n,r,o,i,a,s,u,c,f,l,h,p,m,g){var v=new d(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=o,v[5]=i,v[6]=a,v[7]=s,v[8]=u,v[9]=c,v[10]=f,v[11]=l,v[12]=h,v[13]=p,v[14]=m,v[15]=g,v}function $t(t,e,n,r,o,i,a,s,u,c,f,l,h,p,d,m,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=p,t[13]=d,t[14]=m,t[15]=g,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,b=n*u-o*a,x=n*c-i*a,w=r*u-o*s,S=r*c-i*s,M=o*c-i*u,A=f*m-l*d,T=f*g-h*d,O=f*v-p*d,k=l*g-h*m,E=l*v-p*m,R=h*v-p*g,C=y*R-b*E+x*k+w*O-S*T+M*A;return C?(C=1/C,t[0]=(s*R-u*E+c*k)*C,t[1]=(o*E-r*R-i*k)*C,t[2]=(m*M-g*S+v*w)*C,t[3]=(h*S-l*M-p*w)*C,t[4]=(u*O-a*R-c*T)*C,t[5]=(n*R-o*O+i*T)*C,t[6]=(g*x-d*M-v*b)*C,t[7]=(f*M-h*x+p*b)*C,t[8]=(a*E-s*O+c*A)*C,t[9]=(r*O-n*E-i*A)*C,t[10]=(d*S-m*x+v*y)*C,t[11]=(l*x-f*S-p*y)*C,t[12]=(s*T-a*k-u*A)*C,t[13]=(n*k-r*T+o*A)*C,t[14]=(m*b-d*w-g*y)*C,t[15]=(f*w-l*b+h*y)*C,t):null}function re(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],g=e[14],v=e[15];return t[0]=s*(h*v-p*g)-l*(u*v-c*g)+m*(u*p-c*h),t[1]=-(r*(h*v-p*g)-l*(o*v-i*g)+m*(o*p-i*h)),t[2]=r*(u*v-c*g)-s*(o*v-i*g)+m*(o*c-i*u),t[3]=-(r*(u*p-c*h)-s*(o*p-i*h)+l*(o*c-i*u)),t[4]=-(a*(h*v-p*g)-f*(u*v-c*g)+d*(u*p-c*h)),t[5]=n*(h*v-p*g)-f*(o*v-i*g)+d*(o*p-i*h),t[6]=-(n*(u*v-c*g)-a*(o*v-i*g)+d*(o*c-i*u)),t[7]=n*(u*p-c*h)-a*(o*p-i*h)+f*(o*c-i*u),t[8]=a*(l*v-p*m)-f*(s*v-c*m)+d*(s*p-c*l),t[9]=-(n*(l*v-p*m)-f*(r*v-i*m)+d*(r*p-i*l)),t[10]=n*(s*v-c*m)-a*(r*v-i*m)+d*(r*c-i*s),t[11]=-(n*(s*p-c*l)-a*(r*p-i*l)+f*(r*c-i*s)),t[12]=-(a*(l*g-h*m)-f*(s*g-u*m)+d*(s*h-u*l)),t[13]=n*(l*g-h*m)-f*(r*g-o*m)+d*(r*h-o*l),t[14]=-(n*(s*g-u*m)-a*(r*g-o*m)+d*(r*u-o*s)),t[15]=n*(s*h-u*l)-a*(r*h-o*l)+f*(r*u-o*s),t}function oe(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],h=t[11],p=t[12],d=t[13],m=t[14],g=t[15];return(e*a-n*i)*(l*g-h*m)-(e*s-r*i)*(f*g-h*d)+(e*u-o*i)*(f*m-l*d)+(n*s-r*a)*(c*g-h*p)-(n*u-o*a)*(c*m-l*p)+(r*u-o*s)*(c*d-f*p)}function ie(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=n[0],x=n[1],w=n[2],S=n[3];return t[0]=b*r+x*s+w*l+S*m,t[1]=b*o+x*u+w*h+S*g,t[2]=b*i+x*c+w*p+S*v,t[3]=b*a+x*f+w*d+S*y,b=n[4],x=n[5],w=n[6],S=n[7],t[4]=b*r+x*s+w*l+S*m,t[5]=b*o+x*u+w*h+S*g,t[6]=b*i+x*c+w*p+S*v,t[7]=b*a+x*f+w*d+S*y,b=n[8],x=n[9],w=n[10],S=n[11],t[8]=b*r+x*s+w*l+S*m,t[9]=b*o+x*u+w*h+S*g,t[10]=b*i+x*c+w*p+S*v,t[11]=b*a+x*f+w*d+S*y,b=n[12],x=n[13],w=n[14],S=n[15],t[12]=b*r+x*s+w*l+S*m,t[13]=b*o+x*u+w*h+S*g,t[14]=b*i+x*c+w*p+S*v,t[15]=b*a+x*f+w*d+S*y,t}function ae(t,e,n){var r=n[0],o=n[1],i=n[2],a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,h=void 0,p=void 0,d=void 0,m=void 0,g=void 0,v=void 0;return e===t?(t[12]=e[0]*r+e[4]*o+e[8]*i+e[12],t[13]=e[1]*r+e[5]*o+e[9]*i+e[13],t[14]=e[2]*r+e[6]*o+e[10]*i+e[14],t[15]=e[3]*r+e[7]*o+e[11]*i+e[15]):(a=e[0],s=e[1],u=e[2],c=e[3],f=e[4],l=e[5],h=e[6],p=e[7],d=e[8],m=e[9],g=e[10],v=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=f,t[5]=l,t[6]=h,t[7]=p,t[8]=d,t[9]=m,t[10]=g,t[11]=v,t[12]=a*r+f*o+d*i+e[12],t[13]=s*r+l*o+m*i+e[13],t[14]=u*r+h*o+g*i+e[14],t[15]=c*r+p*o+v*i+e[15]),t}function se(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,r){var o,i,a,s,u,c,f,l,h,d,m,g,v,y,b,x,w,S,M,A,T,O,k,E,R=r[0],C=r[1],U=r[2],_=Math.sqrt(R*R+C*C+U*U);return _<p?null:(R*=_=1/_,C*=_,U*=_,o=Math.sin(n),a=1-(i=Math.cos(n)),s=e[0],u=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],m=e[7],g=e[8],v=e[9],y=e[10],b=e[11],x=R*R*a+i,w=C*R*a+U*o,S=U*R*a-C*o,M=R*C*a-U*o,A=C*C*a+i,T=U*C*a+R*o,O=R*U*a+C*o,k=C*U*a-R*o,E=U*U*a+i,t[0]=s*x+l*w+g*S,t[1]=u*x+h*w+v*S,t[2]=c*x+d*w+y*S,t[3]=f*x+m*w+b*S,t[4]=s*M+l*A+g*T,t[5]=u*M+h*A+v*T,t[6]=c*M+d*A+y*T,t[7]=f*M+m*A+b*T,t[8]=s*O+l*k+g*E,t[9]=u*O+h*k+v*E,t[10]=c*O+d*k+y*E,t[11]=f*O+m*k+b*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+c*r,t[5]=a*o+f*r,t[6]=s*o+l*r,t[7]=u*o+h*r,t[8]=c*o-i*r,t[9]=f*o-a*r,t[10]=l*o-s*r,t[11]=h*o-u*r,t}function fe(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-c*r,t[1]=a*o-f*r,t[2]=s*o-l*r,t[3]=u*o-h*r,t[8]=i*r+c*o,t[9]=a*r+f*o,t[10]=s*r+l*o,t[11]=u*r+h*o,t}function le(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+c*r,t[1]=a*o+f*r,t[2]=s*o+l*r,t[3]=u*o+h*r,t[4]=c*o-i*r,t[5]=f*o-a*r,t[6]=l*o-s*r,t[7]=h*o-u*r,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function de(t,e,n){var r,o,i,a=n[0],s=n[1],u=n[2],c=Math.sqrt(a*a+s*s+u*u);return c<p?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=s*a*i+u*r,t[2]=u*a*i-s*r,t[3]=0,t[4]=a*s*i-u*r,t[5]=s*s*i+o,t[6]=u*s*i+a*r,t[7]=0,t[8]=a*u*i+s*r,t[9]=s*u*i-a*r,t[10]=u*u*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=r+r,u=o+o,c=i+i,f=r*s,l=r*u,h=r*c,p=o*u,d=o*c,m=i*c,g=a*s,v=a*u,y=a*c;return t[0]=1-(p+m),t[1]=l+y,t[2]=h-v,t[3]=0,t[4]=l-y,t[5]=1-(f+m),t[6]=d+g,t[7]=0,t[8]=h+v,t[9]=d-g,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function be(t,e){var n=new d(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=r*r+o*o+i*i+a*a;return l>0?(n[0]=2*(s*a+f*r+u*i-c*o)/l,n[1]=2*(u*a+f*o+c*r-s*i)/l,n[2]=2*(c*a+f*i+s*o-u*r)/l):(n[0]=2*(s*a+f*r+u*i-c*o),n[1]=2*(u*a+f*o+c*r-s*i),n[2]=2*(c*a+f*i+s*o-u*r)),ye(t,e,n),t}function xe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function we(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],s=e[6],u=e[8],c=e[9],f=e[10];return t[0]=Math.sqrt(n*n+r*r+o*o),t[1]=Math.sqrt(i*i+a*a+s*s),t[2]=Math.sqrt(u*u+c*c+f*f),t}function Se(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function Me(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3],u=o+o,c=i+i,f=a+a,l=o*u,h=o*c,p=o*f,d=i*c,m=i*f,g=a*f,v=s*u,y=s*c,b=s*f,x=r[0],w=r[1],S=r[2];return t[0]=(1-(d+g))*x,t[1]=(h+b)*x,t[2]=(p-y)*x,t[3]=0,t[4]=(h-b)*w,t[5]=(1-(l+g))*w,t[6]=(m+v)*w,t[7]=0,t[8]=(p+y)*S,t[9]=(m-v)*S,t[10]=(1-(l+d))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ae(t,e,n,r,o){var i=e[0],a=e[1],s=e[2],u=e[3],c=i+i,f=a+a,l=s+s,h=i*c,p=i*f,d=i*l,m=a*f,g=a*l,v=s*l,y=u*c,b=u*f,x=u*l,w=r[0],S=r[1],M=r[2],A=o[0],T=o[1],O=o[2],k=(1-(m+v))*w,E=(p+x)*w,R=(d-b)*w,C=(p-x)*S,U=(1-(h+v))*S,_=(g+y)*S,I=(d+b)*M,L=(g-y)*M,D=(1-(h+m))*M;return t[0]=k,t[1]=E,t[2]=R,t[3]=0,t[4]=C,t[5]=U,t[6]=_,t[7]=0,t[8]=I,t[9]=L,t[10]=D,t[11]=0,t[12]=n[0]+A-(k*A+C*T+I*O),t[13]=n[1]+T-(E*A+U*T+L*O),t[14]=n[2]+O-(R*A+_*T+D*O),t[15]=1,t}function Te(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,u=o+o,c=n*a,f=r*a,l=r*s,h=o*a,p=o*s,d=o*u,m=i*a,g=i*s,v=i*u;return t[0]=1-l-d,t[1]=f+v,t[2]=h-g,t[3]=0,t[4]=f-v,t[5]=1-c-d,t[6]=p+m,t[7]=0,t[8]=h+g,t[9]=p-m,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Oe(t,e,n,r,o,i,a){var s=1/(n-e),u=1/(o-r),c=1/(i-a);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function ke(t,e,n,r,o){var i=1/Math.tan(e/2),a=void 0;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(r-o),t[10]=(o+r)*a,t[14]=2*o*r*a):(t[10]=-1,t[14]=-2*r),t}function Ee(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(o+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Re(t,e,n,r,o,i,a){var s=1/(e-n),u=1/(r-o),c=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(a+i)*c,t[15]=1,t}function Ce(t,e,n,r){var o=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,h=void 0,d=void 0,m=e[0],g=e[1],v=e[2],y=r[0],b=r[1],x=r[2],w=n[0],S=n[1],M=n[2];return Math.abs(m-w)<p&&Math.abs(g-S)<p&&Math.abs(v-M)<p?te(t):(f=m-w,l=g-S,h=v-M,o=b*(h*=d=1/Math.sqrt(f*f+l*l+h*h))-x*(l*=d),i=x*(f*=d)-y*h,a=y*l-b*f,(d=Math.sqrt(o*o+i*i+a*a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),s=l*a-h*i,u=h*o-f*a,c=f*i-l*o,(d=Math.sqrt(s*s+u*u+c*c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),t[0]=o,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=u,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*m+i*g+a*v),t[13]=-(s*m+u*g+c*v),t[14]=-(f*m+l*g+h*v),t[15]=1,t)}function Ue(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=r[0],u=r[1],c=r[2],f=o-n[0],l=i-n[1],h=a-n[2],p=f*f+l*l+h*h;p>0&&(f*=p=1/Math.sqrt(p),l*=p,h*=p);var d=u*h-c*l,m=c*f-s*h,g=s*l-u*f;return(p=d*d+m*m+g*g)>0&&(d*=p=1/Math.sqrt(p),m*=p,g*=p),t[0]=d,t[1]=m,t[2]=g,t[3]=0,t[4]=l*g-h*m,t[5]=h*d-f*g,t[6]=f*m-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function _e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ie(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Le(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function De(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Pe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Be(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ne(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Fe(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=e[0],x=e[1],w=e[2],S=e[3],M=e[4],A=e[5],T=e[6],O=e[7],k=e[8],E=e[9],R=e[10],C=e[11],U=e[12],_=e[13],I=e[14],L=e[15];return Math.abs(n-b)<=p*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-x)<=p*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(o-w)<=p*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(i-S)<=p*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(a-M)<=p*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-A)<=p*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-T)<=p*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-O)<=p*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(f-k)<=p*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(l-E)<=p*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(h-R)<=p*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-C)<=p*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(m-U)<=p*Math.max(1,Math.abs(m),Math.abs(U))&&Math.abs(g-_)<=p*Math.max(1,Math.abs(g),Math.abs(_))&&Math.abs(v-I)<=p*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(y-L)<=p*Math.max(1,Math.abs(y),Math.abs(L))}var je=ie,Ge=De;function ze(){var t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function He(t){var e=new d(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qe(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function We(t,e,n){var r=new d(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ve(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ye(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Xe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Je(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ze(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Qe(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Ke(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function on(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function an(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)}function sn(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function un(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ln(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t}function hn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pn(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2];return t[0]=o*u-i*s,t[1]=i*a-r*u,t[2]=r*s-o*a,t}function dn(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}function mn(t,e,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,u=a*(i-2)+i,c=a*(i-1),f=a*(3-2*i);return t[0]=e[0]*s+n[0]*u+r[0]*c+o[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+o[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+o[2]*f,t}function gn(t,e,n,r,o,i){var a=1-i,s=a*a,u=i*i,c=s*a,f=3*i*s,l=3*u*a,h=u*i;return t[0]=e[0]*c+n[0]*f+r[0]*l+o[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+o[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+o[2]*h,t}function vn(t,e){e=e||1;var n=2*m()*Math.PI,r=2*m()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function yn(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}function bn(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}function xn(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=o*c-i*u,l=i*s-r*c,h=r*u-o*s,p=o*h-i*l,d=i*f-r*h,m=r*l-o*f,g=2*a;return f*=g,l*=g,h*=g,p*=2,d*=2,m*=2,t[0]=s+f+p,t[1]=u+l+d,t[2]=c+h+m,t}function wn(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Sn(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Mn(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function An(t,e){var n=We(t[0],t[1],t[2]),r=We(e[0],e[1],e[2]);ln(n,n),ln(r,r);var o=hn(n,r);return o>1?0:o<-1?Math.PI:Math.acos(o)}function Tn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function On(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function kn(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],s=e[2];return Math.abs(n-i)<=p*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=p*Math.max(1,Math.abs(o),Math.abs(s))}var En,Rn=Je,Cn=Ze,Un=Qe,_n=an,In=sn,Ln=qe,Dn=un,Pn=(En=ze(),function(t,e,n,r,o,i){var a=void 0,s=void 0;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)En[0]=t[a],En[1]=t[a+1],En[2]=t[a+2],o(En,En,i),t[a]=En[0],t[a+1]=En[1],t[a+2]=En[2];return t});function Bn(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Nn(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Fn(t,e,n,r){var o=new d(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function jn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Gn(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function zn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Hn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function qn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Wn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Vn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Yn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Xn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Jn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Zn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Qn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Kn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function $n(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(n*n+r*r+o*o+i*i)}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function er(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)}function nr(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function rr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function or(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ir(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a),t}function ar(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function sr(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function ur(t,e){var n,r,o,i,a,s;e=e||1;do{a=(n=2*m()-1)*n+(r=2*m()-1)*r}while(a>=1);do{s=(o=2*m()-1)*o+(i=2*m()-1)*i}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*o*u,t[3]=e*i*u,t}function cr(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}function fr(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*i-u*o,l=c*o+u*r-a*i,h=c*i+a*o-s*r,p=-a*r-s*o-u*i;return t[0]=f*c+p*-a+l*-u-h*-s,t[1]=l*c+p*-s+h*-a-f*-u,t[2]=h*c+p*-u+f*-s-l*-a,t[3]=e[3],t}function lr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function hr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function pr(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=p*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=p*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=p*Math.max(1,Math.abs(i),Math.abs(c))}var dr=Hn,mr=qn,gr=Wn,vr=$n,yr=tr,br=er,xr=nr,wr=function(){var t=Bn();return function(e,n,r,o,i,a){var s=void 0,u=void 0;for(n||(n=4),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Sr(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Mr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ar(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Tr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>p?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Or(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+o*c-i*u,t[1]=o*f+a*u+i*s-r*c,t[2]=i*f+a*c+r*u-o*s,t[3]=a*f-r*s-o*u-i*c,t}function kr(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=i*u-o*s,t[3]=a*u-r*s,t}function Er(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-i*s,t[1]=o*u+a*s,t[2]=i*u+r*s,t[3]=a*u-o*s,t}function Rr(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=i*u+a*s,t[3]=a*u-i*s,t}function Cr(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function Ur(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3],u=n[0],c=n[1],f=n[2],l=n[3],h=void 0,d=void 0,m=void 0,g=void 0,v=void 0;return(d=o*u+i*c+a*f+s*l)<0&&(d=-d,u=-u,c=-c,f=-f,l=-l),1-d>p?(h=Math.acos(d),m=Math.sin(h),g=Math.sin((1-r)*h)/m,v=Math.sin(r*h)/m):(g=1-r,v=r),t[0]=g*o+v*u,t[1]=g*i+v*c,t[2]=g*a+v*f,t[3]=g*s+v*l,t}function _r(t){var e=m(),n=m(),r=m(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Ir(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=i*s,t}function Lr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Dr(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;r=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*r,r=.5/r,t[3]=(e[3*i+a]-e[3*a+i])*r,t[i]=(e[3*i+o]+e[3*o+i])*r,t[a]=(e[3*a+o]+e[3*o+a])*r}return t}function Pr(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=i*u*f-a*s*c,t[1]=a*s*f+i*u*c,t[2]=a*u*c-i*s*f,t[3]=a*u*f+i*s*c,t}function Br(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Nr,Fr,jr,Gr,zr,Hr,qr=Nn,Wr=Fn,Vr=jn,Yr=Gn,Xr=zn,Jr=Or,Zr=Qn,Qr=ar,Kr=sr,$r=er,to=$r,eo=nr,no=eo,ro=ir,oo=hr,io=pr,ao=(Nr=ze(),Fr=We(1,0,0),jr=We(0,1,0),function(t,e,n){var r=hn(e,n);return r<-.999999?(pn(Nr,Fr,e),Ln(Nr)<1e-6&&pn(Nr,jr,e),ln(Nr,Nr),Ar(t,Nr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pn(Nr,e,n),t[0]=Nr[0],t[1]=Nr[1],t[2]=Nr[2],t[3]=1+r,ro(t,t))}),so=(Gr=Sr(),zr=Sr(),function(t,e,n,r,o,i){return Ur(Gr,e,o,i),Ur(zr,n,r,i),Ur(t,Gr,zr,2*i*(1-i)),t}),uo=(Hr=vt(),function(t,e,n,r){return Hr[0]=n[0],Hr[3]=n[1],Hr[6]=n[2],Hr[1]=r[0],Hr[4]=r[1],Hr[7]=r[2],Hr[2]=-e[0],Hr[5]=-e[1],Hr[8]=-e[2],ro(t,Dr(t,Hr))});function co(){var t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function fo(t){var e=new d(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function lo(t,e,n,r,o,i,a,s){var u=new d(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=o,u[5]=i,u[6]=a,u[7]=s,u}function ho(t,e,n,r,o,i,a){var s=new d(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*o,c=.5*i,f=.5*a;return s[4]=u*r+c*n-f*e,s[5]=c*r+f*t-u*n,s[6]=f*r+u*e-c*t,s[7]=-u*t-c*e-f*n,s}function po(t,e,n){var r=.5*n[0],o=.5*n[1],i=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+o*u-i*s,t[5]=o*c+i*a-r*u,t[6]=i*c+r*s-o*a,t[7]=-r*a-o*s-i*u,t}function mo(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function go(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function vo(t,e){var n=Sr();Se(n,e);var r=new d(3);return xe(r,e),po(t,n,r),t}function yo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function bo(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function xo(t,e,n,r,o,i,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t}var wo=Vr;function So(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Mo=Vr;function Ao(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function To(t,e){var n=e[4],r=e[5],o=e[6],i=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+i*a+r*u-o*s),t[1]=2*(r*c+i*s+o*a-n*u),t[2]=2*(o*c+i*u+n*s-r*a),t}function Oo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],f=e[4],l=e[5],h=e[6],p=e[7];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=a*s+o*c-i*u+f,t[5]=a*u+i*s-r*c+l,t[6]=a*c+r*u-o*s+h,t[7]=-r*s-o*u-i*c+p,t}function ko(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*i-c*o,h=u*a+f*o+c*r-s*i,p=c*a+f*i+s*o-u*r,d=f*a-s*r-u*o-c*i;return kr(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-h*r,t[7]=d*a-l*r-h*o-p*i,t}function Eo(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*i-c*o,h=u*a+f*o+c*r-s*i,p=c*a+f*i+s*o-u*r,d=f*a-s*r-u*o-c*i;return Er(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-h*r,t[7]=d*a-l*r-h*o-p*i,t}function Ro(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*i-c*o,h=u*a+f*o+c*r-s*i,p=c*a+f*i+s*o-u*r,d=f*a-s*r-u*o-c*i;return Rr(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-h*r,t[7]=d*a-l*r-h*o-p*i,t}function Co(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=e[3];return t[0]=s*a+f*r+u*i-c*o,t[1]=u*a+f*o+c*r-s*i,t[2]=c*a+f*i+s*o-u*r,t[3]=f*a-s*r-u*o-c*i,s=e[4],u=e[5],c=e[6],f=e[7],t[4]=s*a+f*r+u*i-c*o,t[5]=u*a+f*o+c*r-s*i,t[6]=c*a+f*i+s*o-u*r,t[7]=f*a-s*r-u*o-c*i,t}function Uo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+o*c-i*u,t[1]=o*f+a*u+i*s-r*c,t[2]=i*f+a*c+r*u-o*s,t[3]=a*f-r*s-o*u-i*c,s=n[4],u=n[5],c=n[6],f=n[7],t[4]=r*f+a*s+o*c-i*u,t[5]=o*f+a*u+i*s-r*c,t[6]=i*f+a*c+r*u-o*s,t[7]=a*f-r*s-o*u-i*c,t}function _o(t,e,n,r){if(Math.abs(r)<p)return yo(t,e);var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r*=.5;var i=Math.sin(r),a=i*n[0]/o,s=i*n[1]/o,u=i*n[2]/o,c=Math.cos(r),f=e[0],l=e[1],h=e[2],d=e[3];t[0]=f*c+d*a+l*u-h*s,t[1]=l*c+d*s+h*a-f*u,t[2]=h*c+d*u+f*s-l*a,t[3]=d*c-f*a-l*s-h*u;var m=e[4],g=e[5],v=e[6],y=e[7];return t[4]=m*c+y*a+g*u-v*s,t[5]=g*c+y*s+v*a-m*u,t[6]=v*c+y*u+m*s-g*a,t[7]=y*c-m*a-g*s-v*u,t}function Io(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Lo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[4],u=n[5],c=n[6],f=n[7],l=e[4],h=e[5],p=e[6],d=e[7],m=n[0],g=n[1],v=n[2],y=n[3];return t[0]=r*y+a*m+o*v-i*g,t[1]=o*y+a*g+i*m-r*v,t[2]=i*y+a*v+r*g-o*m,t[3]=a*y-r*m-o*g-i*v,t[4]=r*f+a*s+o*c-i*u+l*y+d*m+h*v-p*g,t[5]=o*f+a*u+i*s-r*c+h*y+d*g+p*m-l*v,t[6]=i*f+a*c+r*u-o*s+p*y+d*v+l*g-h*m,t[7]=a*f-r*s-o*u-i*c+d*y-l*m-h*g-p*v,t}var Do=Lo;function Po(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Bo=Qr;function No(t,e,n,r){var o=1-r;return Bo(e,n)<0&&(r=-r),t[0]=e[0]*o+n[0]*r,t[1]=e[1]*o+n[1]*r,t[2]=e[2]*o+n[2]*r,t[3]=e[3]*o+n[3]*r,t[4]=e[4]*o+n[4]*r,t[5]=e[5]*o+n[5]*r,t[6]=e[6]*o+n[6]*r,t[7]=e[7]*o+n[7]*r,t}function Fo(t,e){var n=Ho(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function jo(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Go=$r,zo=Go,Ho=eo,qo=Ho;function Wo(t,e){var n=Ho(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,o=e[1]/n,i=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],f=e[7],l=r*s+o*u+i*c+a*f;t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=(s-r*l)/n,t[5]=(u-o*l)/n,t[6]=(c-i*l)/n,t[7]=(f-a*l)/n}return t}function Vo(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Yo(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Xo(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=e[0],l=e[1],h=e[2],d=e[3],m=e[4],g=e[5],v=e[6],y=e[7];return Math.abs(n-f)<=p*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-l)<=p*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-h)<=p*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-d)<=p*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-m)<=p*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=p*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-v)<=p*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-y)<=p*Math.max(1,Math.abs(c),Math.abs(y))}function Jo(){var t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function Zo(t){var e=new d(2);return e[0]=t[0],e[1]=t[1],e}function Qo(t,e){var n=new d(2);return n[0]=t,n[1]=e,n}function Ko(t,e){return t[0]=e[0],t[1]=e[1],t}function $o(t,e,n){return t[0]=e,t[1]=n,t}function ti(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ei(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function ni(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function ri(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function oi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function ii(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ai(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function si(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function ui(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function ci(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function fi(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function li(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function hi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function pi(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function di(t){var e=t[0],n=t[1];return e*e+n*n}function mi(t,e){return t[0]=-e[0],t[1]=-e[1],t}function gi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function vi(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t}function yi(t,e){return t[0]*e[0]+t[1]*e[1]}function bi(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function xi(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}function wi(t,e){e=e||1;var n=2*m()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Si(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}function Mi(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}function Ai(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}function Ti(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}function Oi(t,e,n,r){var o=e[0]-n[0],i=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=o*s-i*a+n[0],t[1]=o*a+i*s+n[1],t}function ki(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var s=o*o+i*i;s>0&&(s=1/Math.sqrt(s));var u=(n*o+r*i)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function Ei(t){return"vec2("+t[0]+", "+t[1]+")"}function Ri(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ci(t,e){var n=t[0],r=t[1],o=e[0],i=e[1];return Math.abs(n-o)<=p*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=p*Math.max(1,Math.abs(r),Math.abs(i))}var Ui=pi,_i=ei,Ii=ni,Li=ri,Di=li,Pi=hi,Bi=di,Ni=function(){var t=Jo();return function(e,n,r,o,i,a){var s=void 0,u=void 0;for(n||(n=2),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],i(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(4);function o(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var o=e.tracks,i=o.length,a=new Array(i),s={endingStart:r.fd,endingEnd:r.fd},u=0;u!==i;++u){var c=o[u].createInterpolant(null);a[u]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=r.ab,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(o.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,o=t._clip.duration,i=o/r,a=r/o;t.warp(1,i,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,o=r.time,i=this._timeScaleInterpolant,a=this.timeScale;null===i&&(i=r._lendControlInterpolant(),this._timeScaleInterpolant=i);var s=i.parameterPositions,u=i.sampleValues;return s[0]=o,s[1]=o+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var o=this._startTime;if(null!==o){var i=(t-o)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,f=0,l=u.length;f!==l;++f)u[f].evaluate(a),c[f].accumulate(r,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,o=this.loop,i=this._loopCount,a=o===r.Z;if(0===t)return-1===i?e:a&&1==(1&i)?n-e:e;if(o===r.Y){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=n||e<0){var s=Math.floor(e/n);e-=n*s,i+=Math.abs(s);var u=this.repetitions-i;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===u){var c=t<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=e;if(a&&1==(1&i))return n-e}return e},_setEndings:function(t,e,n){var o=this._interpolantSettings;n?(o.endingStart=r.hd,o.endingEnd=r.hd):(o.endingStart=t?this.zeroSlopeAtStart?r.hd:r.fd:r.ed,o.endingEnd=e?this.zeroSlopeAtEnd?r.hd:r.fd:r.ed)},_scheduleFading:function(t,e,n){var r=this._mixer,o=r.time,i=this._weightInterpolant;null===i&&(i=r._lendControlInterpolant(),this._weightInterpolant=i);var a=i.parameterPositions,s=i.sampleValues;return a[0]=o,s[0]=e,a[1]=o+t,s[1]=n,this}});var i=n(59),a=n(470),s=n(471),u=n(21);function c(t,e,n){this.binding=t,this.valueSize=n;var r,o=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":o=Array,r=this._select;break;default:r=this._lerp}this.buffer=new o(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(c.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,o=t*r+r,i=this.cumulativeWeight;if(0===i){for(var a=0;a!==r;++a)n[o+a]=n[a];i=e}else{var s=e/(i+=e);this._mixBufferRegion(n,o,0,s,r)}this.cumulativeWeight=i},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,o=this.cumulativeWeight,i=this.binding;if(this.cumulativeWeight=0,o<1){var a=3*e;this._mixBufferRegion(n,r,a,1-o,e)}for(var s=e,u=e+e;s!==u;++s)if(n[s]!==n[s+e]){i.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var o=n,i=r;o!==i;++o)e[o]=e[r+o%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,o){if(r>=.5)for(var i=0;i!==o;++i)t[e+i]=t[n+i]},_slerp:function(t,e,n,r){u.a.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,o){for(var i=1-r,a=0;a!==o;++a){var s=e+a;t[s]=t[s]*i+t[n+a]*r}}});var f=n(453);function l(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}l.prototype=Object.assign(Object.create(i.a.prototype),{constructor:l,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,o=r.length,i=t._propertyBindings,a=t._interpolants,u=n.uuid,f=this._bindingsByRootAndName,l=f[u];void 0===l&&(l={},f[u]=l);for(var h=0;h!==o;++h){var p=r[h],d=p.name,m=l[d];if(void 0!==m)i[h]=m;else{if(void 0!==(m=i[h])){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,u,d));continue}var g=e&&e._propertyBindings[h].binding.parsedPath;++(m=new c(s.a.create(n,d,g),p.ValueTypeName,p.getValueSize())).referenceCount,this._addInactiveBinding(m,u,d),i[h]=m}a[h].resultBuffer=m.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var o=t._propertyBindings,i=0,a=o.length;i!==a;++i){var s=o[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var o=e[n];0==--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,o=this._actionsByClip,i=o[e];if(void 0===i)i={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=i;else{var a=i.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),i.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var o=t._clip.uuid,i=this._actionsByClip,a=i[o],s=a.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete i[o],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var o=e[n];0==--o.referenceCount&&this._removeInactiveBinding(o)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,o=r[e],i=this._bindings;void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,o=n.path,i=this._bindingsByRootAndName,a=i[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[o],0===Object.keys(a).length&&delete i[r]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new a.a(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=n,e[n]=o},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?f.a.findByName(n,t):t,a=null!==i?i.uuid:t,s=this._actionsByClip[a],u=null;if(void 0!==s){var c=s.actionByRoot[r];if(void 0!==c)return c;u=s.knownActions[0],null===i&&(i=u._clip)}if(null===i)return null;var l=new o(this,i,e);return this._bindAction(l,u),this._addInactiveAction(l,a,r),l},existingAction:function(t,e){var n=e||this._root,r=n.uuid,o="string"==typeof t?f.a.findByName(n,t):t,i=o?o.uuid:t,a=this._actionsByClip[i];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var o=0;o!==e;++o)t[o].reset();for(o=0;o!==r;++o)n[o].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,o=Math.sign(t),i=this._accuIndex^=1,a=0;a!==n;++a){e[a]._update(r,t,o,i)}var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(i);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,o=r[n];if(void 0!==o){for(var i=o.knownActions,a=0,s=i.length;a!==s;++a){var u=i[a];this._deactivateAction(u);var c=u._cacheIndex,f=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,e[c]=f,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var o=n[r].actionByRoot[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var i=this._bindingsByRootAndName[e];if(void 0!==i)for(var a in i){var s=i[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(499);function o(t){this.type="Font",this.data=t}function i(t,e,n,o,i){var a=i.glyphs[t]||i.glyphs["?"];if(a){var s,u,c,f,l,h,p,d,m=new r.a;if(a.o)for(var g=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,y=g.length;v<y;){switch(g[v++]){case"m":s=g[v++]*e+n,u=g[v++]*e+o,m.moveTo(s,u);break;case"l":s=g[v++]*e+n,u=g[v++]*e+o,m.lineTo(s,u);break;case"q":c=g[v++]*e+n,f=g[v++]*e+o,l=g[v++]*e+n,h=g[v++]*e+o,m.quadraticCurveTo(l,h,c,f);break;case"b":c=g[v++]*e+n,f=g[v++]*e+o,l=g[v++]*e+n,h=g[v++]*e+o,p=g[v++]*e+n,d=g[v++]*e+o,m.bezierCurveTo(l,h,p,d,c,f)}}return{offsetX:a.ha*e,path:m}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".")}Object.assign(o.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=function(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(""),o=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,s=[],u=0,c=0,f=0;f<r.length;f++){var l=r[f];if("\n"===l)u=0,c-=a;else{var h=i(l,o,u,c,n);u+=h.offsetX,s.push(h.path)}}return s}(t,e,this.data),o=0,a=r.length;o<a;o++)Array.prototype.push.apply(n,r[o].toShapes());return n}});var a=n(341),s=n(335);function u(t){s.a.call(this,t)}u.prototype=Object.assign(Object.create(s.a.prototype),{constructor:u,load:function(t,e,n,r){var o=this,i=new a.a(this.manager);i.setPath(this.path),i.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=o.parse(n);e&&e(r)}),n,r)},parse:function(t){return new o(t)}})}])]);
//# sourceMappingURL=vendors~Sop.bundle.js.map